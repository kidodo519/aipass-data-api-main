(self.webpackChunk_stoplight_ninja=self.webpackChunk_stoplight_ninja||[]).push([[3023],{28535:(e,t,a)=>{"use strict";a.d(t,{P:()=>o});var r=a(14041),n=a(84660);let o=({children:e,delay:t=2e3})=>{let[a,o]=r.useState(!1);return(r.useEffect(()=>{let e=setTimeout(()=>o(!0),t);return()=>clearTimeout(e)},[t]),a)?e?r.createElement(r.Fragment,null,e):r.createElement(n.I,null):null}},84660:(e,t,a)=>{"use strict";a.d(t,{I:()=>o});var r=a(32353),n=a(14041);let o=e=>n.createElement(r.Flex,{"data-test":"loading-indicator",align:"center",justify:"center",py:12,flex:1},n.createElement(r.Icon,{icon:["far","spinner-third"],className:"fa-spin"}),n.createElement(r.Text,{color:"muted",fontSize:"xl",fontWeight:"normal",ml:3},"Loading..."))},8216:(e,t,a)=>{"use strict";a.d(t,{e:()=>l,k:()=>i});var r=a(32353),n=a(14041),o=a(28535);let l=({delay:e=800})=>n.createElement(o.P,{delay:e},n.createElement(i,null)),i=()=>n.createElement(r.Flex,{justify:"center",alignItems:"center",w:"full",h:"full",flex:1,color:"muted","data-testid":"loading-spinner"},n.createElement(r.Icon,{icon:"circle-notch",size:"3x",spin:!0}))},96379:(e,t,a)=>{"use strict";var r;a.d(t,{_:()=>r}),function(e){e.ToggleBold="md-plugin-toggle-bold",e.ToggleItalic="md-plugin-toggle-italic",e.ToggleStrikeThrough="md-plugin-toggle-strikethrough",e.ToggleCitations="md-plugin-toggle-citations",e.InsertLink="md-plugin-insert-link",e.ToggleInlineCode="md-plugin-toggle-inline-code",e.ToggleBlockCode="md-plugin-toggle-block-code",e.ToggleNumberList="md-plugin-toggle-number-list",e.ToggleCheckboxList="md-plugin-toggle-checkbox-list",e.ToggleBullets="md-plugin-toggle-bullets",e.ToggleTitleH1="md-plugin-toggle-h1",e.ToggleTitleH2="md-plugin-toggle-h2",e.ToggleTitleH3="md-plugin-toggle-h3",e.ToggleTitleH4="md-plugin-toggle-h4",e.ToggleTitleH5="md-plugin-toggle-h5",e.ToggleTitleH6="md-plugin-toggle-h6",e.AddTable="md-plugin-add-table",e.AddTableWithHeaders="md-plugin-add-table-with-headers",e.AddRequestMaker="md-plugin-add-request-maker",e.AddJsonSchema="md-plugin-add-json-schema",e.AddImage="md-plugin-add-image"}(r||(r={}))},72916:(e,t,a)=>{"use strict";a.d(t,{f:()=>o});var r=a(14041),n=a(63562);let o=({date:e,...t})=>r.createElement(n.A,{date:e,minPeriod:20,formatter:(e,t,a)=>"second"===t?"just now":`${e} ${t}${1!==e?"s":""} ${a}`,...t})},54505:(e,t,a)=>{"use strict";let r;a.r(t),a.d(t,{Banner:()=>l,BaseTable:()=>eI,BasicProgressBar:()=>i,DelayedLoadingSpinner:()=>N.e,DelayedRender:()=>s.P,Dialog:()=>p,DialogContext:()=>u,DialogModal:()=>g,ENABLED_FILTER_KEY:()=>A,FilterOptions:()=>B,Form:()=>w,FormDialog:()=>y,FormFieldError:()=>b,GlobalDialog:()=>v,GlobalDialogProvider:()=>d,Hello:()=>k,Library:()=>T,LibraryHeader:()=>D,LibrarySection:()=>F,LoadingIndicator:()=>$.I,LoadingSpinner:()=>N.k,MarkdownEditor:()=>H,MarkdownEditorWithPreview:()=>X,MarkdownPreview:()=>J,MarkdownToolbar:()=>W,NotificationIcon:()=>Z,SearchFilterContext:()=>j,SearchFilterProvider:()=>C,Table:()=>ex,TableActionMenu:()=>et,TableBulkActionBar:()=>el,TableCell:()=>ew,TableContext:()=>eu,TableHeader:()=>eE,TableProvider:()=>ed,TableRow:()=>ek,TableSearchFilter:()=>ep,TableSelectFilter:()=>eg,TextOverflowTooltip:()=>eC,TimeAgo:()=>eP.f,getLocation:()=>eA,useDialog:()=>m,useFilterContext:()=>P,useFormDialog:()=>f,useSearchFilter:()=>S,useTableContext:()=>em,useWindowResize:()=>_});var n=a(32353),o=a(14041);let l=({message:e,intent:t="primary",icon:a,primaryAction:r,secondaryAction:l,htmlId:i,backgroundColor:s,leftElement:c,className:u,isNonResponsiveBannerShowing:d})=>{let m=!("canvas-dark"!==s);return o.createElement(n.Flex,{className:d?"Banner--with-banner":"Banner",id:i,alignItems:"center",justifyContent:"between",p:4,bg:s||t,color:`on-${t}`},o.createElement(n.Flex,{alignItems:"center"},c&&c,o.createElement(n.HStack,{alignItems:"center",ml:c&&10,spacing:2},a&&o.createElement(n.Icon,{icon:a}),o.createElement(n.Box,{className:"Banner--inner-text"},e))),o.createElement(n.Flex,{ml:a&&2},l&&o.createElement(n.Button,{onPress:l.onClick,appearance:"minimal",mr:2},l.text),r&&o.createElement(n.Button,{"data-test":r.dataTest,className:u,onPress:r.onClick,bg:m?"primary":"transparent",appearance:"minimal",border:!0,borderColor:m?"primary":"on-primary",intent:"primary"===t?void 0:t,icon:r.icon},o.createElement(n.Text,{color:m||"danger"===t?"canvas-pure":"body"},r.text))))},i=({label:e,hintText:t,value:a,maxValue:r,actionButtonContent:l,onActionButtionPress:i,hasCalloutBorder:s=!0})=>{let c=r-a==1?a:Math.ceil(.9*r);return o.createElement(n.ProgressBar,{label:e,hintText:t,value:a,minValue:0,maxValue:r,actionButtonContent:l,onActionButtonPress:i,color:"primary",approachingProgressLimitValue:c,approachingProgressLimitColor:"warning",approachingProgressLimitIcon:"triangle-exclamation",atOrOverProgressLimitColor:"danger",atOrOverProgressLimitIcon:"circle-exclamation",icon:"circle-info",hasCalloutBorder:s})};var s=a(28535);let c={children:null,options:{isOpen:!1}},u=o.createContext({type:"Dialog",content:c,setDialogContent:()=>{},unsetDialogContent:()=>{},setDialogType:()=>{}});function d({children:e}){let[t,a]=o.useState(c),[r,n]=o.useState("Dialog"),l=o.useCallback(()=>a(c),[]),i=o.useCallback((e=null,t)=>a({children:e,options:{...t,isOpen:!0}}),[]);return o.createElement(u.Provider,{value:{type:r,content:t,setDialogContent:i,unsetDialogContent:l,setDialogType:n}},e)}function m(){let{content:e,setDialogContent:t,unsetDialogContent:a,setDialogType:r}=o.useContext(u);return{options:e.options,openDialog:a=>{r("Dialog"),t(e.options.message||null,{...a,isOpen:!0})},closeDialog:()=>{a()}}}let p=()=>{let{options:e,closeDialog:t}=m();return o.createElement(g,{...e,closeDialog:t})},g=({isOpen:e=!1,onConfirm:t,onCancel:a,onClose:r,title:l,message:i,hasCancelButton:s=!0,confirmText:c="Okay",cancelText:u="Cancel",intent:d,closeDialog:m,isDisabled:p=!1,shouldSetLoading:g=!1})=>{let[h,f]=o.useState(!1),b=()=>r?r():m&&m();return o.useEffect(()=>{(e||!g)&&f(!1)},[e,g]),o.createElement(o.Fragment,null,o.createElement(n.Modal,{isOpen:e,onClose:b,isNotDismissable:!0,title:o.createElement(n.Flex,{h:"md",alignItems:"center"},o.createElement(n.Text,{fontSize:"xl",fontWeight:"semibold"},l)),footer:o.createElement(n.Flex,{flexDirection:"row"},o.createElement(n.Flex,{flexGrow:!0,justifyContent:"end"},o.createElement(n.HStack,{spacing:2},s&&o.createElement(n.Button,{onPress:()=>a?a():b(),"data-test":"dialog-button-cancel",appearance:"minimal"},u),o.createElement(n.Button,{onPress:()=>{t?(g&&f(!0),t()):b()},"data-test":"dialog-button-confirm",appearance:"primary",intent:d,disabled:p,loading:h},c))))},o.createElement(n.Box,null," ","function"==typeof i?o.createElement(i):i||null)))};var h=a(80824);function f(e={}){let{content:t,setDialogContent:a,unsetDialogContent:r,setDialogType:n}=o.useContext(u);return{form:t.children,options:t.options,openFormDialog:function(t,r){n("FormDialog"),a(t,{isOpen:!0,...e,...r})},closeFormDialog:r}}class b extends Error{fieldName;type;constructor(e,t,a="ERR_VALIDATION_ERROR"){super(t),this.fieldName=e,this.type=a,Object.setPrototypeOf(this,new.target.prototype)}}let y=(e={})=>{let t=f();return t.options?.isOpen?o.createElement(w,{props:e,formProps:t}):null},w=({formProps:e,props:t})=>{let[a,r]=o.useState(""),[l,i]=o.useState(!1),[s,c]=o.useState("default"),{form:u=t.children,options:{isOpen:d=t.isOpen,onSave:m,onCancel:p,onRemove:g,title:f,docsUrl:y,defaultValues:w={},FooterAppend:v,hasCancelButton:k=!0,saveButtonText:_=t.saveButtonText||"Save",cancelText:x="Cancel",size:I="md",isDisabled:S=!1,intent:j,props:C,closeOnSave:P=!0,confirmRemove:A=!1,confirmRemoveText:B="Are you sure you want to remove this item?",confirmRemoveButtonText:D="Yes, Remove",removeButtonDisabled:T=!1,removeButtonText:F="Remove",...$},closeFormDialog:N}=e,U=(0,h.mN)({mode:"onChange",shouldUnregister:!0,delayError:500,...$,...t}),M=U.formState.isSubmitting||!U.formState.isValid||S;o.useEffect(()=>{0!==Object.keys(w).length&&U.reset(w)},[w]);let R=()=>{U.reset({},{keepErrors:!1,keepDirty:!1,keepIsSubmitted:!1,keepTouched:!1,keepIsValid:!1,keepSubmitCount:!1}),N()},W=async()=>{if(m)try{i(!0),m(U.getValues()).then(()=>{i(!1),P&&R()}).catch(e=>{i(!1),e instanceof b?U.setError(e.fieldName,{type:e.type,message:e.message}):"INVALID_DATA"===e.message||r("Issue saving the form, please try again.")})}catch{r("Error Saving Form")}},L=async e=>{if(g){if(e)try{await g(U.getValues()).then(()=>{i(!1),R()}).catch(()=>{i(!1),r("There was an issue removing the item, please try again.")})}catch{r("Error Removing Item")}else c("confirm-remove")}};return o.createElement(n.Modal,{size:I,isOpen:d||!1,onClose:R,isNotDismissable:!0,title:o.createElement(n.Flex,{h:"md",alignItems:"center",justify:"between"},o.createElement(n.Text,{fontSize:"xl",fontWeight:"semibold"},f),y&&o.createElement(n.Link,{mx:2,href:y,target:"_blank"},"Learn more")),footer:o.createElement(n.HStack,{spacing:2},v&&o.cloneElement(v,{formMethods:U}),o.createElement(n.Box,{flexGrow:!0},{default:g&&o.createElement(n.Button,{icon:o.createElement(n.Icon,{icon:["fas","trash-can"]}),"data-test":"form-dialog-button-remove",appearance:"minimal",mr:2,intent:"danger",alignSelf:"flex-end",onPress:()=>L(!A),disabled:T},F),"confirm-remove":o.createElement(n.Text,null,B)}[s]),o.createElement(n.HStack,{justifyContent:"end",spacing:2,pr:2,flexShrink:!0},{default:o.createElement(o.Fragment,null,k&&o.createElement(n.Button,{onPress:()=>{if(p)return p(R);R()},"data-test":"form-dialog-button-cancel",appearance:"minimal",disabled:U.formState.isSubmitting||l},x),o.createElement(n.Button,{onPress:()=>U.handleSubmit(W)(),loading:l,"data-test":"form-dialog-button-save",appearance:"primary",intent:j,disabled:M},_)),"confirm-remove":o.createElement(o.Fragment,null,o.createElement(n.Button,{onPress:()=>c("default"),"data-test":"form-dialog-button-cancel-remove",appearance:"minimal"},"Cancel"),o.createElement(n.Button,{icon:o.createElement(n.Icon,{icon:["fas","trash-can"]}),onPress:()=>L(!0),loading:l,"data-test":"form-dialog-button-confirm-remove",appearance:"primary",intent:"danger"},D))}[s]))},o.createElement(E,{formMethods:U,onHandleSave:W},o.createElement(n.Box,{h:"full"},u&&o.createElement(u,C),a&&o.createElement(n.Callout,{intent:"danger",appearance:"outline",mt:5},a))))},E=({formMethods:e,onHandleSave:t,children:a})=>o.createElement(h.Op,e,o.createElement(n.Box,{as:"form",h:"full",onSubmit:e.handleSubmit(t)},a)),v=()=>{let{type:e}=o.useContext(u),t=null;switch(e){case"Dialog":t=o.createElement(p,null);break;case"FormDialog":t=o.createElement(y,null);break;default:t=null}return t};function k(e){return o.createElement("div",null,"Hello")}let _=()=>{let[e,t]=(0,o.useState)([0,0]);return(0,o.useLayoutEffect)(()=>{function e(){t([window.innerWidth,window.innerHeight])}return window.addEventListener("resize",e),e(),()=>window.removeEventListener("resize",e)},[]),e};var x=a(45250),I=a(58984);let S=()=>{let[e,t]=o.useState(""),[a,r]=o.useState([]),n=(0,I.A)(e=>{t(e)},300),l=o.useCallback(e=>{n(e)},[n]),i=o.useCallback(()=>{r([])},[r]),s=o.useCallback(e=>{e?r(e):i()},[i,r]),c=o.useCallback(e=>{let t=a.find(t=>t.id===e);return t?.value},[a]);return{searchTerm:e,searchByTerm:l,filters:a,filterBy:s,clearFilters:i,getFilterValue:c}},j=o.createContext(void 0);function C({children:e}){let{searchTerm:t,searchByTerm:a,filters:r,filterBy:n,getFilterValue:l,clearFilters:i}=S();return o.createElement(j.Provider,{value:{searchTerm:t,searchByTerm:a,filters:r,filterBy:n,clearFilters:i,getFilterValue:l}},e)}let P=()=>{let e=o.useContext(j);if(void 0===e)throw Error("No Filter Context: must be used with a SearchFilterProvider");return e},A="enabled_filter_key",B=["all","disabled","enabled"],D=({heading:e,subHeading:t,headerPrefix:a})=>{let{filterBy:r,getFilterValue:l,searchByTerm:i}=P(),s=l(A);return o.createElement(n.Flex,{flex:"initial",flexDirection:"col",alignItems:"center",mb:5},o.createElement(n.Heading,{size:2,fontWeight:"semibold",mb:5},e),o.createElement(n.Text,{fontWeight:"medium",mb:5},t),o.createElement(n.Flex,{alignItems:"center",borderB:!0,borderT:!0,borderColor:"light",w:"full",py:2},o.createElement(n.Box,{w:32,ml:3,mr:5},o.createElement(n.Menu,{"aria-label":"Filter by",closeOnPress:!0,items:B.map(e=>({id:e,title:(0,x.capitalize)(e),value:e,isChecked:s===e,onPress:()=>r([{id:A,value:e}])})),renderTrigger:({isOpen:e})=>o.createElement(n.Button,{size:"sm",iconRight:"chevron-down",appearance:"minimal",active:e},"Filter by: ",(0,x.capitalize)(s))})),o.createElement(n.Input,{"aria-label":"search",appearance:"minimal",icon:"magnifying-glass",placeholder:"Search...",flex:1,mr:3,onChange:e=>i(e.currentTarget.value)}),a))},T=({onCancel:e,onSave:t,isLoading:a,children:r,LibraryHeader:l,saveButtonText:i,dataTest:s})=>o.createElement(n.Flex,{flexDirection:"col",w:"full",h:"full","data-test":s},l||o.createElement(D,{heading:"Style Guides",subHeading:"Add existing Style Guide rules to your project!"}),a?o.createElement($.I,null):o.createElement(o.Fragment,null,o.createElement(n.Box,{flex:"auto",className:"util__scrollbar",overflowY:"auto",style:{maxHeight:"340px"}},r),o.createElement(n.Flex,{flex:"initial",borderT:!0,borderColor:"light",justifyContent:"end",pt:5},o.createElement(n.Flex,{alignItems:"center",mr:"auto",pl:12},o.createElement(n.Icon,{icon:"circle-info",size:"lg",color:"var(--color-primary)"}),o.createElement(n.Text,{pl:2},"Extended Style Guides apply to all branches")),o.createElement(n.Button,{className:"mr-3",onPress:e,"data-test":`${s}-btn-cancel`},"Cancel"),o.createElement(n.Button,{appearance:"primary",onPress:t,"data-test":`${s}-btn-save`},i||"Save")))),F=({heading:e,children:t})=>o.createElement(n.Box,null,o.createElement(n.Flex,{mx:3},o.createElement(n.Text,{fontWeight:"bold"},e)),o.createElement(n.Flex,{mx:10,mb:5,justifyContent:"start",flexWrap:!0},t));var $=a(84660),N=a(8216);let U=(e,t)=>{if(e&&e.editor&&t)return e.editor.getAction(t)};var M=a(96379);let R=[{label:"Bold",commandId:M._.ToggleBold,icon:["far","bold"]},{label:"Italic",commandId:M._.ToggleItalic,icon:["far","italic"]},{label:"Strikethrough",commandId:M._.ToggleStrikeThrough,icon:["far","strikethrough"]},{label:"Blockquote",commandId:M._.ToggleCitations,icon:["fas","quote-right"]},{label:"Link",commandId:M._.InsertLink,icon:["far","link"]},{label:"Heading",icon:["far","heading"],commands:[{label:"H1",commandId:M._.ToggleTitleH1},{label:"H2",commandId:M._.ToggleTitleH2},{label:"H3",commandId:M._.ToggleTitleH3},{label:"H4",commandId:M._.ToggleTitleH4},{label:"H5",commandId:M._.ToggleTitleH5},{label:"H6",commandId:M._.ToggleTitleH6}]},{label:"Code",icon:["far","brackets-curly"],commands:[{label:"Inline Code",commandId:M._.ToggleInlineCode},{label:"Code Block",commandId:M._.ToggleBlockCode}]},{label:"List",icon:["far","list"],commands:[{label:"Numbered List",commandId:M._.ToggleNumberList},{label:"Bulleted List",commandId:M._.ToggleBullets},{label:"Checkbox List",commandId:M._.ToggleCheckboxList}]},{label:"Table",icon:["fas","table"],commandId:M._.AddTableWithHeaders},{label:"HTTP Request Maker",icon:["far","paper-plane"],commandId:M._.AddRequestMaker},{label:"JSON Schema",icon:["far","cube"],commandId:M._.AddJsonSchema}],W=({monacoCodeStore:e})=>o.createElement(n.Flex,null,R.map((t,a)=>o.createElement(L,{key:a,monacoCodeStore:e,menu:t}))),L=({monacoCodeStore:e,menu:t})=>{let a=o.createElement(n.Button,{icon:t.icon&&o.createElement(n.Icon,{icon:t.icon}),className:"cursor-pointer",onPress:()=>e&&U(e,t.commandId)?.run(),size:"sm",disabled:t.disabled,appearance:"minimal"});if(t.commands?.length){let r=t.commands.map(t=>{if(t.commandId)return{id:t.label,title:t.label,onPress:()=>e&&U(e,t.commandId)?.run()}}),l=[{type:"group",title:t.label,children:[t.commandId?{id:t.commandId,title:t.commandId}:void 0,...r]}];return o.createElement(n.Menu,{"aria-label":t.label,renderTrigger:a,items:l})}return t.label?o.createElement(n.Tooltip,{renderTrigger:a},t.label):a},G=(e,t)=>{let[a,r]=o.useState();o.useEffect(()=>{let t=e?.onEditorDidChange(r);return t?.dispose.bind(t)},[e]),o.useEffect(()=>{t&&a?.focus()},[a,t])};var O=a(76650);r=o.lazy(async()=>{try{return await Promise.all([a.e(2523),a.e(6237),a.e(3083),a.e(8209),a.e(3221),a.e(9162),a.e(5894),a.e(9911),a.e(3662),a.e(7553),a.e(3306),a.e(9643),a.e(3827),a.e(5095),a.e(275),a.e(8740),a.e(3375),a.e(7934),a.e(7296),a.e(229),a.e(3900),a.e(7516),a.e(3015),a.e(2955),a.e(8965),a.e(4957),a.e(5601),a.e(9150),a.e(7362),a.e(9765),a.e(978),a.e(2453),a.e(2497),a.e(5410),a.e(3777),a.e(9565),a.e(2314),a.e(1894),a.e(766),a.e(7464),a.e(4344),a.e(2128),a.e(5048),a.e(1286),a.e(8741),a.e(3338),a.e(6136)]).then(a.bind(a,4123))}catch{return{default:$.I}}});let z=({store:e,...t})=>o.createElement(O.default,{onSSR:o.createElement($.I,null)},o.createElement(o.Suspense,{fallback:o.createElement($.I,null)},void 0===e?o.createElement($.I,null):o.createElement(r,{...t,store:e}))),q={fontSize:14,lineNumbersMinChars:3,scrollbar:{useShadows:!0,horizontalScrollbarSize:6,verticalScrollbarSize:6},minimap:{enabled:!1},guides:{highlightActiveIndentation:!1},overviewRulerBorder:!1,renderLineHighlight:"none",automaticLayout:!0,scrollBeyondLastLine:!1,copyWithSyntaxHighlighting:!1,colorDecorators:!1,roundedSelection:!1,glyphMargin:!0,folding:!0,lineNumbers:"on",lineDecorationsWidth:10,hideCursorInOverviewRuler:!1},V=Object.assign({},q,{glyphMargin:!1,folding:!1,lineNumbers:"off",lineDecorationsWidth:0,lineNumbersMinChars:0,hideCursorInOverviewRuler:!0}),H=({monacoCodeStore:e,appearance:t="default",readOnly:a=!1,autoFocus:r=!1,...l})=>{G(e,r);let i=(0,n.useThemeIsDark)(),s=o.useMemo(()=>({..."minimal"===t?V:q,readOnly:a}),[a,t]),c=o.useMemo(()=>"editorMinHeight"in l?{height:"auto",minHeight:l.editorMinHeight,maxHeight:l.editorMaxHeight}:{height:l.editorHeight},[l]),u=a?null:o.createElement(n.Box,{p:"default"===t?3:void 0,pb:"minimal"===t?2:void 0,borderB:2},o.createElement(W,{monacoCodeStore:e}));return o.createElement(n.VStack,{h:"full"},u,o.createElement(z,{store:e,theme:i?"stoplight-dark":"stoplight-light",paddingTop:a?0:12,options:s,...c}))};var Q=a(71571);let K=e=>{let[t,a]=o.useState(e&&e.value);return o.useEffect(()=>{if(e)return e.onDidUpdateValue(e=>{t!==e&&a(e)}).dispose},[e,t]),t},J=({monacoCodeStore:e})=>{let t=K(e);return e?o.createElement(Q.Gd,{markdown:t||""}):null},Y=e=>{let[t,a]=o.useState(),[r,n]=o.useState(!1);o.useEffect(()=>{let t=e?.onEditorDidChange(a);return t&&(()=>{t.dispose()})},[e]),o.useEffect(()=>{if(t){let e=t.getModel();if(e&&!r){let a=e.getLineCount(),r={lineNumber:a,column:e.getLineMaxColumn(a)};t.setPosition(r),t.revealPosition(r),n(!0)}}},[t,r])},X=({monacoCodeStore:e,height:t,autoFocus:a})=>(Y(e),o.createElement(n.Box,{overflowY:"hidden",h:"full"},o.createElement(n.Tabs,{appearance:"line"},o.createElement(n.TabList,null,o.createElement(n.Tab,null,o.createElement(n.Box,{py:1},"Edit")),o.createElement(n.Tab,null,o.createElement(n.Box,{py:1},"Preview"))),o.createElement(n.TabPanels,{p:0},o.createElement(n.TabPanel,null,o.createElement(n.Box,{w:"full",style:{height:t}},o.createElement(H,{autoFocus:a,monacoCodeStore:e}))),o.createElement(n.TabPanel,null,o.createElement(n.Box,{w:"full",overflowX:"auto",overflowY:"auto",px:4,style:{height:t}},o.createElement(J,{monacoCodeStore:e}))))))),Z=({icon:e,count:t=0})=>{let a={position:"relative",top:"-10px",left:"5px",borderRadius:"50%",display:"inline-block",textAlign:"center",fontSize:"8px",padding:(({count:e})=>{switch(e.toString().length){case 1:return"0px 4px";case 2:return"2px 3px";case 3:return"3px 2px";default:return"1px 4px"}})({count:t})};return o.createElement(n.Box,null,o.createElement(n.Box,{fontSize:"xs",color:"canvas",bg:"warning",style:{...a}},t),o.createElement(n.Icon,{icon:e,style:{color:"var(--color-primary)",fontSize:"14px"}}))},ee=({id:e,instance:t,onClick:a,text:r,disabledFn:n,icon:o})=>({id:e,title:r,onPress:()=>a(t),isDisabled:n&&n(t),icon:o}),et=({actions:e,instance:t,trigger:a})=>{let r=[];for(let a of e){let e=a.filter(e=>"function"!=typeof e.showFn||!!e.showFn(t));if(!e.length)continue;let n=e.map((e,a)=>ee({id:a,instance:t,text:e.text,onClick:e.onClick,disabledFn:e.disabledFn,icon:e.icon}));r.push({type:"group",children:n})}return r.length?o.createElement(n.Menu,{"aria-label":"More actions",items:r,placement:"bottom right",renderTrigger:a||(({isOpen:e})=>o.createElement(n.Button,{"data-test":"action-menu",appearance:"minimal",active:e,onClick:e=>{e.preventDefault()},h:10,w:10,flex:1,justifyContent:"center",icon:["far","ellipsis-h"]}))}):null};var ea=a(65398),er=a.n(ea);let en=({bulkSelectAction:e,onPress:t})=>o.createElement(n.Button,{"data-test":e.dataTest,onClick:t,appearance:"primary"},e.text),eo=({bulkSelectAction:e,onPress:t})=>o.createElement(n.Tooltip,{renderTrigger:o.createElement(n.Button,{icon:e.icon,onPress:t,appearance:"minimal","data-test":e.dataTest}),placement:"bottom"},e.text),el=function({itemType:e,bulkSelectActions:t,tableInstance:a}){let r=Object.keys(a.state.selectedRowIds).length;return o.createElement(n.HStack,{spacing:6},o.createElement(n.Box,{pl:2,fontWeight:"semibold",whitespace:"nowrap","data-test":"selected-items-count"},o.createElement(n.Text,{style:{fontVariantNumeric:"tabular-nums"}},r),e?` ${er()(e,r)}`:""," selected:"),o.createElement(n.HStack,{spacing:2},t?.map((e,t)=>e.icon?o.createElement(eo,{key:t,bulkSelectAction:e,onPress:()=>e.onClick(a)}):o.createElement(en,{key:t,bulkSelectAction:e,onPress:()=>e.onClick(a)}))))},ei=()=>{let[e,t]=o.useState(""),[a,r]=o.useState([]),n=(0,I.A)(({id:e,value:a})=>{t(a),c({id:e,value:a})},200),l=o.useCallback(e=>{n(e)},[n]),i=o.useCallback(()=>{r([]),t("")},[r]),s=o.useCallback(e=>{e?r(e):i()},[i]),c=o.useCallback(e=>{let t=a?.findIndex(t=>t.id===e.id);-1!==t?(a[t]=e,r([...a])):r([...a,e])},[a]),u=o.useCallback(e=>{let t=a.find(t=>t.id===e);return t?.value},[a]);return{searchTerm:e,searchByTerm:l,setAllFilters:s,filterBy:a,setFilter:c,clearFilters:i,getFilterValue:u}},es=()=>{let[e,t]=o.useState("");return{scrollToId:e,setScrollTo:o.useCallback(e=>{t(e)},[t]),clearScrollTo:o.useCallback(()=>{t("")},[t])}},ec=()=>{let[e,t]=o.useState([]);return{sortBy:e,setSort:o.useCallback(e=>{t(e)},[t]),clearSort:o.useCallback(()=>{t([])},[t])}},eu=o.createContext(void 0);function ed({children:e,defaultValues:t}){let a=ei(),r=ec(),{setScrollTo:n,...l}=es();return o.useEffect(()=>{t?.scrollTo&&n(t?.scrollTo)},[t?.scrollTo,n]),o.createElement(eu.Provider,{value:{...a,...r,setScrollTo:n,...l}},e)}let em=()=>{let e=o.useContext(eu);if(void 0===e)throw Error("No Table Context: must be used with a TableProvider");return e},ep=({column:{id:e}})=>{let{searchTerm:t,searchByTerm:a}=em(),[r,l]=o.useState(t);return o.useEffect(()=>{l(t)},[t]),o.createElement(n.Input,{"aria-label":"Search",icon:"magnifying-glass",appearance:"minimal",placeholder:"Search...",onChange:t=>{let r=t.currentTarget.value;l(r),a({value:r,id:e})},value:r||"",flexGrow:!0})},eg=({column:{preFilteredRows:e,id:t},data:a,label:r,ariaLabel:l="Select Filter",defaultFilterOptions:i,defaultFilterValue:s})=>{let{getFilterValue:c,setFilter:u}=em(),d=o.useCallback(()=>(0,x.chain)(e).groupBy(e=>e.values[t]).map((e,t)=>({value:t,count:e.length})).value(),[e,t]),m=o.useMemo(()=>{let e=i.reduce((e,t)=>(e[String(t)]=0,e),{});return d().forEach(t=>{e[t.value]=t.count}),(0,x.map)(e,(e,t)=>({value:t,label:(0,x.capitalize)(t),meta:e}))},[d,i]);return o.useMemo(()=>{s&&u({id:t,value:"all"!==s&&s})},[a]),o.createElement(n.Select,{"aria-label":l||r,value:c(t)||"all",onChange:e=>{if("all"===e)return u({id:t,value:void 0});u({id:t,value:e})},triggerTextPrefix:r?`${r}: `:"",options:[{options:[{label:"All",value:"all",meta:e.length}]},{options:m}]})};var eh=a(78704),ef=a(84392);let eb=(e,t,a)=>{let r=(e.values[a]||"").toLowerCase(),n=(t.values[a]||"").toLowerCase();return r>n?1:n>r?-1:0},ey=(e,t,a)=>e.values[a]>t.values[a]?1:-1;function ew({cell:{column:e,render:t,getCellProps:a,...r}}){let l=e.calcWidth instanceof Function?e.calcWidth({column:e,render:t,getCellProps:a,...r}):e.width,i=a({style:{maxWidth:e.maxWidth,...l&&{width:l}}}),s=e.centerContent?"center":void 0,c=e.centerContent?"center":void 0;return["actions","selection"].includes(e.id)?o.createElement(n.Flex,{align:"center",justifyContent:"center",...i},t("Cell")):o.createElement(n.Flex,{"data-table-cell":e.id,textOverflow:"truncate",justifyContent:s,textAlign:c,...i},t("Cell"))}let eE=({instance:e,itemType:t,bulkSelectActions:a,appendix:r})=>{let{setSort:l}=em(),{headerGroups:i}=e,s=Object.keys(e.state.selectedRowIds).length,c=o.useRef(null),[u,d]=o.useState(0),m=i.flatMap(e=>e.headers).filter(e=>e.canFilter&&e.Filter).sort((e,t)=>(t?.filterOrder||0)-(e?.filterOrder||0));return o.useEffect(()=>{let e=0;s&&(e=c.current?.offsetWidth||0),d(e)},[c,s]),o.createElement(n.Box,{bg:"canvas",zIndex:0,userSelect:"none",pos:"relative",top:0},o.createElement(n.HStack,{alignItems:"center",py:2},o.createElement(n.Box,{className:"bulk-css-transition",style:{width:u}},o.createElement(n.Box,{borderR:!0,borderColor:"light",display:"inline-block",pr:2,ref:c},o.createElement(el,{itemType:t,bulkSelectActions:a,tableInstance:e}))),m.map(e=>o.createElement(o.Fragment,{key:e.id},e.render("Filter"))),r),o.createElement(n.Flex,{w:"full",flexDirection:"col"},i.map((e,t)=>o.createElement(n.HStack,{spacing:2,borderB:!0,borderT:!0,borderColor:"light",h:"xl",px:3,mr:5,...e.getHeaderGroupProps(),key:t},e.headers.map(e=>o.createElement(n.Flex,{align:"center",justifyContent:e.centerContent?"center":"start",color:{default:"light",hover:e.disableSortBy?void 0:"primary"},h:"xl",...e.getSortByToggleProps({title:void 0}),...e.getHeaderProps({style:{maxWidth:e.maxWidth}}),key:e.id,onClick:()=>{if(e.canSort){let t=!1;e.isSorted&&(t=!e.isSortedDesc),l([{id:e.id,desc:t}])}}},e.render("Header"),ev(e.canSort,e.isSorted,e.isSortedDesc)))))))},ev=(e,t,a)=>e?o.createElement(n.Box,{display:"inline-block",ml:2,fontSize:"sm"},t&&(a?o.createElement(n.Icon,{icon:["far","long-arrow-alt-down"]}):o.createElement(n.Icon,{icon:["far","long-arrow-alt-up"]}))):null;function ek({row:e,style:t,onRowClick:a,children:r,isRowPanelOpen:l,isRowDisabled:i}){let s=!!l&&l(e),c=!!i&&i(e);return o.createElement(n.Box,{pos:"relative"},o.createElement(n.HStack,{spacing:2,role:"row",borderB:!0,borderColor:"light",pr:3,pl:3,textDecoration:"no-underline",align:"center",color:c?"muted":void 0,cursor:a?"pointer":"auto",bg:{default:s?"primary-tint":e.isSelected||e.isSomeSelected?"canvas-50":"canvas",hover:e.isSelected||s||c?void 0:"canvas-200",focus:e.isSelected||s?void 0:"canvas-200"},...e.getToggleRowExpandedProps(),...e.getRowProps({style:t}),onClick:a,title:""},r))}let e_=[eh.useColumnOrder,eh.useFilters,eh.useGlobalFilter,eh.useSortBy,eh.useExpanded,eh.usePagination,eh.useRowSelect,eh.useFlexLayout];function ex({scrollTo:e,...t}){return o.createElement(ed,{defaultValues:{scrollTo:e}},o.createElement(eI,t))}function eI(e){let t;let{columns:a,row:{rowActions:r=[],onRowClick:l,canExpandFn:i,canSelectFn:s}={},bulkSelectActions:c,initialState:u,noResultsMessage:d,itemType:m,itemCount:p,onItemsRendered:g,virtualizedListRef:h,isLoading:f,stateReducer:b,getRowId:y,autoResetExpanded:w=!0,manualSortBy:E=!1,manualFilters:v=!1,autoResetSelectedRows:k=!0,isRowPanelOpen:_,isRowDisabled:x,expandAllRowsOnLoad:I=!1,name:S,headerAppendix:j}=e,C=o.useMemo(()=>({minWidth:30,width:50,maxWidth:500}),[]),P=o.useRef(null),A=o.useCallback(e=>{"function"==typeof h&&h(e),P.current=e},[h]),{filterBy:B,sortBy:D,scrollToId:T,clearScrollTo:F,clearFilters:N}=em(),[U,M]=function(e={}){let[t,a]=(0,o.useState)(e);return[t,(0,o.useCallback)(e=>{a(e)},[])]}(u),R=o.useRef({}),W=o.useMemo(()=>c?.filter(({showFn:e})=>!e||e())??[],[c]),L=W.length,G=o.useMemo(()=>({SL_AlphSort:eb,SL_DateSort:ey}),[]),O=(0,eh.useTable)({...e,defaultColumn:C,disableSortRemove:!0,sortTypes:G,columns:a,initialState:{hiddenColumns:["groupName"],pageSize:1e3,...U},stateReducer:b,getRowId:y,autoResetExpanded:w,manualSortBy:E,manualFilters:v,autoResetSelectedRows:k},...e_,e=>{e.visibleColumns.push(e=>[{id:"selection",Header:e=>{let t=e.getToggleAllRowsSelectedProps();if(s&&Object.keys(e.state.selectedRowIds).length){let a=e.filteredFlatRows.filter(e=>s(e,W));t.checked=a.every(t=>e.state.selectedRowIds[t.id]),t.indeterminate=!1}return L?o.createElement(ej,t):null},Cell:({row:e})=>{let t=[];if(i?.(e)&&e.originalSubRows.length){let a=e.isExpanded?"angle-down":"angle-right";t.push(o.createElement(n.Box,{key:`expand-toggle-${e.id}`,cursor:"pointer",p:2,onClick:t=>{t.stopPropagation(),e.toggleRowExpanded()}},o.createElement(n.Icon,{icon:["fal",a],size:"lg",style:{color:"var(--color-text-light)"}})))}return(s?s(e,W):L)&&t.push(o.createElement(n.Box,{key:`select-toggle-${e.id}`,pl:e.depth?14:0,onClick:e=>{e.stopPropagation()}},o.createElement(ej,{...e.getToggleRowSelectedProps(),visibility:{default:"visible",groupHover:"visible"}}))),o.createElement(o.Fragment,null,o.createElement(n.HStack,null,t.map(e=>e)))},centerContent:!0,width:35,maxWidth:35,calcWidth:({row:e})=>i?.(e)||L?35:0},...e]),r&&r.length&&e.visibleColumns.push(e=>[...e,{id:"actions",Header:()=>o.createElement(n.Box,null),Cell:({row:e})=>o.createElement(et,{actions:r,instance:e}),centerContent:!0,width:40,maxWidth:40}])}),{getTableProps:z,prepareRow:q,state:V,rows:H=[],setAllFilters:Q,setSortBy:K}=O;o.useEffect(()=>{let{sortBy:e,filters:t,pageSize:a}=V;M({sortBy:e,filters:t,pageSize:a})},[V,M]),o.useEffect(()=>{I&&!f&&O.toggleAllRowsExpanded(!0)},[I,O,f]),o.useEffect(()=>{if(T){if(B?.length||V.filters?.length){N();return}if(O.preExpandedRows){let e=O.preExpandedRows.findIndex(e=>e.id.includes(T)),t=O.preExpandedRows[e];t&&(P.current?.scrollToItem(e,"start"),O.toggleAllRowsExpanded(!1),t.canExpand&&t.toggleRowExpanded&&t.toggleRowExpanded(!0),F())}}},[O,P,Q,T,F,B?.length,N,V.filters?.length]),o.useEffect(()=>{B&&Q(B)},[B,Q]),o.useEffect(()=>{D&&K(D)},[D,K]);let J=o.useCallback(({data:e,index:t,style:a})=>{let r=e[t];return q(r),o.createElement(ek,{key:r.original?.id||r.id,row:r,onRowClick:l?()=>{l?l(r):L&&r.toggleRowSelected()}:void 0,index:t,style:a,isRowPanelOpen:_,isRowDisabled:x},r.cells.map(e=>o.createElement(ew,{key:e.column.id,cell:e})))},[q,l,L,_,x]),Y=!H.length,X=!!V.filters.length;return t=Y?X?o.createElement(n.VStack,{spacing:3},o.createElement(n.Box,{textAlign:"center",mt:3},"No items match your filters."),o.createElement(n.Box,{textAlign:"center"},o.createElement(n.Button,{onPress:()=>N(),appearance:"primary",size:"sm"},"Reset Filters"))):d||o.createElement(n.Flex,{flexDirection:"col",pt:24,textAlign:"center",h:"full"},"Nothing to show..."):null,o.createElement(n.Flex,{className:"Table",flexDirection:"col",pos:"relative",h:"full",...z()},o.createElement(eE,{instance:O,itemType:m,bulkSelectActions:W,appendix:j}),o.createElement(n.Box,{pos:"relative",h:"full"},o.createElement(n.Flex,{flexDirection:"col","data-table-name":S,ref:R,flexGrow:!0,pos:"absolute",w:"full",h:"full",className:"util__scrollbar"},f?o.createElement($.I,null):t,o.createElement(eS,{rows:H,tableContentRef:R,itemCount:p,onItemsRendered:g,listRef:A},J))))}let eS=function({rows:e,itemCount:t,onItemsRendered:a,listRef:r,tableContentRef:n,children:l}){let[i,s]=_(),[c,u]=o.useState(60);return o.useEffect(()=>{n?.current&&u(n?.current.offsetHeight)},[n,u,i,s]),o.createElement(ef.FixedSizeList,{height:c,itemCount:t||e.length,itemData:e,itemSize:60,onItemsRendered:a,ref:r,width:"100%",style:{overflow:"scroll"}},l)},ej=o.forwardRef(({className:e,indeterminate:t,...a},r)=>{let l=o.useRef(),i=r||l;return o.useEffect(()=>{i.current.indeterminate=t},[i,t]),o.createElement(n.Box,{as:"input",className:e,"aria-label":"Select row",...a,ref:i,type:"checkbox",pos:"relative",display:"block"})}),eC=({children:e,content:t,renderTrigger:a,...r})=>{let[l,i]=o.useState(!1),s=o.useRef(null),c=o.useRef(null),[u]=_(),d=({current:e})=>(e?.offsetWidth||0)<(c?.current?.offsetWidth||0);return o.useEffect(()=>{c?.current&&i(d(s))},[s,c,u]),o.createElement(n.Box,{w:"auto",ref:s,overflowX:"hidden"},l?o.createElement(n.Tooltip,{renderTrigger:o.createElement(n.Box,{textOverflow:"truncate",whitespace:"nowrap",overflowX:"hidden",w:"auto"},o.createElement(n.Box,{cursor:"auto",display:"inline"},a??t??e)),...r},e):o.createElement(n.Box,{display:"inline",whitespace:"nowrap",ref:c},t??e))};var eP=a(72916);function eA(){return"undefined"!=typeof window?window.location:self.location}},80562:(e,t,a)=>{"use strict";a.d(t,{Ey:()=>n,_W:()=>l,cp:()=>r.cp,q3:()=>o});var r=a(48714);function n(e){return globalThis.window.atob(e)}function o(e){return globalThis.window.btoa(e)}function l(e){let t=new TextDecoder("utf8");return globalThis.window.btoa(t.decode(e))}},15990:(e,t,a)=>{"use strict";a.r(t),a.d(t,{InvalidIdError:()=>w,decodeID:()=>s,decodeStableId:()=>j,encodeID:()=>c,encodeStableId:()=>S,safelyDecode:()=>E,safelyDecodeID:()=>d,safelyEncode:()=>v,safelyEncodeID:()=>u,shortKey:()=>p,urlDecode:()=>i,urlEncode:()=>l});var r=a(80562);let n=(e="")=>(0,r.q3)(e),o=(e="")=>(0,r.Ey)(e),l=function(e){return n(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/g,"")},i=function(e){for(e=e.replace(/-/g,"+").replace(/_/g,"/");e.length%4;)e+="=";return o(e)},s=e=>{let[t,a]=i(e).split(":");return{type:t,id:parseInt(a)||0}},c=(e,t)=>l(`${e}:${t}`),u=(e,t)=>"string"==typeof t?t:c(e,t),d=e=>{if("number"==typeof e)return e;try{let{id:t}=s(e);return t}catch{return 0}};var m=a(38796);async function p(){let e=await (0,m.p)(8);return g((0,r._W)(e))}let g=e=>e.replace(/\//g,h).replace(/\+/g,h).replace(/\-/g,h).replace(/\_/g,h).replace(/\=/g,""),h=()=>f[Math.floor(Math.random()*f.length)],f=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"];function b(e){switch(e){case"wk":return"Workspace";case"wkintg":return"Workspace Integration";case"prj":return"Project";case"br":return"Branch";case"doc":return"Document";case"api":return"API";case"op":return"Operation";case"sch":return"Schema";case"toc":return"Table of Contents";case"usr":return"User";default:return e}}let y=class extends Error{code;type;data;retryable;constructor(e,t,a,r){super(e),this.code=t,this.type=a,this.message=e,this.data=r,this.retryable=!1}};class w extends y{constructor(e){super(e,400,"INVALID_ID",void 0)}}let E=(e,t)=>{let a=b(t);if("number"!=typeof e&&"string"!=typeof e)throw new w(`no ${a} ID provided`);if("number"==typeof e)return e;let{type:r,id:n}=s(e);if(t!==r)throw new w(`invalid ${a} ID provided`);return n},v=(e,t)=>{let a=b(t);if(void 0===e)throw new w(`no ${a} ID provided`);if("number"==typeof e)return c(t,e);let r=s(e);if(t!==r.type)throw new w(`ID type mismatch: expected ${t} but was ${r.type}`);if(0===r.id)throw new w(`malformed ${r.type} ID`);return e},k=/[~-]/g,_=/~([a-z0-9]+)/gi;function x(e){return`~${e.charCodeAt(0).toString(16).toUpperCase()}`}function I(e,t){try{return decodeURIComponent(`%${t}`)}catch{return e}}function S(e){return e.replace(k,x)}function j(e){return e.replace(_,I)}},42251:(e,t,a)=>{"use strict";a.d(t,{F0:()=>l,IQ:()=>o,i3:()=>c,rE:()=>i});let r=e=>"string"==typeof e,n=e=>"object"==typeof e&&null!==e,o=e=>r(e)&&/^application\/problem\+json/.test(e),l=e=>n(e)&&r(e.type)&&r(e.title)&&"number"==typeof e.status&&[400,401,402,403,404,409,429,500].includes(e.status)&&(r(e.detail)||void 0===e.detail)&&(r(e.instance)||void 0===e.instance),i=Object.freeze({type:"INTERNAL_SERVER_ERROR",title:"There was an internal error in processing the request.",status:500,detail:"The service was unable to fulfill the request. Try again in a few moments. Should the problem persist, contact Stoplight support.",instance:void 0}),s=e=>l(e)&&400<=e.status&&e.status<500,c=e=>s(e)&&429===e.status},2188:(e,t,a)=>{"use strict";a.r(t),a.d(t,{addMachinePrincipal:()=>B,addOrUpdateGroupMember:()=>ep,addOrUpdateProjectTeam:()=>tt,addOrUpdateTeamMember:()=>te,addProjectMember:()=>eA,addUserToExternalProjects:()=>e1,bulkUpdateWorkspaceJoinRequests:()=>tA,bulkUpdateWorkspaceMembers:()=>tP,cancelBillingSubscription:()=>z,cancelDeleteWorkspace:()=>eQ,changeBillingInterval:()=>O,checkPromoCodeValidity:()=>V,completeStripeCheckoutSession:()=>U,computeOverrideUpdates:()=>eE,confirmEmailAddress:()=>tg,confirmWorkspaceMemberEmailAddress:()=>th,createCommit:()=>et,createCustomDomain:()=>el,createCustomerPortalSession:()=>M,createGroup:()=>eg,createOAuthUrl:()=>tf,createOverride:()=>ek,createProject:()=>eM,createProjectServiceAccount:()=>eK,createStripeCheckoutSession:()=>N,createTeam:()=>e3,createVersionControlRepo:()=>ty,createVersionControlWebhook:()=>tw,deleteAllImages:()=>ti,deleteCustomDomain:()=>es,deleteGroup:()=>eH,deleteMachinePrincipal:()=>T,deleteProject:()=>eC,deleteProjectServiceAccount:()=>eX,deleteTeam:()=>e7,deleteWorkspace:()=>tS,disableExtendedSSGs:()=>C,downgradeBillingProduct:()=>G,emailHasWorkspace:()=>tF,enableExtendedSSGs:()=>j,exportFileByBranch:()=>er,exportFileByBranchAsBlob:()=>eo,exportFileByBranchDevOps:()=>en,exportProjectNode:()=>ew,fetchBranchImage:()=>tu,fetchImageByHash:()=>td,fetchImageByHashBuffer:()=>tm,getBasicAuthCreds:()=>tx,getBillingAccount:()=>$,getBillingInvoices:()=>W,getBillingProducts:()=>F,getBranch:()=>eI,getDefaultStyleGuides:()=>k,getExtendedSSGs:()=>I,getFsDocForBranch:()=>X,getFsDocForCommit:()=>ee,getGroup:()=>eV,getGroupAssignableMembers:()=>eb,getGroupInvites:()=>eu,getGroupMembers:()=>ec,getGroups:()=>eq,getMergedFsDocForBranches:()=>Z,getOverride:()=>e_,getOverrides:()=>ex,getOverridesForBranch:()=>ev,getProject:()=>eL,getProjectAssignableMembers:()=>eP,getProjectBranch:()=>Q,getProjectNode:()=>E,getProjectRelease:()=>eR,getProjectReleasesList:()=>eW,getProjectServiceAccounts:()=>eJ,getProrationPreview:()=>q,getStyleGuides:()=>v,getTeam:()=>e4,getVersionControlRepoByUrl:()=>t_,getWorkspaceActivity:()=>w,getWorkspaceItems:()=>tj,getWorkspaceState:()=>e0,listMachinePrincipals:()=>ey,listProjectBranches:()=>K,listProjectCommits:()=>ea,listProjectContributors:()=>tC,listProjectMembers:()=>eG,listTeamAssignableMembers:()=>to,listTeamMembers:()=>tr,listTeams:()=>e2,listVersionControlOrgs:()=>tv,listVersionControlRepos:()=>tb,listWorkspaceDrafts:()=>J,listWorkspaceNodes:()=>x,login:()=>P,logout:()=>A,pinProject:()=>e$,projects:()=>eU,publishImageBatch:()=>tc,removeGroupInvite:()=>ed,removeGroupMember:()=>em,removeTeamFromProject:()=>ta,removeTeamMember:()=>e9,removeVersionControlWebhook:()=>tE,removeWorkspaceMember:()=>tD,setConsumer:()=>y,setDefaultStyleGuideProject:()=>_,setExtendedSSGs:()=>S,setHost:()=>b,testIntegrationConfig:()=>tk,testProjectServiceAccount:()=>eZ,unpinProject:()=>eN,updateBillingAccount:()=>R,updateCustomDomain:()=>ei,updateGroup:()=>eh,updateMachinePrincipal:()=>D,updateOverride:()=>eS,updateProject:()=>eB,updateProjectGroup:()=>eT,updateProjectMember:()=>eD,updateProjectOwnership:()=>eF,updateProjectServiceAccount:()=>eY,updateTeam:()=>e6,updateVcsIntegration:()=>tI,updateWorkspace:()=>tB,updateWorkspaceMember:()=>ef,upgradeBillingProduct:()=>L,uploadBranchImage:()=>ts,upsertProjectBranch:()=>H,upsertSpectralAccessToken:()=>tT});var r=a(75734),n=a.n(r),o=a(45810),l=a.n(o),i=a(21756);let s="",c="",u="",d=18e4,m="/api/";function p(){let e=m;if(s){let t=new URL(s);t.pathname=m,e=t.toString()}return e}function g(){let e=i.A.create({baseURL:p(),paramsSerializer:e=>l().stringify(e,{arrayFormat:"repeat",skipNulls:!0}),maxBodyLength:1/0});return e.defaults.headers.post["Content-Type"]="application/json",e.defaults.headers.patch["Content-Type"]="application/json",c&&(e.defaults.headers.common["Stoplight-Consumer"]=c),u&&(e.defaults.headers.common["Stoplight-Consumer-Version"]=u),e.interceptors.response.use(e=>e,e=>e.response?Promise.reject(e.response.data):Promise.reject(e)),e}let h=g();function f(e){return(t,a,{timeout:r=d,axios:n=h,baseUrl:o=p(),signal:l}={})=>(t&&(n.defaults.headers.common.Authorization=`Bearer ${t}`),r>0&&(n.defaults.timeout=r),n.defaults.baseURL=o,e({axios:n,jwtToken:t,params:a,signal:l}))}function b(e){s=e,h=g()}function y(e,t){c=e,u=t,h=g()}let w=async({jwt:e,workspace_id:t,...a})=>{let r=l().stringify(a,{arrayFormat:"brackets",skipNulls:!0}),o=await fetch(`${p()}v1/workspaces/${t}/activity?${r.toString()}`,{headers:e?{Authorization:`Bearer ${e}`}:void 0}),i=n()(o.headers.get("link")||"");return{data:o.ok?await o.json():[],next:i?.next?.before?i.next.before:null,prev:i?.prev?.after?i.prev.after:null}},E=f(async({axios:e,params:t})=>{let{project_id:a,node_id:r,branch:n}=t;return(await e.get(`v1/projects/${a}/nodes/${r}`,{params:{branch:n}})).data}),v=f(async({axios:e,params:t={}})=>{let{is_default:a}=t;return(await e.get(`v1/style-guides${void 0!==a?`?is_default=${a}`:""}`)).data}),k=f(async({axios:e,params:t={}})=>{let{workspace_id:a,visibility:r}=t;return(await e.get(`v1/workspaces/${a}/default-style-guides${void 0!==r?`?visibility=${r}`:""}`)).data}),_=f(async({axios:e,params:t})=>{let{workspace_id:a,project_id:r,enabledForNewProjects:n}=t;return(await e.post(`v1/workspaces/${a}/default-style-guides`,{project_id:r,enabledForNewProjects:n})).data}),x=f(async({axios:e,params:t})=>{let{workspace_id:a,...r}=t;return(await e.get(`v1/workspaces/${a}/nodes`,{params:{...r}})).data}),I=f(async({axios:e,params:t})=>{let{project_id:a}=t;try{let t=await e.get(`v1/projects/${a}/extended-ssgs`);if(204===t.status)return;return t.data}catch(e){if("code"in e&&"message"in e)throw Error(`getExtendedSSGs fetch error ${e.code}: ${e.message}`);throw Error("getExtendedSSGs generic fetch error")}}),S=f(async({axios:e,params:t,signal:a})=>{let{project_id:r,extended_ssg_ids:n}=t;return(await e.put(`v1/projects/${r}/extended-ssgs`,{extended_ssg_ids:n},{signal:a})).data}),j=f(async({axios:e,params:t})=>{let{ssg_id:a,...r}=t;return(await e.patch(`v1/style-guides/${a}/enable-projects`,{...r})).data}),C=f(async({axios:e,params:t})=>{let{ssg_id:a,...r}=t;return(await e.patch(`v1/style-guides/${a}/disable-projects`,{...r})).data}),P=f(async({axios:e,params:t})=>(await e.post("v1/auth/login",t,{withCredentials:!0})).data),A=f(async({axios:e,params:t})=>(await e.post("v1/auth/logout",t,{withCredentials:!0})).data),B=f(async({axios:e,params:{workspace_id:t,...a}})=>(await e.post(`v1/workspaces/${encodeURIComponent(t)}/machine-principals`,a)).data),D=f(async({axios:e,params:{machine_principal_id:t,...a}})=>(await e.put(`v1/machine-principals/${encodeURIComponent(t)}`,a)).data),T=f(async({axios:e,params:{machine_principal_id:t}})=>{await e.delete(`v1/machine-principals/${encodeURIComponent(t)}`)}),F=f(async({axios:e})=>(await e.get("v1/billing/products")).data),$=f(async({axios:e,params:t})=>{let{workspace_id:a}=t;return(await e.get(`v1/workspaces/${a}/billing`)).data}),N=f(async({axios:e,params:t})=>{let{workspace_id:a,...r}=t;return(await e.post(`v1/workspaces/${a}/billing/checkout`,r)).data}),U=f(async({axios:e,params:t})=>{let{workspace_id:a,...r}=t;return(await e.put(`v1/workspaces/${a}/billing/checkout`,r)).data}),M=f(async({axios:e,params:t})=>{let{workspace_id:a,...r}=t;return(await e.post(`v1/workspaces/${a}/billing/portal`,r)).data}),R=f(async({axios:e,params:t})=>{let{workspace_id:a,...r}=t;return(await e.put(`v1/workspaces/${a}/billing`,r)).data}),W=f(async({axios:e,params:t})=>{let{workspace_id:a}=t;return(await e.get(`v1/workspaces/${a}/billing/invoices`)).data}),L=f(async({axios:e,params:t})=>{let{workspace_id:a,...r}=t;return(await e.put(`v1/workspaces/${a}/billing/upgrade`,r)).data}),G=f(async({axios:e,params:t})=>{let{workspace_id:a,...r}=t;return(await e.put(`v1/workspaces/${a}/billing/downgrade`,r)).data}),O=f(async({axios:e,params:t})=>{let{workspace_id:a,...r}=t;return(await e.put(`v1/workspaces/${a}/billing/interval`,r)).data}),z=f(async({axios:e,params:t})=>{let{workspace_id:a,...r}=t;return(await e.post(`v1/workspaces/${a}/billing/cancel`,r)).data}),q=f(async({axios:e,params:t})=>{let{workspace_id:a,product_id:r}=t;return(await e.get(`v1/workspaces/${a}/billing/proration/${r}`)).data}),V=f(async({axios:e,params:t})=>{let{workspace_id:a,...r}=t;return(await e.post(`v1/workspaces/${a}/billing/promotion-code/${r.promotion_code}`,r)).data}),H=f(async({axios:e,params:t})=>{let{project_id:a,branch_slug:r,...n}=t;return(await e.put(`v1/projects/${a}/branches/${encodeURIComponent(r)}`,n)).data}),Q=f(async({axios:e,params:t})=>{let{project_id:a,branch_slug:r}=t;return(await e.get(`v1/projects/${a}/branches/${encodeURIComponent(r)}`)).data}),K=f(async({axios:e,params:t})=>{let{project_id:a}=t;return(await e.get(`v1/projects/${a}/branches`)).data}),J=f(async({axios:e,params:t})=>{let{workspace_id:a,pinned:r}=t;return(await e.get(`v1/workspaces/${a}/drafts`,{params:{pinned:r}})).data});var Y=a(42251);let X=f(async({axios:e,params:t})=>{let{project_id:a,branch_slug:r}=t,n=await e.get(`v1/projects/${a}/branches/${encodeURIComponent(r)}/doc`,{headers:{Accept:"application/octet-stream"},responseType:"arraybuffer"});try{return new Uint8Array(n.data)}catch(e){throw TypeError("HTTP response was not binary data")}}),Z=f(async({axios:e,params:t})=>{let{project_id:a,base_branch_slug:r,head_branch_slug:n}=t,o=await e.get(`v1/projects/${a}/branches/${encodeURIComponent(r)}...${encodeURIComponent(n)}/doc`,{headers:{Accept:"application/octet-stream"},responseType:"arraybuffer"});try{return new Uint8Array(o.data)}catch(e){throw TypeError("HTTP response was not binary data")}}),ee=f(async({axios:e,params:t})=>{let{project_id:a,sha:r}=t,n=await e.get(`v1/projects/${a}/commits/${r}`,{headers:{Accept:"application/octet-stream"},responseType:"arraybuffer"});try{return new Uint8Array(n.data)}catch(e){throw TypeError("HTTP response was not binary data")}}),et=f(async({axios:e,params:t})=>{let{project_id:a,branch_slug:r,body:n}=t;await e.post(`v1/projects/${a}/branches/${encodeURIComponent(r)}/commits`,n,{headers:{"content-type":"application/json"}})}),ea=f(async({axios:e,params:t})=>{let{project_id:a}=t;return(await e.get(`v1/projects/${a}/commits`)).data}),er=f(async({axios:e,params:t})=>{let{project_id:a,branch_name:r,file_path:n}=t;return(await e.get(`v1/project/${a}/branches/${r}/export/${n}`)).data}),en=f(async({axios:e,params:t})=>{let{project_id:a,branch_name:r,file_path:n}=t;return(await e.get(`v1/project/${a}/branches/${r}/export-devops/${n}`)).data}),eo=f(async({axios:e,params:t,jwtToken:a})=>{let{project_id:r,branch_name:n,file_path:o}=t;try{return(await e.get(`projects/${encodeURIComponent(r)}/branches/${encodeURIComponent(n)}/export/${o}`,{headers:{...a?{Authorization:a?`Bearer ${a}`:void 0}:{},Accept:"*/*"},responseType:"blob"})).data}catch(t){let e=t.response;if(e){let t=e.headers["content-type"];if((0,Y.IQ)(t)&&[400,401,402,403,404,409,429,500].includes(e.status))throw JSON.parse(await e.data.text())}throw Y.rE}}),el=f(async({axios:e,params:t})=>{let{workspace_id:a,domain_name:r}=t;return(await e.post(`v1/workspaces/${a}/custom-domain`,{domain_name:r})).data}),ei=f(async({axios:e,params:t})=>{let{workspace_id:a,domain_name:r}=t;return(await e.put(`v1/workspaces/${a}/custom-domain`,{domain_name:r})).data}),es=f(async({axios:e,params:t})=>{let{workspace_id:a}=t;return(await e.delete(`v1/workspaces/${a}/custom-domain`)).data}),ec=f(async({axios:e,params:t})=>{let{group_id:a}=t;return(await e.get(`v1/groups/${a}/members`,{headers:{"Cache-Control":"no-cache",Pragma:"no-cache",Expires:"0"}})).data}),eu=f(async({axios:e,params:t})=>{let{group_id:a}=t;return(await e.get(`v1/groups/${a}/invites`,{headers:{"Cache-Control":"no-cache",Pragma:"no-cache",Expires:"0"}})).data}),ed=f(async({axios:e,params:t})=>{let{group_id:a,invite_id:r}=t;await e.delete(`v1/groups/${a}/invites/${r}`)}),em=f(async({axios:e,params:t})=>{let{group_id:a,user_id:r}=t;await e.delete(`v1/groups/${a}/members/${r}`)}),ep=f(async({axios:e,params:t})=>{let{group_id:a}=t;return(await e.put(`v1/groups/${a}/members`,t)).data}),eg=f(async({axios:e,params:t})=>{let{workspace_id:a}=t;return(await e.post(`v1/workspaces/${a}/groups`,t)).data}),eh=f(async({axios:e,params:t})=>{let{group_id:a}=t;return(await e.patch(`v1/groups/${a}`,t)).data}),ef=f(async({axios:e,params:t})=>{let{workspace_id:a,user_id:r,role:n}=t;return(await e.put(`v1/workspaces/${a}/members/${r}`,{role:n})).data}),eb=f(async({axios:e,params:t})=>(await e.get(`v1/groups/${encodeURIComponent(t.group_id)}/assignable-members`)).data),ey=f(async({axios:e,params:t})=>{let{workspace_id:a}=t,r=await e.get(`v1/workspaces/${a}/machine-principals`);return null!==n()(r.headers.link)&&console.error("frontend is not setup for pagination, but server sent pagination headers"),r.data}),ew=f(async({jwtToken:e,axios:t,params:a})=>{let{workspaceSlug:r,projectSlug:n,branchSlug:o,exportUri:l}=a;return(await t.get(`v1/projects/${r}/${n}/nodes/${l}`,{params:{branch:o,token:e}})).data}),eE=f(async({axios:e,params:t})=>{let a=o.stringify(t,{arrayFormat:"brackets"});return(await e.get(`/v1/overrides/updates?${a.toString()}`)).data}),ev=f(async({axios:e,params:t})=>{let{project_id:a,branch_slug:r}=t;return(await e.get(`/v1/projects/${a}/branches/${r}/overrides`)).data}),ek=f(async({axios:e,params:t})=>(await e.post("/v1/overrides",t)).data),e_=f(async({axios:e,params:t})=>{let a=t.override_id;return(await e.get(`/v1/overrides/${a}`)).data}),ex=f(async({axios:e,params:t})=>{let a=o.stringify(t,{arrayFormat:"brackets"});return(await e.get(`/v1/overrides?${a.toString()}`)).data}),eI=f(async({axios:e,params:t})=>{let{project_id:a,branch_slug:r}=t;return(await e.get(`/v1/projects/${a}/branches/${r}`)).data}),eS=f(async({axios:e,params:t})=>{let{override_id:a,...r}=t;return(await e.patch(`/v1/overrides/${a}`,r)).data});var ej=a(15990);let eC=f(async({axios:e,params:t})=>{let{project_id:a}=t;await e.delete(`v1/projects/${a}`)}),eP=f(async({axios:e,params:t})=>(await e.get(`v1/projects/${encodeURIComponent(t.project_id)}/assignable-members`)).data),eA=f(async({axios:e,params:t})=>{let{project_id:a,role:r,email:n}=t;return(await e.post(`v1/projects/${a}/members`,{role:r,email:n})).data}),eB=f(async({axios:e,params:t})=>{let a=t.project_id,r=parseInt(a);return!isNaN(r)&&isFinite(r)&&(a=(0,ej.encodeID)("prj",r),t={...t,project_id:a}),(await e.patch(`v1/projects/${a}`,t)).data}),eD=f(async({axios:e,params:t})=>{let{project_id:a,user_id:r,role:n}=t;return(await e.patch(`v1/projects/${a}/members/${r}`,{role:n})).data}),eT=f(async({axios:e,params:t})=>{let{project_id:a,group_id:r}=t;return(await e.put(`v1/projects/${a}/group`,{group_id:r})).data}),eF=f(async({axios:e,params:t})=>{let{project_id:a,user_id:r}=t;return(await e.put(`v1/projects/${a}/ownership`,{user_id:r})).data}),e$=f(async({axios:e,params:t})=>{let{project_id:a}=t;return(await e.post(`v1/projects/${a}/pin`)).data}),eN=f(async({axios:e,params:t})=>{let{project_id:a}=t;return(await e.delete(`v1/projects/${a}/pin`)).data}),eU=f(async({axios:e,params:t})=>{let{workspace_id:a,...r}=t;return(await e.get(`v1/workspaces/${a}/projects`,{params:{...r}})).data}),eM=f(async({axios:e,params:t})=>{let{name:a,group_id:r,visibility:n,workspace_id:o,flavor:l,file:i}=t;return(await e.post(`v1/workspaces/${o}/projects`,{name:a,group_id:r,visibility:n,flavor:l,file:i})).data}),eR=f(async({axios:e,params:t})=>{let{project_id:a,release:r}=t;return(await e.get(`v1/projects/${a}/releases/${r}`)).data}),eW=f(async({axios:e,params:t})=>{let{project_id:a,min_release:r}=t;return(await e.get(`v1/projects/${a}/releases/${r?`?min_release=${r}`:""}`)).data}),eL=f(async({axios:e,params:t})=>{let{project_id:a}=t;return(await e.get(`v1/projects/${a}`)).data}),eG=f(async({axios:e,params:t})=>{let a=t.project_id,r={limit:"number"==typeof t.limit&&t.limit>=1?t.limit:void 0,offset:"number"==typeof t.offset&&t.offset>0?t.offset:void 0},o=await e.get(`v1/projects/${encodeURIComponent(a)}/members`,{params:r}),l=n()(o.headers.link);return{...o.data,previousPageParams:eO(l?.previous,a),nextPageParams:eO(l?.next,a)}});function eO(e,t){return e?{project_id:t,limit:ez(e.limit),offset:ez(e.offset)}:void 0}function ez(e){return e?.length?parseInt(e):void 0}let eq=f(async({axios:e,params:t})=>{let{workspace_id:a,user_id:r,role:n}=t;return(await e.get(`v1/workspaces/${a}/groups`,{params:{...r&&{user_id:r},...n&&{role:n}},headers:{"Cache-Control":"no-cache",Pragma:"no-cache",Expires:"0"}})).data}),eV=f(async({axios:e,params:t})=>{let{group_id:a}=t;return(await e.get(`v1/groups/${a}`)).data}),eH=f(async({axios:e,params:t})=>{let{group_id:a}=t;await e.delete(`v1/groups/${a}`)}),eQ=f(async({axios:e,params:t})=>{let{workspace_id:a}=t;return(await e.put(`v1/workspaces/${a}/cancel-delete`)).data}),eK=f(async({axios:e,params:t})=>{let{project_id:a,kind:r,credentials:n,name:o}=t;return(await e.post(`v1/projects/${a}/service-accounts`,{project_id:a,kind:r,credentials:n,name:o})).data}),eJ=f(async({axios:e,params:t})=>{let{project_id:a}=t;return(await e.get(`v1/projects/${a}/service-accounts`)).data}),eY=f(async({axios:e,params:t})=>{let{project_id:a,project_service_account_id:r,credentials:n,name:o}=t;return(await e.patch(`v1/projects/${a}/service-accounts/${r}`,{credentials:n,name:o})).data}),eX=f(async({axios:e,params:t})=>{let{project_id:a,project_service_account_id:r}=t;return(await e.delete(`v1/projects/${a}/service-accounts/${r}`)).data}),eZ=f(async({axios:e,params:t})=>{let{project_service_account_id:a,project_id:r,credentials:n}=t;return(await e.post(`v1/projects/${r}/service-accounts/test`,{credentials:n,project_service_account_id:a})).data}),e0=f(async({axios:e,params:t})=>{let{workspace_id:a}=t;return(await e.get(`v1/workspaces/${a}/state`)).data}),e1=f(async({axios:e,params:t})=>(await e.post(`v1/workspaces/${t.workspace_id}/external-projects/users`,t)).data),e2=f(async({axios:e,params:t})=>{let a=t.workspace_id,r={my_teams:!0===t.my_teams?"true":void 0,limit:"number"==typeof t.limit&&t.limit>=1?t.limit:void 0,offset:"number"==typeof t.offset&&t.offset>0?t.offset:void 0,order_by:t.order_by,search:t.search?.length?t.search:void 0},o=await e.get(`v1/workspaces/${encodeURIComponent(a)}/teams`,{params:r}),l=n()(o.headers.link);return{...o.data,previousPageParams:e8(l?.previous,a),nextPageParams:e8(l?.next,a)}}),e4=f(async({axios:e,params:{team_id:t}})=>(await e.get(`v1/teams/${encodeURIComponent(t)}`)).data),e3=f(async({axios:e,params:{workspace_id:t,...a}})=>(await e.post(`v1/workspaces/${encodeURIComponent(t)}/teams`,a)).data);function e5(e){return e?.length?parseInt(e):void 0}function e8(e,t){var a;return e?{workspace_id:t,my_teams:(a=e.my_teams,a=a?.trim()??"",!!/^true$/i.test(a)||!/^false$/i.test(a)&&void 0),limit:e5(e.limit),offset:e5(e.offset),order_by:e.order_by,search:e.search}:void 0}let e6=f(async({axios:e,params:{team_id:t,...a}})=>(await e.patch(`v1/teams/${encodeURIComponent(t)}`,a)).data),e7=f(async({axios:e,params:{team_id:t}})=>{await e.delete(`v1/teams/${encodeURIComponent(t)}`)}),e9=f(async({axios:e,params:{team_id:t,...a}})=>{await e.delete(`v1/teams/${encodeURIComponent(t)}/members`,{data:a})}),te=f(async({axios:e,params:{team_id:t,...a}})=>(await e.put(`v1/teams/${encodeURIComponent(t)}/members`,a)).data),tt=f(async({axios:e,params:{project_id:t,...a}})=>(await e.put(`v1/projects/${encodeURIComponent(t)}/teams`,a)).data),ta=f(async({axios:e,params:{project_id:t,team_id:a}})=>{await e.delete(`v1/projects/${encodeURIComponent(t)}/teams/${encodeURIComponent(a)}`)}),tr=f(async({axios:e,params:t})=>{let a=t.team_id,r={limit:"number"==typeof t.limit&&t.limit>=1?t.limit:void 0,offset:"number"==typeof t.offset&&t.offset>0?t.offset:void 0},o=await e.get(`v1/teams/${encodeURIComponent(a)}/members`,{params:r}),l=n()(o.headers.link);return{...o.data,previousPageParams:tn(l?.previous,a),nextPageParams:tn(l?.next,a)}});function tn(e,t){return e?{team_id:t,limit:e5(e.limit),offset:e5(e.offset)}:void 0}let to=f(async({axios:e,params:t})=>{let a=t.team_id,r={limit:"number"==typeof t.limit&&t.limit>=1?t.limit:void 0,offset:"number"==typeof t.offset&&t.offset>0?t.offset:void 0,search:t.search?.length?t.search:void 0},o=await e.get(`v1/teams/${encodeURIComponent(a)}/assignable-members`,{params:r}),l=n()(o.headers.link);return{...o.data,previousPageParams:tl(l?.previous,a),nextPageParams:tl(l?.next,a)}});function tl(e,t){return e?{team_id:t,limit:e5(e.limit),offset:e5(e.offset),search:e.search}:void 0}let ti=f(async({axios:e,params:t})=>{let{project_id:a}=t;return(await e.delete(`v1/projects/${a}/images`)).data}),ts=f(async({axios:e,params:t})=>{let{project_id:a,branch_id:r,filepath:n,file:o}=t;return(await e.post(`v1/projects/${a}/branches/${r}/images`,{filepath:n,file:o},{maxBodyLength:1/0})).data}),tc=f(async({axios:e,params:t})=>{let{project_id:a,branch_id:r,images:n}=t;return(await e.post(`v1/projects/${a}/branches/${r}/images-batch`,{images:n})).data}),tu=f(async({axios:e,params:t})=>{let{project_id:a,branch_id:r,filepath:n}=t;return(await e.get(`v1/projects/${a}/branches/${r}/images/${encodeURIComponent(n)}`,{headers:{accept:"application/json"}})).data}),td=f(async({axios:e,params:t})=>{let{image_hash:a}=t;return(await e.get(`v1/images/${a}`,{headers:{accept:"application/json"}})).data}),tm=f(async({axios:e,params:t})=>{let{image_hash:a}=t,r=await e.get(`v1/images/${a}`,{headers:{accept:"image/*"},responseType:"arraybuffer"});try{return new Uint8Array(r.data)}catch(e){throw TypeError("HTTP response was not binary data")}});var tp=a(83676);let tg=f(async({axios:e,params:t})=>{try{await e.post("/emails/confirm",{confirmation_code:t.confirmation_code})}catch(t){if((0,Y.F0)(t))throw t;if((0,tp.isPlainObject)(t)&&422===t.code)throw{status:400,type:t.type,title:"Invalid confirmation code",invalid_parameters:[],detail:void 0,instance:void 0};let e=t.response;if(e){let t=e.headers["content-type"];if((0,Y.IQ)(t)&&[400,404,429,500].includes(e.status))throw JSON.parse(await e.data.text())}throw Y.rE}}),th=f(async({axios:e,params:t})=>{try{await e.post(`/workspaces/${encodeURIComponent(t.workspace_id)}/member-emails/confirm`,{confirmation_code:t.confirmation_code})}catch(t){if((0,Y.F0)(t))throw t;if((0,tp.isPlainObject)(t)&&422===t.code)throw{status:400,type:t.type,title:"Invalid confirmation code",invalid_parameters:[],detail:void 0,instance:void 0};let e=t.response;if(e){let t=e.headers["content-type"];if((0,Y.IQ)(t)&&[400,404,429,500].includes(e.status))throw JSON.parse(await e.data.text())}throw Y.rE}}),tf=f(async({axios:e,params:t})=>{let{vcs_integration_id:a,state:r,scope:n}=t;return(await e.post(`v1/vcs-integrations/${a}/oauth-url`,{state:r,scope:n})).data}),tb=f(async({axios:e,params:t})=>{let{vcs_integration_id:a,version_control_org_slug:r,...n}=t;return(await e.get(`v1/vcs-integrations/${a}/organizations/${r}/repositories`,{params:{...n}})).data}),ty=f(async({axios:e,params:t})=>{let{vcs_integration_id:a,version_control_org_slug:r,...n}=t;return(await e.post(`v1/vcs-integrations/${a}/organizations/${r}/repositories`,{...n})).data}),tw=f(async({axios:e,params:t})=>{let{vcs_integration_id:a,version_control_org_slug:r,version_control_repo_slug:n,...o}=t;return(await e.post(`v1/vcs-integrations/${a}/organizations/${r}/repositories/${n}/webhooks`,{...o})).data}),tE=f(async({axios:e,params:t})=>{let{vcs_integration_id:a,version_control_org_slug:r,version_control_repo_slug:n}=t;return(await e.delete(`v1/vcs-integrations/${a}/organizations/${r}/repositories/${n}/webhooks`)).data}),tv=f(async({axios:e,params:t})=>{let{vcs_integration_id:a}=t;return(await e.get(`v1/vcs-integrations/${a}/organizations`)).data}),tk=f(async({axios:e,params:t})=>{let{workspace_id:a,...r}=t;return(await e.post(`v1/workspaces/${a}/vcs-integrations/test`,{...r})).data}),t_=f(async({axios:e,params:t})=>{let{vcs_integration_id:a,url:r}=t;return(await e.get(`v1/vcs-integrations/${a}/repositories`,{params:{url:r}})).data}),tx=f(async({axios:e,params:t})=>{let{vcs_integration_id:a,project_id:r}=t;return(await e.get(`v1/vcs-integrations/${a}/projects/${r}/basic-auth-credentials`)).data}),tI=f(async({axios:e,params:t})=>{let{vcs_integration_id:a,...r}=t;return(await e.patch(`v1/vcs-integrations/${a}`,r)).data}),tS=f(async({axios:e,params:t})=>{let{workspace_id:a}=t;return(await e.delete(`v1/workspaces/${a}`)).data}),tj=f(async({axios:e,params:t})=>{let{workspace_id:a}=t;return(await e.get(`v1/workspaces/${a}/items`)).data}),tC=f(async({axios:e,params:t})=>{let{project_id:a}=t;return(await e.get(`v1/projects/${a}/contributors`)).data}),tP=f(async({axios:e,params:{workspace_id:t,...a}})=>(await e.patch(`v1/workspaces/${t}/members`,a)).data),tA=f(async({axios:e,params:{workspace_id:t,...a}})=>(await e.put(`v1/workspaces/${t}/join-requests`,a)).data),tB=f(async({axios:e,params:{workspace_id:t,...a}})=>(await e.patch(`v1/workspaces/${encodeURIComponent(t)}`,a)).data),tD=f(async({axios:e,params:{workspace_id:t,...a}})=>{await e.delete(`v1/workspaces/${encodeURIComponent(t)}/members`,{data:a})}),tT=f(async({axios:e,params:t})=>{let a=t.project_id;return(await e.put(`v1/projects/${a}/spectral-access-token`,{project_id:t.project_id})).data}),tF=f(async({axios:e,params:t})=>(await e.post("v1/workspaces/has-email",t)).data)},61164:(e,t,a)=>{"use strict";a.r(t),a.d(t,{MutationKeyRoots:()=>n,QueryKeyRoots:()=>r,branchImages:()=>te,branchesKeys:()=>m,groupKeys:()=>G,keys:()=>eS,machinePrincipalKeys:()=>e3,projectReleaseKeys:()=>ea,projectsKeys:()=>et,safelyEncode:()=>d,stoplightDocKeys:()=>eY,teamKeys:()=>b,useAddGroupMember:()=>J,useAddGroupMembers:()=>H,useAddMachinePrincipal:()=>e8,useAddOrUpdateGroupMember:()=>X,useAddOrUpdateProjectTeam:()=>I,useAddOrUpdateTeamMember:()=>x,useAddProjectMembers:()=>el,useBulkUpdateWorkspaceJoinRequests:()=>M,useBulkUpdateWorkspaceMembers:()=>U,useCancelBillingSubscription:()=>eQ,useCancelDeleteWorkspace:()=>T,useChangeBillingInterval:()=>eH,useCheckPromoCodeValidity:()=>eJ,useCompleteStripeCheckoutSession:()=>eL,useConfirmEmailAddressMutation:()=>ta,useConfirmWorkspaceMemberEmailAddress:()=>L,useCreateCustomDomain:()=>e1,useCreateCustomerPortalSession:()=>eG,useCreateGroup:()=>Q,useCreateProject:()=>er,useCreateProjectServiceAccount:()=>ev,useCreateStripeCheckoutSession:()=>eW,useCreateTeam:()=>E,useDeleteAllImages:()=>tt,useDeleteCustomDomain:()=>e4,useDeleteGroup:()=>eE,useDeleteMachinePrincipal:()=>e7,useDeleteProject:()=>en,useDeleteProjectServiceAccount:()=>ex,useDeleteTeam:()=>k,useDeleteTeamMember:()=>_,useDeleteWorkspace:()=>D,useDeleteWorkspaceMember:()=>W,useDisableExtendedSSGs:()=>eF,useDowngradeBillingProduct:()=>eV,useEnableExtendedSSGs:()=>e$,useExportProjectNode:()=>e9,useGetBillingAccount:()=>eR,useGetBillingInvoices:()=>ez,useGetBillingProducts:()=>eM,useGetBranch:()=>g,useGetDefaultStyleGuides:()=>eP,useGetExtendedSSGs:()=>eD,useGetExtendedSSGsForProjects:()=>eT,useGetFsDocForBranch:()=>eX,useGetFsDocForCommit:()=>e0,useGetGroup:()=>ew,useGetGroupInvites:()=>q,useGetGroupMembers:()=>z,useGetGroups:()=>O,useGetMergedFsDocForBranches:()=>eZ,useGetProject:()=>ef,useGetProjectBranches:()=>p,useGetProjectNode:()=>ej,useGetProjectRelease:()=>eg,useGetProjectReleases:()=>eh,useGetProjectServiceAccounts:()=>ek,useGetStyleGuides:()=>eC,useGetTeam:()=>w,useGetWorkspaceActivity:()=>i,useGetWorkspaceItems:()=>F,useGetWorkspaceItemsForExtendedSSG:()=>$,useGetWorkspaceState:()=>B,useInvalidateProjectMembers:()=>ey,useListGroupAssignableMembersQuery:()=>ee,useListMachinePrincipals:()=>e5,useListProjectAssignableMembersQuery:()=>eo,useListProjectContributors:()=>N,useListProjectMembersQuery:()=>eb,useListTeamAssignableMembersQuery:()=>C,useListTeamMembersQuery:()=>j,useListTeamsQuery:()=>y,useListWorkspaceDrafts:()=>f,useListWorkspaceNodes:()=>eB,useLogin:()=>eU,useOptimisticallyUpdateProjectsList:()=>ep,usePinUnpinProject:()=>ed,useProjectsList:()=>em,useProrationPreview:()=>eK,useRefreshWorkspaceState:()=>A,useRemoveGroupInvite:()=>V,useRemoveGroupMember:()=>Y,useRemoveTeamFromProject:()=>S,useSetDefaultStyleGuide:()=>eA,useSetExtendedSSGs:()=>eN,useTestProjectServiceAccount:()=>eI,useUpdateBillingAccount:()=>eO,useUpdateCustomDomain:()=>e2,useUpdateGroup:()=>K,useUpdateMachinePrincipal:()=>e6,useUpdateProject:()=>ei,useUpdateProjectGroup:()=>ec,useUpdateProjectMember:()=>es,useUpdateProjectOwnership:()=>eu,useUpdateProjectServiceAccount:()=>e_,useUpdateTeam:()=>v,useUpdateVcsIntegration:()=>tr,useUpdateWorkspace:()=>R,useUpdateWorkspaceMember:()=>Z,useUpgradeBillingProduct:()=>eq,useUpsertBranch:()=>h,workspaceKeys:()=>P});var r,n,o=a(2188),l=a(87017);!function(e){e.activity="activity",e.auth="auth",e.billing="billing",e.branches="branches",e.groups="groups",e.groupMembers="groupMembers",e.groupInvites="groupInvites",e.projects="projects",e.projectNode="projectNode",e.projectRelease="projectRelease",e.projectMembers="projectMembers",e.projectServiceAccounts="projectServiceAccounts",e.stoplightDoc="stoplightDoc",e.teams="teams",e.workspaces="workspaces",e.gitDisconnect="gitDisconnect",e.machinePrincipals="machinePrincipals",e.extendedSSGs="extendedSSGs"}(r||(r={})),function(e){e.createCustomDomain="createCustomDomain",e.createGroup="createGroup",e.createProject="createProject",e.addMember="addMember",e.addOrUpdateTeamMember="addOrUpdateTeamMember",e.removeMember="removeMember",e.removeGroupInvite="removeGroupInvite",e.editGroup="editGroup",e.updateCustomDomain="updateCustomDomain",e.updateGroup="updateGroup",e.updateProjectOwnership="updateProjectOwnership",e.editMember="editMember",e.deleteCustomDomain="deleteCustomDomain",e.deleteGroup="deleteGroup",e.deleteProject="deleteProject",e.deleteTeam="deleteTeam",e.deleteTeamMember="deleteTeamMember",e.deleteAllImages="deleteAllImages",e.updateWorkspaceMember="updateWorkspaceMember",e.updateProjectGroup="updateProjectGroup",e.updateProject="updateProject",e.createProjectServiceAccount="createProjectServiceAccount",e.updateProjectServiceAccount="updateProjectServiceAccount",e.deleteProjectServiceAccount="deleteProjectServiceAccount",e.createTeam="createTeam",e.createCommit="createCommit",e.upsertBranch="upsertBranch",e.updateTeam="updateTeam",e.addOrUpdateProjectTeam="addOrUpdateProjectTeam",e.setDefaultStyleGuide="setDefaultStyleGuide",e.removeTeamFromProject="removeTeamFromProject",e.bulkUpdateWorkspaceMembers="bulkUpdateWorkspaceMembers",e.bulkUpdateWorkspaceJoinRequests="bulkUpdateWorkspaceJoinRequests",e.updateWorkspace="updateWorkspace",e.deleteWorkspaceMember="deleteWorkspaceMember",e.addMachinePrincipal="addMachinePrincipal",e.editExtendedSSGs="extendedSSGs",e.updateVcsIntegration="updateVcsIntegration",e.confirmWorkspaceMemberEmailAddress="confirmWorkspaceMemberEmailAddress"}(n||(n={}));let i=e=>(0,l.useInfiniteQuery)([r.activity,...Object.values(e)],({pageParam:t={}})=>(0,o.getWorkspaceActivity)({...e,...t}),{keepPreviousData:!0,getNextPageParam:e=>e?.next?{before:e.next}:void 0,getPreviousPageParam:e=>e?.prev?{after:e.prev}:void 0});var s=a(15990),c=a(45250),u=a(14041);let d=(e,t)=>{let a=Number(e);return Number.isNaN(a)?e:(0,s.encodeID)(t,a)},m={all:[r.branches],lists:()=>[...m.all,"list"],list:e=>[...m.lists(),d(e,"prj")],details:()=>[...m.all,"detail"],detail:(e,t)=>[...m.details(),d(e,"prj"),t],drafts:e=>[...m.all,"drafts",{pinned:e?.pinned}]},p=(e,t,a)=>{let r=d(t.projectId||"","prj");return(0,l.useQuery)(m.list(r),()=>(0,o.listProjectBranches)(e,{project_id:r}),{enabled:!!t.projectId,...a})},g=(e,t,a)=>(0,l.useQuery)(m.detail(t.project_id,t.branch_slug),()=>(0,o.getProjectBranch)(e,t),{enabled:!!(t.project_id&&t.branch_slug),...a}),h=e=>{let t=(0,l.useQueryClient)();return(0,l.useMutation)([n.upsertBranch],t=>(0,o.upsertProjectBranch)(e,t),{onSuccess:(e,a)=>{t.setQueryData(m.detail(a.project_id,a.branch_slug),e),t.invalidateQueries(m.list(a.project_id))}})},f=(e,t,a)=>{let r={workspace_id:d(t.workspaceId||"","wk"),pinned:!!t.pinned};return(0,l.useQuery)(m.drafts(r),()=>(0,o.listWorkspaceDrafts)(e,r),{enabled:!!t.workspaceId,...a})},b={all:[r.teams],details:()=>[...b.all,"detail"],detail:e=>[...b.details(),e],memberLists:e=>[...b.detail(e.team_id),"members"],memberList:e=>[...b.memberLists(e),e.limit],assignableMemberLists:e=>[...b.detail(e),"assignable-members"],assignableMemberList:e=>[...b.assignableMemberLists(e.team_id),e.search?.length?e.search:void 0],lists:()=>[...b.all,"list"],list:(e,t)=>[...b.all,"list",t.workspace_id,!0===t.my_teams,t.limit,t.order_by,t.search?.length?t.search:void 0,e]},y=(e,t)=>{let a=(0,l.useInfiniteQuery)(b.list(e,t),({pageParam:a})=>(0,o.listTeams)(e,a??{workspace_id:t.workspace_id,my_teams:t.my_teams||void 0,limit:t.limit,order_by:t.order_by,search:t.search}),{retry:(e,t)=>{let a=t?.code??0;return e<3&&!(400<=a&&a<500)},getPreviousPageParam:e=>e.previousPageParams,getNextPageParam:e=>e.nextPageParams}),r=(0,u.useMemo)(()=>{let e=new Map;for(let t of a.data?.pages??[])for(let a of t.items)e.set(String(a.id),a);return e},[a.data]);return{...a,items:r}},w=(e,t,a)=>(0,l.useQuery)(b.detail(t.team_id),()=>(0,o.getTeam)(e,{team_id:t.team_id}),a),E=e=>{let t=(0,l.useQueryClient)();return(0,l.useMutation)([n.createTeam],t=>(0,o.createTeam)(e,{workspace_id:t.workspace_id,name:t.name,description:t.description,presentation:{icon:t.presentation?.icon||null,icon_color:t.presentation?.icon_color||null}}),{onSuccess:()=>{t.invalidateQueries(b.lists()),t.invalidateQueries(P.allState())}})},v=e=>{let t=(0,l.useQueryClient)();return(0,l.useMutation)([n.updateTeam],t=>(0,o.updateTeam)(e,t),{onSuccess:(e,{team_id:a})=>{t.invalidateQueries(b.detail(a)),t.invalidateQueries(b.lists())}})},k=e=>{let t=(0,l.useQueryClient)();return(0,l.useMutation)([n.deleteTeam],({teamId:t})=>(0,o.deleteTeam)(e,{team_id:t}),{onSuccess:()=>{t.invalidateQueries(b.lists()),t.invalidateQueries(P.allState()),t.invalidateQueries(et.details())}})},_=e=>{let t=(0,l.useQueryClient)();return(0,l.useMutation)([n.deleteTeamMember],({teamId:t,email:a})=>(0,o.removeTeamMember)(e,{team_id:t,email:a}),{onSuccess:(e,{teamId:a})=>{t.invalidateQueries(b.detail(a))}})},x=e=>{let t=(0,l.useQueryClient)();return(0,l.useMutation)([n.addOrUpdateTeamMember],t=>(0,o.addOrUpdateTeamMember)(e,t),{onSuccess:(e,{team_id:a})=>{t.invalidateQueries(b.detail(a))}})},I=e=>{let t=(0,l.useQueryClient)();return(0,l.useMutation)([n.addOrUpdateProjectTeam],t=>(0,o.addOrUpdateProjectTeam)(e,t),{onSuccess:(e,{project_id:a})=>{t.invalidateQueries(et.detail(a))}})},S=e=>{let t=(0,l.useQueryClient)();return(0,l.useMutation)([n.removeTeamFromProject],t=>(0,o.removeTeamFromProject)(e,t),{onSuccess:(e,{project_id:a,team_id:r})=>{t.invalidateQueries(et.detail(a)),t.invalidateQueries(b.detail(r))}})},j=(e,t)=>{let a=(0,l.useInfiniteQuery)(b.memberList(t),({pageParam:a})=>(0,o.listTeamMembers)(e,a??{team_id:t.team_id,limit:t.limit}),{retry:(e,t)=>{let a=t?.code??0;return e<3&&!(400<=a&&a<500)},getPreviousPageParam:e=>e.previousPageParams,getNextPageParam:e=>e.nextPageParams}),r=(0,u.useMemo)(()=>{let e=new Map;for(let t of a.data?.pages??[])for(let a of t.items)e.set(`${a.type}|${a.data?.email}`,a);return Array.from(e.values())},[a.data]);return{...a,items:r}},C=(e,t)=>(0,l.useQuery)(b.assignableMemberList(t),()=>(0,o.listTeamAssignableMembers)(e,t),{retry:(e,t)=>{let a=t?.code??0;return e<3&&!(400<=a&&a<500)}}),P={all:[r.workspaces],allState:()=>[...P.all,"state"],state:e=>[...P.all,"state",e],items:()=>[...P.all,"items"],extendedSSGs:e=>[...P.all,"extended_ssgs",e.ssg_id]},A=e=>{let t=(0,l.useQueryClient)();return{refresh:async()=>{e&&await t.invalidateQueries(P.state(e))}}},B=(e,{workspaceId:t},a)=>(t??=0,(0,l.useQuery)([...P.state(t),e||"anon"],()=>(0,o.getWorkspaceState)(e,{workspace_id:(0,s.encodeID)("wk",t)}),{enabled:!!t,...a})),D=e=>{let t=(0,l.useQueryClient)();return(0,l.useMutation)([r.workspaces],({workspaceId:t})=>(0,o.deleteWorkspace)(e,{workspace_id:(0,s.encodeID)("wk",t)}),{onSuccess:(e,{workspaceId:a})=>t.invalidateQueries(P.state(a))})},T=e=>{let t=(0,l.useQueryClient)();return(0,l.useMutation)([r.workspaces],({workspaceId:t})=>(0,o.cancelDeleteWorkspace)(e,{workspace_id:(0,s.encodeID)("wk",t)}),{onSuccess:(e,{workspaceId:a})=>t.invalidateQueries(P.state(a))})},F=(e,t,a)=>(0,l.useQuery)([...P.items(),e],()=>(0,o.getWorkspaceItems)(e,{workspace_id:(0,s.encodeID)("wk",t)}),{select(e){let t=[];return(a?.flavors?.length&&t.push(e=>"group"===e.type||!!a?.flavors?.includes(e.data.flavor)),0===t.length)?e:{...e,items:e.items.filter(e=>t.every(t=>t(e)))}},enabled:!!e}),$=(e,{workspaceId:t,ssg_id:a})=>{let{data:r}=F(e,t);return r?.items.filter(e=>"project"===e.type&&e.data.projectExtendedSSGs.find(e=>e.id==a))},N=(e,t)=>(0,l.useQuery)([et.detail((0,s.encodeID)("prj",t)),e],()=>(0,o.listProjectContributors)(e,{project_id:(0,s.encodeID)("prj",t)}),{enabled:!!e}),U=e=>{let t=(0,l.useQueryClient)();return(0,l.useMutation)([n.bulkUpdateWorkspaceMembers],t=>(0,o.bulkUpdateWorkspaceMembers)(e,t),{onSuccess:()=>{t.invalidateQueries(P.items())}})},M=e=>(0,l.useMutation)([n.bulkUpdateWorkspaceJoinRequests],t=>(0,o.bulkUpdateWorkspaceJoinRequests)(e,t),{}),R=e=>(0,l.useMutation)([n.updateWorkspace],t=>(0,o.updateWorkspace)(e,t),{}),W=e=>{let t=(0,l.useQueryClient)();return(0,l.useMutation)([n.deleteWorkspaceMember],t=>(0,o.removeWorkspaceMember)(e,t),{onSuccess:()=>{t.invalidateQueries(P.items()),t.invalidateQueries(b.all),t.invalidateQueries(r.projectMembers),t.invalidateQueries(r.groupMembers)}})},L=e=>(0,l.useMutation)([n.confirmWorkspaceMemberEmailAddress],({workspaceId:t,confirmationCode:a})=>(0,o.confirmWorkspaceMemberEmailAddress)(e,{workspace_id:(0,s.encodeID)("wk",t),confirmation_code:a}),{}),G={all:[r.groups],lists:()=>[...G.all,"list"],list:(e={})=>[...G.lists(),e],details:()=>[...G.all,"detail"],detail:e=>[...G.details(),e],assignableMemberLists:e=>[...G.detail(e),"assignable-members"],assignableMemberList:e=>[...G.assignableMemberLists(e.group_id)]},O=(e,t,a)=>{let r=a?(0,s.encodeID)("usr",a):void 0;return(0,l.useQuery)(G.list({userId:r}),()=>(0,o.getGroups)(e,{workspace_id:(0,s.encodeID)("wk",t),user_id:r}))},z=({jwtToken:e,group_id:t})=>(0,l.useQuery)([r.groupMembers,{group_id:t}],()=>(0,o.getGroupMembers)(e,{group_id:t})),q=({jwtToken:e,group_id:t})=>(0,l.useQuery)([r.groupInvites,{group_id:t}],()=>(0,o.getGroupInvites)(e,{group_id:t})),V=e=>{let t=(0,l.useQueryClient)();return(0,l.useMutation)([n.removeGroupInvite],({groupId:t,inviteId:a})=>(0,o.removeGroupInvite)(e,{group_id:t,invite_id:a}),{onSuccess:(e,{groupId:a})=>{t.invalidateQueries([r.groupInvites,{group_id:a}])}})},H=({jwtToken:e,groupId:t})=>{let[a,n]=u.useState([]),[i,s]=u.useState(!1),c=(0,l.useQueryClient)();return[{data:a,isLoading:i},u.useCallback(async a=>{let l=a.map(({...a})=>(0,o.addOrUpdateGroupMember)(e,{group_id:t,...a}));return s(!0),await Promise.all(l).then(e=>e.reduce((e,t)=>(e.push(t),e),[])).then(e=>{n(e),c.invalidateQueries([r.groupMembers,{group_id:t}]),c.invalidateQueries([r.groupInvites,{group_id:t}]),c.invalidateQueries(G.detail(t))}).finally(()=>s(!1))},[t,e,c])]},Q=e=>{let t=(0,l.useQueryClient)();return(0,l.useMutation)([n.createGroup],({workspaceId:t,name:a,description:r,visibility:n,icon:l,iconColor:i})=>(0,o.createGroup)(e,{workspace_id:t,name:a,slug:a,description:r,visibility:n,presentation:{icon:l,color:i}}),{onSuccess:()=>{t.invalidateQueries(G.lists()),t.invalidateQueries(P.items(),{refetchActive:!0})}})},K=e=>{let t=(0,l.useQueryClient)();return(0,l.useMutation)([n.updateGroup],({group_id:t,name:a,description:r,visibility:n,icon:l,iconColor:i})=>(0,o.updateGroup)(e,{group_id:t,name:a,description:r,visibility:n,presentation:{icon:l,color:i}}),{onSuccess:(e,a)=>{t.invalidateQueries(G.lists()),t.invalidateQueries(G.detail(a.group_id)),t.invalidateQueries(et.lists()),t.invalidateQueries(et.listsWithFilters({pinned:!0})),t.invalidateQueries(P.items())}})},J=e=>{let t=(0,l.useQueryClient)();return(0,l.useMutation)([n.addMember],({groupId:t,email:a,role:r})=>(0,o.addOrUpdateGroupMember)(e,{group_id:t,email:a,role:r}),{onSuccess:(e,{groupId:a})=>{t.invalidateQueries([r.groupMembers,{group_id:a}]),t.invalidateQueries(G.lists())}})},Y=e=>{let t=(0,l.useQueryClient)();return(0,l.useMutation)([n.removeMember],({groupId:t,userId:a})=>(0,o.removeGroupMember)(e,{group_id:t,user_id:a}),{onSuccess:(e,{groupId:a})=>{t.invalidateQueries([r.groupMembers,{group_id:a}]),t.invalidateQueries(G.lists()),t.invalidateQueries(G.detail(a))}})},X=e=>{let t=(0,l.useQueryClient)();return(0,l.useMutation)([n.editMember],({groupId:t,email:a,role:r})=>(0,o.addOrUpdateGroupMember)(e,{group_id:t,email:a,role:r}),{onSuccess:(e,{groupId:a})=>{t.invalidateQueries([r.groupMembers,{group_id:a}])}})},Z=e=>(0,l.useMutation)([n.updateWorkspaceMember],({workspaceId:t,userId:a,role:r})=>(0,o.updateWorkspaceMember)(e,{workspace_id:t,user_id:a,role:r})),ee=(e,t)=>(0,l.useQuery)(G.assignableMemberList(t),()=>(0,o.getGroupAssignableMembers)(e,t),{retry:(e,t)=>(t?.code??0)>=500&&e<3}),et={all:[r.projects],lists:()=>[...et.all,"list"],listsWithFilters:(e={})=>[...et.lists(),e],details:()=>[...et.all,"detail"],detail:e=>[...et.details(),e],assignableMemberLists:e=>[...et.detail(e),"assignable-members"],assignableMemberList:e=>[...et.assignableMemberLists(e.project_id)]},ea={all:[r.projectRelease],detail:(e,t)=>[ea.all,e,t,"detail"]},er=e=>{let t=(0,l.useQueryClient)();return(0,l.useMutation)([n.createProject],t=>(0,o.createProject)(e,t),{onSuccess:()=>{t.invalidateQueries(et.lists()),t.invalidateQueries(P.allState())}})},en=e=>{let t=(0,l.useQueryClient)();return(0,l.useMutation)([n.deleteProject],({projectId:t})=>(0,o.deleteProject)(e,{project_id:(0,s.encodeID)("prj",t)}),{onSuccess:()=>{t.invalidateQueries(et.lists()),t.invalidateQueries(P.allState())}})},eo=(e,t)=>(0,l.useQuery)(et.assignableMemberList(t),()=>(0,o.getProjectAssignableMembers)(e,t),{retry:(e,t)=>(t?.code??0)>=500&&e<3}),el=e=>{let[t,a]=u.useState([]),[n,i]=u.useState(!1),s=(0,l.useQueryClient)();return[{data:t,isAddingUsers:n},u.useCallback(async t=>{let n=t.map(({projectId:t,...a})=>(0,o.addProjectMember)(e,{project_id:t,...a}));return i(!0),await Promise.all(n).then(e=>e).then(e=>{a(e),s.invalidateQueries([r.projectMembers]),s.invalidateQueries([r.groupMembers])}).finally(()=>i(!1))},[e,s])]},ei=e=>{let t=(0,l.useQueryClient)();return(0,l.useMutation)([n.updateProject],t=>(0,o.updateProject)(e,t),{onSuccess:e=>{t.invalidateQueries(et.lists(),{refetchActive:!0}),t.invalidateQueries(et.listsWithFilters({pinned:!0}),{refetchActive:!0}),t.invalidateQueries(P.items()),t.invalidateQueries(et.detail(e.id))}})},es=e=>(0,l.useMutation)([n.editMember],({projectId:t,userId:a,role:r})=>(0,o.updateProjectMember)(e,{project_id:(0,s.encodeID)("prj",t),user_id:(0,s.encodeID)("usr",a),role:r})),ec=e=>{let t=(0,l.useQueryClient)();return(0,l.useMutation)([n.updateProjectGroup],({projectId:t,groupId:a})=>(0,o.updateProjectGroup)(e,{project_id:(0,s.encodeID)("prj",t),group_id:a}),{onSuccess:()=>{t.invalidateQueries(et.lists(),{refetchActive:!0}),t.invalidateQueries(et.listsWithFilters({pinned:!0}),{refetchActive:!0}),t.invalidateQueries(P.items())}})},eu=e=>{let t=(0,l.useQueryClient)();return(0,l.useMutation)([n.updateProjectOwnership],({projectId:t,userId:a})=>(0,o.updateProjectOwnership)(e,{project_id:(0,s.encodeID)("prj",t),user_id:(0,s.encodeID)("usr",a)}),{onSuccess:()=>{t.invalidateQueries(et.lists(),{refetchActive:!0}),t.invalidateQueries(et.listsWithFilters({pinned:!0}),{refetchActive:!0}),t.invalidateQueries(P.items())}})},ed=e=>{let t=(0,l.useQueryClient)();return(0,l.useMutation)(({projectId:t,pinned:a})=>a?(0,o.pinProject)(e,{project_id:(0,s.encodeID)("prj",t)}):(0,o.unpinProject)(e,{project_id:(0,s.encodeID)("prj",t)}),{async onMutate({projectId:e,pinned:a}){let r=(0,s.encodeID)("prj",e),n=et.lists();await t.cancelQueries(n);let o=t.getQueryData(n);if(o){var l;t.setQueryData(n,(l=e=>({...e,pinned:a}),{...o,items:o.items.map(e=>e.id===r?l(e):e)}))}return{previousList:o}},onError(e,a,r){r&&r.previousList&&t.setQueryData(et.lists(),r.previousList)},onSettled:()=>{t.invalidateQueries(et.lists(),{refetchActive:!1}),t.invalidateQueries(et.listsWithFilters({pinned:!0}),{refetchActive:!0}),t.invalidateQueries(P.items()),t.invalidateQueries(m.drafts({pinned:!0}),{refetchActive:!0})}})},em=(e,t,a)=>{let{workspaceId:r,pinned:n,...i}=t;return(0,l.useQuery)(n||!c.isEmpty(i)?[...et.listsWithFilters({pinned:n,...i}),e||"anon"]:[...et.lists(),e||"anon"],()=>(0,o.projects)(e,{workspace_id:(0,s.encodeID)("wk",r),...n&&{pinned:n.toString()},...i}),{select(e){let a=[];if(t.groupId&&a.push(e=>e.group?.id==t.groupId),t.nameSearch){let e=t.nameSearch.toLowerCase();a.push(t=>t.name.toLowerCase().includes(e))}return 0===a.length?e.items:e.items.filter(e=>a.every(t=>t(e)))},...a})};function ep(){let e=(0,l.useQueryClient)();return u.useCallback(async t=>{let a=et.lists();await e.cancelQueries(a);let r=e.getQueryData(a);return r&&t&&e.setQueryData(a,{...r,items:r.items.map(t)}),{confirm:()=>e.invalidateQueries(et.lists(),{refetchActive:!1}),restore(){r&&e.setQueryData(et.lists(),r)},refetch:()=>e.invalidateQueries(et.lists())}},[e])}let eg=(e,t,a)=>(0,l.useQuery)(ea.detail((0,s.encodeID)("prj",t.projectId),t.releaseId),()=>(0,o.getProjectRelease)(e,{project_id:(0,s.encodeID)("prj",t.projectId),release:t.releaseId}),a),eh=(e,t,a)=>(0,l.useQuery)([r.projectRelease,t.projectId],()=>(0,o.getProjectReleasesList)(e,{project_id:(0,s.encodeID)("prj",t.projectId),...t.min_release&&{min_release:t.min_release},...t.max_release&&{max_release:t.max_release}}),a),ef=(e,t,a)=>(0,l.useQuery)(et.detail((0,s.encodeID)("prj",t.projectId)),()=>(0,o.getProject)(e,{project_id:(0,s.encodeID)("prj",t.projectId)}),a),eb=(e,t)=>{let a=(0,l.useInfiniteQuery)([r.projectMembers,t],({pageParam:a})=>(0,o.listProjectMembers)(e,a??{project_id:t.project_id,limit:t.limit}),{retry:(e,t)=>{let a=t?.code??0;return e<3&&!(400<=a&&a<500)},getPreviousPageParam:e=>e.previousPageParams,getNextPageParam:e=>e.nextPageParams}),n=(0,u.useMemo)(()=>{let e=new Map;for(let t of a.data?.pages??[])for(let a of t.items)e.set(`${a.type}|${a.data?.email}`,a);return Array.from(e.values())},[a.data]);return{...a,items:n}},ey=e=>{let t=(0,l.useQueryClient)();return function(){t.invalidateQueries([r.projectMembers,{project_id:e}])}},ew=(e,t)=>(0,l.useQuery)(G.detail(t),()=>(0,o.getGroup)(e,{group_id:t}),{enabled:!!(t&&e)}),eE=e=>{let t=(0,l.useQueryClient)();return(0,l.useMutation)([n.deleteGroup],({groupId:t})=>(0,o.deleteGroup)(e,{group_id:t}),{onSuccess:()=>{t.invalidateQueries(G.lists()),t.invalidateQueries(et.lists(),{refetchActive:!0}),t.invalidateQueries(et.listsWithFilters({pinned:!0}),{refetchActive:!0}),t.invalidateQueries(P.items(),{refetchActive:!0})}})},ev=e=>{let t=(0,l.useQueryClient)();return(0,l.useMutation)([n.createProjectServiceAccount],({projectId:t,kind:a,credentials:r,name:n})=>(0,o.createProjectServiceAccount)(e,{project_id:t,kind:a,credentials:r,name:n}),{onSuccess:(e,a)=>{t.setQueryData([r.projectServiceAccounts,{project_id:a.projectId}],e)}})},ek=({jwtToken:e,project_id:t,options:a})=>(0,l.useQuery)([r.projectServiceAccounts,{project_id:t}],()=>(0,o.getProjectServiceAccounts)(e,{project_id:t}),a),e_=e=>{let t=(0,l.useQueryClient)();return(0,l.useMutation)([n.updateProjectServiceAccount],({projectId:t,serviceAccountId:a,credentials:r,name:n})=>(0,o.updateProjectServiceAccount)(e,{project_id:t,project_service_account_id:a,credentials:r,name:n}),{onSuccess:async e=>{await t.invalidateQueries([r.projectServiceAccounts,{project_id:e}])}})},ex=e=>(0,l.useMutation)([n.deleteProjectServiceAccount],({project_id:t,project_service_account_id:a})=>(0,o.deleteProjectServiceAccount)(e,{project_id:t,project_service_account_id:a})),eI=e=>(0,l.useMutation)([r.projectServiceAccounts],({project_service_account_id:t,project_id:a,credentials:r})=>(0,o.testProjectServiceAccount)(e,{project_service_account_id:t,project_id:a,credentials:r})),eS={listsForStyleGuides:(e={})=>[...et.lists(),"styleguides",e],listsForDefaultStyleGuides:(e={})=>[...et.lists(),"styleguides","default",e],listsForProjectExtendedSSGs:e=>[r.extendedSSGs,"projects",e]},ej=(e,t,a)=>(0,l.useQuery)([r.projectNode,t.project_id,t.node_id,t.branch],()=>(0,o.getProjectNode)(e,t),a),eC=(e,t,a)=>(0,l.useQuery)([...eS.listsForStyleGuides(t)],()=>(0,o.getStyleGuides)(e,t),a),eP=(e,{workspaceId:t,visibility:a},r)=>(0,l.useQuery)([...eS.listsForDefaultStyleGuides({workspaceId:t})],()=>(0,o.getDefaultStyleGuides)(e,{workspace_id:(0,s.encodeID)("wk",t),...a&&{visibility:a}}),r),eA=(e,{workspaceId:t})=>{let a=(0,l.useQueryClient)();return(0,l.useMutation)([n.setDefaultStyleGuide],t=>(0,o.setDefaultStyleGuideProject)(e,t),{onSuccess:()=>{a.invalidateQueries(eS.listsForDefaultStyleGuides({workspaceId:t}),{refetchActive:!0})}})},eB=(e,t,a)=>(0,l.useQuery)([r.workspaces,t.workspaceId,t.search],()=>(0,o.listWorkspaceNodes)(e,{...t,workspace_id:(0,s.encodeID)("wk",t.workspaceId)}),a),eD=(e,t,a)=>{let{project_id:r}=t;return(0,l.useQuery)([eS.listsForProjectExtendedSSGs(r)],()=>(0,o.getExtendedSSGs)(e,{...t,project_id:r}),a)},eT=(e,t)=>{let{projectIds:a}=t;return(0,l.useQueries)(a.map(a=>({queryKey:eS.listsForProjectExtendedSSGs(a),queryFn:async()=>{let r=await (0,o.getExtendedSSGs)(e,{...t,project_id:a});return{project_id:a,extendedSSGS:r}}})))},eF=e=>{let t=(0,l.useQueryClient)();return(0,l.useMutation)([n.editExtendedSSGs],t=>(0,o.disableExtendedSSGs)(e,t),{onSuccess:(e,a)=>{"string"==typeof a.project_ids&&t.invalidateQueries(eS.listsForProjectExtendedSSGs(a.project_ids),{refetchActive:!0}),"object"==typeof a.project_ids&&a.project_ids.forEach(e=>t.invalidateQueries(eS.listsForProjectExtendedSSGs(e),{refetchActive:!0}))}})},e$=e=>{let t=(0,l.useQueryClient)();return(0,l.useMutation)([n.editExtendedSSGs],t=>(0,o.enableExtendedSSGs)(e,t),{onSuccess:(e,a)=>{"string"==typeof a.project_ids&&t.invalidateQueries(eS.listsForProjectExtendedSSGs(a.project_ids),{refetchActive:!0}),"object"==typeof a.project_ids&&a.project_ids.forEach(e=>t.invalidateQueries(eS.listsForProjectExtendedSSGs(e),{refetchActive:!0}))}})},eN=e=>{let t=(0,l.useQueryClient)();return(0,l.useMutation)([n.editExtendedSSGs],t=>(0,o.setExtendedSSGs)(e,t),{onSuccess:(e,a)=>{t.invalidateQueries(eS.listsForProjectExtendedSSGs(a.project_id),{refetchActive:!0})}})},eU=e=>(0,l.useMutation)([r.auth],t=>(0,o.login)(null,t,e)),eM=e=>(0,l.useQuery)([r.billing,"products"],()=>(0,o.getBillingProducts)(null,void 0),{staleTime:1/0,...e}),eR=(e,t,a)=>{let n=d(t.workspace_id,"wk");return(0,l.useQuery)([r.billing,n],()=>(0,o.getBillingAccount)(e,{workspace_id:n}),{...a,enabled:!!e&&a?.enabled})},eW=e=>(0,l.useMutation)([r.billing],t=>(0,o.createStripeCheckoutSession)(e,{...t,workspace_id:d(t.workspace_id,"wk")})),eL=e=>(0,l.useMutation)([r.billing],t=>(0,o.completeStripeCheckoutSession)(e,{...t,workspace_id:d(t.workspace_id,"wk")})),eG=e=>(0,l.useMutation)([r.billing],t=>(0,o.createCustomerPortalSession)(e,{...t,workspace_id:d(t.workspace_id,"wk")})),eO=e=>{let t=(0,l.useQueryClient)();return(0,l.useMutation)([r.billing],t=>(0,o.updateBillingAccount)(e,{...t,workspace_id:d(t.workspace_id,"wk")}),{onSuccess:(e,a)=>{let n=d(a.workspace_id,"wk"),o=[r.billing,n];return t.invalidateQueries(o)}})},ez=(e,t,a)=>{let n=d(t.workspace_id,"wk");return(0,l.useQuery)([r.billing,"invoices",n],()=>(0,o.getBillingInvoices)(e,{workspace_id:n}),a)},eq=e=>{let t=(0,l.useQueryClient)();return(0,l.useMutation)([r.billing,"upgrade"],t=>(0,o.upgradeBillingProduct)(e,{...t,workspace_id:d(t.workspace_id,"wk")}),{onSuccess:(e,a)=>{let n=d(a.workspace_id,"wk"),o=[r.billing,n];return t.invalidateQueries(o)}})},eV=e=>{let t=(0,l.useQueryClient)();return(0,l.useMutation)([r.billing,"downgrade"],t=>(0,o.downgradeBillingProduct)(e,{...t,workspace_id:d(t.workspace_id,"wk")}),{onSuccess:(e,a)=>{let n=d(a.workspace_id,"wk"),o=[r.billing,n];return t.invalidateQueries(o)}})},eH=e=>{let t=(0,l.useQueryClient)();return(0,l.useMutation)([r.billing,"changeInterval"],t=>(0,o.changeBillingInterval)(e,{...t,workspace_id:d(t.workspace_id,"wk")}),{onSuccess:(e,a)=>{let n=d(a.workspace_id,"wk"),o=[r.billing,n];return t.invalidateQueries(o)}})},eQ=e=>{let t=(0,l.useQueryClient)();return(0,l.useMutation)([r.billing,"cancel"],t=>(0,o.cancelBillingSubscription)(e,{...t,workspace_id:d(t.workspace_id,"wk")}),{onSuccess:(e,a)=>{let n=d(a.workspace_id,"wk"),o=[r.billing,n];return t.invalidateQueries(o)}})},eK=(e,t,a)=>{let{product_id:n}=t,i=d(t.workspace_id,"wk");return(0,l.useQuery)([r.billing,i,"proration",n],()=>(0,o.getProrationPreview)(e,{workspace_id:i,product_id:n}),a)},eJ=e=>{let t=(0,l.useQueryClient)();return(0,l.useMutation)([r.billing,"promotionCode"],t=>(0,o.checkPromoCodeValidity)(e,{...t,workspace_id:t.workspace_id}),{onSuccess:(e,a)=>{let n=d(a.workspace_id,"wk"),o=[r.billing,n];return t.invalidateQueries(o)}})},eY={all:[r.stoplightDoc],projectDoc:e=>[...eY.all,e.project_id],branchDoc:e=>[...eY.projectDoc(e),{branch_slug:e.branch_slug}],branchesDoc:e=>[...eY.projectDoc(e),{base_branch_slug:e.base_branch_slug,head_branch_slug:e.head_branch_slug}],commitDoc:e=>[...eY.projectDoc(e),{sha:e.sha}]},eX=(e,t,a)=>(0,l.useQuery)(eY.branchDoc(t),()=>(0,o.getFsDocForBranch)(e,t),a),eZ=(e,t,a)=>(0,l.useQuery)(eY.branchesDoc(t),()=>(0,o.getMergedFsDocForBranches)(e,t),a),e0=(e,t,a)=>(0,l.useQuery)(eY.commitDoc(t),()=>(0,o.getFsDocForCommit)(e,t),a),e1=e=>{let t=(0,l.useQueryClient)();return(0,l.useMutation)([n.createCustomDomain],t=>(0,o.createCustomDomain)(e,t),{onSuccess:(e,a)=>{t.invalidateQueries(P.state((0,s.safelyDecodeID)(a.workspace_id)))}})},e2=e=>{let t=(0,l.useQueryClient)();return(0,l.useMutation)([n.updateCustomDomain],t=>(0,o.updateCustomDomain)(e,t),{onSuccess:(e,a)=>{t.invalidateQueries(P.state((0,s.safelyDecodeID)(a.workspace_id)))}})},e4=e=>{let t=(0,l.useQueryClient)();return(0,l.useMutation)([n.deleteCustomDomain],t=>(0,o.deleteCustomDomain)(e,t),{onSuccess:(e,a)=>{t.invalidateQueries(P.state((0,s.safelyDecodeID)(a.workspace_id)))}})},e3={all:[r.machinePrincipals],list:()=>[...e3.all,"list"]},e5=(e,t)=>(0,l.useQuery)([...e3.list(),e],()=>(0,o.listMachinePrincipals)(e,{workspace_id:(0,s.encodeID)("wk",t)}),{enabled:!!e}),e8=e=>{let t=(0,l.useQueryClient)();return(0,l.useMutation)([n.addMachinePrincipal],t=>(0,o.addMachinePrincipal)(e,{workspace_id:t.workspace_id,name:t.name}),{onSuccess:()=>{t.invalidateQueries(P.allState()),t.invalidateQueries(e3.list())}})},e6=e=>{let t=(0,l.useQueryClient)();return(0,l.useMutation)([n.addMachinePrincipal],t=>(0,o.updateMachinePrincipal)(e,{machine_principal_id:t.machine_principal_id,name:t.name}),{onSuccess:()=>{t.invalidateQueries(e3.list())}})},e7=e=>{let t=(0,l.useQueryClient)();return(0,l.useMutation)([n.addMachinePrincipal],t=>(0,o.deleteMachinePrincipal)(e,{machine_principal_id:t.machine_principal_id}),{onSuccess:()=>{t.invalidateQueries(e3.list())}})},e9=(e,t,a)=>(0,l.useQuery)(["exportProjectNode",t.workspaceSlug,t.projectSlug,t.exportUri,{branchSlug:t.branchSlug}],()=>(0,o.exportProjectNode)(e,t),a),te={all:[r.branches],details:()=>[...te.all,"detail"],detail:(e,t)=>[...te.details(),d(e,"prj"),d(t,"br")]},tt=e=>(0,l.useMutation)([n.deleteAllImages],({projectId:t})=>(0,o.deleteAllImages)(e,{project_id:(0,s.encodeID)("prj",t)})),ta=()=>(0,l.useMutation)(({confirmationCode:e})=>(0,o.confirmEmailAddress)(null,{confirmation_code:e})),tr=e=>(0,l.useMutation)([n.updateVcsIntegration],t=>(0,o.updateVcsIntegration)(e,t))},18137:(e,t,a)=>{"use strict";function r(e){return new Date(new Date(e).setUTCHours(0,0,0,0)).toISOString()}function n(e){return new Date(new Date(e).setUTCHours(23,59,59,99)).toISOString()}function o(e,t){let a=new Date(e);return Math.round((new Date(t).getTime()-a.getTime())/864e5)}a.r(t),a.d(t,{ERR_ACTION_PROHIBITED:()=>g,ERR_CONFLICT:()=>f,ERR_INSUFFICIENT_PERMISSIONS:()=>m,ERR_INVALID_TOKEN:()=>i,ERR_TOKEN:()=>s,ERR_TOKEN_EXPIRED:()=>u,ERR_TOKEN_NOT_BEFORE:()=>c,ERR_TOKEN_PAYLOAD_MALFORMED:()=>d,ERR_USER_IS_OWNER:()=>h,ERR_VALIDATION_ERROR:()=>l,ERR_VCS_PROVIDER_ERROR:()=>b,ERR_WORKSPACE_IS_LOCKED:()=>p,abbreviate:()=>v,assertFulfilledSettledResult:()=>_,computeDaysDifference:()=>o,firstLine:()=>E,ifDefined:()=>j,ifDefinedOrNull:()=>S,noMaybe:()=>x,slugify:()=>P,toEndOfDay:()=>n,toStartOfDay:()=>r,transformCamelToSnake:()=>$,transformSnakeToCamel:()=>N,trimToUndefined:()=>I});let l="VALIDATION_ERROR",i="INVALID_TOKEN",s="TOKEN_ERROR",c="TOKEN_NOT_BEFORE",u="TOKEN_EXPIRED",d="TOKEN_PAYLOAD_MALFORMED",m="INSUFFICIENT_PERMISSIONS",p="WORKSPACE_IS_LOCKED",g="ACTION_PROHIBITED",h="USER_IS_OWNER",f="CONFLICT",b="VCS_PROVIDER_ERROR";var y=a(60441),w=a.n(y);function E(e){return e?.split("\n",1)[0]||""}function v(e,t){return e?(e=e.trim()).length>t?e.slice(0,t-1)+"":e:""}let k=a(99639);function _(e){let t=[];for(let a of e)"rejected"===a.status&&t.push(w()(a.reason)?a.reason:Error(String(a.reason)));if(0===t.length)return;if(1===t.length)throw t[0];let a=t.map(e=>v(E(e.message),500)),r={};for(let e of a)e&&(r[e]?r[e]++:r[e]=1);let n=[];for(let[e,t]of Object.entries(r))1===t?n.push(e):n.push(`${e} (x${t})`);throw new k(t,n.join("\n")??"assertFulfilledSettledResult failed")}function x(e){return null!=e?e:void 0}function I(e){if(!e)return;let t=String(e).trim();if(0!==t.length)return t}function S(e,t){switch(e){case void 0:return t;case null:return null;default:return e}}function j(e,t){switch(e){case void 0:case null:return t;default:return e}}let C=a(82658),P=e=>e?C(e):"";var A=a(48360),B=a.n(A);let D=e=>e.replace(/[A-Z]/g,e=>`_${e.toLowerCase()}`),T=e=>e.replace(/_([a-z]?)/g,(e,t)=>t.toUpperCase());function F(e,t,a){let r={};for(let[n,o]of Object.entries(a)){let a="snake_case"===e&&"camelCase"===t?T(n):"camelCase"===e&&"snake_case"===t?D(n):n;Array.isArray(o)?r[a]=function e(t,a,r){let n=r.slice();for(let r=0;r<n.length;r++){let o=n[r];Array.isArray(o)?n[r]=e(t,a,o):B()(o)&&(n[r]=F(t,a,o))}return n}(e,t,o):B()(o)?r[a]=F(e,t,o):r[a]=o}return r}function $(e){return F("camelCase","snake_case",e)}function N(e){return F("snake_case","camelCase",e)}},346:(e,t,a)=>{"use strict";a.d(t,{uz:()=>c,zx:()=>d,qg:()=>u});var r=a(97702),n=a.n(r);class o extends Error{originalCause;constructor(e,t){super(o.combinedMessage(e,t)),this.originalCause=t}static combinedMessage(e,t){let a=e;return t&&t.toString&&"function"==typeof t.toString&&(a+=`; because of ${t.toString()}`),a}}let l=/^[0-9a-f]{128}$/,i=/^[0-9a-f]{32}$/;function s(e){return l.test(e)||i.test(e)}function c({searchParams:e},t){let a=e.get("saml"===t?"RelayState":"state");if("string"!=typeof a){console.warn('state parameter "${searchParam}" not found');return}return u(a)}function u(e){try{return function(e){let t=JSON.parse(n().decode(e)),a=function(e){if(!s(e))throw new o("value must be a non-whitespace string of hexidecimal digits");return e}(t?.nonce??"");if(void 0===a)throw new o("missing nonce");let r=t?.pr;return void 0===r?{nonce:a}:{nonce:a,pr:function(e){if(!Number.isInteger(e)||e<0)throw RangeError("n must be a non-negative integer");return e}(parseInt(r))}}(e)}catch{}try{return function(e){if(!s(e))throw new o("invalid CSRF token format");return{nonce:e}}(e)}catch{return}}function d(e,t){return"object"==typeof e&&"object"==typeof t&&e.nonce===t.nonce&&e.pr===t.pr}},75269:(e,t,a)=>{"use strict";var r,n,o,l;a.r(t),a.d(t,{Languages:()=>n,NodeCategory:()=>r,NodeTypes:()=>l,Specs:()=>o}),function(e){e[e.Source=1]="Source",e[e.SourceMap=2]="SourceMap",e[e.Virtual=3]="Virtual"}(r||(r={})),function(e){e.Markdown="markdown",e.JavaScript="javascript",e.Json="json",e.Yaml="yaml"}(n||(n={})),function(e){e.Stoplight="stoplight",e.StoplightResolutions="stoplight_resolutions",e.OAS2="oas2",e.OAS3="oas3",e.Json_Schema="json_schema",e.Markdown="md",e.Image="image",e.TableOfContents="table_of_contents",e.SpectralRuleset="spectral_ruleset",e.Styleguide="styleguide"}(o||(o={})),function(e){e.HttpOperation="http_operation",e.HttpService="http_service",e.TableOfContents="table_of_contents"}(l||(l={}))},37096:(e,t,a)=>{"use strict";a.d(t,{EO:()=>o,c5:()=>l,ls:()=>i,wb:()=>n,zf:()=>s});var r=a(75269);function n(e){return e.category===r.NodeCategory.Source}function o(e){return e.category===r.NodeCategory.SourceMap}function l(e){return e.category===r.NodeCategory.Virtual}function i(e){return!s(e)}function s(e){return!!e.parent}},57873:(e,t,a)=>{"use strict";var r;a.d(t,{$:()=>r}),function(e){e[e.DidPatch=1]="DidPatch",e[e.DidAddNode=2]="DidAddNode",e[e.DidMoveNode=3]="DidMoveNode",e[e.DidRemoveNode=4]="DidRemoveNode",e[e.DidChangeSourceNode=5]="DidChangeSourceNode",e[e.DidSetSourceNodeProp=6]="DidSetSourceNodeProp",e[e.DidPatchSourceNodeProp=7]="DidPatchSourceNodeProp",e[e.DidUpdateNodeUri=8]="DidUpdateNodeUri",e[e.DidUpdateSourceMapNodeData=9]="DidUpdateSourceMapNodeData",e[e.DidUpdateSourceMapNodeResolved=10]="DidUpdateSourceMapNodeResolved",e[e.DidError=11]="DidError",e[e.DidPatchSourceNodePropComplete=12]="DidPatchSourceNodePropComplete",e[e.DidIndexNode=13]="DidIndexNode",e[e.DidAddSourceMapNode=14]="DidAddSourceMapNode"}(r||(r={}))},46796:(e,t,a)=>{"use strict";a.r(t),a.d(t,{AbstractLifecyclePlugin:()=>l,hasStableIdProvider:()=>o,isLifecycleGraphitePlugin:()=>n});var r=a(93389);let n=e=>"activate"in e&&"deactivate"in e,o=e=>"stableIdProvider"in e;class l extends r.Activatable{activeDisposables=new r.DisposableCollection;events;tasks;specProvider;stableIdProvider;_graphite;get graphite(){if(!this._graphite)throw Error("Cannot access graphite before plugin is initialized");return this._graphite}async init(e){if(this._graphite)throw Error("Cannot initialize plugin twice");this._graphite=e,await this.activate()}async dispose(){this.activeDisposables.disposed||this.activeDisposables.dispose(),"isDeactivating"!==this.state&&await this.deactivate()}async doActivate(){this.activeDisposables=new r.DisposableCollection,this.tasks&&this.registerSchedulerTasks(this.tasks),this.events&&this.registerGraphiteEvents(this.events),this.specProvider&&this.activeDisposables.push(this.graphite.specRegistry.register(this.specProvider)),this.stableIdProvider&&this.activeDisposables.push(this.graphite.stableIdRegistry.register(this.stableIdProvider))}async doDeactivate(){this.activeDisposables.dispose()}registerSchedulerTasks(e){for(let t of e)this.activeDisposables.push(this.graphite.scheduler.registerHandler(t.operation,t.handler))}registerGraphiteEvents(e){for(let t of e)this.activeDisposables.push(this.graphite.notifier.on(t.name,t.handler.bind(this)))}}},92696:(e,t,a)=>{"use strict";a.r(t),a.d(t,{ImagePlugin:()=>E,STOPLIGHT_IMAGE_PLUGIN_ID:()=>w,createImagePlugin:()=>y,imageMimeType:()=>b,recognizedImageFileExtensions:()=>g,recognizedImageMimeTypes:()=>h});var r=a(31515),n=a(74197),o=a(94169),l=a(45250),i=a(45552),s=a.n(i),c=a(57873),u=a(37096),d=a(75269),m=a(14474),p=a(46796);let g=["apng","avif","bmp","gif","jpeg","jpg","png","svg","webp"],h=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp"],f=RegExp(`[^/\\\\]\\.(?:${g.join("|")})$`,"i"),b=e=>{let t=e.toLowerCase().match(/\.(?<ext>[^\.]+)$/);if(!t)return"";{let{ext:e}=t.groups;return"jpg"===e?"image/jpeg":g.includes(e)?`image/${e}`:""}},y=()=>new E,w="ImagePlugin";class E extends p.AbstractLifecyclePlugin{id=w;specProvider={spec:d.Specs.Image,path:f};events=[{name:c.$.DidAddNode,handler:async e=>{let t=this.graphite.graph.getNodeById(e.node.id);t&&(0,u.wb)(t)&&t.spec===d.Specs.Image&&await this.graphite.scheduler.queue({op:m.V.MeasureSourceNode,nodeId:t.id,trace:e.trace})}},{name:c.$.DidChangeSourceNode,handler:async({node:e,change:t})=>{(0,u.wb)(e)&&e.spec===d.Specs.Markdown&&"data.parsed"===t.prop&&this.getImagesFromMarkdown([e])}}];getImagesFromMarkdown(e=this.graphite.graph.nodeValues){let t=[];for(let a of e){if(!(0,u.wb)(a)||a.spec!==d.Specs.Markdown||!a.data.parsed)continue;let{nodes:e,diagnostics:r}=this._processDocNode(a);this.graphite.graph.setSourceNodeDiagnostics(a.id,this.id,r),t.push(...e)}return(0,l.uniqBy)(t,"id")}_processDocNode(e){let t=this.cwd(),a=[],o=[];for(let l of this._getMDASTImages(e)){if(l.url.startsWith("//"))continue;let i=r.q(l.url);if(null!==i.protocol&&"file"!==i.protocol)continue;let s=decodeURI(i.absolute?n.h(t,...i.path):n.h(e.uri,"..",...i.path)),c=this.graphite.graph.getNodeByUri(s);c?a.push(c):o.push(this._formatBrokenImageUrl(l))}return{nodes:a,diagnostics:o}}_getMDASTImages(e){let t=[];return s()(e.data.parsed,["image"],e=>{t.push(e)}),t}_formatBrokenImageUrl(e){return{range:{start:{character:e.position.start.column-1,line:e.position.start.line-1},end:{character:e.position.end.column-1,line:e.position.end.line-1}},message:`Broken markdown image URL: ${e.url}`,severity:o.DiagnosticSeverity.Error,source:this.id}}cwd(){return this.graphite.graph.rootNodes[0].uri}}},14474:(e,t,a)=>{"use strict";var r,n;a.d(t,{V:()=>n,k:()=>r}),function(e){e[e.DidQueueTask=1]="DidQueueTask",e[e.DidCompleteTask=2]="DidCompleteTask",e[e.MightHaveGotStuck=3]="MightHaveGotStuck"}(r||(r={})),function(e){e[e.ReadSourceNode=1]="ReadSourceNode",e[e.WriteSourceNode=2]="WriteSourceNode",e[e.DeleteSourceNode=3]="DeleteSourceNode",e[e.MoveSourceNode=4]="MoveSourceNode",e[e.MeasureSourceNode=5]="MeasureSourceNode",e[e.SerializeSourceNode=6]="SerializeSourceNode",e[e.DeserializeSourceNode=7]="DeserializeSourceNode",e[e.DiffRawToParsed=8]="DiffRawToParsed",e[e.ComputeSourceMap=9]="ComputeSourceMap",e[e.ResolveSourceNode=10]="ResolveSourceNode",e[e.TransformParsed=11]="TransformParsed"}(n||(n={}))},35179:(e,t,a)=>{"use strict";a.d(t,{CF:()=>n,GE:()=>l,Mh:()=>r,n9:()=>o});let r={azure_devops_services:["fab","microsoft"],azure_devops_server:["fab","microsoft"],builtin:["fas","envelope"],github:["fab","github"],bitbucket_cloud:["fab","bitbucket"],bitbucket_data_center:["fab","bitbucket"],gitlab:["fab","gitlab"],ldap:["fas","shield-alt"],saml:["fas","lock"]},n={azure_devops_services:"Azure Devops",azure_devops_server:"Azure Devops Server",builtin:"Built In",github:"GitHub",bitbucket_cloud:"Bitbucket Cloud",bitbucket_data_center:"Bitbucket Data Center",gitlab:"GitLab",ldap:"LDAP",saml:"SAML"},o={azure_devops_services:"#205081",azure_devops_server:"#205081",builtin:"#000",github:"#333",bitbucket_cloud:"#205081",bitbucket_data_center:"#205081",gitlab:"#fc6d26",ldap:"#000",saml:"#000"},l=["git"]},60606:(e,t,a)=>{"use strict";a.d(t,{LR:()=>i,NM:()=>o,Oz:()=>p,Uo:()=>s,Yr:()=>c,ac:()=>u,hJ:()=>m,nJ:()=>d,pK:()=>n,sZ:()=>h,tl:()=>l,yA:()=>g});var r=a(3411);function n(e){return[r.v6.AzureDevOpsServer,r.v6.AzureDevOpsServices,r.v6.BitbucketCloud,r.v6.BitbucketDataCenter,r.v6.GitHub,r.v6.GitLab,r.v6.SAML,r.v6.LDAP].includes(e.kind)}function o(e,t){return l(e,t)||s(e,t)||u(e)}function l(e,t){return i(e.kind,t)}function i(e,t){return[r.v6.AzureDevOpsServer,r.v6.Builtin,r.v6.LDAP].includes(e)||e===r.v6.BitbucketDataCenter&&!h(t)}function s(e,t){return c(e.kind,t)}function c(e,t){return[r.v6.AzureDevOpsServices,r.v6.GitHub,r.v6.GitLab,r.v6.BitbucketCloud,r.v6.SAML].includes(e)||e===r.v6.BitbucketDataCenter&&h(t)}function u(e){return e.kind===r.v6.SAML}function d(e){return m(e.kind)}function m(e){return[r.v6.AzureDevOpsServer,r.v6.AzureDevOpsServices,r.v6.BitbucketCloud,r.v6.BitbucketDataCenter,r.v6.GitHub,r.v6.GitLab].includes(e)}function p(e,t){return g(e.kind,t)}function g(e,t){return[r.v6.AzureDevOpsServices,r.v6.GitLab,r.v6.BitbucketCloud].includes(e)||e===r.v6.BitbucketDataCenter&&h(t)}function h(e){return e.hasOwnProperty("clientId")&&e.hasOwnProperty("redirectUrl")}},3411:(e,t,a)=>{"use strict";var r,n,o;a.d(t,{Hu:()=>o,NP:()=>n,v6:()=>r}),function(e){e.AzureDevOpsServer="azure_devops_server",e.AzureDevOpsServices="azure_devops_services",e.Builtin="builtin",e.BitbucketCloud="bitbucket_cloud",e.BitbucketDataCenter="bitbucket_data_center",e.GitHub="github",e.GitLab="gitlab",e.LDAP="ldap",e.SAML="saml"}(r||(r={})),function(e){e.READ="read",e.WRITE="write"}(n||(n={})),function(e){e.Push="push",e.PullRequestOpened="pullRequestOpened",e.PullRequestMerged="pullRequestMerged",e.PullRequestUpdated="pullRequestUpdated",e.DeleteBranch="deleteBranch",e.Ping="ping"}(o||(o={}))},15384:(e,t,a)=>{"use strict";let r;var n,o,l,i,s,c,u,d,m,p,g,h,f,b,y,w,E,v,k,_,x,I,S,j,C,P,A,B,D,T,F,$,N,U,M,R,W,L,G,O,z,q,V,H,Q,K,J,Y,X,Z,ee,et,ea,er,en,eo,el,ei,es,ec,eu,ed,em,ep,eg,eh,ef,eb,ey,ew,eE,ev,ek,e_,ex,eI,eS,ej,eC,eP,eA,eB,eD,eT,eF,e$,eN,eU,eM,eR,eW,eL,eG,eO,ez,eq,eV,eH,eQ,eK,eJ,eY,eX,eZ,e0,e1,e2,e4,e3,e5,e8,e6,e7,e9,te,tt,ta,tr,tn,to,tl,ti,ts,tc,tu,td,tm=a(57691);tm.KJ&&window.__ASSET_HOST&&(a.p=`${window.__ASSET_HOST}/static/`);var tp=a(78578),tg=a(32353),th=a(45250),tf=a(53960),tb=a(14191),ty=a(14041),tw=a(43144),tE=a(62004),tv=a(87017),tk=a(73657),t_=a(97249),tx=a(54505),tI=a(11491),tS=a(91562),tj=a(39904),tC=a(31357),tP=a(71739),tA=a(18690),tB=a(18735);let tD=()=>{let{reporter:e}=(0,tB.px)();return ty.createElement(tj.NonIdealState,{icon:ty.createElement(tj.FAIcon,{icon:["fas","bug"],style:{color:"red"}}),className:"h-full w-1/2 m-auto p-2 flex items-center justify-center flex-col text-center",title:"Oops, something went wrong!",description:ty.createElement(ty.Fragment,null,"The Stoplight team has been notified of the error. Try reloading the page, but if the issue persists, please"," ",ty.createElement("a",{href:tm.FI},"contact support"),"."),action:ty.createElement(tj.AnchorButton,{href:"",onClick:()=>e.log({event:"fallback_component_reload"})},"Reload")})};var tT=a(18846),tF=a(19175);let t$=e=>{let{setUserIdleState:t}=(0,tF.L3)(),{logout:a}=(0,tF.BG)(),{currentUser:r}=(0,tF.hD)(),{currentWorkspace:n}=(0,tF.C$)(),o=(0,ty.useMemo)(()=>{let e={onIdle:async(e,t)=>{t?.isLeader()&&await a(!1)},onPresenceChange:(e,a)=>{t({userIdleState:e.type,isLeader:a?.isLeader()})},crossTab:!0,leaderElection:!0,disabled:!0},o=n?.idleTimeoutSeconds;return r&&"number"==typeof o&&(e.timeout=1e3*o,e.disabled=!1),e},[n,r,t,a]);return(0,ty.useEffect)(()=>{t({userIdleState:o.disabled?"disabled":"active"})},[t,o]),ty.createElement(tT.LF,o,e.children)};var tN=a(61164),tU=a(799),tM=a(11017),tR=a(75499);let tW=()=>{let e=(0,tF.hD)(),{state:t,effects:a}=(0,tB.U8)(),{mutateAsync:r}=(0,tN.useCreateStripeCheckoutSession)(e.jwt),{danger:n}=(0,tF.AO)();return ty.useCallback(async(e,o,l,i,s)=>{let c=e.pricing_plans.find(e=>e.cycle_interval_months===o);return c?r({mode:"subscription",workspace_id:String(t.workspaces.currentWorkspaceId),billing_pricing_plan_id:String(c.id),success_url:l,cancel_url:i,is_trial:s}).then(({redirect_url:e})=>({redirect_url:e})).catch(e=>(n({message:tm.Mt}),a.reporter.error(e),null)):(n({message:`Could not find price for product ${e.id} and interval ${o}`}),null)},[n,r,a.reporter,t.workspaces.currentWorkspaceId])},tL={[tU.mmV.Free]:"Free",[tU.mmV.Basic]:"Basic",[tU.mmV.Startup]:"Startup",[tU.mmV.ProTeam]:"Pro Team",[tU.mmV.Enterprise]:"Enterprise"},tG=e=>tL[e],tO=e=>{let t=new URL(window.location.href),a=new URL(window.location.href);return t.search="",e?(t.pathname="/welcome/billing/success",a.pathname="/welcome/account",a.searchParams.delete("interval"),a.searchParams.set("plan",tU.mmV.Free)):(t.pathname="/admin/billing/success",a.pathname="/admin/billing"),{successUrl:t,cancelUrl:a}},tz=({product:e,interval:t})=>{let a=(0,tF.ks)(),r=(0,tF.hD)(),n=a.pathname.startsWith("/welcome"),o=tW(),{log:l}=(0,tF.pw)();return ty.createElement(tg.Button,{appearance:"primary",iconRight:["far","arrow-right"],"data-test":"checkout-button",onPress:async()=>{l({event:"billing_mini_modal_continue_to_payment_clicked",payload:{product:e.name,interval:t}});let{successUrl:a,cancelUrl:i}=tO(n&&!r.isAccountInfoCollected),s=await o(e,t,a.toString(),i.toString());s?.redirect_url&&(window.location.href=s.redirect_url)}},"Continue to Payment")};var tq=a(65398),tV=a.n(tq);let tH=new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric"}),tQ=e=>tH.format(e),tK=e=>`rgba(${e.substring(e.indexOf("(")+1,e.lastIndexOf(")"))}, .15)`,tJ={basic:"rgb(26, 171, 255)",startup:"rgb(5, 184, 112)",pro_team:"rgb(144, 97, 249)",enterprise:"rgb(255, 160, 43)"},tY={basic:{color:tJ.basic,button:{color:tJ.basic,borderColor:tJ.basic,background:tK(tJ.basic)}},startup:{color:tJ.startup,button:{color:tJ.startup,borderColor:tJ.startup,background:tK(tJ.startup)}},pro_team:{color:tJ.pro_team,button:{color:tJ.pro_team,borderColor:tJ.pro_team,background:tK(tJ.pro_team)}},enterprise:{color:tJ.enterprise,button:{color:tJ.enterprise,borderColor:tJ.enterprise,background:tK(tJ.enterprise)}},common:{borderTop:"1px solid #E2E8F0",selected:{boxShadow:"rgb(0 0 0 / 10%) 4px 4px 8px 0px"}}},tX=()=>{let{jwt:e}=(0,tF.hD)(),{danger:t,success:a}=(0,tF.AO)(),{log:r,error:n}=(0,tF.pw)(),{mutateAsync:o}=(0,tN.useDowngradeBillingProduct)(e),l=(0,tA.useNavigate)();return ty.useCallback(({workspaceId:e,product:i})=>o({workspace_id:e,product_id:i.id}).then(()=>{let e=tG(i.name);a({message:`Successfully downgraded to the ${e} plan!`}),r({event:"plan_downgrade_completed",payload:{product:i.name}}),l("/admin/billing")}).catch(e=>{t({message:tm.Mt}),n(e)}),[t,r,o,l,n,a])},tZ=()=>{let{jwt:e}=(0,tF.hD)(),{danger:t,success:a}=(0,tF.AO)(),{log:r,error:n}=(0,tF.pw)(),{mutateAsync:o}=(0,tN.useUpgradeBillingProduct)(e),l=(0,tA.useNavigate)();return ty.useCallback(({workspaceId:e,product:i,interval:s,promoCode:c})=>o({workspace_id:e,product_id:i.id,promotion_code:c,interval:s}).then(()=>{let e=tG(i.name);a({message:`Successfully upgraded to the ${e} plan!`}),r({event:"plan_upgrade_completed",payload:{product:i.name}}),l("/admin/billing")}).catch(e=>{t({message:void 0!==c&&e.message.includes("This promotion code cannot be redeemed")?e.message:tm.Mt}),n(e)}),[t,r,o,l,n,a])},t0=({product:e,interval:t,mode:a,promoCode:r})=>{let n=(0,tF.C$)(),{log:o}=(0,tF.pw)(),l=tZ(),i=tX(),[s,c]=ty.useState(!1);return ty.createElement(tg.VStack,{spacing:6},ty.createElement(tg.Box,null,ty.createElement(tg.Button,{"data-test":`confirm-${a}-button`,appearance:"primary",loading:s,onPress:async()=>{c(!0),o({event:`billing_mini_modal_confirm_${a}_clicked`,payload:{product:e.name}}),"upgrade"===a?await l({workspaceId:String(n.currentWorkspaceId),product:e,interval:t,promoCode:r}):await i({workspaceId:String(n.currentWorkspaceId),product:e}),c(!1)}},`Confirm ${(0,th.capitalize)(a)}`)))},t1=({productId:e,productName:t,theme:a,isTrial:r,displayYearly:n})=>{let[o,l]=(0,ty.useState)(!1),[i,s]=(0,ty.useState)(void 0),{log:c}=(0,tF.pw)(),u=(0,tF.ks)(),d=(0,tF.C$)(),m=(0,tM.s)(),p=d.myWorkspace?.billing_product,g=u.pathname.startsWith("/welcome"),h=m.currentBillingAccount,f=!!h?.trial_end_at&&new Date(h?.trial_end_at)>new Date,b=function(e,t,a,r,n,o){return a!==tR.WR&&(o||t===tR.$X&&r)?"Start Trial":t&&t===tR.WR&&a!==tR.WR?"Contact Support to Downgrade":t&&t===a&&n?"Current Trial":t&&t===a?"Your Current Plan":t&&a===tR.WR?"Contact Sales":r?"Free Trial":a===tR.X&&t&&t<tR.X||a!==tR.X&&t&&t>a&&t<tR.X?`Downgrade to ${e}`:t!==tR.WR?`Upgrade to ${e}`:"Talk to Us"}(t,p.id,e,r,f,g),y="Contact Support to Downgrade"===b?"sm":"lg",w=()=>p.id!==tR.WR&&e!==p.id,E=t2(p.id,e);return ty.createElement(ty.Fragment,null,ty.createElement(tg.Button,{mb:2,h:8,style:{...a.button},"data-test":`plan-${E}-button-${t.toLowerCase().replace(" ","_")}`,appearance:"primary",cursor:"pointer",textTransform:"capitalize",disabled:p.id===e,onPress:()=>{c({event:"upsell_modal_cta_clicked",payload:{plan:t}}),e===tR.WR?window.open("https://stoplight.io/contact-sales","_blank","noopener"):w()?l(!0):window.open("https://support.stoplight.io/s/","_blank","noopener")}},ty.createElement(tg.Text,{w:"full",textAlign:"center",fontSize:y},b)),ty.createElement(ac,{isOpen:o,onClose:function(){l(!1),s(void 0)},productId:e,displayYearly:i??n,handleYearlySwitch:s,ctaButton:({account:e,product:t,interval:a})=>e.stripe_subscription_id?ty.createElement(t0,{product:t,mode:E}):ty.createElement(tz,{product:t,interval:a}),title:g?`Subscribe to ${t} plan`:b,context:`${E}_plan`}))};function t2(e,t){return e===tR.X||e===tR.$X?"upgrade":t<tR.X?e>t?"downgrade":"upgrade":t===tR.X?"downgrade":"upgrade"}var t4=a(99870),t3=a.n(t4),t5=a(80824),t8=a(15990);let t6=()=>{let e=(0,tF.hD)(),{danger:t,success:a}=(0,tF.AO)(),{mutateAsync:r}=(0,tN.useCheckPromoCodeValidity)(e.jwt),{error:n}=(0,tF.pw)();return ty.useCallback((e,o,l,i)=>r({workspace_id:(0,t8.safelyEncode)(e,"wk"),product_id:o,cycle_interval_months:l,promotion_code:i}).then(e=>(a({message:"Coupon successfully applied"}),e)).catch(e=>{t({message:e.message}),n(e)}),[r,a,t,n])},t7=e=>(t9(e)/100).toLocaleString("en-US",{style:"currency",currency:"USD"}),t9=e=>Math.round((e+Number.EPSILON)*100)/100,ae=e=>100*parseInt(e.replace(/[$,]/g,""));var at=a(53680);let aa=({name:e,errors:t,messageColor:a="danger",icon:r="exclamation-triangle"})=>{let n=`input-field-${e}-error`;return ty.createElement(at.ErrorMessage,{errors:t,name:e,"data-test":n,render:({message:e,messages:t})=>t&&t.length?Object.entries(t).map(([e,t])=>t?ty.createElement(tg.Box,{key:e,mt:1,ml:1,"data-test":n},ty.createElement(tg.Icon,{icon:["fas",`${r}`],size:"sm",style:{color:`var(--color-${a})`}}),ty.createElement(tg.Text,{color:a,size:"sm",ml:1},t)):null):e?ty.createElement(tg.Box,{mt:1,ml:1,"data-test":n},ty.createElement(tg.Icon,{icon:["fas",`${r}`],size:"sm",style:{color:`var(--color-${a})`}}),ty.createElement(tg.Text,{color:a,size:"sm",ml:1},e)):null})},ar=({title:e,cost:t,displayYearly:a,lineItems:r,savingsMsg:n,handleYearlySwitch:o,trialMsg:l,planTheme:i,product:s,account:c,interval:u,ctaButton:d,switchBillingInterval:m,context:p})=>{let g;let h=t6(),f=(0,tF.C$)(),b=(0,tF.hD)(),y=e.includes("Renewal"),[w,E]=ty.useState(),[v,k]=ty.useState(),[_,x]=ty.useState(!1),[I,S]=ty.useState(!1),[j,C]=ty.useState(!1),[P,A]=ty.useState(void 0),B=t2(c?.billing_product_id,s?.id),D=(0,t5.mN)({mode:"onChange"}),{register:T,handleSubmit:F,formState:$,reset:N}=D,U=async e=>{if(void 0!==e.promoCode&&s){let t=await h(f.currentWorkspace?.id,s.id,a?12:1,e.promoCode);t?t.discount_type&&t.discount_amount&&(C(!1),A("Coupon successfully applied"),E(e.promoCode),x(!0),k(t)):(C(!0),A("Coupon code not found"))}},{data:M}=(0,tN.useProrationPreview)(b.jwt,{workspace_id:f.currentWorkspaceId,product_id:s?.id}),R=tG(s?.name);g="string"==typeof t?ty.createElement(tg.Box,{fontWeight:"bold",fontSize:"4xl"},t):ty.createElement(ty.Fragment,null,ty.createElement(tg.Box,{fontWeight:"bold",fontSize:"4xl"},"$",t.toLocaleString()),ty.createElement(tg.Box,{"data-test":"interval",fontSize:"lg"},"/",a?"year":"month"));let W=!!c?.stripe_subscription_id,L=c?.cycle_interval_months,G=o&&(!W||"upgrade_plan"===p&&1===L),O=W?"upgrade_plan"===p?ty.createElement(tg.HStack,{spacing:2,"data-test":"annual-switch"},ty.createElement(tg.Switch,{isSelected:a,onChange:o}),ty.createElement(tg.Box,{color:"muted"},"Annual")):null:ty.createElement(tg.HStack,{spacing:2},ty.createElement(tg.Box,{color:"muted"},"Bill monthly"),ty.createElement(tg.Switch,{isSelected:a,onChange:o}),ty.createElement(tg.Box,{color:"muted"},"Bill yearly"));return ty.createElement(tg.Box,{px:4},ty.createElement(tg.VStack,{spacing:4,align:"center",py:6},ty.createElement(tg.Box,{fontWeight:"semibold",fontSize:"lg"},e),l?null:i&&ty.createElement(tg.VStack,{ml:1,style:{backgroundColor:i.bgColor},px:8,pb:2,pt:4,rounded:"lg",boxShadow:"xl",textAlign:"center"},ty.createElement(tg.Icon,{icon:i.icon,color:i.color,style:{fontSize:34}}),ty.createElement(tg.Text,{pt:2,size:"xl",fontWeight:"bold",style:{color:i.color}},i.name)),_?null:ty.createElement(tg.Flex,{alignItems:"baseline"},g),G&&O,n?ty.createElement(tg.Box,{color:"success",fontWeight:"medium",fontSize:"lg"},n):null,l?ty.createElement(tg.Box,null,l):null),ty.createElement(tg.Box,{h:"px",bg:"canvas-200"}),ty.createElement(tg.VStack,{divider:!0},r.map((e,t)=>ty.createElement(an,{key:t,...e}))),ty.createElement(tg.Box,{h:"px",bg:"canvas-200"}),v&&ty.createElement(ao,{cost:t,discount:v}),ty.createElement(tg.Box,{pt:I?3:6,pb:6,textAlign:"center"},y||!c?.stripe_subscription_id||n||m?d:null,c?.stripe_subscription_id&&s&&u&&!n&&!m?ty.createElement(tg.Box,null,M?.amount?ty.createElement(tg.Box,{pb:3,pt:v?3:0,borderT:!!v||0,borderB:!!v||0},"You will be credited a prorated amount of"," ",ty.createElement(tg.Text,{fontWeight:"bold"},t7(M.amount))," for the"," ",ty.createElement(tg.Text,{fontWeight:"bold"},M.days_remaining)," days left of your current billing period. Upon clicking confirm the ",R," plan will be activated and invoiced immediately."):null,ty.createElement(tg.Flex,{justify:"between",pt:M?.amount||v?3:0},c?.stripe_subscription_id&&"downgrade"!==B&&ty.createElement("button",{"data-test":"coupon-input-button",style:{color:`${I?" var(--color-text-muted)":"var(--color-link)"}`},disabled:I,onClick:()=>S(!I),className:t3()("py-2",{"coupon-apply-disabled":I})},"Have a coupon?")),I&&ty.createElement(tg.Box,{pt:2},ty.createElement(t5.Op,D,ty.createElement("form",{onSubmit:F(U)},ty.createElement(tg.Box,{flex:"auto",flexDirection:"col",textAlign:"left"},ty.createElement(tg.HStack,{spacing:2},ty.createElement(tg.Input,{"data-test":"input-promo-code",flex:1,disabled:_,...T("promoCode",{minLength:1,maxLength:30}),placeholder:"enter coupon code here"}),void 0!==v?ty.createElement(tg.Button,{"data-test":"remove-coupon",onPress:()=>{E(void 0),x(!1),k(void 0),A(void 0),N()}},"Remove Coupon Code"):ty.createElement(tg.Button,{type:"submit",disabled:!$.isDirty||_,"data-test":"apply-coupon"},"Apply")),P&&ty.createElement(aa,{name:"role",icon:j?"exclamation-triangle":"circle-check",messageColor:j?"danger":"success",errors:{role:{message:P}}}))))),ty.createElement(tg.Flex,{justify:"end",mt:I?6:-8},ty.createElement(t0,{product:s,promoCode:w,interval:a&&1===L?12:void 0,mode:B}))):null),G?ty.createElement(tg.Box,{mt:-2,pb:6,textAlign:"center",color:"muted"},a?"Yearly subscriptions require a one-year non-cancellable commitment. ":null,"By using Stoplight you agree to our"," ",ty.createElement(tg.Link,{target:"_blank",href:"https://stoplight.io/terms",rel:"noreferrer"},"Terms of Service"),"."):null)};function an({line1:e,line2:t,right:a}){let r=ae(a);return ty.createElement(tg.Flex,{py:3,alignItems:"center",px:"px"},ty.createElement(tg.VStack,{flex:1},ty.createElement(tg.Box,null,e),ty.createElement(tg.Box,{color:"light"},t)),ty.createElement(tg.Box,{fontSize:"lg"},t7(r)))}let ao=({cost:e,discount:t})=>{let a="string"==typeof e?parseInt(e):e,r="PERCENT_OFF"===t.discount_type?a*t.discount_amount/100:t.discount_amount/100;return ty.createElement(tg.Flex,{pt:3,alignItems:"center",px:"px"},ty.createElement(tg.VStack,{flex:1,spacing:1},ty.createElement(tg.HStack,{justify:"between","data-test":"subtotal-details"},ty.createElement(tg.Box,null,"Subtotal"),ty.createElement(tg.Box,{fontSize:"lg"},a.toLocaleString("en-US",{style:"currency",currency:"USD"}))),ty.createElement(tg.HStack,{justify:"between","data-test":"discount-details"},ty.createElement(tg.Box,{color:"success"},"Discount"),ty.createElement(tg.Box,{color:"success",fontSize:"lg"},"-",r.toLocaleString("en-US",{style:"currency",currency:"USD"}))),ty.createElement(tg.HStack,{justify:"between","data-test":"grand-total-details"},ty.createElement(tg.Box,{fontWeight:"bold"},"Grand Total"),ty.createElement(tg.Box,{fontWeight:"bold",fontSize:"lg"},Math.max(a-r,0).toLocaleString("en-US",{style:"currency",currency:"USD"})))))},al=({productId:e,...t})=>{let a=(0,tF.C$)(),r=(0,tF.hD)(),n=a.currentWorkspaceId,{data:o,isLoading:l}=(0,tN.useGetBillingProducts)(),{data:i,isLoading:s}=(0,tN.useGetBillingAccount)(r.jwt,{workspace_id:n},{enabled:!!n});if(l||s)return ty.createElement(tg.Flex,{fontSize:"4xl",color:"muted",justifyContent:"center",py:14},ty.createElement(tg.Icon,{icon:["far","spinner-third"],spin:!0}));let c=o?.find(t=>t.id===e);return c&&i?ty.createElement(ai,{...t,product:c,account:i}):ty.createElement(tg.Flex,{color:"danger",justifyContent:"center",p:6},"There was a problem fetching the billing info, please"," ",ty.createElement(tg.Link,{target:"blank",href:tm.FI},"reach out to support")," ","if this continues to occur.")},ai=({title:e,product:t,account:a,ctaButton:r,showSavings:n,context:o,...l})=>{let i,s;let c=(0,tF.C$)(),u=!!a.stripe_subscription_id,d=a.cycle_interval_months,m=t2(a.billing_product_id,t.id),[p,g]=(0,tg.useControllableState)({name:"displayYearly",defaultValue:!u||12===d,value:l.displayYearly,onChange:l.handleYearlySwitch}),h=Math.max((c.myWorkspace?.member_count||0)-t.included_members,0),f=as(t,1,h),b=as(t,12,h),y=p?b:f;if(!y||!b||!f)return console.error("Product price not found!"),null;let w=12*f.totalCost-b.totalCost,E=p?b.totalCost:f.totalCost;i=p?`Yearly savings: $${w.toLocaleString()}`:`Switch to yearly to save: $${w.toLocaleString()}`;let v=!a.trial_end_at&&a.billing_product_id===tR.$X;v&&(s=`Start 14 day free trial (ends ${tQ(new Date(Date.now()+12096e5))})`);let k=[{line1:`First ${t.included_members} members`,line2:`$${y.flatFeeMonthlyCost.toLocaleString()} x ${y.price.cycle_interval_months} ${tV()("month",y.price.cycle_interval_months)}`,right:`$${y.flatFeeCost.toLocaleString()}`}];h&&k.push({line1:`${h} additional ${tV()("member",h)}`,line2:`$${y.userFeeMonthlyCost.toLocaleString()} x ${h} ${tV()("member",h)} x ${y.price.cycle_interval_months} ${tV()("month",y.price.cycle_interval_months)}`,right:`$${(y.userFeeCost*h).toLocaleString()}`});let _={basic:{name:"Basic",icon:"pen-nib",color:tY.basic.color,bgColor:tY.basic.button.background},startup:{name:"Startup",icon:"users",color:tY.startup.color,bgColor:tY.startup.button.background},pro_team:{name:"Pro Team",icon:"arrow-up-right-dots",color:tY.pro_team.color,bgColor:tY.pro_team.button.background}};return ty.createElement(ar,{title:function(e,t,a){let r=tG(e.name),n=`${(0,th.capitalize)(a)} to ${r}`;return t?n.concat(" ","- 14 Day Free Trial"):n}(t,v,m),cost:E,displayYearly:p,handleYearlySwitch:g,savingsMsg:n||!u?i:"",lineItems:k,ctaButton:r({product:t,account:a,interval:p?12:1}),trialMsg:s,planTheme:_[t.name],product:t,account:a,interval:p?12:1,switchBillingInterval:l.switchBillingInterval,context:o})};function as(e,t,a){let r=e.pricing_plans.find(e=>e.cycle_interval_months===t);if(!r)return null;let n=(r.flat_fee_price+a*r.user_fee_price)/100,o=r.flat_fee_price/100,l=r.user_fee_price/100;return{price:r,totalCost:n,totalMonthlyCost:n/t,flatFeeCost:o,flatFeeMonthlyCost:o/t,userFeeCost:l,userFeeMonthlyCost:l/t}}let ac=({isOpen:e,onClose:t,...a})=>ty.createElement(tg.Modal,{isOpen:e,onClose:t,size:"sm"},ty.createElement(al,a)),au=()=>ty.createElement(tg.Icon,{icon:["fal","check"]}),ad=({feature:e,name:t,theme:a,tooltip:r})=>{let n=(0,tF.tz)(),o=n.selectedFeature===e;!o&&Array.isArray(e)&&(o=e.includes(n.selectedFeature));let l=o?a:"",i=ty.createElement(tg.Box,{className:"sl-flex",style:{color:l}},ty.createElement(tg.Box,{mr:2},ty.createElement(au,null)),t),s=r?ty.createElement(tg.Tooltip,{placement:"left",renderTrigger:i},r):i;return ty.createElement(tg.Flex,null,s)},am=({name:e,icon:t,price:a,selectedPlan:r,features:n,theme:o,productId:l,displayYearly:i})=>{let s;let{isFlagEnabled:c}=(0,tF.aS)(),u=(0,tM.s)(),d=(0,tF.C$)().canI(tU.E4M.WorkspaceBilling),m=!u.currentBillingAccount?.trial_end_at&&u.currentProduct?.id===tR.$X;s=a?ty.createElement(tg.Box,{h:10},ty.createElement(tg.Flex,null,ty.createElement(tg.Text,{fontSize:"lg"},ty.createElement(tg.Text,{fontWeight:"bold"},"$",a.flatFee/100)," / Month")),ty.createElement(tg.Flex,{mt:1},ty.createElement(tg.Text,{fontSize:"sm",fontWeight:"normal",color:"light"},"$",a.additionalMemberFee/100," per User"))):ty.createElement(tg.Box,{h:10},tR.Yo);let p={borderColor:o.color,...tY.common.selected},g=r===e.toLowerCase(),h=n.filter(e=>!e.showOnFlag||c(e.showOnFlag));return ty.createElement(tg.VStack,{style:{...g?p:"",width:220,minWidth:240,maxWidth:250,flexGrow:1},rounded:"lg",border:!0},ty.createElement(tg.VStack,{p:5,spacing:3,flexShrink:0,style:{height:185}},ty.createElement(tg.Box,{ml:1,mt:1},ty.createElement(tg.Icon,{icon:t,color:o.color,style:{fontSize:30}})),ty.createElement(tg.Box,{mt:2},ty.createElement(tg.Heading,{size:3},e)),s),ty.createElement(tg.VStack,{style:tY.common&&{borderTop:g?`${p.borderColor} 1px solid`:tY.common.borderTop,backgroundColor:"#F7FAFC",borderRadius:"0px 0px 5px 5px"},h:"full",p:5,spacing:2},d?ty.createElement(t1,{displayYearly:i,productId:l,productName:e,theme:o,isTrial:m}):ty.createElement(tg.Callout,{intent:"warning"},tR.Wc),h.map((e,t)=>ty.createElement(ad,{...e,key:t}))))};function ap({productKey:e,product:t,displayYearly:a,selectedPlan:r}){let n=t.id!==tR.WR?t.pricing_plans.find(e=>e.cycle_interval_months===(a?12:1)):null;return ty.createElement(am,{...ag[e],displayYearly:a,price:n?{includedMembers:t.included_members,additionalMemberFee:a?n.user_fee_price/12:n.user_fee_price,flatFee:a?n.flat_fee_price/12:n.flat_fee_price}:void 0,selectedPlan:r,productId:t.id})}let ag={basic:{name:"Basic",icon:"pen-nib",ctaButtonText:"Upgrade to Basic",theme:tY.basic,features:[{name:"First 3 Users Free",tooltip:"$12 for each additional user.",theme:tY.basic.color},{feature:tU.BAf.PrivateProjects,name:"Private Projects",tooltip:"Only workspace members and guests with direct access can view private projects.",theme:tY.basic.color},{feature:tU.BAf.MultiBranch,name:"Multi Branch Support",tooltip:"Track multiple Git branches to support versioning, reviews, and collaboration.",theme:tY.basic.color},{feature:tU.BAf.WhitelistedDomains,name:"Approved Email Domains",tooltip:"Streamline onboarding by allowing anybody with a verified email on the domains you choose to join your workspace.",theme:tY.basic.color}]},startup:{name:"Startup",icon:"users",ctaButtonText:"Upgrade to Startup",theme:tY.startup,features:[{name:"First 8 Users Free",tooltip:"$12 for each additional user.",theme:tY.startup.color},{feature:tU.BAf.PrivateProjects,name:"Private Projects",tooltip:"Only workspace members and guests with direct access can view private projects.",theme:tY.startup.color},{feature:tU.BAf.MultiBranch,name:"Multi Branch Support",tooltip:"Track multiple Git branches to support versioning, reviews, and collaboration.",theme:tY.startup.color},{feature:tU.BAf.CustomDomain,name:"Custom Domains",tooltip:"Host your API documentation on a custom domain with minimal setup.",theme:tY.startup.color},{feature:tU.BAf.CustomTheme,name:"Custom Theming",tooltip:"Customize the look of your Stoplight workspace to match your brand guidelines.",theme:tY.startup.color},{feature:tU.BAf.Favicon,name:"Custom Favicon",tooltip:"Customize the look of your Stoplight workspace to match your brand guidelines.",theme:tY.startup.color},{feature:tU.BAf.GoogleTagManager,name:"Google Analytics Integration",tooltip:"Use Google Analytics to monitor your traffic to your documentation.",theme:tY.startup.color},{feature:tU.BAf.WhitelistedDomains,name:"Approved Email Domains",tooltip:"Streamline onboarding by allowing anybody with a verified email on the domains you choose to join your workspace.",theme:tY.startup.color}]},pro_team:{name:"Pro Team",icon:"arrow-up-right-dots",ctaButtonText:"Upgrade to Pro Team",theme:tY.pro_team,features:[{name:"First 15 Users Free",tooltip:"$24 for each additional user.",theme:tY.pro_team.color},{feature:tU.BAf.Teams,name:"Up to 20 Teams",tooltip:"Teams allow you to manage your users to reflect your organization and make access control a breeze.",theme:tY.pro_team.color},{feature:tU.BAf.StyleGuides,name:"Shared Style Guides",tooltip:"Create API style guide projects managed by workspace owners and administrators, to align consistency across projects, business units, or workspace groups.",theme:tY.pro_team.color},{feature:tU.BAf.Groups,name:"Workspace Groups",tooltip:"Organize projects in your sidebar and easily grant project access to users in bulk.",theme:tY.pro_team.color},{feature:tU.BAf.Whitelabel,name:"Remove Stoplight Branding",tooltip:'Remove the "Powered by Stoplight" badge from your documentation.',theme:tY.pro_team.color},{feature:tU.BAf.CustomGitIntegration,name:"Self Hosted Git Providers",tooltip:"Connect seamlessly with enterprise Git providers.",theme:tY.pro_team.color},{feature:tU.BAf.ActivityLogs,name:"Activity Logs",tooltip:"Keep your workspace secure by viewing a record of actions taken by members and guests.",theme:tY.pro_team.color},{feature:tU.BAf.SamlLdapIntegration,name:"LDAP & SAML SSO",tooltip:"Enable single sign-on (SSO) to integrate with your organization's existing authentication infrastructure.",theme:tY.pro_team.color},{feature:tU.BAf.DesignLibrary,name:"Component Libraries",tooltip:"Define a set of standard components to be used across your API ecosystem",theme:tY.pro_team.color},{feature:[tU.BAf.ApiAccess,tU.BAf.OauthClientApps],name:"Catalog API Access",tooltip:"Easily export the latest bundled references and schemas.",theme:tY.pro_team.color}]},enterprise:{name:"Enterprise",icon:"buildings",ctaButtonText:"Contact Sales",theme:tY.enterprise,features:[{name:"Custom Pricing",theme:tY.enterprise.color},{name:"Unlimited Projects",theme:tY.enterprise.color},{name:"Unlimited Teams",feature:tU.BAf.Teams,theme:tY.enterprise.color},{name:"Custom Payment Terms",theme:tY.enterprise.color},{name:"Invoicing",theme:tY.enterprise.color},{name:"Onboarding with a CSM",tooltip:"Onboarding with a Customer Success Manager",theme:tY.enterprise.color},{name:"Assigned TAM",tooltip:"Assigned Technical Account Manager",theme:tY.enterprise.color},{name:"Priority Support",theme:tY.enterprise.color}]}},ah=({displayYearly:e,handleYearlySwitch:t,isScreen:a,selectedPlan:r})=>{let[n,o]=(0,ty.useState)(null),[l,i]=(0,ty.useState)(r),[s,c]=(0,ty.useState)(!1),u=(0,tF.tz)(),d=(0,tM.s)(),{state:m}=(0,tB.U8)(),p=(0,tA.useLocation)();(0,ty.useEffect)(()=>{c(!0),a||i(d.getLowestPaidProductForFeature(u.selectedFeature).description?.toLowerCase()),c(!1)},[a,d,u.selectedFeature]);let{data:g}=(0,tN.useGetBillingProducts)();if(s)return ty.createElement(tg.Box,null,"Loading...");if(!s&&!g)return ty.createElement(tg.Box,null,tR.gE);let h=g.find(e=>e.id===tR.X),f=g.find(e=>e.id===tR.e5),b=g.find(e=>e.id===tR.y0),y=g.find(e=>e.id===tR.WR),w=p.pathname.includes("/settings")??m.router.pathname.includes("/settings");return ty.createElement(ty.Fragment,null,ty.createElement(tg.HStack,{spacing:2,alignItems:"stretch",justifyContent:"start","data-testid":"upsell-plan-cards",style:{overflowX:w?"auto":"unset"}},h&&ty.createElement(ap,{selectedPlan:l,productKey:"basic",product:h,displayYearly:e}),f&&ty.createElement(ap,{selectedPlan:l,productKey:"startup",product:f,displayYearly:e}),b&&ty.createElement(ap,{selectedPlan:l,productKey:"pro_team",product:b,displayYearly:e}),y&&ty.createElement(ap,{selectedPlan:l,productKey:"enterprise",product:y,displayYearly:e})),n?ty.createElement(ac,{isOpen:!0,onClose:()=>o(null),displayYearly:e,showSavings:!0,handleYearlySwitch:t,productId:n.id,ctaButton:({product:e,interval:t})=>ty.createElement(tz,{product:e,interval:t})}):null)},af=(0,tS.withErrorBoundary)(()=>{let e=(0,tF.L3)(),t=(0,tF.tz)(),a=(0,tM.s)(),{jwt:r}=(0,tF.hD)(),{currentWorkspaceId:n}=(0,tF.C$)(),o=a.currentProduct?.name===tU.mmV.Free||a.currentProduct?.id===tR.$X,[l,i]=ty.useState(!0),{data:s}=(0,tN.useGetBillingAccount)(r,{workspace_id:n});return ty.useEffect(()=>{i(!(s?.billing_pricing_plan_id&&s.stripe_current_period_end)||s?.cycle_interval_months===12)},[s]),ty.createElement(tg.Modal,{isOpen:t.featureDialogOpen,size:"grow",onClose:()=>{e.setFeatureDialogOpen(!1),e.setSelectedProduct(void 0)},title:"Unlock the power of your Stoplight workspace",footer:o&&i?ty.createElement(tg.HStack,{spacing:2},ty.createElement(tg.Box,{color:"muted"},"Billed monthly"),ty.createElement(tg.Switch,{onChange:i,isSelected:l}),ty.createElement(tg.Box,{color:"muted"},"Billed yearly (2 months free)")):void 0},ty.createElement(tg.Box,{p:4},ty.createElement(ah,{handleYearlySwitch:i,displayYearly:l})))});var ab=a(46653),ay=a(87773);let aw=(0,tS.withErrorBoundary)(()=>{let{log:e}=(0,ay.p)(),{infoDialogOpen:t,infoDialogDetails:{email:a,lockReason:r}={}}=(0,tF.tz)(),n=a&&ty.createElement("span",null,", ",ty.createElement("a",{href:`mailto:${a}`},a),",");return ty.createElement(tg.Modal,{isOpen:t,onClose:Function,size:"md",isNotDismissable:!0,title:ty.createElement(tg.HStack,{spacing:3,pl:4},ty.createElement(tg.Icon,{icon:["fas","lock"],style:{color:"var(--color-danger)",fontSize:18}})," ",ty.createElement(tg.Box,{fontWeight:"bold",style:{fontSize:20}},"Access Denied")),footer:ty.createElement(tg.HStack,{pl:2,alignItems:"stretch",justifyContent:"between",flex:"auto"},ty.createElement(tg.Button,{appearance:"minimal",onPress:()=>{e({event:"learn_more_about_locked_workspace_clicked",payload:{location:"locked_workspace_modal"}}),window.open("failed_payment"===r?ab.xz.workspace_locking_failed_payment:ab.xz.workspace_locking_overusage,"_blank","noopener")},style:{color:"var(--color-link)"}},"Learn More"),ty.createElement(tg.Button,{p:1,appearance:"primary",onPress:()=>{e({event:"create_new_workspace_from_locked",payload:{location:"locked_workspace_modal"}}),window.open(`${tm.wZ}/welcome`,"_blank","noopener")}},"Create my own workspace"))},ty.createElement(tg.VStack,{spacing:4,px:4,style:{fontSize:14}},ty.createElement(tg.Text,null," ",(()=>{switch(r){case"failed_payment":return"The payment method associated with this workspace has failed.";case"overusage":return"The Free plan only allows for one owner to have access.";default:return""}})()),ty.createElement(tg.Text,null,"Please contact the owner of this workspace",n," to restore access. Or, you can create your own workspace by clicking the button below.")))});var aE=a(2188);let av=()=>{let{state:e,actions:t}=(0,tB.U8)();(0,ty.useEffect)(()=>{(0,aE.setConsumer)("ninja",e.metadata.release),e.router.isCustomDomain&&(0,aE.setHost)(e.router.appUrl),async function(){try{await t.auth.populateCurrentUser()}catch(e){console.error("Error bootstrapping app data",e)}finally{t.metadata.dataBootstrapCompleted()}}()},[])};var ak=a(57891),a_=a(13750);let ax=({children:e,logos:t,usecases:a})=>{let{state:r}=(0,tB.U8)(),n=(0,tA.useLocation)(),{isResponsiveLayoutEnabled:o}=(0,a_.s)(),l=r.workspaces.currentWorkspace?.hidePoweredBy,i=n.pathname??"/welcome/name"===r.router.pathname;return ty.createElement(ty.Fragment,null,!l&&!o&&ty.createElement("div",{className:"SplitLanding_logo z-30 space-x-12"},ty.createElement("a",{href:"https://stoplight.io/",className:"reset flex items-center pl-24"},ty.createElement("div",{className:"text-blue text-3xl "},ty.createElement("div",{className:"sl-icon-stoplight"})),ty.createElement("div",{className:"text-xl tracking-wide text-black ml-2 -mt-1"},ty.createElement("span",null,"Stoplight")))),ty.createElement("div",{className:t3()("flex justify-center sm:flex-col",{"py-24":o,"py-48":!o})},e,!n.pathname.includes("/auth")&&ty.createElement(()=>ty.createElement(tj.Card,{style:{maxWidth:475},elevation:tj.Elevation.TWO,className:"md:hidden ml-16"},ty.createElement("div",{className:"text-center py-3"},ty.createElement("h1",{className:"text-2xl text-gray-8 font-medium"},i?"Why Create a Workspace?":"Why Stoplight?"),ty.createElement("div",{className:"text-lg text-gray-8 pb-8"},i?"A Stoplight Workspace gives your APIs a home at your company":"Design and Document APIs Faster"),a&&ty.createElement(aS,{usecases:i?a.slice(5,9):a.slice(0,5)}),ty.createElement("img",{src:i?"/static/images/features/why_create.svg":"/static/images/features/why_signup.svg",alt:"sign up",className:"mx-auto object-center py-10"}),t&&ty.createElement(aI,{logos:t}))),null)))},aI=({logos:e})=>ty.createElement(ty.Fragment,null,ty.createElement("div",null,"Leading API First Companies Trust Stoplight"),ty.createElement("div",{className:"flex flex-wrap justify-center my-4"},e?.map((e,t)=>ty.createElement("img",{key:t,src:e.src,alt:e.alt,className:"object-contain m-2",style:{maxHeight:20,maxWidth:60}}))),ty.createElement("span",{className:"text-gray-5"},"And 1000s of other companies...")),aS=({usecases:e})=>ty.createElement("div",{className:"flex flex-wrap justify-evenly mx-16"},e?.map((e,t)=>ty.createElement("div",{key:t,className:`inline-block rounded-full bg-${e.color}-1 text-${e.color} text-sm font-semibold uppercase px-6 mb-3`},e.usecase))),aj=ty.forwardRef(({onChange:e,onFieldChange:t,...a},r)=>ty.createElement(tj.InputGroup,{inputRef:r,...a,onChange:a=>{e&&e(a),t&&t(a)}})),aC=({title:e,description:t,children:a,error:r,message:n,messageIntent:o,logoUrl:l,icon:i,initials:s,color:c,dark:u,center:d})=>{let m=l||i||s,{isResponsiveLayoutEnabled:p}=(0,a_.s)(),g=null;n?g=ty.createElement(tj.Callout,{intent:o,className:"mt-8"},n):r&&(g=ty.createElement(tj.Callout,{intent:"danger",className:"mt-8"},r));let h={};return p||(d?h.minWidth=550:(h.minWidth=400,h.maxWidth=475)),ty.createElement(tj.Card,{className:t3()("p-0 rounded-lg overflow-hidden",{"bp3-dark":u,"w-full":!d}),style:h,elevation:tj.Elevation.TWO},ty.createElement("div",{className:"bp3-dark bg-gray-8"},ty.createElement("div",{className:"bg-darken-4 p-8"},e&&ty.createElement("div",{className:"text-center text-2xl font-semibold"},e),t&&ty.createElement("div",{className:t3()("text-gray-3 text-center mx-auto",{"mt-2":e})},t),m&&ty.createElement("div",{className:t3()("rounded-full bg-white w-32 h-32 mt-8 mx-auto flex items-center jusity-center relative overflow-hidden shadow",{[`text-${c}`]:c}),style:{marginBottom:-60}},l&&ty.createElement("div",{className:"absolute inset-0 z-10 bg-cover",style:{backgroundImage:`url('${l}')`,backgroundPosition:"center",backgroundSize:"contain",backgroundRepeat:"no-repeat"}}),i&&ty.createElement(tj.FAIcon,{icon:i,className:"text-5xl mx-auto"}),s&&!l&&ty.createElement("span",{className:"mx-auto font-black uppercase text-4xl"},s)))),ty.createElement("div",{className:t3()("py-10 px-12",{"mt-5":m})},a,g))},aP=e=>ty.createElement(tg.Box,{className:"p-6"},ty.createElement(aC,e)),aA=(0,ak.ss)((0,ak.aZ)(function({workspace:e}){let{state:t,effects:a}=(0,tB.U8)(),r=(0,tA.useNavigate)(),n=t.router.searchParams.get("token"),[o,l]=ty.useState(null),[i,s]=ty.useState(!1),[{error:c,data:u,fetching:d}]=(0,tU.htT)({pause:!n,variables:{token:n}});return ty.useEffect(()=>{if(d)return;let e=u?.inviteEmail?.output;e?l(e):(a.notifications.danger({message:c?.message||"Invalid invite URL"}),a.router.navigate(r,"/auth"))},[u,d,n]),ty.useEffect(()=>{!i&&o&&(a.reporter.log({event:"workspace_invite_opened",payload:{workspace_slug:t.router.workspaceSlug}}),s(!0))},[t.router.workspaceSlug,a.reporter,i,o]),ty.createElement(aP,{title:ty.createElement("div",{className:"flex items-center justify-center"},ty.createElement(tj.FAIcon,{icon:["fad","gift"],className:"mr-5 text-2xl"})," Accept Invite"," ",ty.createElement(tj.FAIcon,{icon:["fad","gift"],className:"ml-5 text-2xl"})),description:`You have been invited to the ${e.name} workspace.`,color:"blue",logoUrl:e.logoUrl,initials:e.name.substr(0,2)},o&&n?ty.createElement(aB,{email:o,inviteToken:n}):ty.createElement("div",{className:"py-12 text-xl text-center text-gray-6"},"Checking invite... ",ty.createElement(tj.FAIcon,{icon:["far","spinner-third"],className:"fa-spin ml-4",size:"lg"})))}));function aB({email:e,inviteToken:t}){let{effects:a,actions:r,state:n}=(0,tB.U8)(),{register:o,handleSubmit:l,formState:{isValid:i,isSubmitting:s}}=(0,t5.mN)({mode:"onChange"}),[,c]=(0,tU.cg)(),u=async({password:e})=>{let{error:o,data:l}=await c({token:t,password:e}),i=l?.acceptInvite.token;o||!i?(a.notifications.danger({message:o?.message||"Something went wrong, please try again"}),r.auth.rejectAuthenticated({integrationKind:tU.KXp.Builtin})):(a.notifications.success({message:"Account created, welcome!"}),await r.auth.resolveAuthenticated({token:i,integrationKind:tU.KXp.Builtin}),a.reporter.log({event:"workspace_invite_accepted",payload:{workspace_slug:n.router.workspaceSlug,role:l.acceptInvite.userRole,workspace_plan:n.workspaces.currentWorkspace.billingProduct.name}}))};return ty.createElement("form",{onSubmit:l(u)},e?ty.createElement(tj.FormGroup,{label:"Invited Email",labelFor:"email",helperText:"A Stoplight account will be created with this email"},ty.createElement(tj.InputGroup,{id:"email",value:e,disabled:!0,large:!0})):null,ty.createElement(tj.FormGroup,{labelFor:"password",label:"Choose a Password",helperText:"At least 6 characters"},ty.createElement(aj,{type:"password",...o("password",{required:!0,minLength:6,maxLength:50}),name:"password",id:"password",placeholder:"******",autoFocus:!0,large:!0})),ty.createElement(tj.Button,{type:"submit",className:"mt-3 w-full",large:!0,intent:"primary",disabled:!tm.KJ||!i,loading:s},"Accept Invite & Signup"))}var aD=a(83676),aT=a(55428);function aF({workspaceIntegrationId:e,integrationKind:t},a){let{actions:r,state:n}=(0,tB.U8)(),o=(0,tN.useLogin)({baseUrl:n.router.isCustomDomain?`https://${n.workspaces.currentWorkspace?.domain}/api`:void 0});return async(n,l)=>{if(null===e||null===t)return null;try{let i=await o.mutateAsync({workspaceIntegrationId:e,usernameOrEmail:n,password:l,source:"web"}),s=(0,aT.T)(i.joinRequestStatus);return s&&a(s.text,s.intent),i.token&&await r.auth.resolveAuthenticated({token:i.token,integrationKind:t}),i}catch(n){let e="Something went wrong, please try again.";switch((0,aD.isPlainObject)(n)&&n.code){case 401:e=n.type;break;case 403:if("WORKSPACE_IS_LOCKED"===n.type){e=n.message;let t=n.data.ownerEmail,a=n?.data?.lockReason;r.ui.setInfoDialogOpen(!0),t&&r.ui.setInfoDialogDetails({email:t}),a&&r.ui.setInfoDialogDetails({lockReason:a})}break;default:e=n.message}return a(e,"danger"),r.auth.rejectAuthenticated({integrationKind:t}),null}}}let a$=(0,ak.ss)((0,ak.aZ)(function({workspace:e}){let{"*":t}=(0,tA.useParams)(),{state:a,effects:r}=(0,tB.U8)(),[n,o]=ty.useState(),[l,i]=ty.useState(),[s,c]=ty.useState(!1),u=(0,tA.useNavigate)(),d=null,m=ty.useCallback((e,t)=>{o(e),i(t)},[o,i]);switch(t){case"ads":d=tU.KXp.AzureDevopsServer;break;case"bbdc":d=tU.KXp.BitbucketDataCenter;break;case"ldap":d=tU.KXp.Ldap}let p=e.name,g=d&&a.workspaces.enabledIntegrations?.find(e=>e.kind===d),h=aF({workspaceIntegrationId:g?.id??null,integrationKind:d},m);if(!g||!d)return ty.createElement(tA.Navigate,{to:"/"});let f=async({username:e,password:t})=>{m();let a=await h(e,t);a?.joinRequestStatus===tU.sDI.Denied||a?.joinRequestStatus===tU.sDI.Disabled?c(!0):a?.confirmationRequired&&r.router.navigate(u,"/auth/confirm-workspace-member-email")};return ty.createElement(aP,{title:`Sign in to the ${p} Workspace`,color:"green",logoUrl:e.logoUrl,initials:p.substr(0,2),message:n,messageIntent:l},ty.createElement(aN,{onSubmit:f,integrationKind:d,isSubmitDisabled:s}))}));function aN({onSubmit:e,integrationKind:t,isSubmitDisabled:a}){let{register:r,handleSubmit:n,formState:{isValid:o,isSubmitting:l}}=(0,t5.mN)({mode:"onChange"}),{log:i}=(0,tF.pw)();return ty.createElement("form",{onSubmit:n(e)},ty.createElement(tj.FormGroup,{label:"Username",labelFor:"username"},ty.createElement(aj,{...r("username",{required:!0}),name:"username",id:"username",autoFocus:!0,large:!0})),t&&t===tU.KXp.AzureDevopsServer?ty.createElement(tj.FormGroup,{label:ty.createElement(ty.Fragment,null,"Personal Access Token",ty.createElement("a",{href:"https://docs.microsoft.com/en-us/azure/devops/organizations/accounts/use-personal-access-tokens-to-authenticate?view=tfs-2018",target:"_blank",rel:"noopener noreferrer",tabIndex:-1},ty.createElement(tj.FAIcon,{icon:"question-circle",className:"text-gray-5 ml-1"}))),labelFor:"pat"},ty.createElement(aj,{type:"password",...r("password",{required:!0}),name:"password",id:"pat",placeholder:"******",large:!0})):t&&t===tU.KXp.BitbucketDataCenter?ty.createElement(tj.FormGroup,{label:ty.createElement(ty.Fragment,null,"HTTP Access Token",ty.createElement("a",{href:"https://confluence.atlassian.com/bitbucketserver0718/http-access-tokens-1097182514.html",target:"_blank",rel:"noopener noreferrer",tabIndex:-1},ty.createElement(tj.FAIcon,{icon:"question-circle",className:"text-gray-5 ml-1"}))),labelFor:"password"},ty.createElement(aj,{type:"password",...r("password",{required:!0}),name:"password",id:"password",placeholder:"******",large:!0})):ty.createElement(tj.FormGroup,{label:"Password",labelFor:"password"},ty.createElement(aj,{type:"password",...r("password",{required:!0}),name:"password",id:"password",placeholder:"******",large:!0})),ty.createElement(tj.Button,{type:"submit",className:"mt-3 w-full",large:!0,intent:"primary",disabled:!tm.KJ||!o||a,loading:l,onClick:()=>{i({event:"basic_auth_login",payload:{integration:t}})}},"Login"))}let aU=(0,tS.withErrorBoundary)((0,ak.ss)((0,ak.aZ)(function({workspace:e}){let[t,a]=ty.useState(null);return ty.createElement(aP,{title:"Confirm Email",description:"Check your email for a confirmation code.",error:t},ty.createElement(aM,{workspaceId:e.id,onError:e=>{a(e)}}))})));function aM({workspaceId:e}){let t=(0,tF.hD)(),{effects:a}=(0,tB.U8)(),r=(0,tA.useNavigate)(),n=(0,tN.useConfirmWorkspaceMemberEmailAddress)(t.jwt),{register:o,handleSubmit:l,formState:{isValid:i,isSubmitting:s}}=(0,t5.mN)({mode:"onChange"}),c=async({code:t})=>{try{await n.mutateAsync({workspaceId:e,confirmationCode:t}),a.router.navigate(r,"/auth"),a.notifications.success({message:"Email successfully confirmed.  Please login again."})}catch(e){a.notifications.danger({message:`${e.title?e.title:e.message}`})}};return ty.createElement("form",{onSubmit:l(c)},ty.createElement(tj.FormGroup,{labelFor:"code",label:"Confirmation Code",helperText:"We sent a confirmation code to your email address. Please give it a minute, and check your spam folder!"},ty.createElement(aj,{...o("code",{required:!0,minLength:1}),name:"code",id:"code","data-testid":"confirm-workspace-member-email-input",placeholder:"abcdef123456",autoFocus:!0,large:!0})),ty.createElement(tj.Button,{type:"submit",className:"mt-3 w-full","data-testid":"confirm-workspace-member-email-btn",large:!0,intent:"primary",disabled:!tm.KJ||!i,loading:s},"Confirm Email for this Workspace"))}var aR=a(88179);let aW=(0,ak.ss)((0,ak.aZ)(function({workspace:e}){let{state:t}=(0,tB.U8)(),a=e.name,r=t.workspaces.enabledIntegrations?.find(e=>e.kind===tU.KXp.Builtin);return r&&r.allowUserRegister?ty.createElement(aP,{title:`Sign in to or join the ${a} Workspace`,color:"green",logoUrl:e.logoUrl,initials:a.substr(0,2)},e.joinRequestsDisabled&&ty.createElement(tj.Callout,{intent:"warning",className:"mt-4 mb-8"},"Note that this workspace has disabled join requests. You'll only be able to join if you've been previously invited or your email is from an allowed domain."),ty.createElement(aL,{workspaceId:t.workspaces.currentWorkspaceId})):ty.createElement(tA.Navigate,{to:"/auth/email/login"})}));function aL({workspaceId:e}){let{effects:t}=(0,tB.U8)(),[a,r]=ty.useState(""),n=(0,tA.useNavigate)(),{register:o,handleSubmit:l,formState:{isValid:i,isSubmitting:s}}=(0,t5.mN)({mode:"onChange"}),[,c]=(0,tU.yAc)(),u=async()=>{let{error:r}=await c({email:a,workspaceId:e});r?t.notifications.danger({message:(0,aR.Q8)(r?.message)||"Something went wrong, please try again."}):(t.router.navigate(n,"/auth/email/signup",{state:{email:a}}),t.notifications.success({message:"A confirmation code has been sent to your email address"}))};return ty.createElement("form",{onSubmit:l(u)},ty.createElement(tj.FormGroup,{label:"Your Email",labelFor:"email"},ty.createElement(aj,{...o("email",{required:!0,pattern:tm.CI,maxLength:255}),onFieldChange:e=>r(e.currentTarget.value),name:"email",id:"email",placeholder:"you@your-company.com",autoFocus:!0,large:!0})),ty.createElement(tj.Button,{type:"submit",className:"mt-3 w-full",large:!0,intent:"primary",disabled:!tm.KJ||!i,loading:s,id:"signUp"},"Sign Up"),ty.createElement("div",{className:"pt-5"},"Already have an account? ",ty.createElement(tk.Link,{to:"/auth/email/login"},"Click here to login.")))}let aG=(0,ak.ss)((0,ak.aZ)(function({workspace:e}){let{state:t}=(0,tB.U8)(),a=(0,tA.useLocation)(),[r,n]=ty.useState(),[o,l]=ty.useState(),i=e.name,s=t.workspaces.enabledIntegrations?.find(e=>e.kind===tU.KXp.Builtin);if(!s)return ty.createElement(tA.Navigate,{to:"/auth"});let c=a?.state?.email;return ty.createElement(aP,{title:`Sign in to the ${i} Workspace`,color:"green",logoUrl:e.logoUrl,initials:i.substr(0,2),message:r,messageIntent:o},ty.createElement(aO,{workspaceIntegration:s,defaultEmail:c,onMessage:(e,t)=>{n(e),l(t)}}))}));function aO({workspaceIntegration:e,onMessage:t,defaultEmail:a}){let{register:r,handleSubmit:n,formState:{isValid:o,isSubmitting:l},watch:i}=(0,t5.mN)({mode:"onChange",defaultValues:{email:a}}),{effects:s}=(0,tB.U8)(),c=(0,tA.useNavigate)(),[u,d]=(0,ty.useState)(!1),m=aF({workspaceIntegrationId:e.id,integrationKind:tU.KXp.Builtin},t),p=async({email:e,password:a})=>{t();let r=await m(e,a);(r?.joinRequestStatus===tU.sDI.Denied||r?.joinRequestStatus===tU.sDI.Disabled)&&d(!0),r?.confirmationRequired&&s.router.navigate(c,"/auth/confirm-workspace-member-email")},g=i("email");return ty.createElement("form",{onSubmit:n(p)},ty.createElement(tj.FormGroup,{label:"Your Email",labelFor:"email"},ty.createElement(aj,{...r("email",{required:!0,pattern:tm.CI,maxLength:255}),name:"email",id:"email",readOnly:!!a,autoFocus:!a,large:!0})),ty.createElement(tj.FormGroup,{labelFor:"password",label:ty.createElement("span",{className:"flex items-center"},"Your Password",ty.createElement(tk.Link,{tabIndex:-1,className:"flex-1 text-right text-sm font-normal",to:"/auth/forgot-password",state:{email:g}},"Forgot Password?"))},ty.createElement(aj,{type:"password",...r("password",{required:!0,minLength:6,maxLength:50}),name:"password",id:"password",placeholder:"******",autoFocus:!!a,large:!0})),ty.createElement(tj.Button,{type:"submit",className:"mt-3 w-full",large:!0,intent:"primary",disabled:!tm.KJ||!o||u,loading:l},"Login"),e.allowUserRegister&&ty.createElement("div",{className:"pt-5"},"Don't have an account? ",ty.createElement(tk.Link,{to:"/auth/email"},"Click here to join.")))}let az=(0,ak.ss)((0,ak.aZ)(function({workspace:e}){let t=(0,tA.useLocation)(),{state:a}=(0,tB.U8)(),[r,n]=ty.useState(),[o,l]=ty.useState(),i=e.name;if(!a.workspaces.enabledIntegrations?.find(e=>e.kind===tU.KXp.Builtin))return ty.createElement(tA.Navigate,{to:"/"});let s=t?.state?.email;return ty.createElement(aP,{title:"Complete Account Creation",color:"green",logoUrl:e.logoUrl,initials:i.substr(0,2),message:r,messageIntent:o},ty.createElement(aq,{workspaceId:e.id,defaultEmail:s,onMessage:(e,t)=>{n(e),l(t)}}))}));function aq({workspaceId:e,onMessage:t,defaultEmail:a}){let{actions:r}=(0,tB.U8)(),{register:n,handleSubmit:o,formState:{isValid:l,isSubmitting:i}}=(0,t5.mN)({mode:"onChange"}),[s,c]=(0,ty.useState)(!1),[,u]=(0,tU.rUz)(),d=async({password:a,code:n})=>{t();try{let{error:o,data:l}=await u({workspaceId:e,password:a,code:n});if(o)throw Error(o.message);if(!l?.redeemCodeCreateAccount)throw Error("Unknown error. Please contact support.");let i=(0,aT.T)(l.redeemCodeCreateAccount.joinRequestStatus||void 0);i&&t(i.text,i.intent),l.redeemCodeCreateAccount.auth?.token?await r.auth.resolveAuthenticated({token:l.redeemCodeCreateAccount.auth.token,integrationKind:tU.KXp.Builtin}):c(!0)}catch(e){t(e.message,"danger"),r.auth.rejectAuthenticated({integrationKind:tU.KXp.Builtin})}};return ty.createElement("form",{onSubmit:o(d)},a?ty.createElement(tj.FormGroup,{labelFor:"email",label:ty.createElement("span",{className:"flex items-center"},"Your Email",ty.createElement(tk.Link,{tabIndex:-1,className:"flex-1 text-right text-sm font-normal",to:"/auth/email"},"Wrong email?"))},ty.createElement(tj.InputGroup,{name:"email",id:"email",defaultValue:a,disabled:!0,large:!0})):null,ty.createElement(tj.FormGroup,{labelFor:"code",label:"Confirmation Code",helperText:"We sent a confirmation code to your email address. Please give it a minute, and check your spam folder!"},ty.createElement(aj,{...n("code",{required:!0,minLength:1}),name:"code",id:"code",placeholder:"abcdef123456",autoFocus:!!a,large:!0})),ty.createElement(tj.FormGroup,{labelFor:"password",label:"Choose a Password",helperText:"At least 6 characters"},ty.createElement(aj,{type:"password",...n("password",{required:!0,minLength:6,maxLength:50}),name:"password",id:"password",placeholder:"******",large:!0})),ty.createElement(tj.Button,{type:"submit",className:"mt-3 w-full",large:!0,intent:"primary",disabled:!tm.KJ||!l||s,loading:i},"Create Account"))}let aV=(0,ak.ss)((0,ak.aZ)(function(){let e=(0,tA.useLocation)(),t=e?.state?.email;return ty.createElement(aP,{title:"Forgot Password",description:"We'll email you a code to reset your password"},ty.createElement(aH,{defaultEmail:t}))}));function aH({defaultEmail:e}){let{effects:t}=(0,tB.U8)(),a=(0,tA.useNavigate)(),{register:r,handleSubmit:n,formState:{isValid:o,isSubmitting:l}}=(0,t5.mN)({mode:"onChange",defaultValues:{email:e}}),[,i]=(0,tU.xET)(),s=async({email:e})=>{let{error:r}=await i({email:e});r?t.notifications.danger({message:r?.message||"Something went wrong, please try again."}):(t.notifications.success({message:"If an account with that email exists, we've sent it a reset code"}),t.router.navigate(a,"../reset-password"))};return ty.createElement("form",{onSubmit:n(s)},ty.createElement(tj.FormGroup,{label:"Your Email",labelFor:"email"},ty.createElement(aj,{...r("email",{required:!0,pattern:tm.CI,maxLength:255}),name:"email",id:"email",autoFocus:!0,large:!0})),ty.createElement(tj.Button,{type:"submit",className:"mt-3 w-full",large:!0,intent:"primary",disabled:!tm.KJ||!o,loading:l},"Send Reset Code"))}var aQ=a(3411),aK=a(60606);let aJ=({kind:e,isLoading:t,disabled:a,className:r,onClick:n,children:o})=>ty.createElement("div",{className:t3()(r,"shadow rounded flex items-center border border-transparent text-white font-semibold tracking-wide whitespace-no-wrap select-none hover:border-blue-4 hover:shadow",`bg-${aY[e]}-8`,{"cursor-pointer":!(t||a),"opacity-75 cursor-waiting":t||a}),onClick:n,"data-test":`connect-${(0,th.kebabCase)(e)}-btn`},ty.createElement("div",{className:`p-4 bg-${aY[e]}-9`},ty.createElement(tj.FAIcon,{size:"2x",icon:tm.Mh[e]||["fas","question"]})),ty.createElement("div",{className:"flex-1 px-5 text-lg"},t?"Connecting...":o)),aY={[tU.KXp.Builtin]:"purple",[tU.KXp.Github]:"gray",[tU.KXp.Gitlab]:"orange",[tU.KXp.Ldap]:"gray",[tU.KXp.Saml]:"gray",[tU.KXp.BitbucketCloud]:"blue",[tU.KXp.BitbucketDataCenter]:"blue",[tU.KXp.AzureDevopsServer]:"blue",[tU.KXp.AzureDevopsServices]:"blue"};function aX(){let{effects:e}=(0,tB.U8)();return t=>{let a=window.open("about:blank",t,function(){let e=screen.width/window.screen.availWidth,t=(window.outerHeight-620)/2/e+window.screenY,a=(window.outerWidth-620)/2/e+window.screenX;return`scrollbars=yes, width=${620/e}, height=${620/e}, top=${t}, left=${a}`}());if(!a||a.closed||void 0===a.closed){e.notifications.danger({message:"Your browser blocked the popup window - please allow it and try again. NOTE if your browser automatically opens the popup after allowing, please close it and start over by clicking the login button again."});return}return a.focus(),a}}let aZ=(0,ak.ss)((0,ak.aZ)(function({workspace:e}){let{state:t}=(0,tB.U8)(),a=e.name,r=t.workspaces.enabledIntegrations?t.workspaces.enabledIntegrations.filter(e=>e.allowUserLogin):[];return 1===r.length&&r[0].kind===tU.KXp.Builtin?ty.createElement(tA.Navigate,{to:"/auth/email/login",replace:!0}):ty.createElement(aP,{title:`${a} Workspace`,description:`${a} is using Stoplight to manage their API design workflow. Choose one of the options below to sign in.`,color:"green",logoUrl:e.logoUrl,initials:a.substr(0,2)},ty.createElement(a0,{integrations:r}),ty.createElement("div",{className:"mt-10 text-sm text-gray-5"},"By continuing, you are agreeing to Stoplight's"," ",ty.createElement("a",{href:"https://stoplight.io/terms",target:"_blank",rel:"noopener noreferrer"},"Terms of Service")," ","and"," ",ty.createElement("a",{href:"https://stoplight.io/privacy",target:"_blank",rel:"noopener noreferrer"},"Privacy Policy"),"."))}));function a0({integrations:e}){let{state:t,actions:a,effects:r}=(0,tB.U8)(),n=(0,tA.useNavigate)(),o=aX(),l=(0,tA.useLocation)();return e.length?(e=(0,th.sortBy)(e,e=>tm.xF[e.kind]===aQ.v6.Builtin),ty.createElement(ty.Fragment,null,e.map((e,i)=>ty.createElement(aJ,{key:e.id,className:t3()({"mt-6":i>0}),kind:e.kind,disabled:t.auth.isConnectingIntegration,isLoading:t.auth.connectingIntegrationId===e.id,onClick:async()=>{if(r.reporter.log({event:"workspace_integration_connect_started",payload:{kind:e.kind,location:"workspace_auth"}}),(0,aK.Yr)(tm.xF[e.kind],e.config)){let r=o(e.name);r&&await a.auth.loginWithOauth({integration:e,popup:r}),t.auth.workspaceMemberEmailConfirmationRequired&&n("/auth/confirm-workspace-member-email")}else e.kind===tU.KXp.Builtin?n(`/auth/email/login${l.search??(t.router.search||"")}`):e.kind===tU.KXp.Ldap?n("/auth/ldap"):e.kind===tU.KXp.BitbucketDataCenter?n("/auth/bbdc"):e.kind===tU.KXp.AzureDevopsServer?n("/auth/ads"):alert("TODO: 3rd part non oauth (saml server v5")}},e.name)))):ty.createElement("div",null,ty.createElement("div",null,"This workspace has not enabled any integrations for login."),ty.createElement("div",{className:"mt-2"},"If this is an error, please ",ty.createElement("a",{href:tm.FI},"contact support"),"."))}let a1=(0,tS.withErrorBoundary)((0,ak.ss)((0,ak.aZ)(function({workspace:e}){let[t,a]=ty.useState(null);return ty.createElement(aP,{title:"Reset Password",description:"Check your email for a confirmation code.",error:t},ty.createElement(a2,{workspaceId:e.id,onError:e=>{a(e)}}))})));function a2({workspaceId:e,onError:t}){let{effects:a,actions:r}=(0,tB.U8)(),{register:n,handleSubmit:o,formState:{isValid:l,isSubmitting:i}}=(0,t5.mN)({mode:"onChange"}),[,s]=(0,tU.qMk)(),c=async({code:n,password:o})=>{let{error:l,data:i}=await s({code:n,password:o,workspaceId:e}),c=i?.redeemCodeResetPassword.token;l||!c?(l&&-1!==l.message.indexOf("workspace permission denied")?t("You need to be a member of this workspace to reset your password."):a.notifications.danger({message:l?.message||"Something went wrong, please try again"}),r.auth.rejectAuthenticated({integrationKind:tU.KXp.Builtin})):(a.notifications.success({message:"Password updated"}),r.auth.resolveAuthenticated({token:c,integrationKind:tU.KXp.Builtin}))};return ty.createElement("form",{onSubmit:o(c)},ty.createElement(tj.FormGroup,{labelFor:"code",label:"Confirmation Code",helperText:"We sent a confirmation code to your email address. Please give it a minute, and check your spam folder!"},ty.createElement(aj,{...n("code",{required:!0,minLength:1}),name:"code",id:"code",placeholder:"abcdef123456",autoFocus:!0,large:!0})),ty.createElement(tj.FormGroup,{label:"New Password",labelFor:"password",helperText:"At least 6 characters"},ty.createElement(aj,{type:"password",...n("password",{required:!0,minLength:6,maxLength:50}),name:"password",id:"password",placeholder:"******",large:!0})),ty.createElement(tj.Button,{type:"submit",className:"mt-3 w-full",large:!0,intent:"primary",disabled:!tm.KJ||!l,loading:i},"Update Password & Login"))}let a4=(0,tS.withErrorBoundary)((0,ak.ss)((0,ak.aZ)(function(){let{state:e}=(0,tB.U8)();return e.auth.currentUser?ty.createElement(a3,null):ty.createElement(ax,null,ty.createElement("main",{className:"justify-center flex"},ty.createElement(tA.Routes,null,ty.createElement(tA.Route,{path:"email",element:ty.createElement(aW,null)}),ty.createElement(tA.Route,{path:"email/login",element:ty.createElement(aG,null)}),ty.createElement(tA.Route,{path:"email/signup",element:ty.createElement(az,null)}),ty.createElement(tA.Route,{path:"ldap",element:ty.createElement(a$,null)}),ty.createElement(tA.Route,{path:"bbdc",element:ty.createElement(a$,null)}),ty.createElement(tA.Route,{path:"ads",element:ty.createElement(a$,null)}),ty.createElement(tA.Route,{path:"confirm-workspace-member-email",element:ty.createElement(aU,null)}),ty.createElement(tA.Route,{path:"accept-invite",element:ty.createElement(aA,null)}),ty.createElement(tA.Route,{path:"forgot-password",element:ty.createElement(aV,null)}),ty.createElement(tA.Route,{path:"reset-password",element:ty.createElement(a1,null)}),ty.createElement(tA.Route,{path:"/",element:ty.createElement(aZ,null)}),ty.createElement(tA.Route,{path:"*",element:ty.createElement(tA.Navigate,{to:"/auth",replace:!0})}))))}))),a3=()=>{let{state:e}=(0,tB.U8)(),t=new URLSearchParams((0,tA.useLocation)().search).get("r")??(e.router.searchParams.get("r")||"");return ty.createElement(tA.Navigate,{to:`../${t||""}`,replace:!0})};var a5=a(346);let a8=(0,tS.withErrorBoundary)((0,ak.ss)(function(){let{actions:e,effects:t,state:a}=(0,tB.U8)(),r=a.router,n=(0,tN.useLogin)({baseUrl:a.router.isCustomDomain?`https://${a.workspaces.currentWorkspace?.domain}/api`:void 0}),[o,l]=(0,ty.useState)("loggedOut"),i=async({code:t,workspaceIntegrationId:a,integrationKind:r})=>{let i;if("loggingIn"!==o){l("loggingIn");try{i=await n.mutateAsync({code:t,workspaceIntegrationId:a,source:"web"})}catch(e){if(-1!==e.message.indexOf("workspace permission denied"))throw Error("Permission denied. You need be invited to this workspace.");throw Error(e.message)}if(i.token&&await e.auth.resolveAuthenticated({token:i.token,integrationKind:r}),i.confirmationRequired){l("confirmationRequired");return}l("loggedIn")}};ty.useEffect(()=>{tm.KJ&&window.opener&&window.addEventListener("message",function(e,t){function a(){t.notifications.danger({message:"Encountered an error during authentication"})}return t=>{if(window.opener&&"oauth2.state"===t.data.type){if(t.origin!==t.data.originalDomain){a();return}t.data.integrationKind===tU.KXp.Saml?function({originalDomain:t,state:r}){let n=e.body?.SAMLResponse,o=e.body?.RelayState,l=(0,a5.qg)(o??"");if(!(0,a5.zx)(l,r)){a();return}window.opener.postMessage({type:"oauth2.callback",code:n,error:e.searchParams.get("error")},t),window.close()}(t.data):function({originalDomain:t,state:r,integrationKind:n}){let o=(0,a5.uz)(e,n);if(!(0,a5.zx)(o,r)){a();return}window.opener.postMessage({type:"oauth2.callback",code:e.searchParams.get("code"),error:e.searchParams.get("error")},t),window.close()}(t.data)}}}(r,t))},[a,a.router.search,t.notifications,r,t]);let s=a.workspaces.currentWorkspace?.integrations.find(e=>e.integration.kind===tU.KXp.Saml&&e.config.defaultIdp);if(function(e){let t=null!==e.searchParams.get("state"),a=/\S/.test(e.body?.RelayState??"");return tm.KJ&&!t&&!a}(r)){let e=r.body.SAMLResponse??"";if(!s||!e)return ty.createElement(tA.Navigate,{to:"/auth",replace:!0});if("loggedIn"===o)return ty.createElement(tA.Navigate,{to:"/",replace:!0});if("confirmationRequired"===o)return ty.createElement(tA.Navigate,{to:"/auth/confirm-workspace-member-email",replace:!0});i({code:e,workspaceIntegrationId:s.id,integrationKind:s.integration.kind}).catch(e=>{t.notifications.danger({message:e?.message||"Something went wrong, please try again."})})}return ty.createElement(ax,null,ty.createElement(tg.Flex,{alignItems:"center",justifyContent:"center",w:"full",h:"full"},ty.createElement(aP,{title:"Stoplight Auth Callback"},"Redirecting...")))}));var a6=a(64652);function a7({title:e,description:t,showLogo:a}){return ty.createElement(tg.VStack,{spacing:3},a&&ty.createElement(a9,null),ty.createElement(tg.VStack,{textAlign:"center",spacing:1,align:"center"},ty.createElement(tg.Heading,{size:2},e),ty.createElement(tg.Box,{style:{maxWidth:"80%"}},ty.createElement(tg.Text,{color:"muted",size:"lg"},t))))}function a9(){return ty.createElement(tg.Flex,{rounded:"full",bg:"primary",align:"center",justify:"center",w:16,h:16,fontSize:"6xl",color:"on-primary",mx:"auto"},ty.createElement(tg.Box,{display:"inline-flex",className:"sl-icon-stoplight"}))}let re=()=>{let{state:e}=(0,tB.U8)();return ty.createElement(tg.VStack,{spacing:6,w:"full",maxW:"prose",p:6},ty.createElement(a7,{showLogo:!0,title:"Workspace does not exist",description:"There is no workspace at this URL. Click below to create one."}),ty.createElement(tg.Button,{as:"a",href:`${e.router.appUrl}/welcome`,w:"full",appearance:"primary",fullWidth:!0},"Create a new workspace!"))},rt=(0,ak.ss)(function(){let{state:e,effects:t}=(0,tB.U8)(),a=e.router.searchParams;(0,a6.e)("login/notfound");let r=e.workspaces.currentWorkspaceId;return e.router.workspaceSlug?r?ty.createElement(tA.Navigate,{to:"/",replace:!0}):ty.createElement(re,null):ty.createElement(tg.VStack,{spacing:6,w:"full",p:6,maxW:"prose"},ty.createElement(a7,{showLogo:!0,title:"Account not found ",description:""}),ty.createElement(tg.VStack,{spacing:10,p:7,rounded:"lg",textAlign:"center",boxShadow:"md",border:!0,bg:"canvas-pure",w:"full"},ty.createElement(tg.Text,null,"Please check to make sure you entered the correct email address. If you have been invited to a workspace, use the link in the invite email to access the workspace."),ty.createElement(tg.Text,null,"If you'd like to create a new workspace workspace,"," ",ty.createElement(tk.Link,{onClick:()=>{t.reporter.log({event:"user_clicked_create_another_workspace",payload:{from:"login/notfound"}})},to:`/welcome/name?${a.toString()}`},ty.createElement("strong",null,"click here.")))))}),ra=(0,ak.ss)(function(){let{state:e,effects:t}=(0,tB.U8)(),a=e.router.searchParams;(0,a6.e)("login/emailsent");let r=e.workspaces.currentWorkspaceId;return e.router.workspaceSlug?r?ty.createElement(tA.Navigate,{to:"/",replace:!0}):ty.createElement(re,null):ty.createElement(tg.VStack,{spacing:6,w:"full",maxW:"prose",p:6},ty.createElement(a7,{showLogo:!0,title:"Email sent! ",description:""}),ty.createElement(tg.VStack,{spacing:10,p:7,rounded:"lg",textAlign:"center",boxShadow:"md",border:!0,bg:"canvas-pure",w:"full"},ty.createElement(tg.Text,null,"We just sent you a list of workspaces associated with your email address. Please check your email inbox."),ty.createElement(tg.Text,null,"If you'd like to create a new workspace,"," ",ty.createElement(tk.Link,{onClick:()=>{t.reporter.log({event:"user_clicked_create_another_workspace",payload:{from:"login/emailsent"}})},to:`/welcome/name?${a.toString()}`},ty.createElement("strong",null,"click here.")))))}),rr=({id:e,htmlFor:t,children:a})=>a?ty.createElement(tg.Box,null,ty.createElement(tg.Text,{as:"label",id:e,htmlFor:t,fontSize:"base",pr:1,fontWeight:"medium"},a)):null;function rn({title:e,description:t,showLogo:a}){let{isResponsiveLayoutEnabled:r}=(0,a_.s)();return ty.createElement(tg.VStack,{spacing:3},a&&ty.createElement(ro,null),ty.createElement(tg.VStack,{textAlign:"center",spacing:1,align:"center"},ty.createElement(tg.Heading,{size:r?3:2},e),ty.createElement(tg.Box,null,ty.createElement(tg.Text,{color:"muted",size:r?"sm":"lg"},t))))}function ro(){return ty.createElement(tg.Flex,{rounded:"full",bg:"primary",align:"center",justify:"center",w:16,h:16,fontSize:"6xl",color:"on-primary",mx:"auto"},ty.createElement(tg.Box,{display:"inline-flex",className:"sl-icon-stoplight"}))}let rl=()=>{let{state:e}=(0,tB.U8)();return ty.createElement(tg.VStack,{spacing:6,w:"full",maxW:"prose",p:6},ty.createElement(rn,{showLogo:!0,title:"Workspace does not exist",description:"There is no workspace at this URL. Click below to create one."}),ty.createElement(tg.Button,{as:"a",href:`${e.router.appUrl}/welcome`,w:"full",appearance:"primary",fullWidth:!0},"Create a new workspace!"))},ri=(0,ak.ss)(function(){let{state:e}=(0,tB.U8)();(0,a6.e)("login");let t=e.workspaces.currentWorkspaceId;return e.router.workspaceSlug?t?ty.createElement(tA.Navigate,{to:"/",replace:!0}):ty.createElement(rl,null):ty.createElement(tg.Flex,{w:"full",maxW:"prose",flexDirection:"row",justifyContent:"end",p:6},ty.createElement(tg.Flex,{align:"center",justify:"center",minH:"screen",flex:1},ty.createElement(tg.VStack,{spacing:6},ty.createElement(a7,{showLogo:!0,title:"Access your workspaces",description:""}),ty.createElement(rc,null),ty.createElement(rs,null))))});function rs(){return ty.createElement(tg.Box,{textAlign:"center"},"Don't have a Stoplight account?"," ",ty.createElement("a",{href:"/welcome",target:"_self",rel:"noopener noreferrer"},ty.createElement("strong",null,"Create one here")),".")}function rc(){let{actions:e,effects:t,state:a}=(0,tB.U8)(),{register:r,handleSubmit:n,formState:{isValid:o,isSubmitting:l},getValues:i,setFocus:s}=(0,t5.mN)({mode:"onChange"}),[c,u]=ty.useState(!1),[,d]=(0,tU.vMM)(),m=(0,tA.useNavigate)();ty.useEffect(()=>{s("email")},[s]);let p=a.router.searchParams,g=()=>{let e=i();p.append("email",e.email),t.router.navigate(m,`/login/notfound?${p.toString()}`)},h=async()=>{let e=i(),{error:a}=await d({email:e?.email});a&&t.notifications.danger({message:a.message||"Something went wrong, please try again."}),p.append("email",e?.email),t.router.navigate(m,`/login/emailsent?${p.toString()}`)},f=async()=>{if(!l)try{let e=i();u(!0);let a=await t.api.checkEmailHasWorkspace(e?.email);a?h():g(),t.reporter.log({event:"requested_account_emails",payload:{account_exists:!!a}})}catch(a){t.notifications.danger({message:a.message||"Something went wrong, please try again."}),e.reporter.error({error:Error(a.message)});return}};return ty.createElement("form",{id:"loginForm",onSubmit:n(f)},ty.createElement(tg.VStack,{spacing:3},ty.createElement(tg.VStack,{spacing:1},ty.createElement(rr,{label:"Your Email",htmlFor:"email"},"Email"),ty.createElement(tg.Input,{readOnly:l,type:"email",id:"email",autoFocus:!0,bg:"canvas","aria-label":"Your Email",placeholder:"you@company.com",...r("email",{required:!0,pattern:tm.T_,maxLength:255})})),ty.createElement(tg.Button,{loading:l,w:"full",fullWidth:!0,appearance:"primary",disabled:!o,type:"submit",onPress:()=>n(f)()},c?"Success! Redirecting...":"Login")))}let ru=(0,tS.withErrorBoundary)((0,ak.ss)(function(){let{state:e}=(0,tB.U8)(),t=(0,tA.useLocation)().pathname??e.router.pathname;return"/welcome/create"===t||"/welcome/find"===t?ty.createElement(tA.Navigate,{to:"/welcome",replace:!0}):ty.createElement(tg.Flex,{as:"main",align:"center",justify:"center",minH:"screen",style:{background:"#FBFCFD"}},ty.createElement(tA.Routes,null,ty.createElement(tA.Route,{path:"/",element:ty.createElement(ri,null)}),ty.createElement(tA.Route,{path:"/emailsent",element:ty.createElement(ra,null)}),ty.createElement(tA.Route,{path:"/notfound",element:ty.createElement(rt,null)})))}));var rd=a(62104);let rm=({message:e})=>ty.createElement("div",{className:"flex flex-col items-center justify-center min-h-screen"},ty.createElement(tj.NonIdealState,{icon:ty.createElement(tj.FAIcon,{icon:["fad","heart-broken"],className:"text-red"}),title:"Cannot edit project",description:e,action:ty.createElement(tk.Link,{to:"/"},"Back to home")})),rp=({error:e})=>{let t=e.graphQLErrors[0]?.extensions?.code==="BRANCH_NOT_FOUND"?"This project is no longer shared, or the share URL may have changed.":e.message;return ty.createElement("div",{className:"flex flex-col items-center justify-center min-h-screen"},ty.createElement(tj.NonIdealState,{icon:ty.createElement(tj.FAIcon,{icon:["fal","frown"],className:"text-red"}),title:"Error retrieving project",description:t,action:ty.createElement(tj.Button,{onClick:()=>history.back()},"Go Back")}))},rg=()=>ty.createElement("div",{className:"flex flex-col items-center justify-center min-h-screen"},ty.createElement(tj.FAIcon,{className:"fa-spin opacity-50",icon:["fal","spinner-third"],size:"5x"}));var rh=a(22457),rf=a(26235),rb=a(76650);let ry=()=>!!(0,tA.useMatch)("/studio/*");var rw=a(77898);function rE({query:e,variables:t,numOfFetchedItems:a,limit:r=15,initialOffset:n=0,concatData:o,initialData:l,pause:i,...s}){let[{data:c,isFetching:u,stale:d,hasFetched:m,error:p},g]=function({query:e,numOfFetchedItems:t,limit:a=15,variables:r,initialOffset:n=0,initialData:o,concatData:l,pause:i,...s}){let[c,u]=ty.useState({limit:a,offset:n,...r}),[d,m]=ty.useState(!0),[p,g]=ty.useState(!1),h=ty.useRef(o),[f]=(0,t_.useQuery)({query:e,variables:{...c,...r},...s,pause:!d||i}),b=ty.useCallback(()=>{m(!1),u({...r,offset:n,limit:a})},[r,n,a]),y=ty.useCallback((e={})=>{h.current=o,m(!0),u({...r,...e,offset:n,limit:a})},[r,o,n,a]);return ty.useEffect(()=>{if(!f.fetching){if(f.error){g(!0),b();return}if(f.data){m(!0);let e=t(f.data)||0;0===e&&g(!0);let n=f.data&&e===a;p&&t(h.current)>c.offset&&(h.current=o),h.current=[f.data].reduce(l,h.current),n?u({limit:a,offset:t(h.current)||0,...r}):(g(!0),b())}}},[f.fetching,f.data,f.error]),[{data:h.current,isFetching:d,hasFetched:p,stale:f.stale,error:f.error},y]}({query:e,numOfFetchedItems:a,limit:r,variables:t,initialOffset:n,initialData:l,concatData:o,pause:i,...s});return[{data:c,isFetching:u,hasFetched:m,stale:d,error:p},g]}let rv=({workspaceMembers:e=[],workspaceInvitations:t=[]})=>new Set([...e.reduce((e,t)=>e.concat(t.user.emails.map(e=>e.email)),[]),...t.map(e=>e.email)]),rk=({workspaceMembers:e=[],workspaceInvitations:t=[]})=>{let a={all:{current:new Set,invites:new Set},members:{current:new Set,invites:new Set},guests:{current:new Set,invites:new Set},editors:{current:new Set,invites:new Set},viewers:{current:new Set,invites:new Set}};for(let t of e){let{email:e}=t.user.emails.find(e=>e.primary)||t.user.emails[0],r=t.roles[0].role;switch(a.all.current.add(e),r){case tU.l2p.Guest:a.guests.current.add(e);break;case tU.l2p.Admin:case tU.l2p.Billing:case tU.l2p.Maker:case tU.l2p.Owner:a.members.current.add(e),a.editors.current.add(e);break;case tU.l2p.Viewer:a.members.current.add(e),a.viewers.current.add(e);break;default:throw RangeError(`unsupported role: ${r}`)}}for(let{email:e,roleName:r}of t)switch(a.all.invites.add(e),r){case tU.l2p.Guest:a.guests.invites.add(e);break;case tU.l2p.Admin:case tU.l2p.Billing:case tU.l2p.Maker:case tU.l2p.Owner:a.members.invites.add(e),a.editors.invites.add(e);break;case tU.l2p.Viewer:a.members.invites.add(e),a.viewers.invites.add(e);break;default:throw RangeError(`unsupported invitation role: ${r}`)}return a},r_=e=>{let[{data:t,isFetching:a},r]=rE({query:tU.qlL,pollInterval:1e4,limit:500,requestPolicy:"network-only",numOfFetchedItems:e=>Math.max(e.workspaceInvitations.length,e.workspaceMembers.length),initialData:{workspaceInvitations:[],workspaceMembers:[]},concatData:(e,t)=>({workspaceInvitations:[...e.workspaceInvitations,...t.workspaceInvitations],workspaceMembers:[...e.workspaceMembers,...t.workspaceMembers]}),variables:{workspaceId:e}}),n=t&&!a?t:{workspaceMembers:[],workspaceInvitations:[]};return[{data:rk(n),isFetching:a,memberEmails:rv(n)},r]};var rx=a(37659);let rI=e=>{let t=e.find(e=>e.primary);return t?.email},rS=e=>RangeError("switch is missing one or more cases"),rj=["fad","cabinet-filing"];function rC(e){var t,a;return"object"==typeof e&&null!==e&&"display_name"in e&&"string"==typeof e.display_name&&"avatar_url"in e&&"string"==typeof e.avatar_url?{name:e.display_name}:"object"==typeof(t=e.presentation)&&null!==t&&"avatar_url"in t&&"string"==typeof t.avatar_url&&t.avatar_url.length>0?{name:e.display_name??e.name}:"object"==typeof(a=e.presentation)&&null!==a&&"icon"in a?{name:e.display_name??e.name,fg:e.presentation.icon_color??"#7F8197",icon:e.presentation.icon?["fad",e.presentation.icon]:rj}:{name:e.display_name??e.name}}function rP(e){return"invalid"===e.type}function rA(e){return"email"===e.type}function rB(e){return"member"===e.type?e.data.roles.some(e=>e.role===tU.l2p.Guest):"member-ref"===e.type?e.data.workspace_role===tU.l2p.Guest:"invitation"===e.type?e.data.roleName===tU.l2p.Guest:"invitation-ref"===e.type&&e.data.workspace_role===tU.l2p.Guest}function rD(e){return{type:"member-ref",data:e}}function rT(e){return{type:"invitation-ref",data:e}}function rF(e){switch(e.type){case"invitation":case"invitation-ref":case"member-ref":return e.data.email;case"member":let t=e.data.user.emails,a=t.find(e=>e.primary)?.email,r=t[0]?.email;return a??r;case"email":return e.data;case"team-ref":case"invalid":return;default:throw rS(e)}}function r$(e){switch(e.type){case"member":case"invitation":case"team-ref":return`${e.type}_${e.data.id}`;case"member-ref":case"invitation-ref":return`${e.type}_${e.data.email}`;case"email":case"invalid":return`${e.type}_${e.data}`;default:throw rS(e)}}let rN=({children:e})=>ty.createElement(tg.Flex,{alignItems:"center",flexWrap:!0,overflowY:"hidden",overflowX:"hidden"},e);function rU(e){if(!e.data)throw Error("missing .data property");switch(e.type){case"invitation":return rT(e.data);case"member":return rD(e.data);case"team":return{type:"team-ref",data:e.data};default:throw Error(`unexpected type: ${e.type}`)}}let rM=(e,t)=>{e.stopPropagation(),e.preventDefault(),t.removeProps.onClick(e)},rR=e=>{let t=rP(e.data),a="warning"in e.data&&!!e.data.warning,r=ty.createElement(tg.Badge,{className:"customMuti",icon:t||a?["fas","exclamation-triangle"]:void 0,appearance:"outline",intent:t?"danger":a?"warning":"default",onRemove:t=>rM(t,e)},e.children);return ty.createElement(tg.Box,{maxW:"full",display:"inline-block",mr:1,my:.5,onMouseDown:e=>e.stopPropagation()},function(e,t){return rP(t)?ty.createElement(tg.Tooltip,{renderTrigger:e},t.description??"Invalid e-mail address"):e}(r,e.data))},rW=e=>ty.createElement(tg.Box,{"data-test":"members-invite-loading-indicator",px:2},e.children),rL=e=>{let{innerProps:t,children:a}=e;return ty.createElement(tg.Flex,{...t,"data-test":"members-invite-select",alignItems:"center",flexWrap:!0,justifyContent:"between",m:2,cursor:"pointer",overflowY:"auto",style:{maxHeight:"84px",minHeight:"28px"}},a)},rG=e=>e.data.data?ty.createElement(tg.Flex,{overflowX:"hidden",alignItems:"center"},ty.createElement(tg.Flex,{flex:"initial",flexDirection:"col",justifyContent:"center"},["member","member-ref"].includes(e.data.type)?ty.createElement(tg.Avatar,{name:e.label}):ty.createElement(tg.Avatar,{className:"avatar__pending"})),ty.createElement(tg.Box,{flex:1,ml:3,overflowX:"hidden"},ty.createElement(tg.Box,{className:"cell__text-overflow"},e.label),ty.createElement(tg.Box,{color:"light",fontSize:"sm",className:"cell__text-overflow"},e.data.data.email))):null,rO=e=>{let t=e.data.data;return t?ty.createElement(tg.Flex,{overflowX:"hidden",alignItems:"center"},ty.createElement(tg.Flex,{flex:"initial",flexDirection:"col",justifyContent:"center"},ty.createElement(tg.Avatar,rC(t))),ty.createElement(tg.Box,{flex:1,ml:3,overflowX:"hidden"},ty.createElement(tg.Box,{className:"cell__text-overflow"},t.name))):null},rz=e=>ty.createElement(rx.F.Menu,{...e,className:"util__scrollbar"},e.children),rq=e=>{switch(e.data.type){case"email":return ty.createElement(rx.F.Option,e,"Invite email: ",e.data.data);case"team-ref":return ty.createElement(rx.F.Option,e,ty.createElement(rO,e));default:return ty.createElement(rx.F.Option,e,ty.createElement(rG,e))}},rV=e=>ty.createElement(rx.F.GroupHeading,e,ty.createElement(tg.Text,{fontSize:"base",fontWeight:"normal",letterSpacing:"wide",textTransform:"uppercase"},`${e.children} (${e.data.options.length})`));function rH(e){switch(e.type){case"member":return function({firstName:e="",lastName:t="",username:a="",email:r=""}){return(e?`${e} ${t}`:"")||a||r}({firstName:e.data.user.firstName,lastName:e.data.user.lastName,username:e.data.user.username,email:rF(e)||""});case"member-ref":return e.data.display_name;case"invitation":case"invitation-ref":return e.data.email;case"team-ref":return e.data.name;case"email":case"invalid":return e.data;default:throw rS(e)}}function rQ(e){switch(e.type){case"member":return e.data.user?.emails[0]?.email;case"member-ref":case"invitation":case"invitation-ref":return e.data.email;case"team-ref":return e.data.id;case"email":case"invalid":return e.data;default:throw rS(e)}}let rK=tm.T_.test.bind(tm.T_);function rJ(e){return{type:rK(e)?"email":"invalid",data:e}}let rY={container:e=>({...e,width:"100%"}),option:(e,{isDisabled:t,isFocused:a,isSelected:r})=>({backgroundColor:r||a?"var(--color-primary)":void 0,color:t?"var(--color-text-disabled)":a||r?"var(--color-on-primary)":"var(--color-text)",cursor:t?"not-allowed":"pointer",fontSize:"12px",padding:"6px 10px",":active":{backgroundColor:"var(--color-primary)"},".sl-text-light":{color:t?"var(--color-text-disabled)":a||r?"var(--color-on-primary)":"var(--color-text-light)"}}),placeholder:e=>({...e,fontSize:"12px"})},rX=e=>{let t=e.length>3?` and ${e.length-3} more`:"",a=e.slice(0,3).map(e=>e.data).join(", ");return`Cannot send form due to invalid entries: ${a}${t}`};function rZ({selectedOptions:e,message:t,warningPlacement:a="left",children:r}){let n=e.filter(rP),o=0===n.length,l="function"==typeof r?r(o,n):r;return o?l:ty.createElement(tg.Tooltip,{renderTrigger:l,placement:a},t?t(n):rX(n))}function r0(e){let{hasFeature:t,featureRequiresUpgrade:a}=(0,tF._m)(),[{data:{all:r,members:n,guests:o,editors:l,viewers:i},memberEmails:s},c]=r_(e),{getFeature:u}=(0,tF._m)();return{execute:(e,d)=>{let m=t(tU.BAf.Viewers),p=tU.BAf.Members,g="Members",h=!!u(tU.BAf.GuestsAsMembers),f=h?{current:new Set([...n.current,...o.current]),invites:new Set([...n.invites,...o.invites])}:n;switch(e){case tU.l2p.Guest:h||(p=tU.BAf.Guests,g="Guests",f=o);break;case tU.l2p.Admin:case tU.l2p.Billing:case tU.l2p.Maker:case tU.l2p.Owner:m&&(p=tU.BAf.Editors,g="Makers+",f=l);break;case tU.l2p.Viewer:m&&(p=tU.BAf.Viewers,g="Viewers",f=i);break;default:throw RangeError(`${e} not supported`)}let b=new Set([...r.current,...r.invites]),y=d.filter(e=>rA(e)&&!b.has(e.data)).length,w=a(p,y),E=null;if(w){let e=u(p);E=`You've reached your max ${g} limit of ${e?.maxQuantity}. Note that this limit includes current ${g} (${f.current.size}), pending ${g} invitations (${f.invites.size}), as well as any new workspace invitations in the list above.`}return{refetch:c,feature:p,hasExceededLimit:w,existingEmails:s,additionalUsage:y,message:E}}}}var r1=a(34468),r2=a(44214);let r4=ty.memo(({onChange:e,selectedValues:t=[],members:a,data:r,suffix:n,allowInviteEmails:o,customMessage:l,...i})=>{let s=ty.useRef(),c=(0,tg.useThemeIsDark)();ty.useEffect(()=>{o&&s.current.select.select.inputRef.addEventListener("paste",e=>{if(e.preventDefault(),e.clipboardData){let t=e.clipboardData.getData("text/plain").split(",").map(e=>e.trim()).filter(e=>e).map(e=>o&&rK(e)?{label:e,value:e,type:"email",data:e}:{label:e,value:e,type:"invalid",data:e});if(t.length){let e=s.current.select.select.getValue().slice();for(let a of t)e.some(e=>(function(e,t){return e.type===t.type&&r$(e)===r$(t)})(e,a))||e.push(a);s.current.select.select.setValue(e,{action:"set-value"})}}})},[s,o]);let u=t.some(rB),d=o?r2.default:r1.default,m=a.filter(e=>"team-ref"===e.type).map(e=>({...e})),p=a.filter(e=>"team-ref"!==e.type).map(e=>({...e})),g=`Invite by ${m.length>0?"team name, member name,":"member name"}${o?" or email":""}`;return ty.createElement(ty.Fragment,null,ty.createElement(tg.Flex,{"data-test":"workspace-members-select",alignItems:"center",bg:"canvas",border:!0,className:"util__scrollbar"},ty.createElement(tg.Flex,{grow:!0,maxW:"full"},ty.createElement(d,{ref:s,isMulti:!0,options:[{label:"Teams",options:m},{label:"Members",options:p}],closeMenuOnSelect:!1,onChange:e,value:t,getOptionLabel:rH,getOptionValue:rQ,placeholder:g,isValidNewOption:o?rK:void 0,getNewOptionData:rJ,noOptionsMessage:()=>o?"Type a valid email or existing workspace username":"Type an existing workspace username",...i,components:{MultiValue:rR,DropdownIndicator:null,Control:rL,IndicatorsContainer:rW,ValueContainer:rN,Menu:rz,Option:rq,ClearIndicator:null,IndicatorSeparator:null,GroupHeading:rV},styles:{...rY,menu:e=>({...e,marginTop:0,backgroundColor:`var(${c?"--color-canvas-dialog":"--color-canvas-pure"})`,padding:"4px 0"})}})),n&&ty.createElement(tg.Flex,{alignSelf:"center",mr:1.5},n)),ty.createElement(r3,{show:u,text:"Workspace Guests are external, read-only members and will automatically receive the Guest role.",link:{text:"Learn more",href:ab.xz[tU.BAf.Members],newWindow:!0,color:"link"}}),l&&ty.createElement(r3,l))});function r3({show:e=!0,icon:t="exclamation-triangle",color:a="warning",text:r,link:n}){return e?ty.createElement(tg.Box,{mt:1,ml:1,"data-test":"workspace-members-select-message"},ty.createElement(tg.Icon,{icon:["fas",t??"exclamation-triangle"],size:"sm",style:{color:`var(--color-${a})`}}),ty.createElement(tg.Text,{color:a,size:"sm",ml:1},r,n&&ty.createElement(ty.Fragment,null," ",ty.createElement("a",{href:n.href,rel:"noreferrer",target:n.newWindow?"_blank":"_self",style:{color:`var(--color-${n.color})`}},n.text)))):null}function r5({availableMembers:e,availableMembersLoading:t,isDisabled:a,roleSelector:r,workspaceRole:n,onAdd:o,onAddLoading:l,...i}){let{canI:s,currentWorkspaceId:c}=(0,tF.C$)(),{success:u,danger:d}=(0,tF.AO)(),m=s(tU.E4M.WorkspaceMembersInvite),[p,g]=ty.useState([]),h=r8(p),[f,b]=ty.useState(!1),y=f||h.length>0,{execute:w}=r0(c||0),{refetch:E,hasExceededLimit:v,message:k}=w(n,p);return ty.createElement(tg.Flex,{"data-test":"expanded-members-select",w:"full",flexDirection:"col",border:!!y||0,borderColor:"primary",p:2,...i},ty.createElement(tg.Box,{w:"full"},ty.createElement(r4,{"data-test":"workspace-members-select",allowInviteEmails:m&&!v,isDisabled:a,selectedValues:h,onChange:e=>g((e||[]).slice()),members:e,isLoading:t,onFocus:()=>b(!0),onBlur:()=>b(!1)})),v&&ty.createElement(aa,{name:"upgrade",messageColor:"warning",errors:{upgrade:{message:k}}}),y&&ty.createElement(tg.Flex,{mt:2},r,ty.createElement(rZ,{selectedOptions:h},e=>{let t=v&&h.filter(e=>["email"].includes(e.type)).length>0,a=!e||!h.length||t;return ty.createElement(tg.Button,{ml:"auto",loading:l,disabled:a,appearance:"minimal",type:"submit",onClick:()=>{try{o(p),E(),g([]),u({message:`${tV()("Member",p.length)} Added Successfully!`})}catch(e){e instanceof Error&&d({message:`${e.message}`})}},"data-test":"send-invite-btn",icon:"paper-plane"},"Send")})))}let r8=e=>e.map(e=>rB(e)?{...e,warning:"Guests are now restricted."}:e);var r6=a(77240);let r7=e=>{let{effects:t}=(0,tB.U8)(),[,a]=(0,tU.PQr)(),r=(0,r6.H)(e);return ty.useCallback(async(n,o)=>{let{error:l}=await a({userId:n,projectId:e});if(l){t.notifications.danger({message:`error removing [ ${o} ] from project: ${l.message}`});return}t.notifications.success({message:`[ ${o} ] removed from the project`}),t.reporter.log({event:"project_direct_access_revoked",payload:{project_type:r??void 0}})},[a,e,t.notifications,t.reporter,r])},r9=e=>{let{state:t,effects:a}=(0,tB.U8)(),{mutateAsync:r}=(0,tN.useUpdateProjectMember)(t.auth.jwt),n=(0,r6.H)(e);return ty.useCallback(async(t,o,l)=>r({userId:t,role:l,projectId:e}).then(()=>{a.notifications.success({message:`Member role for [${o}] updated to ${(0,th.capitalize)(l)}`}),a.reporter.log({event:"project_direct_access_role_changed",payload:{role:l,project_type:n??void 0}})}).catch(e=>{a.notifications.danger({message:`error updating role for [ ${o} ]: ${e.message}`})}),[r,e,a.notifications,a.reporter,n])},ne=()=>{let{state:e,effects:t}=(0,tB.U8)(),{mutateAsync:a}=(0,tN.useUpdateProjectOwnership)(e.auth.jwt);return ty.useCallback(async({projectId:e,userId:r})=>a({projectId:e,userId:r}).then(()=>{t.notifications.success({message:"Project ownership transferred."}),t.reporter.log({event:"confirm_project_transfer_ownership",payload:{project_id:e}})}).catch(e=>{t.notifications.danger({message:`Error transferring project ownership : ${e.message}`})}),[t.reporter,t.notifications,a])},nt={[tU.M2u.WorkspaceGlobalAdmin]:0,[tU.M2u.Owner]:1,[tU.M2u.Admin]:2,[tU.M2u.Editor]:3,[tU.M2u.Viewer]:4,[tU.M2u.Guest]:5},na=[tU.M2u.Viewer,tU.M2u.Editor,tU.M2u.Admin,tU.M2u.Owner],nr=[tU.M2u.Viewer,tU.M2u.Editor,tU.M2u.Admin],nn=new Map([[tU.M2u.Viewer,tU.Jg8.ProjectViewerAdd],[tU.M2u.Editor,tU.Jg8.ProjectEditorAdd],[tU.M2u.Admin,tU.Jg8.ProjectAdminAdd],[tU.M2u.Owner,tU.Jg8.ProjectOwnershipUpdate]]),no={[tU.M2u.Viewer]:"Can view project",[tU.M2u.Editor]:"Can edit project",[tU.M2u.Admin]:"Can manage project"},nl=({activeUser:e,activeRole:t,disabled:a,loading:r,project:n,isMobile:o,onRoleSelected:l,onRemove:i,onOwnershipTransfer:s})=>{let{currentUser:c}=(0,tF.hD)(),{danger:u}=(0,tF.AO)(),{log:d}=(0,tF.pw)(),{canIOnProject:m,canI:p}=(0,tF.C$)(),{openDialog:g,closeDialog:h}=(0,tx.useDialog)(),f=(0,t8.safelyDecodeID)(n.id),b=r9(f),y=ne(),w=r7(f),{isOpen:E,open:v,close:k}=(0,tg.useModalState)(),_=p(tU.E4M.WorkspaceGlobalAdmin),x=e?.id===c?.id&&!_,I=!!n?.my_permissions&&m(n.my_permissions,tU.Jg8.ProjectMemberDelete),S=e?na.slice():nr.slice();t===tU.M2u.Guest?S=[tU.M2u.Guest]:e?.isWsViewer&&(S=[tU.M2u.Viewer]);let j=t===tU.M2u.Owner,C=a||j||x||e&&!(()=>{if(!n)return!1;let e=m(n.my_permissions,tU.Jg8.ProjectMembersAdd),a=n.my_role||tU.M2u.Viewer;return!!e&&nt[t]>=nt[a]})(),P=t=>{if(!n)return!0;if(e?.isWsGuest||e?.isWsViewer)return!1;let a=nn.get(t);return!!a&&m(n.my_permissions,a)},A=async t=>{if(t===tU.M2u.Owner&&e&&c){g({intent:"danger",title:"Transfer project ownership",message:()=>ty.createElement(ty.Fragment,null,"You are about to transfer project ownership to ",ty.createElement(tg.Text,{fontWeight:"bold"},e.displayName),".",_?" The current owner will remain a project Admin.":" You will still remain a project Admin."),confirmText:"Transfer Ownership",onCancel:()=>{d({event:"cancel_project_transfer_ownership",payload:{project_id:f}}),h()},onConfirm:async()=>{await y({projectId:f,userId:e.id}),"function"==typeof s&&s(),h()}});return}B(t)},B=async a=>{if(e&&t!==a)try{await b(e.id,e.displayName,a)}catch(e){e instanceof Error&&u({message:`${e.message}`})}"function"==typeof l&&l(a)},D=ty.createElement(ty.Fragment,null,t===tU.M2u.Owner?ty.createElement(tg.Icon,{icon:["fal","shield"]}):ty.createElement(tg.Box,{w:3}),ty.createElement(tg.Select,{"aria-label":"role",value:t,isDisabled:r||C,w:tm.GI,options:[{options:S.map(e=>({label:(0,th.capitalize)(e),value:e,isDisabled:!P(e)}))},...e&&I?[{options:[{label:"Remove Member",onPress:async()=>{e&&g({intent:"danger",title:"Remove Member",message:()=>ty.createElement(ty.Fragment,null,"Are you sure you want to remove ",ty.createElement(tg.Text,{fontWeight:"bold"},e.displayName)," ","from this project?"),confirmText:"Remove",onConfirm:async()=>{await w(e.id,e.displayName),"function"==typeof i&&i(),h()}})}}]}]:[]],onChange:e=>A(e)})),T=ty.createElement(ty.Fragment,null,ty.createElement(tg.Button,{mb:3,onPress:v,iconRight:ty.createElement(tg.Icon,{icon:"chevron-down"})},(0,th.capitalize)(t)),ty.createElement(tg.Modal,{title:"Project Role",isOpen:E,onClose:k,size:"sm",footer:ty.createElement(tg.HStack,{justifyContent:"end"},ty.createElement(tg.Button,{onPress:k,intent:"default",appearance:"primary"},"Done"))},ty.createElement(tg.ListBox,{"aria-label":"Project Role",overflowY:"auto",m:-5,items:S.map(e=>({name:e})),selectionMode:"single",onSelectionChange:e=>{B(e.values().next().value)}},e=>ty.createElement(tg.ListBoxItem,{key:e.name},ty.createElement(tg.Box,{"data-test":e.name,p:3,bg:{hover:"primary-tint"}},ty.createElement(tg.Flex,{align:"center",justify:"start"},e.name===t?ty.createElement(tg.Box,{w:3,as:tg.Icon,icon:"check"}):ty.createElement(tg.Box,{w:3}),ty.createElement(tg.Flex,{direction:"col"},ty.createElement(tg.Text,{ml:3,fontWeight:"medium"},(0,th.capitalize)(e.name)),ty.createElement(tg.Text,{ml:3,fontWeight:"light",color:"muted",fontSize:"sm"},no[e.name]))))))));return ty.createElement(tg.Flex,{alignItems:"center"},o?T:D)},ni=(e,t,a)=>{let{state:r,effects:n}=(0,tB.U8)(),[{isAddingUsers:o},l]=(0,tN.useAddProjectMembers)(r.auth.jwt),i=(0,tN.useAddOrUpdateProjectTeam)(r.auth.jwt),s=(0,r6.H)(e),c=ty.useCallback(async(t,a)=>t.length?l(t.map(t=>({email:t,projectId:(0,t8.encodeID)("prj",e),role:a}))).then(()=>null).catch(e=>(n.notifications.danger({message:`Error adding ${tV()("member",t.length)} to project: ${e.message}`}),e)):null,[l,n.notifications,e]),u=ty.useCallback(async(t,a)=>0==t.length?null:Promise.all(t.map(e=>e.id).filter(e=>void 0!==e).map(t=>i.mutateAsync({project_id:(0,tN.safelyEncode)(e,"prj"),team_id:t,role:function(e){switch(e){case tU.M2u.WorkspaceGlobalAdmin:case tU.M2u.Owner:case tU.M2u.Admin:return"admin";case tU.M2u.Editor:return"editor";case tU.M2u.Guest:case tU.M2u.Viewer:return"viewer";default:throw rS(e)}}(a)}))),[i,e]);return[{fetching:o},ty.useCallback(async(r,o)=>{let l=[],i=[];for(let c of r){let r=rF(c),u="member";void 0!==r?l.push(r):"team-ref"===c.type&&(i.push(c.data),u="team"),n.reporter.log({event:"project_direct_access_granted",payload:{location:a,role:o,requires_invite:rA(c),project_id:e,workspace_id:t,project_type:s??void 0,recipient_type:u}})}let[d,m]=await Promise.all([c(l,o),u(i,o)]);return{emailsToAdd:l,addedUsers:d,addedTeams:m}},[c,u,n.reporter,a,e,t,s])]};var ns=a(27415),nc=a(24769);function nu(e,t){let{fetchNextPage:a,hasNextPage:r,isFetchingNextPage:n}=t;return{isItemLoaded:t=>!r||t<e.length,itemCount:e.length+(r?1:0),loadMoreItems:async()=>{n||await a()}}}let nd=({children:e,dataTestId:t,pb:a=3,meta:r})=>ty.createElement(tg.HStack,{spacing:1,pb:a},ty.createElement(tg.Heading,{"data-test":t,size:4,fontSize:"base",fontWeight:"normal",letterSpacing:"wide",textTransform:"uppercase"},e),ty.createElement(tg.Text,{color:"light"},r));var nm=a(84392);let np=()=>{let[e,t]=(0,ty.useState)([0,0]);return(0,ty.useLayoutEffect)(()=>{function e(){t([window.innerWidth,window.innerHeight])}return window.addEventListener("resize",e),e(),()=>window.removeEventListener("resize",e)},[]),e},ng=["guest","viewer"];function nh(e){return!!e&&ng.includes(e)}function nf({media:e,mediaWidth:t="auto",children:a,suffix:r,...n}){return ty.createElement(tg.Flex,{direction:"row",...n},ty.createElement(tg.Box,{flexShrink:0,alignSelf:"center",textAlign:"center",w:t},e),ty.createElement(tg.Flex,{direction:"col",ml:2,flexGrow:!0,justifyContent:"center",style:{minWidth:0}},a),r&&ty.createElement(tg.Box,{alignSelf:"center",flexShrink:0,ml:3},r))}function nb({workspaceRole:e}){let t=(0,th.capitalize)(e);return ty.createElement(tg.Tooltip,{placement:"top",renderTrigger:ty.createElement(tg.Badge,{appearance:"outline",size:"sm"},ty.createElement(tg.Text,{color:"light"},t))},{guest:"Workspace Guests are external, read-only members",viewer:"Workspace Viewers are read-only members. Make them a Workspace Maker to enable edit access."}[e])}function ny({item:e,showReadOnlyRoleBadges:t=!0,actionButton:a,suffix:r,...n}){let o,l;let{currentUser:i}=(0,tF.hD)(),s="",c=null,u=null,d=r;if(!e.data)return null;switch(e.type){case"invitation":o=e.data.email,s=e.data.email,l=ty.createElement(tg.Avatar,{className:"avatar__pending"}),c=ty.createElement(tg.Text,{color:"light"},"(Pending)"),t&&nh(e.data.workspace_role)&&(u=ty.createElement(nb,{workspaceRole:e.data.workspace_role}));break;case"member":o=e.data.display_name,s=e.data.email,l=ty.createElement(tg.Avatar,rC(e.data));let m=e.data.workspace_role;(0,t8.safelyDecodeID)(e.data.user_id)===i?.id&&(c=ty.createElement(tg.Text,{color:"light"},"(You)")),t&&nh(m)&&(u=ty.createElement(nb,{workspaceRole:m})),a&&(d=ty.createElement(tg.Flex,{alignItems:"center",direction:"row"},a,r));break;case"project":case"team":case"projectTeam":o=e.data.name,l=ty.createElement(tg.Avatar,rC(e.data));break;default:throw RangeError(`${e.type} is not supported`)}return ty.createElement(nf,{"data-test":`${e.type}-media-object`,h:12,suffix:d,...n,media:l},ty.createElement(tg.HStack,{spacing:2},ty.createElement(tg.VStack,{w:"full",overflowX:"auto"},ty.createElement(tg.HStack,null,ty.createElement(tx.TextOverflowTooltip,{placement:"top"},o),ty.createElement(tg.Box,{ml:1},c)),s&&ty.createElement(tx.TextOverflowTooltip,{placement:"top",content:ty.createElement(tg.Text,{fontSize:"sm",color:"light"},s)},s)),u))}function nw({items:e,itemProps:t,suffixRenderer:a,actionButtonRenderer:r,showReadOnlyRoleBadges:n,onItemsRendered:o,virtualizedListRef:l,itemSize:i=48,listSize:s=60,heightAdjustment:c=0,...u}){let d=ty.useRef(null),m=ty.useCallback(e=>{"function"==typeof l&&l(e),d.current=e},[l]),[p,g]=np(),[h,f]=ty.useState(s),b=ty.useRef(null);return ty.useEffect(()=>{b?.current&&f(b.current.offsetHeight-c)},[b,f,p,g,c,s]),ty.createElement(tg.Box,{h:"full",w:"full",className:"util__scrollbar",...u,ref:b},ty.createElement(nm.FixedSizeList,{itemCount:e.length,onItemsRendered:o,ref:m,itemSize:i,width:"100%",height:h},({index:o,style:l})=>ty.createElement(ny,{mb:2,showReadOnlyRoleBadges:n,...t,suffix:a?.(e[o],o),actionButton:r?.(e[o],o),item:e[o],key:o,style:l})))}let nE=({project:e,onRemove:t})=>{let{currentUser:a}=(0,tF.hD)(),{isLoading:r,members:n,hasMoreMembers:o,invalidate:l,infiniteLoaderProps:i}=function(e){let{jwt:t}=(0,tF.hD)(),a=(0,tN.useListProjectMembersQuery)(t,{project_id:e}),{items:r,isLoading:n,isError:o,hasNextPage:l}=a,i=nu(r,a);return{isLoading:n,isError:o,members:r,hasMoreMembers:l,invalidate:(0,tN.useInvalidateProjectMembers)(e),infiniteLoaderProps:i}}(e.id),{canIOnProject:s}=(0,tF.C$)(),c=(0,nc.Ij)(),{openDialog:u,closeDialog:d}=(0,tx.useDialog)(),{navigate:m}=(0,tF.bZ)(),p=(0,tA.useNavigate)();if(r)return ty.createElement(tx.LoadingIndicator,null);let g=`(${n.length}${o?"+":""})`;return ty.createElement(tg.Flex,{direction:"col",mx:2,mb:3,h:"full"},ty.createElement(nd,{meta:g},"Members"),ty.createElement(tg.Box,{flex:1},ty.createElement(ns.A,i,({onItemsRendered:r,ref:o})=>ty.createElement(nw,{items:n,heightAdjustment:15,onItemsRendered:r,virtualizedListRef:o,actionButtonRenderer:r=>{if("member"===r.type){let n=(0,t8.safelyDecodeID)(r.data?.user_id||""),o=n===a?.id,i=s(e.my_permissions,tU.Jg8.ProjectLeave);if(i&&o)return ty.createElement(tg.Button,{size:"sm",disabled:!i,onPress:()=>{u({intent:"danger",title:"Leave Project",message:"Are you sure you want to leave this project?",confirmText:"Leave",onConfirm:async()=>{await c((0,t8.safelyDecodeID)(e.id),n),l(),t?.(),d(),m(p,"/")}})}},"Leave")}},suffixRenderer:a=>{let r;let n=!1;return"invitation"===a.type?n=!0:"member"===a.type&&({activeUser:r}=nv(a.data)),ty.createElement(nl,{activeUser:r,disabled:n,activeRole:a.data?.role,project:e,onRemove:()=>{l(),t?.()},onRoleSelected:l,onOwnershipTransfer:l})}}))))},nv=e=>{let t=e?.display_name||"";return{activeUser:{id:(0,t8.safelyDecodeID)(e?.user_id||""),displayName:t,isWsGuest:e?.workspace_role===tU.l2p.Guest,isWsViewer:e?.workspace_role===tU.l2p.Viewer}}};var nk=a(65311),n_=a(45066);let nx={[tU.Tgv.Public]:"Anyone",[tU.Tgv.Internal]:"Workspace members",[tU.Tgv.Private]:"Only project members"},nI={[tU.Tgv.Public]:"Project is associated with an internal group and cannot be made public"},nS=({isReadOnly:e,onVisibilityChange:t,groupId:a,defaultValue:r,showIcon:n=!0,appearance:o,...l})=>{let{state:i}=(0,tB.U8)(),[s,c]=ty.useState(r),{isAllowedToSet:u}=(0,nk.X)(),{data:d}=(0,tN.useGetGroup)(i.auth.jwt,a),m=async e=>{e!==s&&(c(e),t&&t(e))},p=ty.useCallback(e=>tU.Tgv.Public===e&&d?.visibility&&d?.visibility==="internal",[d?.visibility]),g=ty.useCallback(e=>(e===tU.Tgv.Public||e===tU.Tgv.Private)&&"/add/styleguide-project"===i.router.pathname,[i.router.pathname]),h=ty.useCallback(e=>e===tU.Tgv.Public&&!i.workspaces?.currentWorkspace?.allowPublicProjects,[i.workspaces?.currentWorkspace]),f=s?rw.os[s]:void 0;return ty.createElement(tg.Flex,{alignItems:"center"},ty.createElement(tg.Select,{appearance:o,icon:n?f:void 0,"aria-label":"visibility",value:s,isDisabled:e,options:[tU.Tgv.Public,tU.Tgv.Internal,tU.Tgv.Private].map(e=>{let t=p(e)||g(e)||!u(e)||h(e);return{label:(0,th.capitalize)(e),value:e,meta:e===tU.Tgv.Private&&t?ty.createElement(n_.y,{feature:tU.BAf.PrivateProjects}):void 0,description:t&&nI[e]||nx[e],isDisabled:t}}),onChange:e=>m(e),defaultValue:r,...l}))},nj=({projectId:e,disabled:t,onVisibilityUpdated:a,visibility:r})=>{let{jwt:n}=(0,tF.hD)(),{canIOnProject:o}=(0,tF.C$)(),{warning:l,success:i,danger:s}=(0,tF.AO)(),{log:c}=(0,tF.pw)(),u=(0,tN.useUpdateProject)(n),{data:d}=(0,tN.useGetProject)(n,{projectId:e},{enabled:!!e}),{isAllowedToSet:m}=(0,nk.X)(),[p,g]=ty.useState(r),h=t||!(d&&o(d.my_permissions,tU.Jg8.ProjectUpdate))||"style_guide"===d.flavor||"design_library"===d.flavor,f=ty.useCallback(e=>{e&&(g(e),a&&a(e))},[a]),b=async t=>{if(!m(t)){l({message:`Unable to set project visibility to ${t}`});return}f(t);try{await u.mutateAsync({project_id:(0,t8.encodeID)("prj",e),visibility:t}),c({event:"project_visibility_changed",payload:{project_type:d?.type??void 0,visibility:t}}),i({message:`Visibility changed from ${p} to ${t}`})}catch(e){s({message:e.message||"Something went wrong, please try again"}),f(p)}};return ty.useEffect(()=>{d?.visibility&&f(d?.visibility)},[d?.visibility,f]),ty.createElement(nS,{"aria-label":"visibility",value:p,isDisabled:h,placeholder:d?void 0:"Loading...",groupId:d?.group?.id,onVisibilityChange:e=>b(e),showIcon:!1})},nC=({project:e})=>ty.createElement(tg.Box,{mt:2,ml:1,mr:2},ty.createElement(nP,{project:e})),nP=({project:e})=>{let[t,a]=ty.useState(e.visibility),r=rw.os[t],n=ty.createElement(tg.Icon,{icon:r,style:{color:"var(--color-text-light)"},size:"2x"}),o=ty.createElement(nj,{projectId:(0,t8.safelyDecodeID)(e.id),visibility:t,onVisibilityUpdated:a});return ty.createElement(nf,{media:n,mediaWidth:"md",suffix:o},ty.createElement(tg.Box,null,"Project Visibility"),ty.createElement(tg.Box,{color:"light"},t?({public:"Project is publicly accessible to logged-out users",internal:"Project can be seen by all workspace members",private:"Project can be seen and edited by invite only"})[t]:"-"))};function nA({callOutMessage:e}){return ty.createElement(tg.Tooltip,{placement:"top",renderTrigger:ty.createElement(tg.Badge,{icon:"circle-exclamation",appearance:"minimal",intent:"warning",size:"sm"})},e)}function nB(){return`This team has 1 or more read-only members. Workspace 
    ${[...ng].map(e=>(0,th.capitalize)(e)+"s").join(" and ")} will not be able to edit despite the team's role.`}let nD=({team:e,project:t})=>{let{canIOnProject:a}=(0,tF.C$)(),{execute:r}=function(e,t){let{jwt:a}=(0,tF.hD)(),{openDialog:r,closeDialog:n}=(0,tx.useDialog)(),{danger:o,success:l}=(0,tF.AO)(),{mutateAsync:i}=(0,tN.useRemoveTeamFromProject)(a);return{execute:()=>{r({intent:"danger",title:"Remove Team",message:()=>ty.createElement(ty.Fragment,null,"Are you sure you want to remove ",ty.createElement(tg.Text,{fontWeight:"medium"},e.name)," from the"," ",ty.createElement(tg.Text,{fontWeight:"medium"},t.name)," project?"),confirmText:"Remove",onConfirm:async()=>{try{await i({team_id:e.id||"",project_id:t.id}),l({message:`Removed ${e.name} from ${t.name}`})}catch(r){let a=r;"object"==typeof r&&null!==r&&"message"in r&&(a=r.message),o({message:`Unable to remove ${e.name} from ${t.name}: ${a}`})}finally{n()}}})}}}(e,t),{execute:n}=function(e,t){let{jwt:a}=(0,tF.hD)(),{danger:r,success:n}=(0,tF.AO)(),{mutateAsync:o}=(0,tN.useAddOrUpdateProjectTeam)(a);return{execute:async a=>{if(e&&t&&a!==e.role)try{await o({team_id:e.id,project_id:t.id,role:a}),n({message:`${e.name} is now ${(0,th.capitalize)(a)}`})}catch(n){let t=n;"object"==typeof n&&null!==n&&"message"in n&&(t=n.message),r({message:`Unable to update ${e.name} role to ${(0,th.capitalize)(a)}: ${t}`})}}}}(e,t),o=a(t.my_permissions,tU.Jg8.ProjectMembersAdd),l=a(t.my_permissions,tU.Jg8.ProjectMemberDelete),i=a(t.my_permissions,tU.Jg8.ProjectAdminAdd),s=a(t.my_permissions,tU.Jg8.ProjectEditorAdd),c=a(t.my_permissions,tU.Jg8.ProjectViewerAdd),u="admin"===e.role&&!i||"editor"===e.role&&!s||"viewer"===e.role&&!c,d=[];return l&&d.push({options:[{label:"Remove Team",onPress:r}]}),ty.createElement(tg.Flex,{alignItems:"center",justifyContent:"end"},ty.createElement(tg.Select,{"aria-label":"role",value:e?.role,isDisabled:!(o||l||i||s||c)||u,w:tm.GI,options:[{options:[{label:"Admin",value:"admin",isDisabled:!i},{label:"Editor",value:"editor",isDisabled:!s},{label:"Viewer",value:"viewer",isDisabled:!c}]},...d],onChange:e=>n(e)}))},nT=({project:e,maxTeams:t=5})=>{let{jwt:a}=(0,tF.hD)(),{data:r}=(0,tN.useGetProject)(a,{projectId:(0,t8.safelyDecodeID)(e.id)},{enabled:!!e.id}),n=r?.teams||[],o=n.length<t?44*n.length:44*t;return ty.createElement(tg.Flex,{direction:"col",mx:2},ty.createElement(nd,{meta:`(${n.length})`,dataTestId:"projects-teams-section-title",pb:1},"Teams"),n.length>0?ty.createElement(tg.Box,{style:{height:`${o}px`}},ty.createElement(nw,{"data-test":"projects-teams",items:n.map(e=>({type:"projectTeam",data:e})),suffixRenderer:t=>ty.createElement(tg.Flex,{alignItems:"center",w:"full"},t.data.has_read_only_workspace_roles&&ty.createElement(tg.Box,{"data-test":"mixed-role-callout-badge"},ty.createElement(nA,{callOutMessage:nB()})),ty.createElement(nD,{team:t.data,project:e})),w:"full",itemSize:44,listSize:o})):ty.createElement(tg.Text,{mt:2,color:"light"},"No teams assigned"))};function nF({workspaceId:e,projectId:t,onAdd:a,maxTeams:r,...n}){let{canIOnProject:o}=(0,tF.C$)(),{jwt:l}=(0,tF.hD)(),{touchQueries:i}=(0,tF.lN)(),{pathname:s}=(0,tF.ks)(),{hasFeature:c}=(0,tF._m)(),u=(0,t8.safelyDecodeID)(t),{data:d}=(0,tN.useGetProject)(l,{projectId:u},{enabled:!!t}),{data:m}=(0,tN.useGetGroup)(l,d?.group_id),{data:p,isLoading:g,refetch:h}=(0,tN.useListProjectAssignableMembersQuery)(l,{project_id:(0,tN.safelyEncode)(t,"prj")}),f=ty.useMemo(()=>p?.items.filter(e=>!!e.type&&!!e.data).map(rU)||[],[p?.items]),b=ry(),y=!!(d&&o(d.my_permissions,tU.Jg8.ProjectMembersAdd)),[w,E]=ty.useState(tU.M2u.Viewer),[v,k]=ty.useState(""),[{fetching:_},x]=ni(u,e,v);ty.useEffect(()=>{i(),b?(E(tU.M2u.Editor),k("studio_share_dialog")):k("project_share_dialog")},[i,k,s,b]);let I=async e=>{await x(e,w),i(),h(),"function"==typeof a&&a()};if(!d)return null;let S=ty.createElement(nl,{onRoleSelected:E,activeRole:w,project:d}),j=(0,rw.wZ)(w);return ty.createElement(tg.Flex,{...n,overflowY:"hidden",flexDirection:"col",h:"full"},ty.createElement(tg.VStack,{spacing:3,mt:3,divider:!0,h:"full"},ty.createElement(tg.Box,null,ty.createElement(r5,{isDisabled:!y,availableMembersLoading:g,availableMembers:f,roleSelector:S,workspaceRole:j,onAdd:I,onAddLoading:_}),ty.createElement(nC,{project:d,group:m})),c(tU.BAf.Teams)&&ty.createElement(nT,{project:d,onRemove:h,maxTeams:r}),ty.createElement(nE,{project:d,onRemove:h})))}let n$=(0,ak.ss)((0,ak.aZ)(function({workspace:e,project:t,isOpen:a,onClose:r}){return a?ty.createElement(nN,{project:t,workspace:e,onClose:r}):null}));function nN({project:e,workspace:t,onClose:a}){return ty.createElement(tg.Modal,{title:`Share Project: ${e.name}`,isOpen:!0,onClose:a,size:"md"},ty.createElement(tg.Box,{style:{height:"500px"}},ty.createElement(nF,{onAdd:a,projectId:e.id,workspaceId:t.id,maxTeams:3})))}let nU=ty.memo(({project:e})=>ty.createElement("div",{className:"flex flex-col items-center justify-center min-h-screen"},ty.createElement(tj.NonIdealState,{icon:ty.createElement(tj.FAIcon,{icon:["fal","frown"],className:"text-red"}),title:"Stoplight Studio was unable to load.",description:"You may be using an unsupported browser. For now, we ask that you use Firefox or Chrome to open this page.",action:ty.createElement(tj.Button,{onClick:()=>history.back()},"Go Back")})));r=ty.lazy(async()=>{try{return await Promise.all([a.e(5070),a.e(6733),a.e(2710),a.e(3644),a.e(2175),a.e(6550),a.e(2523),a.e(6237),a.e(3083),a.e(8209),a.e(3221),a.e(9162),a.e(5894),a.e(9911),a.e(3662),a.e(7553),a.e(3306),a.e(9643),a.e(3827),a.e(5095),a.e(275),a.e(8740),a.e(3375),a.e(7934),a.e(7296),a.e(229),a.e(3900),a.e(7516),a.e(3015),a.e(2955),a.e(8965),a.e(4957),a.e(5601),a.e(9150),a.e(7362),a.e(9765),a.e(978),a.e(2453),a.e(2497),a.e(5410),a.e(3777),a.e(9565),a.e(2314),a.e(1894),a.e(766),a.e(7464),a.e(4344),a.e(2128),a.e(5048),a.e(1286),a.e(8741),a.e(3338),a.e(1397),a.e(8271),a.e(6529),a.e(7250),a.e(6285),a.e(2461),a.e(1335),a.e(2019),a.e(2309),a.e(9549),a.e(8338),a.e(5660),a.e(4526),a.e(1508),a.e(9907),a.e(2777),a.e(2430),a.e(654),a.e(142),a.e(1162),a.e(6717),a.e(3219),a.e(5995),a.e(7355)]).then(a.bind(a,10964))}catch{return{default:nU}}});let nM=({remoteProject:e,branchSlug:t,branches:a,projectSlug:n,readonly:o})=>{let l=a.find(e=>t?e.slug===t:e.is_default),i=l?.yjs_document_id?String(l.yjs_document_id):void 0,s=(0,tF.hd)(),{showFeatureDialog:c}=(0,tF.L3)(),{navigate:u}=(0,tF.bZ)(),{hasFeature:d}=(0,tF._m)(),m=function(){let e=(0,tB.A1)(),{isSaaS:t}=(0,tF.y1)(),{isFlagEnabled:a}=(0,tF.aS)(),{hasFeature:r}=(0,tF._m)(),n=["design_libraries","ssg_disabled","alternative_auth_header","appcues_launchpad","component_libraries_phase_1_masking"].filter(a);return!n.includes("design_libraries")&&e.metadata.designLibraries&&n.push("design_libraries"),t&&r(tU.BAf.Discussions)&&n.push(...["discussions","discussions_code_editor_view","discussions_form_view"].filter(a)),n}(),{currentWorkspace:p,canIOnProject:g,iHaveRole:h}=(0,tF.C$)(),{stableHttpHost:f}=(0,tF.n5)(),{getNonStaleJWT:b}=(0,tF.pr)(),{assetHost:y}=(0,tF.ks)(),[w,E]=ty.useState(!1),v=(0,tv.useQueryClient)(),k=(0,tA.useNavigate)(),_=s.initialFileUpload,x=ty.useMemo(()=>_?.map(e=>new File([new Uint8Array(e.rawData).buffer],e.name,{type:e.type})),[_]),I=ty.useMemo(()=>({id:String(e.id),slug:n,name:e.name,cwd:"/p",remoteUrlHttp:e.remoteUrlHttp||void 0,integrationKind:e.resolvedWorkspaceIntegration?.kind??void 0,integrationConfig:e.resolvedWorkspaceIntegration?.config??void 0,integrationName:e.resolvedWorkspaceIntegration?.name??void 0,integrationId:e.resolvedWorkspaceIntegration?.id??void 0,dataSource:"fs",yjsDocId:i,type:e.type,flavor:e.flavor,isLegacyDesignLibraryProject:e.isDesignLibrary,useAutomaticSsgConversion:p?.useAutomaticSsgConversion??!0}),[e,n,i,p]),S=ty.useMemo(()=>({canAddMembers:g(e,tU.Jg8.ProjectMembersAdd),isGuest:h(tU.l2p.Guest),canUpdateProject:g(e,tU.Jg8.ProjectUpdate),canEnableStyleguide:d(tU.BAf.StyleGuides)}),[g,h,e,d]),j=ty.useMemo(()=>({openShareDialog:()=>E(!0),openFeatureDialogStyleGuides:()=>c(tU.BAf.StyleGuides),navigate:e=>k(e),getJWT:async()=>await b()??"",onDelete:async()=>u(k,"/"),invalidateDevPortalQueries:e=>v.invalidateQueries(tI.Uz.project((0,t8.encodeID)("prj",e))),invalidateDevPortalBranchQueries:(e,t)=>v.invalidateQueries(tI.Uz.branch((0,t8.encodeID)("prj",e),t)),invalidateBranchQueries:(e,t)=>v.invalidateQueries(tN.stoplightDocKeys.branchDoc({project_id:(0,t8.encodeID)("prj",e),branch_slug:t})),invalidateProjectReleaseQueries:e=>v.invalidateQueries(tN.projectReleaseKeys.detail((0,t8.encodeID)("prj",e),"latest"))}),[c,u,b,v,k]),C=ty.useRef((0,rh.f)(y||"/",(0,rf.V)("/static/js"))),{id:P,name:A="",slug:B="",domain:D="",disableDefaultStyleguideEditing:T=!1}=p||{},F=ty.useMemo(()=>P?{id:P,name:A,slug:B,disableDefaultStyleguideEditing:!!T}:null,[P,A,B,T]);return ty.createElement(ty.Fragment,null,!o&&ty.createElement(n$,{project:{id:Number(I.id),name:I.name},isOpen:w,onClose:()=>E(!1)}),ty.createElement(rb.default,null,ty.createElement(ty.Suspense,{fallback:ty.createElement(rg,null)},ty.createElement(r,{activeWorkspace:F,project:I,features:m,permissions:S,callbacks:j,readonly:o,apiUrl:f,customDomain:D,initialFileUpload:x,workerBaseUrl:C.current,promptOnUnload:!0}))))};var nR=a(23741);let nW=e=>{let{canIOnProject:t,canI:a,myPermissions:r}=(0,tF.C$)(),{currentUser:n,jwt:o,isLoggedIn:l}=(0,tF.hD)(),{data:i,isLoading:s}=(0,tN.useGetProject)(o,{projectId:(0,t8.safelyDecodeID)(e??0)},{enabled:!!e}),c=(0,tN.useGetProjectServiceAccounts)({jwtToken:o,project_id:"string"==typeof e?e:(0,t8.encodeID)("prj",e??0),options:{enabled:l&&!!e}});if(!e||!i||0===r.length||s||c.isLoading)return["loading",""];let u={WorkspaceProjectsCreate:a(tU.E4M.WorkspaceProjectsCreate),ProjectContentsUpdate:t(i.my_permissions,tU.Jg8.ProjectContentsUpdate),ProjectRead:t(i.my_permissions,tU.Jg8.ProjectRead)};switch(i.type){case"cli":return nL();case"local":case"web":return nG({permissions:u});case"vcs":return nO({project:i,currentUser:n,hasProjectServiceAccount:(c.data?.items?.length??0)>0,permissions:u});default:return["loading",""]}},nL=()=>["notEditable","Project type not editable in Studio"],nG=({permissions:e})=>e.ProjectContentsUpdate||e.ProjectRead?[e.ProjectContentsUpdate?"readWrite":"readOnly",""]:["none","You do not have access to this project. A project admin can grant you access."],nO=({project:e,currentUser:t,hasProjectServiceAccount:a,permissions:r})=>{let n=!a&&r.WorkspaceProjectsCreate,o=r.ProjectContentsUpdate||n,l=r.ProjectRead;if(!o&&!l)return["none","You do not have access to this project. A project admin can grant you access."];let i=e.workspace_integration?(0,t8.safelyDecodeID)(e.workspace_integration?.id):void 0,s=!!t&&t.externalUsers.findIndex(e=>e.workspaceIntegrationId===i)>-1;return a||s?[o?"readWrite":"readOnly",""]:["connect","You need to connect your Git account to open this project"]};var nz=a(79984);let nq=(0,ak.ss)((0,ak.BZ)((0,ak.aZ)(function({workspace:e}){let[t,a]=((0,tA.useParams)().projectBranchSlug||"").split(":",2),r=t.replace("/edit",""),{state:n}=(0,tB.U8)(),[{data:o,fetching:l,error:i}]=(0,nR.w)({workspaceId:e.id,projectSlug:r});(0,nz.pO)(o);let[s,c]=nW(o?.id),{jwt:u}=(0,tF.hD)(),d=(0,tN.useGetProjectBranches)(u,{projectId:o?.id}),m=(0,tN.useGetProjectServiceAccounts)({jwtToken:u,project_id:(0,t8.encodeID)("prj",o?.id||0),options:{enabled:!!o}}),p=m.data?.items||[];return""===r?ty.createElement(tA.Navigate,{to:"/",replace:!0}):l||o?"connect"!==s||m.isFetching||p.length?!r||l||"loading"===s||d.isFetching?ty.createElement(rg,null):i?ty.createElement(rp,{error:i}):o?"none"===s?ty.createElement(rm,{message:c}):ty.createElement(nM,{remoteProject:o,branches:d.data?.items??[],branchSlug:a,projectSlug:r,readonly:"readOnly"===s||n.router.searchParams.has("yjs-snapshot")}):ty.createElement(rd.m,{title:"Project not found"},ty.createElement(tg.Box,null,'No "',r,'" project exists. Maybe its URL changed?'),ty.createElement(tk.Link,{to:"/"},"See all projects")):ty.createElement(tA.Navigate,{to:`/docs/${o?.slug}`,replace:!0}):ty.createElement(rm,{message:"You do not have access to this project. A project admin or workspace admin can grant you access."})}))),nV=(0,tS.withErrorBoundary)((0,ak.ss)(function(){return ty.createElement("div",{className:"flex-1 h-screen"},ty.createElement(tA.Routes,null,ty.createElement(tA.Route,{path:"/",element:ty.createElement(nq,null)})))}));var nH=a(1724);let nQ=({recentWorkspaceUrls:e,deleteWorkspace:t,redirectPath:a})=>{let{effects:r}=(0,tB.U8)();return ty.createElement(tg.VStack,{mt:6,mb:2,border:2,borderColor:"dark",style:{borderRadius:2},rounded:"sm"},ty.createElement(tg.VStack,null,e.map(n=>ty.createElement(tg.Box,{key:n},ty.createElement(tg.Link,{pl:4,pr:2,bg:{hover:"canvas-50"},display:"flex",alignItems:"center",justifyContent:"center",key:n,h:14,href:"//"+n+a,"data-test":"recent-workspace-button",onClick:()=>{r.reporter.log({event:"take_me_to_my_workspace_recent_workspace_selected"})}},ty.createElement(tg.Text,{w:"full",color:"body"},n),ty.createElement(tg.Button,{appearance:"minimal",icon:"xmark",onPress:()=>{t(n)}})),ty.createElement(ty.Fragment,null,n!==e[e.length-1]&&ty.createElement("hr",{style:{width:"100%"}}))))))},nK="recently_accessed_workspaces",nJ=async()=>{let e=localStorage.getItem(nK);return e?JSON.parse(e):[]},nY=async e=>{localStorage.setItem(nK,JSON.stringify(e))},nX=({addWorkspaceURL:e,redirectPath:t,redirectHost:a})=>{let{effects:r}=(0,tB.U8)(),[n,o]=(0,ty.useState)(""),[l,i]=(0,ty.useState)(!1);(0,ty.useEffect)(()=>{let e=new RegExp(/^(https?:\/\/)?(?:www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,256}\b(?:[-a-zA-Z0-9()@:%_\+.~#?&\/=]*)$/),t=new RegExp(/^[A-Za-z0-9\-]{1,20}$/),a=""===n,r=-1==n.indexOf(".")&&!n.match(t),o=n.indexOf(".")>-1&&!n.match(e);i(!(a||r||o))},[n]);let s=n.indexOf(".")>-1?n:`${n}.${a}`;return ty.createElement(tg.Flex,{flexDirection:"col"},ty.createElement(tj.Label,{htmlFor:"workspace-url-field",style:{marginBottom:4}},"Workspace URL"),ty.createElement("form",{onSubmit:a=>{a.preventDefault(),r.reporter.log({event:"take_me_to_my_workspace_manual_url_entered",payload:{url_value_entered:n}}),window.open(`//${s}${t}`,"_self","noopener"),e(s)}},ty.createElement(tg.VStack,null,ty.createElement(tg.Input,{id:"workspace-url-field",autoComplete:"off",placeholder:"Workspace Name or URL","aria-label":"Workspace Name or  URL",onChange:e=>{o(e.target.value)}}),ty.createElement(tg.Box,{mt:1,mb:4},!l&&""!==n&&ty.createElement(nZ,{hint:"Invalid URL or Subdomain"})),ty.createElement(tg.Box,null,ty.createElement(tg.Button,{fullWidth:!0,disabled:!l,appearance:"primary",type:"submit"},"Redirect",""!==n?" to "+s:""),ty.createElement(n0,null)))))},nZ=({hint:e})=>ty.createElement(tg.HStack,{color:"danger",alignItems:"baseline",justifyContent:"start"},ty.createElement(tg.Box,{mr:2},ty.createElement(tg.Icon,{icon:["fas","triangle-exclamation"]})),ty.createElement(tg.Text,null,e)),n0=()=>{let{effects:e}=(0,tB.U8)();return ty.createElement(tg.Box,{mt:4},"Don't have a Stoplight account?"," ",ty.createElement(tg.Link,{href:"/welcome",target:"_self",rel:"noopener noreferrer",onClick:()=>{e.reporter.log({event:"take_me_to_my_workspace_create_workspace_link_clicked"})}},ty.createElement("strong",null,"Create one here")),".")},n1=(0,tS.withErrorBoundary)((0,ak.ss)(function(){let{effects:e,state:t}=(0,tB.U8)(),[a,r]=ty.useState(null),[n,,o]=(0,nH.A)(["recent_workspace"]),[l,i]=(0,ty.useState)(""),[s,c]=(0,ty.useState)(!1),u=(0,tA.useLocation)();(0,ty.useEffect)(()=>{let e=t.router.workspaceSlug,a=t.router.serverHost;i((""!==e?a.replace(e+".",""):a).replace(/^https?:\/\//,""))},[t.router.serverHost,t.router.workspaceSlug]),(0,ty.useEffect)(()=>{(async()=>{let e=await nJ(),a=n.recent_workspace||null;a&&-1===e.indexOf(a)&&(e.unshift(a),nY(e)),a&&o("recent_workspace",{path:"/",domain:"."+t.router.serverHost.replace(/^https?:\/\//,"").replace(/:\d+$/,"")}),r(e)})()},[n,o,t.router.serverHost]);let d=u.pathname??t.router.pathname,m="?"===t.router.search?"":t.router.search,p=d.replace(/^\/links/,"")+m;return((0,ty.useEffect)(()=>{null===a||s||(c(!0),e.reporter.log({event:"take_me_to_my_workspace_page_viewed",payload:{recent_workspaces_count:a.length,destination_path:p}}))},[e.reporter,s,a,p]),t.router.workspaceSlug)?ty.createElement(tA.Navigate,{to:"/",replace:!0}):ty.createElement(tg.Flex,{align:"center",justify:"center",minH:"screen",style:{background:"#FBFCFD"}},ty.createElement(tg.VStack,{spacing:8,style:{width:450}},ty.createElement(rn,{showLogo:!0,title:"Take Me to My Workspace",description:a&&a.length>0?"Select a workspace or enter a workspace URL to be redirected.":"Enter a workspace URL to be redirected."}),a&&a?.length>0&&ty.createElement(ty.Fragment,null,ty.createElement(nQ,{recentWorkspaceUrls:a,redirectPath:p,deleteWorkspace:e=>{let t=a.indexOf(e);a.splice(t,1),r([...a]),nY(a)}}),ty.createElement(tg.HStack,{alignItems:"center",mt:2},ty.createElement("hr",{style:{width:"100%"}}),ty.createElement(tg.Text,{color:"muted",mx:2},"OR"),ty.createElement("hr",{style:{width:"100%"}}))),ty.createElement(nX,{redirectPath:p,redirectHost:l,recentWorkspaceUrls:a||[],addWorkspaceURL:e=>{a&&-1===a.indexOf(e)&&(a.unshift(e),nY(a))}})))})),n2=({currentStep:e,totalSteps:t})=>{let a=[];for(let r=0;r<t;r++)a.push(ty.createElement(tg.Box,{key:`signup-step-${r+1}`,color:r==e-1?"#149CF4":"canvas-200"},ty.createElement(tg.Icon,{size:"2xs",icon:["fas","circle"]})));return ty.createElement(tg.HStack,{justifyContent:"center",spacing:2},a)},n4=(0,ak.ss)(function(){return ty.createElement(tg.VStack,{spacing:6,p:6,maxW:"prose"},ty.createElement(tg.Heading,{textAlign:"center",size:2},"Set Up Your Account"),ty.createElement(n3,null),ty.createElement(n2,{currentStep:4,totalSteps:5}))});function n3(){let{actions:e,state:t,effects:a}=(0,tB.U8)(),[r,n]=ty.useState(""),[o,l]=ty.useState(""),[i,s]=ty.useState(""),c=(0,tA.useNavigate)(),[,u]=(0,tU.zod)(),[,d]=(0,tU.BL3)(),{register:m,handleSubmit:p,setValue:g,setFocus:h,formState:{isValid:f,isSubmitting:b}}=(0,t5.mN)({mode:"onChange",defaultValues:{firstName:t.auth.currentUser?.firstName||void 0,lastName:t.auth.currentUser?.lastName||void 0,surveyCompanyName:t.workspaces.currentWorkspace?.name||void 0}});if(ty.useEffect(()=>{t.auth.currentUser?.firstName?t.auth.currentUser?.lastName?h("password"):h("lastName"):h("firstName")},[h]),t.metadata.dataBootstrapComplete&&(!t.router.workspaceSlug||!t.auth.isLoggedIn))return ty.createElement(tA.Navigate,{to:"/welcome",replace:!0});let y=async({firstName:r,lastName:n,password:o,surveyPersona:l,surveyNumApis:i,surveyOpenapiUsage:s,surveyCompanyName:m})=>{if(b)return;let{currentUser:p}=t.auth;if(p)try{await d({userId:p.id,input:{firstName:r,lastName:n,surveyPersona:l,surveyNumApis:i,surveyOpenapiUsage:s,surveyCompanyName:m}}),o&&await u({newPassword:o}),await e.auth.refreshCurrentUser(),a.reporter.log({event:"persona_survey_submitted",payload:{prior_oas_usage:s,role_in_org:l}});let{searchParams:g}=t.router;a.router.navigate(c,`/welcome/choose-your-plan?${g.toString()}`,{replace:!0})}catch(e){a.notifications.danger({message:e.message})}};return ty.createElement("form",{onSubmit:p(y)},ty.createElement(tg.VStack,{spacing:6,align:"center"},ty.createElement(tg.VStack,{spacing:5,p:5,rounded:"lg",boxShadow:"md",border:!0,bg:"canvas-pure",w:"full",divider:!0},ty.createElement(tg.VStack,{spacing:4},ty.createElement(tg.HStack,{spacing:3},ty.createElement(tg.VStack,{spacing:1,flex:1},ty.createElement(rr,{htmlFor:"firstName"},"First Name"),ty.createElement(tg.Input,{...m("firstName",{required:!0}),id:"firstName",type:"text","aria-label":"First Name",autoFocus:!t.auth.currentUser?.firstName})),ty.createElement(tg.VStack,{spacing:1,flex:1},ty.createElement(rr,{htmlFor:"lastName"},"Last Name"),ty.createElement(tg.Input,{...m("lastName",{required:!0}),name:"lastName",id:"lastName",type:"text","aria-label":"Last Name",autoFocus:!!(t.auth.currentUser?.firstName&&!t.auth.currentUser?.lastName)}))),!t.auth.currentUser?.hasPassword&&ty.createElement(tg.VStack,{spacing:1},ty.createElement(rr,{htmlFor:"password"},"Password"),ty.createElement(tg.Input,{...m("password",{required:!0,minLength:6,maxLength:50}),id:"password",type:"password",placeholder:"******","aria-label":"Password",autoFocus:!!(t.auth.currentUser?.firstName&&t.auth.currentUser?.lastName)}))),t.auth.currentUser?.surveyPersona===null?ty.createElement(ty.Fragment,null,ty.createElement(tg.VStack,{spacing:1},ty.createElement(rr,{htmlFor:"surveyPersona"},"What is your Role?"),ty.createElement(tg.Select,{appearance:"outlined",name:"surveyPersona",value:r,options:n5,placeholder:"Select one","aria-label":"Role",onChange:e=>{g("surveyPersona",e),n(e)}})),ty.createElement(tg.VStack,{spacing:1},ty.createElement(rr,{htmlFor:"surveyNumApis"},"How many APIs does your company have?"),ty.createElement(tg.Select,{appearance:"outlined",name:"surveyNumApis",value:o,options:n8,placeholder:"Select one","aria-label":"APIs",onChange:e=>{g("surveyNumApis",e),l(e)}})),ty.createElement(tg.VStack,{spacing:1},ty.createElement(rr,{htmlFor:"surveyOpenapiUsage"},"Are you already using Open API (Swagger)?"),ty.createElement(tg.Select,{appearance:"outlined",name:"surveyOpenapiUsage",value:i,options:n6,placeholder:"Select one","aria-label":"OpenAPI",onChange:e=>{g("surveyOpenapiUsage",e),s(e)}}))):null),ty.createElement(tg.Box,{w:"5/6"},ty.createElement(tg.Button,{w:"full",fullWidth:!0,appearance:"primary",disabled:!tm.KJ||!f||!r||!o||!i,loading:b,type:"submit",onPress:()=>p(y)()},"Continue"))))}let n5=[{label:"Fullstack Developer",value:"fullstack_developer"},{label:"Backend Developer",value:"backend_developer"},{label:"Frontend Developer",value:"frontend_developer"},{label:"Technical Architect",value:"technical_architect"},{label:"Technical Writer",value:"technical_writer"},{label:"Quality Engineer",value:"quality_engineer"},{label:"Director/Manager",value:"director_manager"},{label:"Product Manager",value:"product_manager"},{label:"Exec",value:"exec"},{label:"Other",value:"other"}],n8=[{label:"No APIs yet, but want one",value:"0"},{label:"1 API",value:"1"},{label:"2-10 APIs",value:"2-10"},{label:"11-50 APIs",value:"11-50"},{label:"51-100 APIs",value:"51-100"},{label:"100+ APIs",value:"100+"}],n6=[{label:"I use OpenAPI with Git",value:"with_git"},{label:"I use OpenAPI without Git",value:"without_git"},{label:"I don't use OpenAPI",value:"not_using"}],n7=({title:e,isYearly:t=!0,handleYearlySwitch:a,showMontlyYearlyToggle:r=!1,isFreeWorkspace:n,isPlanSignupPage:o,isResponsiveLayoutEnabled:l})=>{let i=ty.createElement(n9,null,"You are currently on the"," ",ty.createElement(tg.Link,{href:"https://stoplight.io/pricing",target:"_blank",rel:"noopener noreferrer"},"Free")," ","plan"),s=ty.createElement(n9,null,"Includes a 14-Day Free Trial. Cancel anytime.");return ty.createElement(oe,{isResponsiveLayoutEnabled:l},ty.createElement(ty.Fragment,null,ty.createElement(tg.Box,{flexGrow:!0,ml:l?2:0},ty.createElement(tg.Heading,{size:1},e),n&&i,o&&s),r&&a?ty.createElement(tg.HStack,{spacing:2,ml:l?3:0},ty.createElement(tg.Box,{color:"muted"},"Billed monthly"),ty.createElement(tg.Switch,{onChange:a,isSelected:t}),ty.createElement(tg.Box,{color:"muted"},"Billed yearly ","Change your plan"===e?ty.createElement("span",null,"(2 months free)"):null)):null))},n9=({children:e})=>ty.createElement(tg.Box,{mt:4,mb:5,ml:1},e),oe=({isResponsiveLayoutEnabled:e,children:t})=>ty.createElement(ty.Fragment,null,e?ty.createElement(tg.VStack,null,t):ty.createElement(tg.HStack,{style:{maxWidth:1024}},t)),ot=({isOpen:e,onClose:t,billingPeriodEnd:a,profitwellFlowResults:r})=>{let[n,o]=ty.useState(""),[l,i]=ty.useState(""),{state:s,effects:c}=(0,tB.U8)(),u=(0,tN.useCancelBillingSubscription)(s.auth.jwt),d=(0,tA.useNavigate)();return ty.useEffect(()=>{r?.cancelReason&&o(r.cancelReason),r?.cancelDetails&&i(r.cancelDetails)},[r]),ty.createElement(tg.Modal,{isOpen:e,onClose:t,size:"sm"},ty.createElement(tg.VStack,{divider:!0,spacing:6,p:6},ty.createElement(tg.Text,{fontSize:"lg",fontWeight:"semibold"},"Cancel your subscription?"),ty.createElement(tg.Box,null,ty.createElement(tg.Box,{fontWeight:"medium"},"Heads up! Some of the premium features you'll miss out on:"),ty.createElement(tg.VStack,{spacing:2,mt:3},or.map((e,t)=>ty.createElement(tg.Flex,{key:t},ty.createElement(tg.Box,{w:5},ty.createElement(tg.Icon,{icon:e.icon})),ty.createElement(tg.Box,null,e.text))))),!r&&ty.createElement(tg.Box,null,ty.createElement(tg.Box,{fontWeight:"medium"},"Please help us improve - why are you cancelling?"),ty.createElement(tg.Box,{mt:4},ty.createElement(tg.Select,{"aria-label":"Cancel reason",value:n,onChange:o,appearance:"outlined",placeholder:"select a reason",options:oa}),n&&ty.createElement(tg.Box,{mt:6},ty.createElement(tg.Box,{fontWeight:"medium"},oa.find(e=>e.value===n).detailsLabel),ty.createElement(tg.Box,{mt:4},ty.createElement(tg.Textarea,{"aria-label":"Details",value:l,onChange:e=>{i(e.target.value)},placeholder:"Some more details here"}))))),n?ty.createElement(tg.Box,null,ty.createElement(tg.Paragraph,{size:"tiny"},"Your active plan will change to the ",ty.createElement("b",null,"Free")," plan at the end of your current billing period, on"," ",ty.createElement("b",null,tQ(new Date(a))),". All other members will lose access to this workspace. Access can be restored by upgrading to a paid plan at anytime."),ty.createElement(tg.HStack,{mt:5,spacing:2},ty.createElement(tg.Button,{onPress:()=>t(),disabled:u.isLoading},"Never mind"),ty.createElement(tg.Tooltip,{isDisabled:""!==l||!!r,placement:"right",renderTrigger:ty.createElement(tg.Box,null,ty.createElement(tg.Button,{appearance:"primary",intent:"danger",loading:u.isLoading,disabled:!l&&!r,onPress:()=>{u.mutate({workspace_id:String(s.workspaces.currentWorkspaceId),reason:String(n),details:String(l)},{onSuccess:()=>{c.notifications.success({message:"Subscription scheduled to cancel at the end of your current billing period."}),d("/admin/billing")},onError:e=>{c.notifications.danger({message:`There was an error cancelling your subscription. Please visit ${tm.FI} if this continues to happen.`}),c.reporter.error(e)}})}},"Cancel My Subscription"))},"Please fill in the text fields above to cancel your subscription."))):void 0))},oa=[{value:"expensive",label:"Too expensive",detailsLabel:"Anything else you would like to share?"},{value:"features",label:"Missing features",detailsLabel:"What features were you looking for?"},{value:"free_works",label:"Free plan has everything I need",detailsLabel:"What part of Stoplight do you use most?"},{value:"confusion",label:"Could not figure out how to use",detailsLabel:"What were you trying to accomplish with Stoplight?"},{value:"adoption",label:"Could not get internal adoption",detailsLabel:"Anything else you would like to share?"},{value:"competitor",label:"Switching to another solution",detailsLabel:"What solution are you switching to?"},{value:"not_needed",label:"No longer need a solution",detailsLabel:"Anything else you would like to share?"}],or=[{icon:["fal","user"],text:"Limited to 1 member"},{icon:["fal","cube"],text:"Limited to 1 project"},{icon:["fal","code-branch"],text:"No multi-branch support"},{icon:["fal","chart-line"],text:"No analytics integration"},{icon:["fal","browser"],text:"No custom domain"}],on=({billingPeriodEnd:e,subscriptionId:t})=>{let{state:a}=(0,tB.U8)(),[r,n]=ty.useState(!1),[o,l]=ty.useState(),i=window.profitwell&&a.flags.isFlagEnabled("profitwell_cancellation_flow");return ty.createElement(ty.Fragment,null,ty.createElement(tg.Button,{onPress:()=>{i?window.profitwell("init_cancellation_flow",{subscription_id:t}).then(e=>{"retained"!==e.status&&"aborted"!==e.status&&("error"===e.status&&n(!0),"chose_to_cancel"===e.status&&(e.cancelReason&&l({cancelReason:e.cancelReason,cancelDetails:e.additionalFeedback||""}),n(!0)))}):n(!0)}},"Downgrade to Free Plan"),ty.createElement(ot,{isOpen:r,onClose:()=>n(!1),billingPeriodEnd:e,profitwellFlowResults:o}))},oo=({account:e})=>{let{state:t}=(0,tB.U8)(),{isAccountInfoCollected:a}=(0,tF.hD)(),r=(0,tA.useLocation)(),n=!!(e?.billing_pricing_plan_id&&e.stripe_current_period_end),[o,l]=ty.useState(!n||e?.cycle_interval_months===12),[i,s]=ty.useState(null),c=e?.billing_product_id===1,u=e?.billing_product_id===4,d=!c&&!u,m=r.pathname.includes("/welcome")??t.router.pathname.includes("/welcome"),p=ty.createElement(tg.Button,{appearance:"minimal",style:{width:"fit-content"},as:tg.Link,href:a?"/":"/welcome/account"},"No thanks, take me to my free workspace",ty.createElement(tg.Icon,{icon:"arrow-right",style:{marginLeft:6}})),{isResponsiveLayoutEnabled:g,screenType:h}=(0,a_.s)(),f=h===a_.t.Phone||h===a_.t.Tablet?{maxWidth:380}:h===a_.t.Resized_Browser?{maxWidth:750}:{maxWidth:"unset"},b=!m&&c?{minWidth:600,maxWidth:1100}:g?{...f}:{maxWidth:"unset"};return ty.createElement(ty.Fragment,null,ty.createElement(n7,{title:"Choose your plan",isYearly:o,handleYearlySwitch:l,showMontlyYearlyToggle:!0,isFreeWorkspace:c,isPlanSignupPage:m,isResponsiveLayoutEnabled:g}),ty.createElement(tg.Box,{mt:6,style:b,overflowX:"auto"},ty.createElement(ah,{displayYearly:o,handleYearlySwitch:l,isScreen:!0})),n&&d&&ty.createElement(tg.Flex,{justifyContent:"end",mt:6},ty.createElement(on,{billingPeriodEnd:e.stripe_current_period_end,subscriptionId:e.stripe_subscription_id})),m&&ty.createElement(tg.Flex,{justifyContent:"end",my:4},p),i?ty.createElement(ac,{isOpen:!0,onClose:()=>s(null),displayYearly:o,showSavings:!0,handleYearlySwitch:l,productId:i.id,ctaButton:({product:e,interval:t})=>ty.createElement(tz,{product:e,interval:t})}):null)},ol=(0,ak.ss)((0,ak.BZ)((0,ak.aZ)(function(){let{state:e}=(0,tB.U8)(),[t,a]=ty.useState(!1),{searchParams:r}=e.router,n=r.get("plan"),o=parseInt(r.get("interval")||"",10),l=[1,12].includes(o)?o:void 0,i=tW(),{data:s,isLoading:c}=(0,tN.useGetBillingProducts)({enabled:!!(n&&l)}),u=ty.useCallback(async(t,r)=>{a(!0);let{successUrl:n,cancelUrl:o}=tO(!e.auth.isAccountInfoCollected),l=await i(t,r,n.toString(),o.toString());l?.redirect_url?window.location.href=l.redirect_url:a(!1)},[i,e.auth.isAccountInfoCollected]);return(ty.useEffect(()=>{let e=s?.find(e=>e.name===n);e&&e.name!==tU.mmV.Free&&l&&u(e,l)},[s,n,l,u]),!e.workspaces.myWorkspace||t||c)?ty.createElement(tg.Text,{color:"muted",size:"lg"},"Loading available pricing plans..."):n===tU.mmV.Free?e.auth.isAccountInfoCollected?ty.createElement(tA.Navigate,{to:"/admin/billing",replace:!0}):ty.createElement(tA.Navigate,{to:`/welcome/account?${r.toString()}`,replace:!0}):ty.createElement(tg.VStack,{spacing:6},ty.createElement(oo,null),ty.createElement(n2,{currentStep:5,totalSteps:5}))}))),oi=(0,ak.ss)(function(){let{actions:e,effects:t,state:a}=(0,tB.U8)(),[,r]=(0,tU.BL3)(),[n,o]=ty.useState({surveyUC:null}),l=tA.useNavigate,i=async n=>{let{currentUser:o}=a.auth;if(o)try{await r({userId:o.id,input:n}),await e.auth.refreshCurrentUser(),t.reporter.log({event:"use_case_submitted",payload:{survey_uc:n.surveyUC||""}}),a.workspaces.currentWorkspace?.migratedFromNext?t.router.navigate(l,"/admin/legacy-migration/next",{replace:!0}):t.router.navigate(l,"/",{replace:!0})}catch(e){t.notifications.danger({message:e.message})}},s=e=>{o({surveyUC:e.name})};return ty.createElement(tg.VStack,{spacing:6,p:6,maxW:"prose",align:"center"},ty.createElement(tg.VStack,{p:4,textAlign:"center",spacing:1,align:"center"},ty.createElement(tg.Heading,{size:2},"Select your primary use case"),ty.createElement(tg.Box,{style:{maxWidth:"80%"}},ty.createElement(tg.Text,{color:"muted",size:"lg"},"Select your primary use case to get started faster. It's okay if more than one applies, you'll be able to explore more use cases later."))),ty.createElement(tg.VStack,{spacing:3},os.map((e,t)=>ty.createElement(tg.Box,{as:tj.Card,key:t,itemProp:n.surveyUC===e.name?"active":"inactive","data-test":`${e.name}-card`,w:"full",border:2,borderColor:n.surveyUC===e.name?"primary":{default:"transparent",focus:"primary"},interactive:!0,tabIndex:0,onClick:()=>s(e),onKeyDown:t=>{"Enter"===t.key&&s(e)}},ty.createElement("div",{className:"mt-1"},ty.createElement(tj.FAIcon,{className:`mb-2 text-${e.color}`,size:"lg",icon:e.icon}),ty.createElement("strong",{className:"ml-2 text-base"},e.title)),ty.createElement("div",{className:"text-sm"},e.description)))),ty.createElement(tg.Box,{w:"5/6"},ty.createElement(tg.Button,{appearance:"primary",fullWidth:!0,disabled:null===n.surveyUC,onPress:()=>i(n)},"Go to the ",a.workspaces.currentWorkspace?.name," Workspace")))}),os=[{name:"apiProgram",title:"Establishing a Program",icon:"balance-scale",color:"red",description:"Create consistency, governance, and visibility across multiple internal and external APIs."},{name:"apiDesign",title:"Designing APIs",icon:"pencil-ruler",color:"purple-4",description:"Define how individual APIs will work in an easily consumable, shareable way."},{name:"apiDocumentation",title:"Publishing API Documentation",icon:"book-open",color:"blue-6",description:"Deliver a great Developer Experience with beautifully documented references, examples, and instructions."}];var oc=a(79392);function ou(){let{actions:e,effects:t,state:a}=(0,tB.U8)(),{register:r,handleSubmit:n,formState:{isValid:o,isSubmitting:l},getValues:i,setFocus:s}=(0,t5.mN)({mode:"onChange"}),[c,u]=ty.useState(!1),[,d]=(0,tU.vMM)();ty.useEffect(()=>{s("email")},[s]);let m=a.router.searchParams,p=(0,tA.useNavigate)(),g=()=>{let e=i();m.append("email",e?.email),t.router.navigate(p,`/welcome/name?${m.toString()}`)},h=async()=>{let e=i(),{error:a}=await d({email:e?.email});a&&t.notifications.danger({message:a.message||"Something went wrong, please try again."}),m.append("email",e?.email),t.router.navigate(p,`/welcome/welcomeback?${m.toString()}`)},f=async()=>{if(!l)try{let e=i();u(!0);let a=await t.api.checkEmailHasWorkspace(e?.email);a?h():g(),t.reporter.log({event:"email_submitted",payload:{existing_workspaces:!!a}})}catch(a){t.notifications.danger({message:a.message||"Something went wrong, please try again."}),e.reporter.error({error:Error(a.message)});return}};return ty.createElement("form",{onSubmit:n(f)},ty.createElement(tg.VStack,{spacing:3},ty.createElement(tg.VStack,{spacing:1},ty.createElement(rr,{label:"Your Work Email",htmlFor:"email"},"Your Work Email"),ty.createElement(tg.Input,{readOnly:l,type:"email",id:"email",autoFocus:!0,bg:"canvas","aria-label":"Your Work Email",placeholder:"you@company.com",...r("email",{required:!0,pattern:tm.T_,maxLength:255})})),ty.createElement(tg.Button,{loading:l,w:"full",fullWidth:!0,appearance:"primary",disabled:!o,type:"submit",onPress:()=>n(f)()},c?"Success! Redirecting...":"Sign Up")))}function od(){return ty.createElement(tg.Box,{textAlign:"center"},"By continuing, you are agreeing to our"," ",ty.createElement("a",{href:"https://stoplight.io/terms",target:"_blank",rel:"noopener noreferrer"},"Customer Terms of Service")," ","and"," ",ty.createElement("a",{href:"https://stoplight.io/privacy",target:"_blank",rel:"noopener noreferrer"},"Privacy Policy"),", and to receiving emails from Stoplight.")}let om=(0,ak.ss)(function(){let{state:e,effects:t}=(0,tB.U8)();(0,a6.e)("welcome");let{isResponsiveLayoutEnabled:a}=(0,a_.s)(),r=e.workspaces.currentWorkspaceId;return e.router.isWorkspaceDomain?r?ty.createElement(tA.Navigate,{to:"/",replace:!0}):ty.createElement(rl,null):ty.createElement(tg.Flex,{pt:a?20:0,w:"full"},!a&&ty.createElement("a",{href:"https://stoplight.io",target:"_blank",rel:"noreferrer",onClick:()=>{t.reporter.log({event:"welcome_corner_logo_clicked"})}},ty.createElement(tg.Image,{src:"/static/images/logo-blue-black.png",style:{position:"absolute",top:12,left:12},width:100})),ty.createElement(tg.Flex,{m:"auto",style:{background:"#FBFCFD"},flexDirection:"row",justifyContent:"end"},ty.createElement(tg.Flex,{align:a?"start":"center",justify:"center",minH:"screen",flex:1,px:12,grow:!0},ty.createElement(tg.VStack,{spacing:6,style:a?{}:{width:400}},ty.createElement(rn,{showLogo:!0,title:"Create your workspace",description:"Enter your email below to create your Stoplight workspace."}),ty.createElement(ou,null),ty.createElement(od,null),ty.createElement(n2,{currentStep:1,totalSteps:5})))),!a&&ty.createElement(op,null))}),op=()=>{let[e,t]=(0,ty.useState)(0),[a,r]=(0,ty.useState)(1e4),[n,o]=(0,ty.useState)(!1);(0,ty.useEffect)(()=>{if(n)return()=>{};{let n=setTimeout(()=>{a<=0?(t((e+1)%3),r(1e4)):r(a-100)},100);return()=>clearTimeout(n)}},[e,t,n,a]);let l=[ty.createElement(oh,{key:"calendly",visible:0===e}),ty.createElement(of,{key:"schneider",visible:1===e}),ty.createElement(og,{key:"fiserv",visible:2===e})];return ty.createElement("div",{style:{position:"relative",width:800,minWidth:500},onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1)},l,ty.createElement(tg.Flex,{justifyContent:"center",style:{position:"absolute",left:0,right:0},mt:5},ty.createElement(()=>{let a=[];for(let n=0;n<l.length;n++)a.push(ty.createElement(tg.Box,{cursor:"pointer",onClick:()=>{t(n),r(1e4)}},ty.createElement(tg.Icon,{color:"#FFF",icon:[e===n?"fas":"far","circle"]})));return ty.createElement(tg.HStack,{spacing:2},a)},null)))},og=({visible:e})=>ty.createElement(ob,{visible:e,backgroundGradient:"linear-gradient(143.06deg, #DF343C 6.62%, #F8A328 94.38%)",quote:`"Were focusing on a nice feature enhancement to our API that is something that has been a topic of discussion for a very long time. Were also going to be improving our internal developer productivity at the same time. Its a nice double win by using Stoplight."`,logoImageSrc:"/static/images/logos/fiservWhiteLogo.png",logoImageHeight:40,caseStudyURL:"https://stoplight.io/case-studies/fiserv",mainScreenshotImageSrc:"/static/images/welcome/workspaceScreenshot.jpg"}),oh=({visible:e})=>ty.createElement(ob,{visible:e,backgroundGradient:"linear-gradient(145.94deg, #2BB0FC 11.05%, #0370FF 95.44%)",quote:"The design-first approach, for us, leads to a higher quality implementation, consistency, governance, and\ndocumentation that's never out of date.",logoImageHeight:40,logoImageSrc:"/static/images/logos/calendlyWhiteLogo.png",caseStudyURL:"https://stoplight.io/case-studies/calendly",mainScreenshotImageSrc:"/static/images/welcome/elementsScreenshot.jpg"}),of=({visible:e})=>ty.createElement(ob,{visible:e,backgroundGradient:"linear-gradient(323.53deg, #50D67F 10.38%, #48C1BF 76.2%)",quote:`Originally, we'd hold multiple meetings to go through all the standards and correct each aspect. We've whittled that down to a half hour meeting.`,logoImageSrc:"/static/images/logos/schneiderWhiteLogo.png",logoImageHeight:40,caseStudyURL:"https://stoplight.io/case-studies/schneider-electric",mainScreenshotImageSrc:"/static/images/welcome/styleGuideScreenshot.jpg"}),ob=({backgroundGradient:e,quote:t,logoImageSrc:a,logoImageHeight:r,mainScreenshotImageSrc:n,caseStudyURL:o,visible:l})=>{let{effects:i}=(0,tB.U8)(),s={transition:"opacity 650ms linear",opacity:0,visibility:"hidden"},c={entering:{opacity:1,visibility:"visible"},entered:{opacity:1,visibility:"visible"},exiting:{opacity:0,visibility:"visible"},exited:{opacity:0,visibility:"hidden"},unmounted:{opacity:0,visibility:"hidden"}},u=ty.useRef(null);return ty.createElement(oc.Ay,{nodeRef:u,in:l,timeout:650},l=>ty.createElement("div",{ref:u,style:{...s,...c[l],background:e,position:"absolute",left:0,right:0,overflow:"hidden",height:"100vh",boxShadow:"0px 16px 24px -8px rgba(67, 90, 111, 0.45)",filter:"drop-shadow(0px 0px 1px rgba(67, 90, 111, 0.3))"}},ty.createElement(tg.VStack,{spacing:10,mx:24,mt:20},ty.createElement(tg.Paragraph,{fontWeight:"semibold",style:{fontSize:"24px",lineHeight:"30px",color:"#FFFFFF"}},t),ty.createElement(tg.VStack,{spacing:1},ty.createElement(tg.Box,null,ty.createElement(tg.Link,{href:o,target:"_blank",rel:"noreferrer",display:"inline-block",onClick:()=>{i.reporter.log({event:"marketing_panel_customer_logo_clicked",payload:{url:o}})}},ty.createElement(tg.Image,{style:{height:r},src:a}))),ty.createElement(tg.Paragraph,{style:{fontSize:"12px",color:"#FFFFFF"}},"powered by"," ",ty.createElement("a",{href:"https://stoplight.io",target:"_blank",rel:"noreferrer",onClick:()=>{i.reporter.log({event:"marketing_panel_powered_by_stoplight_clicked"})}},ty.createElement(tg.Text,{fontWeight:"bold"},"Stoplight")))),ty.createElement("div",null,ty.createElement(tg.Image,{style:{position:"absolute",borderRadius:"20px 0px 0px 0px",boxShadow:"0px 16px 24px -8px rgba(67, 90, 111, 0.45)",filter:"drop-shadow(0px 0px 1px rgba(67, 90, 111, 0.3))",width:704,minWidth:704,marginTop:"max(0px, calc(100vh - 1000px))"},src:n})))))};var oy=a(69182),ow=a.n(oy);let oE=(0,ak.ss)(function(){let{state:e}=(0,tB.U8)();(0,a6.e)("welcome/name");let t=e.workspaces.currentWorkspaceId;return e.router.workspaceSlug?t?ty.createElement(tA.Navigate,{to:"/",replace:!0}):ty.createElement(rl,null):ty.createElement(tg.VStack,{spacing:6,p:6,maxW:"prose"},ty.createElement(rn,{title:"Create a new workspace",description:"Workspaces are a shared space for your company."}),ty.createElement(ov,null),ty.createElement(n2,{currentStep:2,totalSteps:5}))}),ov=(0,ak.ss)(function(){let{state:e,effects:t,actions:a}=(0,tB.U8)(),{register:r,handleSubmit:n,formState:{isValid:o,isSubmitting:l,isDirty:i},getValues:s,setValue:c}=(0,t5.mN)({mode:"onChange"}),[u,d]=ty.useState(null),[m,p]=ty.useState(!1),[,g]=(0,tU.xET)(),[h,f]=ty.useState(!1),[b,y]=ty.useState(!1),[w,E]=ty.useState(!0),v=new URLSearchParams((0,tA.useLocation)().search)??e.router.searchParams,k=v.get("email")??e.router.searchParams.get("email"),_=async e=>{let{error:a,data:r}=await t.api.getWorkspaceSlugBySlug(e);if(!r?.workspaces[0])return null;if(!a)return e;throw Error(a.message)},x=()=>{let e=s().workspace.toLowerCase();p(!0),v.set("slug",e),setTimeout(()=>{window.location.href=`${window.location.protocol}//${e}.${window.location.host}/welcome/verify?${v.toString()}`},100)},I=async({workspace:e,companyName:r})=>{if(l)return;t.reporter.log({event:"workspace_slug_submitted",payload:{company_name_given:""!==r}}),d(null);try{let t=await _(e);if(t){d(t);return}}catch(e){t.notifications.danger({message:e.message||"Something went wrong, please try again."}),a.reporter.error({error:Error(e.message)});return}let{error:n}=await g({email:k});n?(t.notifications.danger({message:n.message||"Something went wrong, please try again."}),a.reporter.error({error:Error(n.message),event:"email_verification_code_sent"})):(t.reporter.log({event:"email_verification_code_sent"}),x())},S=e=>e.match(C),j=e=>e.length&&e.length>20?y(!0):y(!1),C=/^[a-z0-9][a-z0-9\-]{0,28}[a-z0-9]$/,P=e=>S(e)?E(!0):E(!1),A=e=>{e&&(j(e),P(e),d(null))};return(ty.useEffect(()=>{if(!h){let a=e.router.searchParams.get("company")||"";c("companyName",a,{shouldValidate:!0});let r=e.router.searchParams.get("slug")||"";""===r&&""!==a&&(r=ow()(a,{lower:!0,strict:!0})),c("workspace",r,{shouldValidate:!0,shouldDirty:!0}),t.reporter.log({event:"welcome_name_visited_with_query_params",payload:{company_name:e.router.searchParams.get("company")||"",workspace_slug:e.router.searchParams.get("slug")||""}}),f(!0)}},[t.reporter,h,c,e.router.searchParams]),k)?ty.createElement("form",{onSubmit:n(I)},ty.createElement(tg.VStack,{spacing:6,align:"center"},ty.createElement(tg.VStack,{spacing:4,p:5,rounded:"lg",boxShadow:"md",border:!0,bg:"canvas-pure",w:"full"},ty.createElement(tg.VStack,{spacing:1},ty.createElement(rr,{htmlFor:"companyName"},"Company Name"),ty.createElement(tg.Input,{readOnly:l,id:"companyName",autoFocus:!0,placeholder:"Your Company","aria-label":"Company Name",...r("companyName",{required:!1,maxLength:255}),onBlur:()=>{let e=s();if(""===e.workspace&&""!==e.companyName){let t=ow()(e.companyName,{lower:!0,strict:!0});t&&t.length<=20&&S(t)&&c("workspace",t,{shouldValidate:!0})}}})),ty.createElement(tg.VStack,{spacing:1},ty.createElement(rr,{htmlFor:"workspace"},"Workspace URL"),ty.createElement(tg.Flex,{flexDirection:"col"},ty.createElement(tg.Flex,{border:!0,borderColor:b||!w||u?"danger":"input"},ty.createElement(tg.Box,{flex:1},ty.createElement(tg.Input,{appearance:"minimal",readOnly:l,id:"workspace",autoComplete:"off",placeholder:"your-company","aria-label":"Workspace URL",...r("workspace",{required:!0,minLength:2,maxLength:20,pattern:C}),onChange:e=>{c("workspace",e.target.value,{shouldValidate:!0}),A(e.target.value)}})),ty.createElement(tg.Box,{w:24},ty.createElement(tg.Input,{appearance:"minimal",disabled:!0,value:".stoplight.io"}))),ty.createElement(tg.Box,{mt:2},!b&&w&&ty.createElement(tg.Text,{color:"light"},"Create a Workspace URL using less than 20 characters with only numbers, lowercase letters, and dashes."),b&&ty.createElement(ok,{hint:"Must be less than 20 characters."}),!w&&ty.createElement(ok,{hint:"Must only contain numbers, lowercase letters, or dashes."}),u&&ty.createElement(ok,{hint:ty.createElement("span",{"data-test":"already-exists"},u," already exists. Please input a different URL.")}))))),ty.createElement(tg.Box,{w:"5/6"},ty.createElement(tg.Button,{loading:l,fullWidth:!0,disabled:!tm.KJ||!o||!i,appearance:"primary",type:"submit",onPress:()=>n(I)()},m?"Success! Redirecting...":"Next")))):ty.createElement(tA.Navigate,{to:"/welcome",replace:!0})}),ok=({hint:e})=>ty.createElement(tg.HStack,{color:"danger",alignItems:"baseline",mt:1},ty.createElement(tg.Box,{mr:2},ty.createElement(tg.Icon,{"data-test":"danger-triangle",icon:["fas","triangle-exclamation"]})),ty.createElement(tg.Text,null,e));class o_ extends Error{constructor(e){(0,th.isError)(e)?(super(e.message),this.stack=e.stack):super(String(e))}}let ox=(0,ak.ss)((0,ak.BZ)((0,ak.aZ)(function(){let{state:e,effects:t,actions:a}=(0,tB.U8)(),{isSuccess:r,error:n,mutate:o}=(0,tN.useCompleteStripeCheckoutSession)(e.auth.jwt),l=(0,tA.useParams)();return ty.useEffect(()=>{o({workspace_id:String(e.workspaces.currentWorkspaceId),session_id:l.id??""})},[o,e.workspaces.currentWorkspaceId,l.id]),ty.useEffect(()=>{(r||n)&&(n?t.reporter.error(new o_(n)):t.reporter.log({event:"stripe_checkout_completed_successfully"}),e.auth.isAccountInfoCollected?window.location.href=window.location.href.replace(/\/welcome\/billing\/success\/cs_.*$/,"/admin/billing"):window.location.href=window.location.href.replace(/\/billing\/success\/cs_.*$/,"/account"))},[a.reporter,r,n,t.reporter,e.auth.isAccountInfoCollected]),null}))),oI=(0,ak.ss)(function(){let{state:e}=(0,tB.U8)(),t=e.workspaces.currentWorkspaceId,{searchParams:a}=e.router,r=a.get("email"),n=a.get("slug");return(a.delete("email"),a.delete("slug"),t&&e.auth.isLoggedIn)?e.auth.isAccountInfoCollected?ty.createElement(tA.Navigate,{to:`/welcome/choose-your-plan?${a.toString()}`,replace:!0}):ty.createElement(tA.Navigate,{to:`/welcome/account?${a.toString()}`,replace:!0}):e.router.isWorkspaceDomain&&n?ty.createElement(tg.VStack,{spacing:6,p:6,maxW:"prose"},ty.createElement(rn,{title:"Confirm your email",description:"We just sent you a temporary confirmation code. Please check your email inbox."}),ty.createElement(oS,{workspaceSlug:n,email:r}),ty.createElement(n2,{currentStep:3,totalSteps:5})):ty.createElement(tA.Navigate,{to:"/welcome",replace:!0})});function oS({workspaceSlug:e}){let{actions:t,effects:a,state:r}=(0,tB.U8)(),{register:n,handleSubmit:o,formState:{isValid:l,isSubmitting:i,isDirty:s},setFocus:c}=(0,t5.mN)({mode:"onChange"}),[,u]=(0,tU.uXJ)();ty.useEffect(()=>{c("code")},[c]);let d=async({code:n})=>{if(i)return;let{error:o,data:l}=await u({code:n,workspaceSlug:e.toLowerCase()}),s=l?.redeemCodeCreateWorkspace.token;o||!s?(a.notifications.danger({message:o?.message}),t.reporter.error({error:Error(o?.message||"!token"),event:"email_verification_code_submitted",payload:{workspace_slug:e}})):(a.reporter.log({event:"workspace_created",payload:{workspace_slug:e,plan_query_param_set:r.router.searchParams.has("plan")}}),a.reporter.log({event:"email_verification_code_submitted",payload:{successful:!0}}),t.welcome.resolveVerifyCode({workspaceSlug:e,token:s}))};return ty.createElement("form",{onSubmit:o(d)},ty.createElement(tg.VStack,{spacing:6,align:"center"},ty.createElement(tg.VStack,{spacing:4,p:5,rounded:"lg",boxShadow:"md",border:!0,bg:"canvas-pure",w:"full"},ty.createElement(tg.VStack,{spacing:1},ty.createElement(rr,{htmlFor:"code"},"Verification Code"),ty.createElement(tg.Input,{readOnly:i,id:"code",autoFocus:!0,placeholder:"abcdef123456","aria-label":"Verification Code",...n("code",{required:!0,minLength:1})}))),ty.createElement(tg.Box,{w:"5/6"},ty.createElement(tg.Button,{loading:i,w:"full",fullWidth:!0,disabled:!tm.KJ||!l||!s,appearance:"primary",type:"submit",onPress:()=>o(d)()},"Continue"))))}let oj=(0,ak.ss)(function(){let{state:e,effects:t}=(0,tB.U8)(),a=new URLSearchParams((0,tA.useLocation)().search)??e.router.searchParams;(0,a6.e)("welcome/welcomeback");let r=e.workspaces.currentWorkspaceId;return e.router.workspaceSlug?r?ty.createElement(tA.Navigate,{to:"/",replace:!0}):ty.createElement(rl,null):ty.createElement(tg.VStack,{spacing:6,p:6,maxW:"prose"},ty.createElement(rn,{showLogo:!0,title:"Welcome Back! ",description:"You are already a member of Stoplight workspaces."}),ty.createElement(tg.VStack,{spacing:10,p:7,rounded:"lg",textAlign:"center",boxShadow:"md",border:!0,bg:"canvas-pure",w:"full"},ty.createElement(tg.Text,null,"We just sent you a list of workspaces associated with your email address. Please check your email inbox."),ty.createElement(tg.Text,null,"If you'd like to create another workspace,",ty.createElement(tk.Link,{onClick:()=>{t.reporter.log({event:"user_clicked_create_another_workspace",payload:{from:"welcome/welcomeback"}})},to:`/welcome/name?${a.toString()}`},ty.createElement("strong",null,"click here.")))))}),oC=(0,tS.withErrorBoundary)((0,ak.ss)(function(){let{state:e}=(0,tB.U8)(),t=(0,tA.useLocation)().pathname??e.router.pathname;return"/welcome/create"===t||"/welcome/find"===t?ty.createElement(tA.Navigate,{to:"/welcome",replace:!0}):ty.createElement(tg.Flex,{as:"div",align:"center",justify:"center",minH:"screen",style:{background:"#FBFCFD"}},ty.createElement(tA.Routes,null,ty.createElement(tA.Route,{path:"/",element:ty.createElement(om,null)}),ty.createElement(tA.Route,{path:"welcomeback",element:ty.createElement(oj,null)}),ty.createElement(tA.Route,{path:"name",element:ty.createElement(oE,null)}),ty.createElement(tA.Route,{path:"verify",element:ty.createElement(oI,null)}),ty.createElement(tA.Route,{path:"account",element:ty.createElement(n4,null)}),ty.createElement(tA.Route,{path:"choose-your-plan",element:ty.createElement(ol,null)}),ty.createElement(tA.Route,{path:"complete",element:ty.createElement(oi,null)}),ty.createElement(tA.Route,{path:"billing/success/:id",element:ty.createElement(ox,null)})))})),oP=ty.memo(function(){let{state:e,actions:t}=(0,tB.U8)(),{currentWorkspaceId:a}=e.workspaces,r=e.workspaces.iHaveRole(tU.l2p.Owner),n=e.workspaces.myWorkspace?.delete_at,{mutate:o}=(0,tN.useCancelDeleteWorkspace)(e.auth.jwt);return ty.useEffect(()=>{if(!a)return;let l="WorkspaceDelete-Banner";n?t.notifications.setBanner({htmlId:l,message:`Your workspace will be deleted on ${tQ(new Date(n))}.`,intent:"danger",icon:["far","circle-exclamation"],...r&&{primaryAction:{onClick:()=>o({workspaceId:a}),text:"Cancel"}}}):e.notifications.banner?.htmlId===l&&t.notifications.setBanner(void 0)},[r,n,e.notifications.banner?.htmlId,a]),null}),oA=()=>{let e="undefined"!=typeof window&&window?.location?.pathname;return ty.useEffect(()=>{e&&window.scrollTo(0,0)},[e]),null},oB=({isOpen:e,setIsOpen:t})=>{let{effects:a}=(0,tB.U8)(),{canI:r}=(0,tF.C$)(),n=(0,tA.useNavigate)(),o=r(tU.E4M.WorkspaceBilling),l=ty.createElement(tg.Flex,{justifyContent:"end"},ty.createElement(tg.Button,{appearance:"primary",onPress:()=>{a.router.navigate(n,"/admin/billing/plans"),a.reporter.log({event:"free_workspace_banner_modal_view_plans_clicked"}),t(!1)},style:{minWidth:"fit-content"}},"View Plans")),i=ty.createElement(tg.Callout,{appearance:"outline"},ty.createElement(tg.Flex,{direction:"col"},ty.createElement(tg.Text,{mb:1,fontWeight:"semibold"},"Introducing the new Basic Plan "),ty.createElement(tg.Box,null,"Stoplight is now offering a new Basic plan starting at $39 a month. You can visit your"," ",ty.createElement(tk.Link,{style:{color:"var(--color-link)"},to:"/admin/billing"},"Billing Tab")," ","for more details.")));return ty.createElement(ty.Fragment,null,ty.createElement(tg.Modal,{isOpen:e,onClose:()=>t(!1),footer:o?l:"",title:"Stoplight Free Workspaces"},ty.createElement(tg.VStack,{spacing:4,px:2},i,ty.createElement(tg.Text,null,"Stoplights mission is to enable high-quality API design accessible to businesses of all sizes and help them scale. Part of the challenge in building such an ecosystem is increasing peoples awareness that such an environment exists. We want our users to spend less time worrying about standing up awesome API documentation and more time investing in the success of their amazing APIs."),ty.createElement(tg.Text,null,"Keep in mind, you can remove the banner whenever you upgrade to a paid account."),ty.createElement(tg.VStack,null,ty.createElement(tg.Text,null,"Thank you!"),ty.createElement(tg.Text,null,"The Stoplight Team"))),ty.createElement(tg.Image,{src:"/static/images/robot-head-blue.png",alt:"Stoplight blue robot head peeking above footer",width:175,m:"auto",style:{marginTop:-35,marginBottom:-20}})))},oD=({isNonResponsiveBannerShowing:e})=>{let{effects:t}=(0,tB.U8)(),{isFlagEnabled:a}=(0,tF.aS)(),{isLoggedIn:r}=(0,tF.hD)(),{setUserProperties:n}=(0,tF.u6)(),[o,l]=ty.useState(!1),i=a("referral_banner_text_generate_and_host_api_documentation");ty.useEffect(()=>{t.reporter.log({event:"referral_banner_viewed"}),n({referral_banner_text_generate_and_host_api_documentation:i?"variant":"control"})},[t.reporter,i,n]);let s=ty.createElement(tg.Link,{className:"FreeWorkspaceBannerMessageLink ",href:"https://stoplight.io/welcome?utm_source=workspaces&utm_medium=referral&utm_campaign=free_workspace_banner",onClick:()=>t.reporter.log({event:"free_workspace_banner_hidden_link_clicked"}),target:"_blank",rel:"noopener noreferrer",style:{color:"white !important"}},i?"Like what you see? Create your own workspace to automatically generate and host API documentation.":"Like what you see? Create your own free Stoplight workspace to start documenting and designing APIs today.");return ty.createElement(ty.Fragment,null,r?ty.createElement(ty.Fragment,null,ty.createElement(oT,{icon:["fas","bell-on"],message:s,primaryAction:{text:"Learn more",onClick:()=>{l(!0),t.reporter.log({event:"free_workspace_banner_learn_more_clicked"})}},isNonResponsiveBannerShowing:e}),ty.createElement(oB,{isOpen:o,setIsOpen:l})):ty.createElement(oT,{message:s,primaryAction:{text:"Create a Workspace",onClick:()=>{window.open("https://stoplight.io/welcome?utm_source=workspaces&utm_medium=referral&utm_campaign=free_workspace_banner","_blank","noopener"),t.reporter.log({event:"free_workspace_banner_create_ws_clicked"})}},isNonResponsiveBannerShowing:e}))},oT=({message:e,primaryAction:t,isNonResponsiveBannerShowing:a})=>{let{effects:r}=(0,tB.U8)(),{isResponsiveLayoutEnabled:n}=(0,a_.s)();return ty.createElement(tg.Box,{"data-test":"free-workspace-referral-banner"},ty.createElement(tx.Banner,{icon:["fas","bell-on"],...!n&&{leftElement:ty.createElement(tg.Link,{href:"https://stoplight.io/?utm_source=workspaces&utm_medium=referral&utm_campaign=free_workspace_banner",target:"_blank",rel:"noopener noreferrer",onClick:()=>r.reporter.log({event:"free_workspace_banner_logo_clicked"})},ty.createElement(tg.Image,{width:150,src:"/static/images/logo-blue-white.png",alt:"Stoplight logo"}))},intent:"primary",backgroundColor:"canvas-dark",message:e,primaryAction:t,isNonResponsiveBannerShowing:a}))},oF=()=>{let{actions:e}=(0,tB.U8)();return ty.createElement(tx.Banner,{icon:["fal","circle-info"],intent:"warning",message:"This page is not mobile responsive.",primaryAction:{text:"Dismiss",onClick:()=>{e.notifications.setResponsiveBannerDismissed(!0)},dataTest:"button-dismiss"},backgroundColor:"canvas-dark"})},o$=()=>{let{state:e}=(0,tB.U8)(),t=e.workspaces.currentWorkspace?.lockReason,a=!!e.workspaces.currentWorkspace?.locked,r=new Date(e.workspaces.currentWorkspace?.lockAt),n=r.toDateString(),o=!a&&!!r&&r.getTime()>Date.now();return{isWorkspaceLocked:a,workspaceLockDate:n,isLockPending:o,lockReason:t}},oN=({isNonResponsiveBannerShowing:e,lockReason:t})=>{let{effects:a}=(0,tB.U8)(),{workspaceLockDate:r}=o$();ty.useEffect(()=>{a.reporter.log({event:"workspace_locked_banner_viewed"})},[a.reporter]);let n=`${(()=>{switch(t){case"failed_payment":return"The payment method associated with this workspace has failed.";case"overusage":return"This workspace is on the Free plan.";default:return""}})()} All members other than the oldest owner will lose access to this workspace on ${r}.`,o=ty.createElement(tg.Flex,{align:"center",ml:{default:10,md:0}},ty.createElement(tg.Image,{mr:2,width:"25px",src:"/static/images/dezi-worried.png",alt:"worried dezi emoji"}),ty.createElement(tg.Box,{className:"Banner--inner-text"},n));return ty.createElement(tg.Box,{"data-test":"workspace-locked-banner"},ty.createElement(tx.Banner,{message:o,primaryAction:{text:"Learn more",onClick:()=>{"failed_payment"===t?window.open(ab.xz.workspace_locking_failed_payment,"_blank","noopener"):window.open(ab.xz.workspace_locking_overusage,"_blank","noopener"),a.reporter.log({event:"workspace_locked_banner_learn_more_clicked",payload:{lock_reason:t}})}},intent:"danger",isNonResponsiveBannerShowing:e}))};var oU=a(21613);class oM{static observer=null;static initialize(){this.observer&&this.disconnect();let e=".sl-bg-transparent",t="sl-flex sl-overflow-y-auto sl-justify-center sl-items-center sl-fixed sl-inset-0",a=".bp3-toast";this.observer=new MutationObserver(r=>{r.forEach(r=>{r.addedNodes.forEach(r=>{if(r instanceof HTMLElement&&r.matches(e)){let e=r.querySelector(`.${t.split(" ").join(".")}`);e instanceof HTMLElement&&(console.log("Dialog added. Adjusting z-index."),e.style.zIndex="20",document.querySelectorAll(a).forEach(e=>{e instanceof HTMLElement&&(e.style.zIndex="9999")}))}}),r.removedNodes.forEach(r=>{if(r instanceof HTMLElement&&r.matches(e)){let e=r.querySelector(`.${t.split(" ").join(".")}`);e instanceof HTMLElement&&(console.log("Dialog removed. Cleaning up."),e.style.zIndex=""),document.querySelectorAll(a).forEach(e=>{e instanceof HTMLElement&&(e.style.zIndex="")})}})})}),this.observer.observe(document.body,{childList:!0,subtree:!0})}static disconnect(){this.observer&&(this.observer.disconnect(),this.observer=null)}}let oR=(e,t)=>{let a=document.querySelector(`.${e}`);if(a){let e=window.getComputedStyle(a).zIndex;return a.style.zIndex=t.toString(),()=>{a.style.zIndex=e}}};var oW=a(52766);let oL="https://support.stoplight.io/s/",oG=({onStartProvisioningProcess:e})=>{let t=(0,tB.A1)(),a=(0,tB.px)(),r=t.billing.currentProduct?.name,n=t.workspaces.currentWorkspace?.id,o=t.auth.currentUser?.id;if(!(t.auth.currentUser&&t.billing.currentProduct?.name!=="free")||!r||!n||!o||"free"===r)return null;let l=async()=>{a.reporter.log({event:"contact_support_clicked",payload:{workspace_plan:r}}),e()};return ty.createElement(ty.Fragment,null,ty.createElement(tj.MenuItem,{tagName:"span",text:"Contact Support",icon:ty.createElement(tj.FAIcon,{icon:["fal","comment-smile"],className:"fa-fw"}),"data-test":"contact-support",onClick:l}))},oO=()=>{let e=(0,tB.px)();return ty.createElement(tj.MenuItem,{href:oL,text:"Help",icon:ty.createElement(tj.FAIcon,{icon:["fal","info-circle"],className:"fa-fw"}),"data-test":"support-help",onClick:t=>{t.stopPropagation(),e.reporter.log({event:"user_menu_help_clicked"})},target:"_blank"})},oz=({isOpen:e,onClose:t})=>ty.createElement(tg.Modal,{isOpen:e,onClose:t},ty.createElement(tg.Box,{p:8},ty.createElement(tg.VStack,{spacing:4},ty.createElement(tg.Heading,{size:2,textTransform:"capitalize"},"Thank You for Reaching Out"),ty.createElement(tg.Image,{src:"/static/images/customerSupportImage.png"}),ty.createElement(tg.Paragraph,{style:{maxWidth:600},mx:"auto"},"If you dont have a support account already,"," ",ty.createElement("a",{style:{color:"#0b6fcc"},href:"https://support.stoplight.io/s/login/SelfRegister",rel:"noopener noreferrer"},"click here")," ","to sign up",ty.createElement("br",null),"If you already have a support account,"," ",ty.createElement("a",{style:{color:"#0b6fcc"},href:oL,rel:"noopener noreferrer"},"click here"," "),"to access the support portal and login.")))),oq=()=>{let e=(0,tA.useLocation)().pathname.startsWith("/account/"),[t,a]=ty.useState(e?"account":"default");return ty.useEffect(()=>{e?a("account"):a("default")},[e]),{pane:t,setPane:a}},oV=ty.createContext(void 0);function oH({children:e}){let{pane:t,setPane:a}=oq();return ty.createElement(oV.Provider,{value:{pane:t,setPane:a}},e)}let oQ=()=>{let e=ty.useContext(oV);if(void 0===e)throw Error("No Sidebar Context: must be used with a SidebarProvider");return e};var oK=a(18767);let oJ=()=>{let{actions:e,effects:t,state:a}=(0,tB.U8)(),[{fetching:r},n]=(0,tU.V9L)(),[{data:o}]=(0,tU.l4F)({variables:{offset:0,limit:500,workspaceId:Number(a.workspaces.currentWorkspaceId)}}),l=(0,tv.useQueryClient)();return[{fetching:r},async a=>{if(!a.length)return;let r=[],i=[];a.forEach(e=>{if(!e.email.length)return;o?.workspaceInvitations.map(t=>{t.email.toLowerCase()===e.email.toLowerCase()&&i.push(t)});let t={email:e.email,roleName:e.roleName||tU.l2p.Maker,workspaceId:e.workspace_id};e.project_id&&(t.workspaceInvitationProjects={data:[{project_id:e.project_id,roleName:e.projectRoleName}],on_conflict:{constraint:tU.vtJ.WorkspaceInvitationProjectsWorkspaceInvitationIdProjectI,update_columns:[]}}),r.push(t)});let{data:s,error:c}=await n({workspaceInvitations:r});if(c){t.notifications.danger({message:`Error sending one or more invites: ${c.message}`});let n={invite_count:r.length,invites:a,newWorkspaceInvitations:r};return e.reporter.error({error:c,event:"workspace_invite_sent",payload:n}),c}let u=s?.createWorkspaceInvitations?.returning||[],d=u.length-(0,th.uniqBy)(i,e=>e.email).length;if(u.length&&d>0){t.notifications.success({message:"Invites sent"});for(let e=0;e<u.length;e++)t.reporter.log({event:"workspace_invite_sent",payload:{invite_count:u.length,net_new_invite_count:d}})}e.members.touchQueries(),l.invalidateQueries(tN.workspaceKeys.allState())}]};function oY({isDisabled:e,selectedRole:t,onRoleSelect:a}){let r=(0,tF.C$)(),{hasFeature:n}=(0,tF._m)(),{showFeatureDialog:o}=(0,tF.L3)(),l=n(tU.BAf.Guests),i=[...r.myWorkspace?.workspace_roles??[]].sort(oX).map(e=>({value:e.role,label:o0[e.role],description:o1[e.role],isDisabled:!e.canAdd,meta:l||e.role!==tU.l2p.Guest?void 0:ty.createElement(n_.y,{feature:tU.BAf.Guests,className:"ml-4"})}));return e?ty.createElement(tg.Box,{px:3,textTransform:"capitalize"},o0[t]):ty.createElement(tg.Box,{display:"inline-block"},ty.createElement(tg.Select,{"aria-label":"Role Selector",value:t,options:i,onChange:e=>{if(e===tU.l2p.Guest&&!l){o(tU.BAf.Guests);return}a&&a(e)}}))}function oX(e,t){return oZ[e.role]-oZ[t.role]}let oZ={[tU.l2p.Owner]:0,[tU.l2p.Billing]:1,[tU.l2p.Admin]:2,[tU.l2p.Maker]:3,[tU.l2p.Viewer]:4,[tU.l2p.Guest]:5},o0={[tU.l2p.Owner]:"Owner",[tU.l2p.Billing]:"Billing Admin",[tU.l2p.Admin]:"Admin",[tU.l2p.Maker]:"Maker",[tU.l2p.Viewer]:"Viewer",[tU.l2p.Guest]:"Guest"},o1={[tU.l2p.Owner]:"Admin permissions + can manage billing",[tU.l2p.Admin]:"Maker permissions + can manage all projects and workspace members",[tU.l2p.Maker]:"Viewer permissions + can use Studio and add new projects",[tU.l2p.Viewer]:"Guest permissions + can view all internal projects",[tU.l2p.Guest]:"Can be granted direct access to projects in this workspace",[tU.l2p.Billing]:"Can manage billing and view members"},o2=()=>{let{state:e}=(0,tB.U8)(),{data:t}=(0,tN.useGetBillingAccount)(e.auth.jwt,{workspace_id:e.workspaces.myWorkspace.id}),{getFeatureMaxUsage:a}=e.features,r=t&&t.included_members+t.paid_members,n=a(tU.BAf.Members),o=n===1/0&&0!==r;return o&&(n=r),{billingLimit:n,isSoftCap:o}},o4={current:0,billingLimit:0},o3=(e,t,a)=>{let{state:r}=(0,tB.U8)(),[n,o]=ty.useState(o4),{getFeatureUsage:l,getFeatureMaxUsage:i}=r.features,s=o2(),c=ty.useCallback(()=>{if(a===tU.BAf.Members){let t=l(a);e.length&&(t+=e.length),o({current:t||0,billingLimit:s.billingLimit})}else{let t=l(a);e.length&&(t+=e.length),o({current:t||0,billingLimit:i(a)})}},[a,e.length,i,l,s.billingLimit]);return ty.useEffect(()=>{t&&c()},[c,t,e.length]),{seatsUsageData:n}},o5=(e,t)=>e.map(e=>rA(e)&&t.has(e.data)?{type:"invalid",data:e.data,description:"This e-mail has pending invitation or already a member"}:e),o8=({workspaceId:e,onInvitesSent:t,isOpen:a,setIsOpen:r,renderTrigger:n,onOpen:o})=>ty.createElement(ty.Fragment,null,n&&n({attributes:{onClick:()=>{r(!0),o&&o()}}}),a&&ty.createElement(o6,{workspaceId:e,onClose:()=>{r(!1)},onInvitesSent:t}));function o6({workspaceId:e,onInvitesSent:t,onClose:a}){let{state:r}=(0,tB.U8)(),{myRoles:n,canI:o}=(0,tF.C$)(),[l,i]=ty.useState([]),s=n[0],c=o(tU.E4M.WorkspaceMembersPromote),u=c?tU.l2p.Maker:s,[d,m]=ty.useState(u),[{fetching:p},g]=oJ(),{execute:h}=r0(e),{refetch:f,feature:b,hasExceededLimit:y,existingEmails:w,additionalUsage:E,message:v}=h(d,l),k=o5(l,w),{seatsUsageData:_}=o3(k,d,b),x=r.billing.currentProduct?.id===tR.WR,I=ty.createElement(tg.Flex,{justifyContent:"between"},ty.createElement(tg.Box,{display:"flex",alignItems:"center"},y&&ty.createElement(ty.Fragment,null,x?ty.createElement(tg.Box,{display:"flex",alignItems:"center"},"Please contact your account manager to update the member limit."):ty.createElement(n_.y,{className:"mr-5",feature:b,suffix:"Required",additionalUsage:E,large:!0}))),ty.createElement(rZ,{selectedOptions:k},r=>ty.createElement("div",null,ty.createElement(tg.Button,{loading:!1,appearance:"primary",onPress:()=>{g(l.filter(rA).map(t=>({email:t.data,roleName:d,workspace_id:e}))).then(()=>{i([]),m(u),f(),a(),t&&t()})},disabled:p||!r||!k.length||y,style:{minWidth:"fit-content"}},"Send Invites"))));return ty.createElement(tg.Modal,{isOpen:!0,onClose:a,footer:I,title:"Add Workspace Members",zIndex:50},ty.createElement(o7,{canPromote:c}),ty.createElement(tg.Box,{mb:6},ty.createElement(r4,{allowInviteEmails:!0,onChange:e=>i((e||[]).slice()),selectedValues:k,members:[],isLoading:!1,placehodler:"Enter an email",noOptionsMessage:()=>"Type a valid email",suffix:ty.createElement(oY,{onRoleSelect:m,selectedRole:d})})),y&&ty.createElement(tx.BasicProgressBar,{label:`${_.current} / ${_.billingLimit} ${"editors"===b?"Makers+":(0,th.capitalize)(b)}`,hintText:v,value:_.current,maxValue:_.billingLimit}))}function o7({canPromote:e}){return ty.createElement(tg.Box,{mb:6},"Invite team members to collaborate on API designs, view documentation, and access mock servers."," ",e?"Select the members role from the dropdown to set their level of access. ":"The member will be invited with the same level of access as you. If they need more access, a workspace administrator will be able to change their role. ",ty.createElement(tg.Link,{href:ab.xz.workspace_invite,rel:"noreferrer",target:"_blank"},"Learn More"))}let o9=({to:e,target:t,children:a,preventDefault:r})=>{let{effects:{router:{navigate:n}}}=(0,tB.U8)(),o=(0,tA.useNavigate)(),l=ty.useCallback(t=>{r&&t.preventDefault(),n(o,e)},[e,n,r,o]);return ty.createElement("a",{href:e,target:t,onClick:l,style:{color:"inherit",textDecoration:"inherit"}},a)},le=({children:e})=>{let{state:t}=(0,tB.U8)();return ty.createElement(ty.Fragment,null,ty.createElement(la,null),t.metadata.dataBootstrapComplete?ty.createElement(ty.Fragment,null,e,ty.createElement(ll,null),ty.createElement(li,null)):ty.createElement(tg.Box,{flexGrow:!0,color:"muted",p:5},ty.createElement(oK.P,null,"Loading...")),!t.workspaces.currentWorkspace?.hidePoweredBy&&ty.createElement(ld,null))},lt=({children:e})=>{let{state:t}=(0,tB.U8)();return ty.createElement(ty.Fragment,null,t.metadata.dataBootstrapComplete?ty.createElement(ty.Fragment,null,e,ty.createElement(lu,null)):ty.createElement(tg.Box,{flexGrow:!0,color:"muted",p:5},ty.createElement(oK.P,null,"Loading...")),!t.workspaces.currentWorkspace?.hidePoweredBy&&ty.createElement(lm,null))},la=()=>{let{state:e}=(0,tB.U8)(),t=e.workspaces.canI(tU.E4M.WorkspaceProjectsCreate);return ty.createElement(tg.HStack,{className:"SiteSidebarTopNav px-6",pos:"relative",cursor:"pointer"},ty.createElement(lr,null),t?ty.createElement(ln,null):null)},lr=()=>{let{state:e}=(0,tB.U8)(),t=e.workspaces.currentWorkspace,a=t?.name,r=t?.logoUrl;return ty.createElement(tg.Flex,{as:tk.Link,className:"h-TopNav text-gray-7 no-underline",to:"/",flex:1,alignItems:"center"},ty.createElement("div",{"data-test":"workspace-header-link"},r?ty.createElement(lo,{logoUrl:r,alt:a||"Logo",className:"-ml-px mr-4"}):ty.createElement("div",{className:"text-xl tracking-wider font-medium mr-4 text-on-sidebar"},ty.createElement("div",{className:"font-medium"},a))))},ln=()=>{let{effects:e}=(0,tB.U8)();return ty.createElement(tg.Flex,{as:tk.Link,className:"bg-accent no-underline text-on-accent hover:text-on-accent hover:shadow hover:opacity-75",to:"/add/projects","aria-label":"Add Projects","data-test":"add-projects",alignItems:"center",justifyContent:"center",rounded:"full",cursor:"pointer",h:7,w:7,onClick:()=>e.reporter.log({event:"button_clicked",payload:{name:"Plus Button",location:"workspace_sidebar"}})},ty.createElement(tj.FAIcon,{icon:["fal","plus"]}))},lo=({logoUrl:e,alt:t,className:a})=>ty.createElement("div",{className:t3()(a,"h-10 flex-shrink-0"),style:{maxWidth:125}},ty.createElement("img",{className:"h-full object-contain",src:e,alt:t,"data-test":"workspace-logo"})),ll=()=>{let{state:e,actions:t,effects:a}=(0,tB.U8)(),[r,n]=ty.useState(!1),o=e.workspaces.canI(tU.E4M.WorkspaceMembersInvite);return ty.createElement(ty.Fragment,null,o?ty.createElement(o8,{onOpen:()=>{a.reporter.log({event:"sidebar_invite_button_clicked",payload:{path:`${e.router?.pathname}`}})},className:"z-10",isOpen:r,setIsOpen:n,onInvitesSent:()=>{t.members.touchQueries()},workspaceId:e.workspaces?.currentWorkspace?.id,renderTrigger:({attributes:e})=>ty.createElement("a",{className:"SiteSidebarLink block flex items-center px-6 py-3 reset border-t",...e},ty.createElement(tj.FAIcon,{icon:["fad","user-plus"],className:"mr-3 fa-fw"}),"Invite to Workspace")}):null)},li=()=>{let{state:e,actions:t,effects:a}=(0,tB.U8)(),r=e.auth.currentUser,n=r?.username,o=r?.avatarUrl,l=r?.emails[0].email,{isOpen:i,open:s,close:c}=(0,tg.useModalState)(),u=e.workspaces.canI(tU.E4M.WorkspaceProjectsView),d="SiteSidebarLink block border-t flex items-center px-6 py-3 reset";return r?ty.createElement(ty.Fragment,null,ty.createElement(oz,{isOpen:i,onClose:c}),ty.createElement(tj.Popover,{position:tj.Position.RIGHT_BOTTOM,boundary:"viewport",onOpening:()=>a.reporter.log({event:"user_menu_opened"}),targetClassName:"w-full cursor-pointer",targetProps:{"data-test":"account-menu"},captureDismiss:!0,content:ty.createElement(tj.Menu,{id:"topnav-popover-menu",className:t3()(tj.Classes.POPOVER_DISMISS,"w-80")},ty.createElement("div",{className:"flex ml-2 mb-3 mt-2 items-center"},o&&ty.createElement(tg.Box,null,ty.createElement(tg.Avatar,{src:o,name:n,mr:2,size:"lg"})),ty.createElement("div",{className:"overflow-hidden"},ty.createElement("div",{className:"font-bold whitespace-no-wrap truncate"},n),ty.createElement("div",{className:"opacity-75 text-sm whitespace-no-wrap truncate"},l))),ty.createElement(o9,{to:"/account"},ty.createElement(tj.MenuItem,{tagName:"span",text:"Account Settings",icon:ty.createElement(tj.FAIcon,{icon:["fal","cog"],className:"fa-fw"}),"data-test":"account-settings"})),ty.createElement(tj.MenuItem,{href:`${ab.wA}?utm_source=stoplight&utm_medium=workspace&utm_campaign=product_docs`,text:"Product Docs",icon:ty.createElement(tj.FAIcon,{icon:["fal","book-open"],className:"fa-fw"}),"data-test":"account-dropdown-product-docs",onClick:e=>e.stopPropagation(),target:"_blank"}),ty.createElement(tj.MenuItem,{href:"https://blog.stoplight.io/?utm_source=stoplight&utm_medium=referral&utm_campaign=sidebar_user_menu",text:"Stoplight Blog",icon:ty.createElement(tj.FAIcon,{icon:["fal","newspaper"],className:"fa-fw"}),"data-test":"account-dropdown-api-design-blog",onClick:e=>{a.reporter.log({event:"stoplight_blog_clicked",payload:{location:"user_menu"}}),e.stopPropagation()},target:"_blank"}),ty.createElement(oO,null),ty.createElement(oG,{onStartProvisioningProcess:s}),ty.createElement(tj.MenuItem,{href:"https://docs.stoplight.io/docs/whats-new/?utm_source=stoplight&utm_medium=referral&utm_campaign=sidebar_user_menu",text:"Release Notes",icon:ty.createElement(tj.FAIcon,{icon:["fal","sparkles"],className:"fa-fw"}),"data-test":"account-dropdown-release-notes",onClick:e=>{a.reporter.log({event:"user_menu_release_notes_clicked"}),e.stopPropagation()},target:"_blank"}),u&&ty.createElement(o9,{to:"/roadmap"},ty.createElement(tj.MenuItem,{tagName:"span",text:"Roadmap",icon:ty.createElement(tj.FAIcon,{icon:["fal","map-marked-alt"],className:"fa-fw"}),"data-test":"roadmap"})),ty.createElement(tj.MenuDivider,null),ty.createElement(tj.MenuItem,{id:"logout-btn",text:"Logout",icon:ty.createElement(tj.FAIcon,{icon:["fal","power-off"],className:"fa-fw"}),onClick:()=>{t.auth.logout(!1)}}))},ty.createElement("div",{className:d},ty.createElement(tj.FAIcon,{icon:["fad","user-alt"],className:"mr-3 fa-fw"}),ty.createElement("div",{className:"flex-1 logged-in","data-test":"account-username"},n),ty.createElement("div",{className:"opacity-50 mt-px flex-shrink-0"},ty.createElement(tj.FAIcon,{icon:["far","chevron-right"]}))))):e.router.isCustomDomain&&e.workspaces.currentWorkspace?.hideSignIn?null:ty.createElement(tk.Link,{to:"/auth",className:d},ty.createElement(tj.FAIcon,{icon:["fad","user-alt"],className:"mr-3 fa-fw"}),ty.createElement("div",{className:"flex-1 logged-out","data-test":"account-username"},"Sign in"),ty.createElement("div",{className:"opacity-50 mt-px flex-shrink-0"},ty.createElement(tj.FAIcon,{icon:["far","chevron-right"]})))},ls=({title:e,className:t,icon:a,iconRight:r,onClick:n,keepSidebarOpen:o,...l})=>{let{setResponsiveSidebarOpen:i}=(0,tF.L3)();return ty.createElement(tg.Box,{as:"a",className:t3()("no-underline",t),onClick:()=>{o||i(!1),n()},color:{default:"body",hover:"primary"},textTransform:"user-alt"===a?void 0:"capitalize",py:2,px:3,...l},ty.createElement(tg.HStack,{spacing:1},a?ty.createElement(tg.Box,{w:"sm"},ty.createElement(tg.Icon,{icon:a})):null,ty.createElement(tg.Box,{flexGrow:!0},e),r?ty.createElement(tg.Box,{w:"sm"},ty.createElement(tg.Icon,{icon:r})):null))},lc=()=>{let{canI:e}=(0,tF.C$)(),{pathname:t}=(0,tF.ks)(),{log:a}=(0,tF.pw)(),{setResponsiveSidebarOpen:r,setInviteMembersDialogOpen:n}=(0,tF.L3)(),o=e(tU.E4M.WorkspaceMembersInvite),l=()=>{a({event:"sidebar_invite_button_clicked",payload:{path:`${t}`}}),n(!0),r(!1)};return ty.createElement(ty.Fragment,null,o?ty.createElement(ls,{title:"Invite to Workspace",icon:["fal","user-plus"],onClick:()=>l()}):null)},lu=()=>{let{state:e,actions:t}=(0,tB.U8)(),a=(0,tA.useNavigate)(),r=e.auth.currentUser,n=r?.username,{setPane:o}=oQ();return r?ty.createElement(tg.VStack,{divider:!0,borderT:!0,borderB:!0},ty.createElement(lc,null),ty.createElement(ls,{"data-test":"account-username",className:"logged-in",keepSidebarOpen:!0,title:n,icon:["fal","user-alt"],iconRight:["fal","chevron-right"],onClick:()=>{o("account")}}),ty.createElement(ls,{title:"Logout",icon:["fal","power-off"],onClick:()=>t.auth.logout(!1)})):e.router.isCustomDomain&&e.workspaces.currentWorkspace?.hideSignIn?null:ty.createElement(tg.VStack,{divider:!0,borderT:!0,borderB:!0},ty.createElement(ls,{"data-test":"account-username",className:"logged-out",keepSidebarOpen:!0,title:"Sign In",onClick:()=>a("/auth")}))},ld=()=>{let{state:e}=(0,tB.U8)(),t=(0,tA.useLocation)(),a=e.workspaces.currentWorkspace?.slug,r=t.pathname??e.router.pathname;return ty.createElement("a",{"data-test":"powered-by-stoplight-branding",className:"SiteSidebarLink block border-t flex items-center px-6 py-3 reset",href:`https://stoplight.io/?utm_source=workspaces&utm_medium=${a}&utm_campaign=powered_by&utm_content=${r}`,target:"_blank",rel:"noopener noreferrer"},ty.createElement(tj.FAIcon,{icon:["fad","bolt"],className:"mr-3 fa-fw",style:{color:"rgb(243, 156, 18)"}}),ty.createElement("div",null,"powered by",ty.createElement("strong",null,"Stoplight")))},lm=()=>{let{state:e}=(0,tB.U8)(),t=(0,tA.useLocation)(),a=e.workspaces.currentWorkspace?.slug,r=t.pathname??e.router.pathname;return ty.createElement(ls,{"data-test":"powered-by-stoplight-branding",title:ty.createElement(ty.Fragment,null,"powered by ",ty.createElement("strong",null,"Stoplight")),icon:["fal","bolt"],onClick:()=>window.open(`https://stoplight.io/?utm_source=workspaces&utm_medium=${a}&utm_campaign=powered_by&utm_content=${r}`,"_blank","noopener, noreferrer")})},lp=ty.forwardRef(function({name:e,label:t,rightElement:a,helperText:r,key:n,textarea:o=!1,showRequiredText:l=!0,placeholder:i,...s},c){let{control:u,formState:{errors:d,isSubmitting:m},defaultValues:p={}}=(0,t5.xW)(),g=(0,th.get)(d,e),h=!!(0,th.get)(u._fields,`${e}._f.required`,!1),f=l&&h&&!g?.message?"Required":void 0,b=(0,th.get)(u._defaultValues,`${e}`,p[e]),y=`input-field-${e}`,w=`input-label-${e}`,E=f?i?`${i} (${f})`:f:i;return ty.createElement(tg.VStack,{spacing:1},t&&ty.createElement(rr,{id:w,htmlFor:y},t),ty.createElement(tg.Flex,{border:!!a||0},ty.createElement(tg.Box,{flex:1},o?ty.createElement(tg.Textarea,{h:"full",name:e,"data-test":`textarea-field-${e}`,intent:g?"danger":"default",readOnly:m,defaultValue:b||"",...s,ref:c,resize:"none",appearance:a?"minimal":"default"}):ty.createElement(tg.Input,{h:"full",id:y,appearance:a?"minimal":"default",name:e,"data-test":y,"aria-labelledby":t?w:void 0,intent:g?"danger":"default",readOnly:m,defaultValue:b||"",autoComplete:"off",placeholder:E,...s,ref:c})),ty.createElement(tg.Box,{ml:"auto"},a)),r&&!g?.message&&ty.createElement(tg.Text,{color:"muted",size:"sm"},r),g&&ty.createElement(aa,{name:e,errors:d}))}),lg="cabinet-filing",lh=e=>e||lg,lf="#7F8197",lb=e=>e||lf,ly=()=>(0,th.sample)(lE)||lf,lw=()=>(0,th.sample)(lv)||lg,lE=["#43aaec","#f5533f","#c9135f","#6672e6","#2bc137","#bc48cb","#2ea44e","#7d5fff","#17c0eb","#3ae374","#F97F51","#58B19F","#6D214F","#FC427B","#EAB543","#2C3A47","#B33771","#3742fa"],lv=["unicorn","university","book","book-alt","book-open","server","magic","pencil-ruler","paint-brush","graduation-cap","lightbulb-on","book-reader","chess-rook","satellite-dish","code","clipboard-list-check","robot","user-graduate","globe-americas","alicorn","exchange","right-left"],lk={public:"globe-americas",internal:"unlock"},l_=()=>{let{register:e,setValue:t}=(0,t5.xW)(),a=["public","internal"],r=a.map(e=>({label:(0,th.capitalize)(e),value:e})),n=a.find(e=>"internal"===e)||"",[o,l]=ty.useState(n);t("visibility",o);let i=lk[o];return ty.createElement(tg.Box,null,ty.createElement(lp,{label:"Group Name",autoFocus:!0,rightElement:ty.createElement(tg.Flex,{alignItems:"center"},ty.createElement(tg.Select,{appearance:"minimal",icon:i,"aria-label":"visibility",defaultValue:n,options:r,onChange:e=>{l(e),t("visibility",o,{shouldDirty:!0})}})),...e("name",{required:!0,minLength:1,maxLength:{value:100,message:"Must be no more than 100 characters"}})}),ty.createElement(tg.Box,{mt:8},ty.createElement(lp,{textarea:!0,label:"Description","aria-label":"Description",...e("description",{required:!1,maxLength:{value:300,message:"Must be no more than 300 characters"}})})))};function lx(){return{...(0,tB.A1)().table}}function lI(){return{...(0,tB.w0)().table}}var lS=a(15936),lj=a(89987);!function(e){e.Group="group",e.Project="project"}(n||(n={}));let lC=e=>e.map(e=>lP(e)),lP=e=>"group"===e.type?lB(e):lA(e.data);function lA(e,t){let a=e.default_branch,r=[{key:"Articles",value:a?.node_counts.article_count||0,presentation:{icon:rw.bS.article,color:rw.wL.article}},{key:"Model",value:a?.node_counts.schema_count||0,presentation:{icon:rw.bS.model,color:rw.wL.model}},{key:"API",value:a?.node_counts.api_count||0,presentation:{icon:rw.bS.api,color:rw.wL.api}},{key:"Endpoints",value:a?.node_counts.operation_count||0,presentation:{icon:rw.bS.endpoint,color:rw.wL.endpoint}}];return{...e,itemType:"project",nodesTotal:r.reduce((e,t)=>e+(Number.isInteger(t.value)&&t.value||0),0),nodes:r,projectOwnerName:e.owner.display_name,group:t,flavor:e.flavor}}let lB=e=>{let t={...e.data,itemType:"group",updatedAt:e.data.updated_at,projectOwnerName:""};return e.children&&(t.subRows=e.children.map(t=>lA(t,e.data))),t};function lD(){let e=(0,tA.useNavigate)(),{setIsOpen:t,setWorkspaceItem:a}=(0,lS.n)(),{clearFilters:r,setScrollTo:o}=lI();async function l(){await e("/admin/projects",{replace:!0})}return{navigateToProjectsScreen:l,showGroupDetails:async function(e){await l();let i={name:lj.sJ.projectsTable};r({...i}),o({...i,rowId:e}),a({itemType:n.Group,id:e}),t(!0)}}}function lT({additionalUsage:e,feature:t,label:a,...r}){let{featureRequiresUpgrade:n}=(0,tF._m)(),{state:o,actions:l}=(0,tB.U8)();if(!n(t,e))return ty.createElement(tg.Button,{...r,"data-test":"real-button"},a);let i=o.billing.getLowestPaidProductForFeature(t);return i?ty.createElement(tg.Button,{...r,icon:ty.createElement(tj.FAIcon,{icon:"bolt"}),border:0,style:tm.CE[i.name],onPress:()=>l.ui.showFeatureDialog(t),className:t3()("cursor-pointer hover:opacity-75"),"data-test":"upsell-button"},a):null}let lF=({appearance:e})=>{let{state:t,effects:a,actions:r}=(0,tB.U8)(),{openFormDialog:n}=(0,tx.useFormDialog)(),{showGroupDetails:o}=lD(),l=t.workspaces.canI(tU.E4M.WorkspaceGroupsCreate),i=(0,tN.useCreateGroup)(t.auth.jwt);return ty.createElement(lT,{label:"New Group",feature:tU.BAf.Groups,additionalUsage:1,appearance:e,disabled:!l,onPress:()=>n(l_,{title:"Create New Group",onSave:async({name:e,description:n,visibility:l})=>{let s=(0,t8.encodeID)("wk",t.workspaces.currentWorkspaceId||0);try{let{id:t}=await i.mutateAsync({workspaceId:s,name:e,description:n,visibility:l,icon:lw(),iconColor:ly()});r.groups.touchQueries(),a.reporter.log({event:"workspace_create_group",payload:{location:"groups"}}),a.notifications.success({message:"Group Created Successfully!"}),o(t)}catch(e){if(e.type&&"CONFLICT"===e.type)throw new tx.FormFieldError("name",e.message,e.type);a.notifications.danger({message:`${e.message}`})}}})})},l$=()=>{let{register:e}=(0,t5.xW)(),{getFeatureMaxUsage:t,getFeatureUsage:a}=(0,tF._m)(),r=t(tU.BAf.Teams),n=a(tU.BAf.Teams)||0;return ty.createElement(tg.Box,null,ty.createElement(tg.VStack,{spacing:8},ty.createElement(lp,{"data-test":"team-name-input",label:"Team Name",autoFocus:!0,borderR:0,...e("name",{required:!0,minLength:1,maxLength:{value:100,message:"Must be no more than 100 characters"}})}),ty.createElement(lp,{"data-test":"team-description-input",textarea:!0,label:"Description","aria-label":"Description",...e("description",{required:!1,maxLength:{value:300,message:"Must be no more than 300 characters"}})}),r===1/0?ty.createElement(tg.Callout,{appearance:"outline"},"You currently have unlimited teams available"):ty.createElement(tg.Box,{fontSize:"lg"},ty.createElement(tx.BasicProgressBar,{label:`${n} / ${r} Teams`,hintText:`You can create ${r-n} more ${tV()("team",r-n)}.`,value:n,maxValue:r}))))};function lN(){return{...(0,tB.w0)().teamDetails}}function lU(){return{...(0,tB.A1)().teamDetails}}let lM=({appearance:e})=>{let{jwt:t}=(0,tF.hD)(),{currentWorkspaceId:a,canI:r}=(0,tF.C$)(),{success:n,danger:o}=(0,tF.AO)(),{openFormDialog:l}=(0,tx.useFormDialog)(),{showTeamDetails:i}=function(){let e=(0,tA.useNavigate)(),{setIsOpen:t,setTeam:a}=lN(),{clearFilters:r,setSort:n}=lI();async function o(){await e("/admin/teams",{replace:!0})}return{navigateToTeamsScreen:o,showTeamDetails:async function(e){await o(),r({name:lj.sJ.teamsTable}),n({name:lj.sJ.teamsTable,sortBy:[{id:"updated_at",desc:!0}]}),a({id:e}),t(!0)}}}(),{log:s}=(0,tF.pw)(),c=r(tU.E4M.WorkspaceTeamCreate),u=(0,tN.useCreateTeam)(t);return ty.createElement(lT,{label:"New Team",feature:tU.BAf.Teams,additionalUsage:1,appearance:e,disabled:!c,onPress:()=>l(l$,{title:"Create New Team",saveButtonText:"Create",onSave:async({name:e,description:t})=>{let r=(0,t8.encodeID)("wk",a||0);try{let{id:a}=await u.mutateAsync({workspace_id:r,name:e,description:t});n({message:"Team Created Successfully!"}),s({event:"workspace_team_added"}),a&&i(a)}catch(e){if(e.type&&"CONFLICT"===e.type)throw new tx.FormFieldError("name",e.message,e.type);o({message:`${e.message}`})}}})})},lR=(e,t)=>("/"!==t||"/"===e)&&e.includes(t),lW=({links:e})=>{let t=(0,tA.useLocation)();return ty.createElement(tg.HStack,{spacing:5,alignContent:"center",alignItems:"center",flexGrow:!0},e.map(e=>{let a=lR(t.pathname,e.pathname),r=a?"body":"light",n="body";return e.shouldHighlight&&(r=a?"warning-dark":"warning",n="warning-dark"),ty.createElement(tg.Box,{as:tk.Link,key:e.title,className:"no-underline",to:e.pathname,fontSize:"lg",fontWeight:"medium",color:{default:r,hover:n},pr:e.icon?1:5,textTransform:"capitalize"},e.title)}))},lL=({links:e,buttons:t,context:a})=>(ty.useEffect(()=>{oM.initialize()},[]),ty.createElement(tg.Flex,{"data-test":"top-navigation-bar",className:"TopNav--mosaic",alignItems:"center",h:"3xl",px:7,bg:"canvas",borderB:!0,pos:"sticky",zIndex:20},a&&ty.createElement(tg.Flex,{direction:"row",alignContent:"center",alignItems:"center",w:40},a),ty.createElement(lW,{links:e}),ty.createElement(tg.HStack,{spacing:3},t))),lG=({disabled:e})=>{let{state:t,actions:a,effects:r}=(0,tB.U8)(),[n,o]=ty.useState(!1),l=t.workspaces.canI(tU.E4M.WorkspaceMembersInvite),i=e=>{r.reporter.log({event:"sidebar_invite_button_clicked",payload:{path:`${t.router?.pathname}`}}),e.onClick()};return ty.createElement(ty.Fragment,null,l?ty.createElement(o8,{onOpen:()=>{},className:"z-10",isOpen:n,setIsOpen:o,onInvitesSent:()=>{a.members.touchQueries()},workspaceId:t.workspaces?.currentWorkspace?.id,renderTrigger:({attributes:t})=>ty.createElement(tg.Button,{disabled:e,appearance:"primary",...t,onPress:()=>i(t)},"Invite Members")}):null)};function lO(){let{state:e}=(0,tB.U8)();return{canIOnGroup:e.workspaces.canIOnGroup,canI:e.workspaces.canI}}let lz=({group:e,location:t})=>{let{state:a,actions:r,effects:n}=(0,tB.U8)(),o=a.workspaces.canI(tU.E4M.WorkspaceProjectsCreate)&&!(e&&!a.workspaces.canIOnGroup(e,tU.Jd3.GroupProjectsAdd)),l=a.features.featureRequiresUpgrade(tU.BAf.Projects),i=({onClick:e,disabled:t})=>ty.createElement(tg.Button,{disabled:t,onClick:e,appearance:"primary"},"New Project"),s=`/add/projects${e?.slug?`?group=${e.slug}`:""}`,c=()=>{n.reporter.log({event:"button_clicked",payload:{name:"New Project",location:t}})};return ty.createElement(ty.Fragment,null,o?l?ty.createElement(i,{"data-test":"add-project-button",onClick:()=>{r.ui.showFeatureDialog(tU.BAf.Projects),c()}}):ty.createElement(tk.Link,{to:s,className:"reset"},ty.createElement(i,{onClick:()=>c()})):ty.createElement(i,{disabled:!0}))},lq=()=>{let{canI:e}=lO(),{isFlagEnabled:t}=(0,tF.aS)(),{isSaaS:a}=(0,tF.y1)(),{currentWorkspace:r}=(0,tF.C$)();return[{show:e(tU.E4M.WorkspaceProjectsView),pathname:"/admin/projects",title:"Projects",icon:["fal","folder"]},{show:e(tU.E4M.WorkspaceTeamsView),pathname:"/admin/teams",title:"Teams",icon:["fal","people-group"]},{show:e(tU.E4M.WorkspaceMembersRead),pathname:"/admin/members",title:"Members",icon:["fal","person"]},{show:e(tU.E4M.WorkspaceSettingsRead),pathname:"/admin/settings",title:"Settings",icon:["fal","slider"]},{show:!t("ssg_disabled")&&e(tU.E4M.WorkspaceDefaultStyleGuidesCreate),pathname:"/admin/governance",title:"Governance",icon:["fal","scale-balanced"]},{show:e(tU.E4M.WorkspaceActivityRead),pathname:"/admin/activity",title:"Activity",icon:["fal","wave-pulse"]},{show:e(tU.E4M.WorkspaceAutomationLogsView),pathname:"/admin/automation",title:"Automation",icon:["fal","wand-sparkles"]},{show:e(tU.E4M.WorkspaceBilling),pathname:"/admin/billing",title:"Billing",icon:["fal","credit-card"]},{show:e(tU.E4M.WorkspaceBilling)&&r?.migratedFromNext&&!a,pathname:"/admin/legacy-migration/next",title:"NEXT Migration",shouldHighlight:!0,icon:["fal","arrow-right-arrow-left"]}].filter(e=>e.show)},lV=(0,ak.ss)((0,ak.aZ)(function(){return ty.createElement(lH,null)})),lH=()=>{let{pathname:e}=(0,tA.useLocation)(),{canI:t}=lO(),{isFlagEnabled:a}=(0,tF.aS)(),r=lq();if(r.unshift({show:!0,pathname:"/",title:"Home",icon:["fal","home"]}),!t(tU.E4M.WorkspaceFullMember))return null;let n=[];return(e.includes("members")?n.push(ty.createElement(lG,{key:"member-invite"})):e.includes("projects")?(n.push(ty.createElement(lF,{key:"new-group",appearance:"minimal"})),n.push(ty.createElement(lz,{key:"add-project",location:"workspace_projects"}))):e.includes("teams")&&n.push(ty.createElement(lM,{key:"add-team",appearance:"primary"})),function(e){if(0===e.length)return!0;if(1===e.length){let[t]=e;return"/"===t.pathname}return!1}(r)&&0===n.length)?null:(a("appcues_launchpad")&&n.push(ty.createElement(tg.Box,{key:"appcues-launchpad",className:"larger-appcues-icon",id:"appcues-launchpad"})),ty.createElement(lL,{links:r,buttons:n}))};var lQ=a(1675),lK=a(97174);function lJ(e){if(!e.includes("/"))return encodeURIComponent(e);{let t=e.split("/");for(let e in t)t[e]=encodeURIComponent(t[e]);return t.join("/")}}function lY({projectId:e,projectSlug:t,branchSlug:a,nodeSlug:r,autoNavToFirst:n,onLinkClick:o}){let{effects:l}=(0,tB.U8)(),{jwt:i}=(0,tF.hD)(),[s,c]=ty.useState(!1),u=(0,tA.useNavigate)(),{data:d,isLoading:m}=(0,tN.useGetProjectBranches)(i,{projectId:e},{refetchInterval:s?void 0:3e3}),p=(d?.items||[]).map(t=>({...t,projectId:e,id:(0,t8.safelyDecodeID)(t.id)})),g=p.find(e=>a?e.slug===a:e.is_default),h=!!g?.last_analyzed_at;return(ty.useEffect(()=>{!s&&h&&c(!0)},[s,h]),tm.KJ&&a&&!m&&p.length&&!g)?ty.createElement(tA.Navigate,{to:`/docs/${encodeURIComponent(t)}`,replace:!0}):ty.createElement(ty.Fragment,null,p?.length>1&&ty.createElement(tg.Box,{mt:4,mb:2,borderT:!0,borderB:!0},ty.createElement(lK.e,{branches:p,branchSlug:a,onChange:e=>{let a={state:{branchSwitch:!0}};e.is_default?l.router.navigate(u,`/docs/${encodeURIComponent(t)}/${r||""}`,a):l.router.navigate(u,`/docs/${encodeURIComponent(t)}/branches/${encodeURIComponent(e.slug)}/${r||""}`,a)}})),s?ty.createElement(lX,{onLinkClick:o,autoNavToFirst:n,projectId:e,projectSlug:t,branchSlug:a,nodeSlug:r}):ty.createElement(oK.P,null,ty.createElement(tg.Box,{py:6,pl:4,color:"muted"},g?"Waiting for content to be published into this branch...":"Loading...")))}let lX=({autoNavToFirst:e,projectSlug:t,projectId:a,branchSlug:r,nodeSlug:n,onLinkClick:o})=>{let l=(0,t8.encodeID)("prj",a),{data:i,isFetched:s}=(0,tI.BL)({projectId:l,branchSlug:r}),c=`/docs/${encodeURIComponent(t)}`+(r?`/branches/${encodeURIComponent(r)}`:"");if(e&&!n&&s&&i?.items){let e=(0,tp.uq)(i.items);if(e)return ty.createElement(tA.Navigate,{to:`./${lJ(e.slug)}`,replace:!0})}return ty.createElement(tg.Box,{className:"elements-table-of-contents"},i?ty.createElement(tI.MB,{onLinkClick:o,activeId:n||"",tableOfContents:{...i,hide_powered_by:!0},collapseTableOfContents:i.collapseTableOfContents,externalScrollbar:!0,Link:({to:e,...t})=>ty.createElement(tk.Link,{to:`${c}/${lJ(e)}`,...t})}):null)};function lZ({isOpen:e,title:t,children:a,onClose:r,className:n,style:o,bgClassName:l="bg-gray-1",bodyClassName:i,hideClose:s,portalClassName:c,onOpened:u,usePortal:d}){return ty.createElement(tj.Dialog,{isOpen:e,onClose:r,className:t3()("p-8 mx-6",l,n),style:o,usePortal:d,portalClassName:c,onOpened:u},(t||!s)&&ty.createElement("div",{className:"flex items-center -mt-2"},t&&ty.createElement("h1",{"data-test":"dialog-title",className:"flex-1 text-gray-7 text-2xl font-bold"},t),!s&&ty.createElement(tj.Button,{"data-test":"close-dialog",icon:ty.createElement(tj.FAIcon,{icon:["fal","times"],size:"2x",className:"text-gray-6 -mr-2"}),onClick:r,minimal:!0})),ty.createElement("div",{className:t3()("mt-12 qa-dialog-body",i)},a))}function l0({secondaryActions:e,primaryActions:t,actionsLeft:a}){return ty.createElement("div",{className:"flex items-center mt-16"},e&&ty.createElement("div",{className:"flex"},e?.map((e,t)=>ty.createElement("div",{key:t,className:"mr-4"},e))),ty.createElement("div",{className:t3()("flex-1 flex",{"justify-start":a,"justify-end":!a})},t.map((e,t)=>ty.createElement("div",{key:t,className:a?"mr-4":"ml-4"},e))))}let l1=({title:e,description:t,image:a,imageStyle:r,withImageFade:n=!0,isCentered:o})=>ty.createElement(tg.VStack,{spacing:8},ty.createElement(tg.VStack,{spacing:4},ty.createElement(tg.Heading,{size:2,textTransform:"capitalize"},e),ty.createElement(tg.Paragraph,{style:{maxWidth:600},mx:o?"auto":void 0},t||"Select a feature to learn more ->")),a&&ty.createElement(tg.Flex,{className:t3()({FadeBottom:n}),justifyContent:"center"},ty.createElement("img",{className:"object-cover object-top w-full",style:{height:300,...r},src:`/static/images/features/${a}`,alt:e}))),l2=({integration:e,isOpen:t,onClose:a})=>{let{actions:r,effects:n}=(0,tB.U8)(),o=aX(),[l,i]=ty.useState(!1),s=()=>{let t=tm.xF[e.kind];if(n.reporter.log({event:"workspace_integration_connect_started",payload:{kind:e.kind,location:"workspace_add_projects"}}),(0,aK.Yr)(t,e.config)){let t=o(e.name);t&&r.auth.connectIntegration({integration:e,popup:t});return}(0,aK.LR)(t,e.config)&&i(!0)},c=e=>{a(),e?(s(),n.reporter.log({event:"button_clicked",payload:{name:"vcs_dialog_accepted",location:"vcs_dialog"}})):n.reporter.log({event:"vcs_dialog_closed"})},u=[`Push changes directly to ${e.name} `,"Create repos for new API designs","Multi-branch spec editing",`One-click to add projects from ${e.name}`,"Automatically sync changes using Git webhooks"];return ty.createElement(ty.Fragment,null,ty.createElement(lZ,{hideClose:!0,bodyClassName:"m-0",className:"z-40 w-full max-w-6xl p-12",bgClassName:"bg-white",portalClassName:"z-50",title:ty.createElement(ty.Fragment,null,ty.createElement(tj.FAIcon,{icon:["fad","rocket-launch"],className:"mr-5 text-green"}),"Integrate into your Existing API Workflow"),isOpen:t,onClose:()=>c(!1)},ty.createElement("div",{className:"flex"},ty.createElement("div",{className:"w-2/3 pr-16"},ty.createElement("div",{className:"relative overflow-hidden",style:{minHeight:"430px"}},ty.createElement(l1,{image:"custom_git_integration.png",description:`Integrate Stoplight with your ${e.name} account to make API design part of your development workflow. We ask for read/write access to make your Stoplight experience seamless.`}))),ty.createElement("div",{className:"w-1/3 pr-5"},ty.createElement("h3",{className:"font-semibold text-lg mb-6"},"Why Integrate?"),u&&u.map((e,t)=>ty.createElement("li",{key:t,className:"flex items-center rounded my-2 py-2 px-3 text-gray-9"},ty.createElement(tj.FAIcon,{icon:["fas","check"],className:"fa-fw mr-3"}),e)))),ty.createElement(l0,{actionsLeft:!0,primaryActions:[ty.createElement(tj.Button,{"data-test":"vcs-dialog-confirm-button",key:"1",intent:"primary",large:!0,onClick:()=>{c(!0)}},"Authorize"),ty.createElement(tj.Button,{"data-test":"vcs-dialog-maybe-later-button",key:"2",onClick:()=>{c()},large:!0},"Maybe Later")]})),(0,aK.LR)(tm.xF[e.kind],e.config)?ty.createElement(lZ,{title:`${e.name} authentication`,isOpen:l,onClose:()=>i(!1)},ty.createElement(aN,{integrationKind:e.kind,onSubmit:async({username:t,password:a})=>{i(!1),await r.auth.connectIntegration({integration:e,usernameOrEmail:t,password:a})}})):null)},l4=ty.memo(({project:e,branchSlug:t,nodeSlug:a})=>{let{state:r}=(0,tB.U8)(),[n]=nW(e.id);if(!e)return null;let o=r.workspaces.canIOnProject(e,tU.Jg8.ProjectMembersAdd)&&r.workspaces.canI(tU.E4M.WorkspaceFullMember),l=r.workspaces.canIOnProject(e,tU.Jg8.ProjectSettingsView);if(!o&&!l&&!("connect"===n||"readWrite"===n||"readOnly"===n))return null;let i=(0,t8.encodeID)("prj",e.id);return ty.createElement(tg.HStack,{px:4,pt:2,pb:3,spacing:2,"data-test":"project-actions"},"connect"===n&&ty.createElement(l8,{integration:r.workspaces.integrations?.find(t=>t.id===e?.workspaceIntegrationId)}),("readWrite"===n||"readOnly"===n)&&ty.createElement(l6,{projectId:i,projectSlug:e.slug,branchSlug:t,nodeSlug:a,mode:"readWrite"===n?"edit":"view"}),o&&ty.createElement(ty.Fragment,null,ty.createElement(l5,{project:e}),ty.createElement(l9,{project:e})),l&&ty.createElement(l3,{projectSlug:e.slug}))}),l3=({projectSlug:e})=>{let{effects:t}=(0,tB.U8)();return ty.createElement(l7,{onPress:()=>{t.reporter.log({event:"button_clicked",payload:{location:"project_doc_sidebar",name:"project_settings"}})},to:`/settings/${e}`,icon:["fas",tm.qB.settings],"data-test":"settings-cog"})},l5=({project:e})=>{let{effects:t}=(0,tB.U8)(),{isOpen:a,open:r,close:n}=(0,tg.useModalState)();return ty.createElement(ty.Fragment,null,ty.createElement(tg.Button,{"data-test":"share-btn",onPress:()=>{t.reporter.log({event:"share_button_clicked",payload:{project_type:e.type??void 0,location:"project_doc_sidebar"}}),r()}},"Share"),ty.createElement(n$,{isOpen:a,onClose:n,project:e}))},l8=({integration:e})=>{let{isOpen:t,open:a,close:r}=(0,tg.useModalState)();return e?ty.createElement(ty.Fragment,null,ty.createElement(tg.Button,{key:"studio",appearance:"primary",icon:tm.Mh[e.kind],"data-test":"edit-in-studio-btn",onPress:a},"Connect to Edit"),ty.createElement(l2,{key:"connect-dialog",integration:e,isOpen:t,onClose:r})):null},l6=({projectSlug:e,branchSlug:t,nodeSlug:a,mode:r,projectId:n})=>{let{effects:o}=(0,tB.U8)(),l=t?encodeURIComponent(t):"",i=a?a.split("-")[0]:"",s=`/studio/${e}:${l}${i?`?node=${i}`:""}`,c="edit"===r?["fad",tm.qB.studio]:["fad","eye"],{data:u}=(0,tI.BL)({projectId:n,branchSlug:t}),d=e=>{let t=e?.items||[],a=window.location.pathname.split("/").pop();if(a&&a.includes("-"))for(let e of t){if(e.slug===a)return e.type;if(!e.slug&&e.items?.length){let t=e.items.find(e=>e.slug===a)?.type;if(t)return t}}};return ty.createElement(l7,{key:"studio",to:s,appearance:"primary",icon:c,"data-test":`${r}-in-studio-btn`,onPress:()=>{let e=d(u);localStorage.setItem("file_type",e||"http_service"),o.reporter.log({event:"button_clicked",payload:{location:"project_doc_sidebar",name:`${r}_in_studio`}})}},(0,th.capitalize)(r))},l7=({onPress:e,to:t,icon:a,children:r,appearance:n,...o})=>ty.createElement(tg.Box,{as:tk.Link,to:t,...o,onClick:e?t=>e(t):void 0,className:"sl-button",h:"md",fontWeight:"medium",px:2.5,color:n?{default:"on-primary",hover:"on-primary"}:void 0,bg:n?{default:"primary",hover:"primary-dark",active:"primary-darker"}:{default:"canvas",hover:"canvas-50",active:"canvas-100"},rounded:!0,border:!0,borderColor:"button"},a&&(0,tg.isIconProp)(a)?ty.createElement(tg.Box,{as:tg.Icon,icon:a,mr:r?1.5:void 0}):null,r||null),l9=({project:e})=>{let{effects:t}=(0,tB.U8)(),{currentWorkspaceId:a}=(0,tF.C$)(),{jwt:r}=(0,tF.hD)(),{data:n,isLoading:o}=(0,tN.useGetWorkspaceItems)(r,a),{openDialog:l,closeDialog:i}=(0,tx.useDialog)(),[s,c]=ty.useState(),u=(0,nc.uI)();ty.useEffect(()=>{if(!o)for(let t of n?.items||[])t.data.name===e.name&&"project"===t.type&&c(t.data.pinned)},[n,o,e]);let d=()=>l({title:"Unpin Project",intent:"danger",message:"Are you sure you wish to unpin this project from your workspace sidebar?",confirmText:"Unpin",onConfirm:async()=>{i(),u(e.id,!1).then(()=>c(!1))}});return ty.createElement(tg.Tooltip,{renderTrigger:ty.createElement(tg.Button,{px:3,"data-test":"pin-project-from-docs-btn",onPress:()=>{s?d():u(e.id,!0).then(()=>c(!0)),t.reporter.log({event:s?"project_unpinned_from_sidebar":"project_pinned_to_sidebar"})}},ty.createElement(tg.Icon,{icon:[s?"fas":"far","thumbtack"]}))},s?"Unpin":"Pin")},ie=()=>{let{log:e}=(0,tF.pw)();return ty.createElement(tg.Box,{px:4,pt:2},ty.createElement(tg.Callout,{intent:"warning",appearance:"outline",fontSize:"sm",icon:"exclamation-triangle",className:"LeftSidebarCallout","data-test":"project-permissions-callout"},ty.createElement(tg.Text,null,"You must be a project Editor to edit this project."," ",ty.createElement(tg.Link,{className:"LeftSidebarCalloutLink",href:ab.xz.manage_project_access,rel:"noreferrer",target:"_blank",onClick:()=>{e({event:"learn_more",payload:{location:"project_editor_required_messaging_on_docs"}})}},"Learn More"))))};var it=a(70707),ia=a(41591);function ir({projectId:e}){let{state:t}=(0,tB.U8)(),{isSuccess:a,data:r}=(0,tN.useGetProjectRelease)(t.auth.jwt,{projectId:e,releaseId:"latest"}),n=(0,ia.f)(r||{}).filter(e=>"off"!==e.severity);return ty.createElement(tg.Box,{pt:4},a&&r&&ty.createElement("div",null,ty.createElement(tk.Link,{to:"#overview"},ty.createElement(tg.Flex,{alignItems:"center",py:2,pl:4,..."#overview"===location.hash?{bg:"primary-tint"}:{}},ty.createElement(tg.Box,{as:tg.Icon,icon:["fal","star"]}),ty.createElement(tg.Box,{ml:2},"Overview"))),!th.isEmpty(n)&&th.map(n,({name:e,severity:t})=>ty.createElement(tk.Link,{key:e,to:`#${e}`},ty.createElement(tg.Flex,{alignItems:"center",py:2,pl:8,...location.hash===`#${e}`?{bg:"primary-tint"}:{}},ty.createElement(it.z,{severity:t}),ty.createElement(tg.Box,{ml:2},e))))))}let io=(0,ak.ss)((0,ak.aZ)(function(){let{projectSlug:e,branchSlug:t,autoNavToFirst:a,"*":r}=(0,tA.useParams)(),{state:n}=(0,tB.U8)(),[{data:o,fetching:l}]=(0,nR.w)({workspaceId:n.workspaces.currentWorkspaceId,projectSlug:e}),{isResponsiveLayoutEnabled:i}=(0,a_.s)(),{setResponsiveSidebarOpen:s}=(0,tF.L3)(),c=`/docs/${encodeURIComponent(e)}`+(t?`/branches/${encodeURIComponent(t)}`:""),[u]=nW(o?.id),d=n.workspaces.iAmMember&&!n.workspaces.iHaveRole(tU.l2p.Guest)&&!n.workspaces.iHaveRole(tU.l2p.Viewer);return l?ty.createElement(tg.Box,{flexGrow:!0,color:"muted",p:5},ty.createElement(tx.DelayedRender,null,"Loading...")):ty.createElement(il,null,o&&ty.createElement(ty.Fragment,null,ty.createElement(tg.Flex,{alignItems:"center",px:4,py:2},ty.createElement(tg.Avatar,{name:o.name,icon:["fad",o.iconName??"cabinet-filing"],fg:o.iconColor??rw.aW,mr:1}),ty.createElement(tg.Box,{as:tk.Link,flex:1,to:c,fontSize:"xl",fontWeight:"medium","data-test":"root-toc-item-name"},o.name)),o&&n.workspaces.iAmMember&&!i&&ty.createElement(ty.Fragment,null,ty.createElement(l4,{project:o,branchSlug:t,nodeSlug:r}),("none"===u||"readOnly"===u)&&d&&ty.createElement(ie,null)),o.flavor===tU.$GR.StyleGuide?ty.createElement(ir,{projectId:o.id}):ty.createElement(lY,{onLinkClick:function(){i&&s(!1)},projectId:o.id,projectSlug:e,branchSlug:t,nodeSlug:r,autoNavToFirst:!!a})))})),il=({children:e})=>{let{reporter:t}=(0,tB.px)();return ty.createElement(tg.Box,{className:"slider-element"},ty.createElement(tg.Box,{py:4},ty.createElement(tg.Box,{as:tk.Link,onClick:()=>{t.log({event:"button_clicked",payload:{location:"project_doc_sidebar",name:"home"}})},p:4,display:"flex",alignItems:"center",opacity:{default:70,hover:100},className:"reset",to:"/","data-test":"go-home"},ty.createElement(tg.Box,{as:tg.Icon,icon:["fas","arrow-left"],mr:3,opacity:50}),ty.createElement(tg.Box,null,"Home")),e))};var ii=a(26276);let is=({fetching:e,hasProjects:t})=>{let{isLoggedIn:a}=(0,tF.hD)(),{canI:r}=(0,tF.C$)(),n=r(tU.E4M.WorkspaceFullMember),o=[];return!e&&a&&!t&&n&&(o.push({name:"Browse Projects",type:"link",to:"/admin/projects",icon:["fad","magnifying-glass"],exact:!1}),r(tU.E4M.WorkspaceProjectsCreate)&&o.push({name:"Start New Project",type:"link",to:"/add/projects",icon:["fad","plus"],exact:!1}),o.push({name:"Pin projects to add them here",type:"link"})),{items:o}},ic={[tU.$GR.Design]:{features:[{icon:"users",name:"Realtime collaboration",projectType:["standard"]},{icon:"users",name:"Async push/pull collaboration",projectType:["git"]},{icon:"users",name:"Async push collaboration",projectType:["cli"]},{icon:"code-branch",name:"Multiple versions",projectType:["standard"]},{icon:"code-branch",name:"Multi branch",projectType:["cli","git"]},{icon:"database",name:"Data stored in Stoplight",projectType:["standard"]},{icon:"database",name:"Data stored in Git",projectType:["cli","git"]},{icon:"lock",name:"No Git connection required",projectType:["standard","cli"]},{icon:"lock",name:"Git connection required",projectType:["git"]},{icon:"user-hard-hat",name:"No extra setup",projectType:["standard","git"]},{icon:"user-hard-hat",name:"Some setup required",projectType:["cli"]}],docsUrl:"https://docs.stoplight.io/docs/platform/0e6a3688afcc3-quickstart-guide"},[tU.$GR.StyleGuide]:{features:[{icon:"check",name:"Automatic standards enforcement",projectType:["standard","git"]},{icon:"check",name:"Share across projects and groups",projectType:["standard","git"]},{icon:"check",name:"Ready-to-use standards",projectType:["standard","git"]},{icon:"check",name:"Custom rulesets and functions",projectType:["standard","git"]},{icon:"check",name:"Easily publish errors and responses",projectType:["standard","git"]}],docsUrl:"https://docs.stoplight.io/docs/platform/364e30f79daa0-create-a-style-guide"},[tU.$GR.DesignLibrary]:{features:[{icon:"check",name:"Reuse API Design assets across projects",projectType:["standard","git"]},{icon:"check",name:"Masking to tweak reusable models",projectType:["standard","git"]},{icon:"check",name:"Multiple Component Libraries to easily manage and organize reusable assets",projectType:["standard","git"]}],docsUrl:"https://docs.stoplight.io/docs/platform/sovfvcspumw1d-design-libraries"}},iu={[tU.$GR.Design]:{name:"API",icon:"pencil-ruler",description:{blank:"Create OpenAPI files and Documentation in Studio from scratch.","blank-git":"Create OpenAPI files and Documentation in Studio from scratch",cli:"Use the Stoplight CLI to push local folders to the workspace",import:"Import an existing OpenAPI file into a new Studio project",web:""}},[tU.$GR.StyleGuide]:{name:"Style Guide",icon:"ballot-check",description:{blank:"Create a new style guide.",import:"Import an existing style guide","blank-git":"",cli:"",web:""}},[tU.$GR.DesignLibrary]:{name:"Component Library",icon:"books",description:{blank:"Define a set of standard components to be used across your API ecosystem","blank-git":"Define a set of standard components to be used across your API ecosystem",import:"",cli:"",web:""},betaBadge:!0}},id=e=>{let{isLoggedIn:t,jwt:a}=(0,tF.hD)(),{canI:r,myWorkspace:n}=(0,tF.C$)(),o=r(tU.E4M.WorkspaceFullMember),l=t&&o,{data:i,isLoading:s}=(0,tN.useProjectsList)(a,{workspaceId:e,pinned:l},{enabled:!!n}),c=[];if(i)for(let e of i){let t={id:e.default_branch?.id,name:e.name,type:"project",projectType:e.type,slug:e.slug,to:(0,rh.f)("/docs",e.slug),icon:["fad",(0,rw.wN)({iconName:e.presentation?.icon})],iconColor:(0,rw.SR)({iconColor:e.presentation?.color}),subtitle:e.description,group:e.group,..."design"!==e.flavor&&{typeIcon:iu[e.flavor]?.icon,typeName:iu[e.flavor]?.name},pinned:l};c.push(t)}return{TOCItems:(0,th.sortBy)(c,e=>"string"==typeof e.name?e.name.toLowerCase():e.name),fetching:s}},im=e=>{let{canI:t}=(0,tF.C$)(),{TOCItems:a,fetching:r}=id(e),n=(0,th.groupBy)(a,"group.id"),o=t(tU.E4M.WorkspaceFullMember),l=e=>o?{id:e.id,type:"group"}:"",i=[],s=[];for(let e of Object.keys(n)){let t=n[e];if("undefined"===e)i=i.concat(t);else{let e=t[0].group;e&&s.push({name:e.name,type:"group",to:l(e),icon:["fad",lh(e.presentation?.icon)],iconColor:lb(e.presentation?.color),subtitle:e.description,children:t})}}return{groupedTOCItems:s,ungroupedTOCItems:i,fetching:r}};var ip=a(28218);let ig=()=>{let{jwt:e}=(0,tF.hD)(),{currentWorkspaceId:t}=(0,tF.C$)(),{data:a,isLoading:r,isError:n}=(0,tN.useListWorkspaceDrafts)(e,{workspaceId:t,pinned:!0}),[o,l]=(0,ip.M)("proposals_viewed",{});ty.useEffect(()=>{r||n||(a?.length?l((0,th.pickBy)(o,(e,t)=>a.some(e=>e.id===t))):window.localStorage.removeItem("proposals_viewed"))},[r,n,a,o,l]);let i=a?.filter(e=>e.commit_data_hash!==o[e.id]).length;return i?ty.createElement(tg.Flex,{"data-test":"proposals-update-badge",className:"bg-accent text-on-accent",alignItems:"center",justifyContent:"center",rounded:"full",fontWeight:"bold",h:6,w:6},i):null},ih=()=>{let{canI:e}=(0,tF.C$)(),{isLoggedIn:t}=(0,tF.hD)(),a=e(tU.E4M.WorkspaceExplorerView),r=e(tU.E4M.WorkspaceProjectsCreate),n=[];return n.push({name:"Home",type:"link",to:"/",icon:["fad","home"],exact:!0}),t&&(a&&n.push({name:"Explore",type:"link",to:"/explore",icon:["fad",tm.qB.explorer],exact:!1}),r&&n.push({name:"Proposals",type:"link",to:"/proposals",icon:["fad",tm.qB.proposals],exact:!1,meta:ty.createElement(ig,null)})),{items:n}},ib=({title:e,icon:t})=>ty.createElement(tg.Flex,{align:"center",mb:1},ty.createElement(tg.Flex,{align:"center",style:{height:24,width:24}},ty.createElement(tg.Icon,{icon:["fal",t]})),ty.createElement(tg.Text,{px:1,fontWeight:"semibold"},e)),iy=({projectId:e,pinned:t})=>{let{effects:a}=(0,tB.U8)(),{openDialog:r,closeDialog:n}=(0,tx.useDialog)(),[o,l]=ty.useState(t),i=(0,nc.uI)(),s=ty.createElement(tg.Button,{className:"project-action-pin","data-test":"pin-project-from-sidebar-btn",onClick:t=>{t.preventDefault(),o?c():i(e,!0).then(()=>l(!0)),a.reporter.log({event:o?"project_unpinned_from_sidebar":"project_pinned_to_sidebar"})},appearance:"minimal",style:{height:18}},ty.createElement(tg.Icon,{style:{height:18,display:"flex",alignItems:"center"},icon:[o?"fas":"fal","thumbtack"]})),c=()=>r({title:"Unpin Project",intent:"danger",message:"Are you sure you wish to unpin this project from your workspace sidebar?",confirmText:"Unpin",onConfirm:async()=>{n(),i(e,!1).then(()=>l(!1))}});return ty.createElement(tg.HStack,{style:{height:18}},ty.createElement(tg.Tooltip,{placement:"top",renderTrigger:s},ty.createElement(tg.Text,null,o?"Unpin project from sidebar":"Pin project to sidebar")))},iw=({item:e,className:t,onClick:a,showIcon:r=!0,children:n,isLink:o,fontWeight:l="normal",isRecentProject:i})=>{let{resolvedTheme:s}=(0,tF.C$)(),{sidebarFocused:c}=(0,tF.tz)(),u=(0,tC.J1)(s["color-sidebar-bg"]),d=c&&u>=.8,m=d&&e.iconColor?e.iconColor:"var(--color-on-sidebar)",p=d&&e.iconColor?1:.7,g="project"===e.type,h=ty.createElement(tg.Flex,{alignItems:"center","data-test":"root-toc-item"},e.icon&&r&&ty.createElement(tg.Box,{style:{opacity:p},mr:4},ty.createElement(tg.Avatar,{icon:e.icon,fg:m})),ty.createElement(tg.Box,{overflowX:"hidden",pr:2,...!o&&{cursor:"auto"}},ty.createElement(tg.Box,{fontWeight:l,"data-test":"root-toc-item-name"},e.name),e.subtitle&&ty.createElement(tg.Box,{fontSize:"sm",opacity:70},e.subtitle)),e.typeIcon&&ty.createElement(tg.Tooltip,{placement:"right",renderTrigger:ty.createElement(tg.Box,null,ty.createElement(tg.Icon,{icon:e.typeIcon}))},e.typeName)),{effects:f}=(0,tB.U8)(),b=()=>{f.reporter.log({event:i?"sidebar_recent_project_selected":"sidebar_pinned_project_selected"})};return o?ty.createElement(tg.VStack,{spacing:4},ty.createElement(tg.Flex,{role:"group"},ty.createElement(tg.Box,{flexGrow:!0,overflowX:"hidden"},ty.createElement(tk.NavLink,{onClick:e=>{a&&a(e),g&&b()},to:function(e){switch(typeof e.to){case"string":return e.to;case"object":if("group"===e.type)return"/admin/projects"}return"/"}(e),className:({isActive:e})=>t3()(t,"flex items-center no-underline hover:text-primary",e?"text-primary":"text-on-sidebar")},h,e.meta&&ty.createElement(tg.Box,{className:"flex-shrink-0"},e.meta))),i&&ty.createElement(tg.Box,{visibility:{default:"invisible",groupHover:"visible"}},ty.createElement(iy,{projectId:e.id,pinned:e.pinned}))),n):ty.createElement(tg.VStack,null,ty.createElement(tg.Flex,{alignItems:"center",textDecoration:"no-underline"},h,e.meta&&ty.createElement(tg.Box,{className:"opacity-50 flex-shrink-0"},e.meta)),n)},iE=({items:e,className:t,context:a})=>ty.createElement(tg.VStack,{spacing:4,className:t3()(t),"data-testid":`root-${a}`,"data-test":`root-${a}`},e.map((e,t)=>ty.createElement(tg.Box,{key:`${a}-${t}-${e.name}`},ty.createElement(iw,{item:e,isLink:!!e.to},e.children?.length?ty.createElement(tg.VStack,{spacing:4,pl:7,pt:4},e.children?.map((e,r)=>ty.createElement(iw,{key:`${a}-${t}-${r}`,item:e,isLink:!!e.to,showIcon:!1}))):void 0)))),iv=({item:e})=>{let{isLoggedIn:t}=(0,tF.hD)(),{showGroupDetails:a}=lD();return e.icon||(e.icon=["fal","folder"]),ty.createElement(iw,{key:`group-${e.id}`,item:e,fontWeight:"semibold",isLink:!!e.to&&t,onClick:t=>{"object"==typeof e.to&&"group"===e.to.type&&(t.preventDefault(),a(e.to.id))}},e.children?.length?ty.createElement(tg.VStack,{spacing:4,pl:10,mt:2},e.children?.map(t=>ty.createElement(iw,{key:`group-${e.id}-${t.id}`,item:t,isLink:!!t.to,showIcon:!1}))):void 0)},ik=({groupedTOCItems:e,ungroupedTOCItems:t})=>{let a=(0,th.sortBy)(e,e=>"string"==typeof e.name?e.name.toLocaleLowerCase():e.name),r=(0,th.sortBy)(t||[],e=>"string"==typeof e.name?e.name.toLocaleLowerCase():e.name),n=!!a.length,o=!!r.length;return ty.createElement(tg.VStack,{spacing:4},o&&ty.createElement(iE,{items:r,context:"projects"}),n?ty.createElement(tg.VStack,{spacing:8,pt:4,"data-test":"root-groups"},a.map(e=>ty.createElement(iv,{key:`group-${e.id}`,item:e}))):null)},i_=({projectsTOCItems:e})=>ty.createElement(iE,{items:e,context:"projects"}),ix=({groupedTOCItems:e,ungroupedTOCItems:t,projectsTOCItems:a})=>{let{isLoggedIn:r}=(0,tF.hD)(),{hasFeature:n}=(0,tF._m)(),o=n(tU.BAf.Groups);return ty.createElement(ty.Fragment,null,r&&ty.createElement(ib,{title:"Pinned Projects",icon:"thumb-tack"}),o?ty.createElement(tg.Box,{pt:4},ty.createElement(ik,{groupedTOCItems:e,ungroupedTOCItems:t})):ty.createElement(tg.Box,{pt:4},ty.createElement(i_,{projectsTOCItems:a})))},iI=({projectId:e})=>{let{jwt:t}=(0,tF.hD)(),{data:a}=(0,tN.useGetProject)(t,{projectId:(0,t8.safelyDecodeID)(e)}),{canI:r}=(0,tF.C$)(),{currentWorkspaceId:n}=(0,tF.C$)(),{data:o,isLoading:l}=(0,tN.useGetWorkspaceItems)(t,n),[i,s]=ty.useState();return ty.useEffect(()=>{if(a&&o&&!l&&r(tU.E4M.WorkspaceFullMember)&&o.items)for(let t of o.items)if("group"===t.type)for(let r of t.children)r.name===a.name&&s({id:e,projectType:a.type,slug:a.slug,name:a.name,type:"project",to:`/docs/${a.slug}`,pinned:r.pinned});else t.data.name===a.name&&s({id:e,projectType:a.type,slug:a.slug,name:a.name,type:"project",to:`/docs/${a.slug}`,pinned:t.data.pinned})},[r,l,e,a,o]),ty.createElement(ty.Fragment,null,i&&ty.createElement(tg.Box,null,ty.createElement(iw,{item:i,isLink:!0,isRecentProject:!0})))},iS=({recentProjects:e})=>ty.createElement(tg.Box,null,ty.createElement(ib,{title:"Recent Projects",icon:"clock"}),ty.createElement(tg.VStack,{pl:7,spacing:4,pt:4},e?.map(e=>ty.createElement(iI,{key:e,projectId:e})))),ij=(0,ak.ss)((0,ak.aZ)(function({workspace:e}){let{isLoggedIn:t}=(0,tF.hD)(),{myPermissions:a,canI:r}=(0,tF.C$)(),{isResponsiveLayoutEnabled:n}=(0,a_.s)(),{groupedTOCItems:o,ungroupedTOCItems:l,fetching:i}=im(e.id),{TOCItems:s,fetching:c}=id(e.id),u=i||c,d=!!s.length||!!o.length||!!l.length,[m,p]=ty.useState([]);ty.useEffect(()=>{(async()=>{p(await (0,nz.Kh)()??[])})()},[s.length]);let{items:g}=ih(),{items:h}=is({fetching:c,hasProjects:d}),f=r(tU.E4M.WorkspaceFullMember),b=t&&f&&m.length,y=!t||a.length>0;return!u&&y?ty.createElement(tg.Box,{className:"slider-element"},ty.createElement(tg.Box,{px:8,pt:n?void 0:4,pb:8},!n&&ty.createElement(tg.Box,{py:2},ty.createElement(ii.m,null)),ty.createElement(tg.Box,{pt:n?void 0:4,pb:8,my:n?void 0:4,borderB:!0},ty.createElement(iE,{items:g,context:"modules"})),b?ty.createElement(tg.Box,{pt:4,pb:8,my:4,borderB:!0},ty.createElement(iS,{recentProjects:m})," "):null,d?ty.createElement(tg.Box,{pt:4},ty.createElement(ix,{groupedTOCItems:o&&o,ungroupedTOCItems:l&&l,projectsTOCItems:s&&s})):ty.createElement(tg.Box,{pt:4,my:4},ty.createElement(iE,{items:h,context:"modules"})))):ty.createElement(tg.Box,{flexGrow:!0,color:"muted",p:5},ty.createElement(tx.DelayedRender,null,"Loading..."))})),iC=[{key:"branchPathSidebar",path:"docs/:projectSlug/branches/:branchSlug/*",element:ty.createElement(io,{autoNavToFirst:!1})},{key:"branchDefaultSidebar",path:"docs/:projectSlug/branches/:branchSlug",element:ty.createElement(io,{autoNavToFirst:!0})},{key:"projectPathSidebar",path:"docs/:projectSlug/*",element:ty.createElement(io,{autoNavToFirst:!1})},{key:"projectDefaultSidebar",path:"docs/:projectSlug",element:ty.createElement(io,{autoNavToFirst:!0})},{key:"projectSettingsSidebar",path:"settings/:projectSlug/*",element:ty.createElement(io,{autoNavToFirst:!1})},{key:"workspaceExploreSidebar",path:"explore/*",element:ty.createElement(ij,null)},{key:"workspaceExploreSidebar",path:"/*",element:ty.createElement(ij,null)}],iP=()=>ty.createElement(le,null,ty.createElement(tg.Flex,{flex:1,flexDirection:"col",pos:"relative"},ty.createElement(iA,null,ty.createElement(tA.Routes,null,iC.map(e=>ty.createElement(tA.Route,{key:e.key,path:e.path,element:e.element})))))),iA=({children:e})=>{let t=(0,tA.useLocation)();return ty.createElement(iB,{location:t},e)},iB=({children:e,location:t})=>{let a=(0,th.trim)(t.pathname,"/").split("/"),r="docs"===a[0]||"settings"===a[0];return ty.createElement(lQ.A,{className:`transition-group absolute inset-0 overflow-auto ${r?"left":"right"}`},ty.createElement(oW.A,{key:String(r),classNames:"slider",timeout:500},ty.createElement(iD,{location:t},ty.createElement("div",null,e))))},iD=({children:e})=>ty.createElement(tA.Routes,null,ty.createElement(tA.Route,{path:"*",element:e})),iT=({header:e})=>ty.createElement(oH,null,ty.createElement(tg.VStack,{h:"screen",maxH:"screen",style:{minWidth:"var(--left-sidebar-responsive-width)"}},e,ty.createElement(iF,null))),iF=()=>{let{pane:e}=oQ(),[t,a]=ty.useState("default"!==e);return ty.useEffect(()=>{a(!0)},[e]),ty.createElement(lt,null,ty.createElement(tg.Flex,{"data-test":"responsive-sidebar",className:"default"===e?"left":"right",flex:1,flexDirection:"col",pos:"relative",overflowY:"auto",overflowX:"hidden"},ty.createElement(oW.A,{in:t,classNames:"slider",exit:!1,onEntered:()=>{a(!1)},timeout:500},ty.createElement(tg.Box,null,"account"===e?ty.createElement(i$,null):ty.createElement(tg.Box,{className:"slider-element"},ty.createElement(tA.Routes,null,iC.map(e=>ty.createElement(tA.Route,{key:e.key,path:e.path,element:e.element}))),ty.createElement(tg.Box,{mx:8,pt:4,mb:4,borderT:!0},ty.createElement(iN,null)))))))},i$=()=>{let e=(0,tA.useNavigate)(),{effects:t,state:a}=(0,tB.U8)(),{setPane:r}=oQ();return ty.createElement(tg.Box,{className:"slider-element"},ty.createElement(tg.VStack,{px:6,py:2,spacing:4},ty.createElement(ls,{title:"Back to Workspace Sidebar",keepSidebarOpen:!0,icon:["fal","arrow-left"],onClick:()=>r("default")}),ty.createElement(ls,{title:"Account Settings",icon:["fal","cog"],onClick:()=>e("/account")}),ty.createElement(ls,{title:"Product Docs",icon:["fal","book-open"],onClick:()=>window.open(`${ab.wA}?utm_source=stoplight&utm_medium=workspace&utm_campaign=product_docs`,"_self")}),ty.createElement(ls,{title:"Stoplight Blog",icon:["fal","newspaper"],onClick:()=>{t.reporter.log({event:"stoplight_blog_clicked",payload:{location:"user_menu"}}),window.open("https://blog.stoplight.io/?utm_source=stoplight&utm_medium=referral&utm_campaign=sidebar_user_menu","_self")}}),ty.createElement(ls,{title:"Release Notes",icon:["fal","sparkles"],onClick:()=>{t.reporter.log({event:"user_menu_release_notes_clicked"}),window.open("https://docs.stoplight.io/docs/whats-new/?utm_source=stoplight&utm_medium=referral&utm_campaign=sidebar_user_menu","_self")}}),a.workspaces.canI(tU.E4M.WorkspaceProjectsView)&&ty.createElement(ls,{title:"Roadmap",icon:["fal","map-marked-alt"],onClick:()=>e("/roadmap")})))},iN=()=>{let e=lq(),t=(0,tA.useNavigate)();return ty.createElement(tg.VStack,{py:2,spacing:4},e.filter(e=>e.show).map(e=>ty.createElement(ls,{key:e.title,title:e.title,icon:e.icon,onClick:()=>t(e.pathname)})))};function iU({availableMembers:e,availableMembersLoading:t,isDisabled:a,hasExceededLimit:r,roleSelector:n,progressBar:o,selectedOptions:l,setSelectedOptions:i,...s}){let{canI:c}=(0,tF.C$)(),u=c(tU.E4M.WorkspaceMembersInvite),d=iR(l);return ty.createElement(tg.Flex,{"data-test":"expanded-members-select",w:"full",flexDirection:"col",borderColor:"primary",p:2,...s},ty.createElement(tg.Box,{w:"full"},r&&ty.createElement(tg.Box,{"data-test":"member-limit-exceeded",mb:3},o),ty.createElement(iM,null),n,ty.createElement(r4,{"data-test":"workspace-members-select",allowInviteEmails:u&&!r,isDisabled:a,selectedValues:d,onChange:e=>i((e||[]).slice()),members:e,isLoading:t})))}function iM(){return ty.createElement(tg.Box,{mb:3},"Invite team members to collaborate on API designs, view documentation, and access mock servers. Select the members role from the dropdown to set their level of access.",ty.createElement(tg.Link,{ml:2,href:ab.xz.manage_project_access,rel:"noreferrer",target:"_blank"},"Learn More"))}let iR=e=>e.map(e=>rB(e)?{...e,warning:"Guests are now restricted."}:e),iW=(0,ak.aZ)(function({workspace:e,project:t,isOpen:a,onClose:r}){return a?ty.createElement(iL,{project:t,workspace:e,onClose:r}):null});function iL({project:e,workspace:t,onClose:a}){let{canIOnProject:r}=(0,tF.C$)(),{success:n,danger:o}=(0,tF.AO)(),{currentProduct:l}=(0,tM.s)(),{jwt:i}=(0,tF.hD)(),{touchQueries:s}=(0,tF.lN)(),{pathname:c}=(0,tF.ks)(),u=(0,t8.safelyDecodeID)(e.id),{data:d}=(0,tN.useGetProject)(i,{projectId:u},{enabled:!!e.id}),{data:m,isLoading:p,refetch:g}=(0,tN.useListProjectAssignableMembersQuery)(i,{project_id:(0,tN.safelyEncode)(e.id,"prj")}),h=ty.useMemo(()=>m?.items.filter(e=>!!e.type&&!!e.data).map(rU)||[],[m?.items]),[f,b]=ty.useState([]),[y,w]=ty.useState(tU.M2u.Viewer),[E,v]=ty.useState(""),[{fetching:k},_]=ni(u,t.id,E),{execute:x}=r0(t.id),I=(0,rw.wZ)(y),{additionalUsage:S,feature:j,refetch:C,hasExceededLimit:P}=x(I,f),{seatsUsageData:A}=o3(f,I,j);if(ty.useEffect(()=>{s(),v("project_share_dialog")},[s,v,c]),!d)return null;let B=async e=>{await _(e,y),s(),g()},D=r(d.my_permissions,tU.Jg8.ProjectMembersAdd),T=l?.id===tR.WR,F=P&&f.filter(e=>["email"].includes(e.type)).length>0,$=ty.createElement(nl,{onRoleSelected:w,activeRole:y,project:d,isMobile:!0}),N=ty.createElement(tx.BasicProgressBar,{label:`${A.current} / ${A.billingLimit} ${"editors"===j?"Makers+":(0,th.capitalize)(j)}`,hintText:"Member limit reached. Please sign in via desktop to manage / upgrade your account in order to invite more members",value:A.current,maxValue:A.billingLimit}),U=ty.createElement(tg.Flex,{justifyContent:"between"},ty.createElement(tg.Box,{display:"flex",alignItems:"center"},P&&ty.createElement(ty.Fragment,null,T?ty.createElement(tg.Box,{display:"flex",alignItems:"center"},"Please contact your account manager to update the member limit."):ty.createElement(n_.y,{className:"mr-5",feature:j,suffix:"Required",additionalUsage:S,large:!0}))),ty.createElement(rZ,{selectedOptions:f},e=>ty.createElement("div",null,ty.createElement(tg.Button,{loading:!1,appearance:"primary",onPress:()=>{B(f).then(()=>{b([]),w(tU.M2u.Viewer),C(),a(),n({message:`${tV()("Member",f.length)} Added Successfully!`})}).catch(e=>{e instanceof Error&&o({message:`${e.message}`})})},icon:"paper-plane",disabled:k||!e||!f.length||F,style:{minWidth:"fit-content"}},"Send Invites"))));return ty.createElement(tg.Modal,{title:"Share This Doc by Adding Workspace Members",isOpen:!0,onClose:a,footer:U,size:"expand"},ty.createElement(tg.Flex,{overflowY:"hidden",flexDirection:"col",h:"full"},ty.createElement(tg.VStack,{spacing:3,mt:3,divider:!0,h:"full"},ty.createElement(iU,{isDisabled:!D,availableMembersLoading:p,availableMembers:h,selectedOptions:f,setSelectedOptions:b,hasExceededLimit:P,roleSelector:$,progressBar:N}))))}let iG=()=>{let{currentWorkspace:e,canI:t}=(0,tF.C$)(),{actions:a}=(0,tB.U8)(),r=(0,tA.useLocation)(),{setResponsiveSidebarOpen:n,setInviteMembersDialogOpen:o}=(0,tF.L3)(),{responsiveSidebarOpen:l,inviteMembersDialogOpen:i}=(0,tF.tz)(),s=(0,oU.matchPath)("/docs/:projectSlug/*",r.pathname),c=s?.params?.projectSlug,u=(e=!l)=>{n(!!e)},d="/"===r.pathname;if(ty.useEffect(()=>{d||n(!1)},[d,n]),ty.useEffect(()=>{l?(oR("TopNav--mosaic",0),oR("banner-enabled",0)):(oR("TopNav--mosaic",20),oR("banner-enabled",20))},[l]),ty.useEffect(()=>{oM.initialize()},[]),!e)return ty.createElement(ty.Fragment,null);let m=t(tU.E4M.WorkspaceProjectsCreate);return ty.createElement(tg.Flex,{className:"TopNav--mosaic",alignItems:"center",h:"3xl",pl:4,pr:4,bg:"canvas",borderB:!0,pos:"fixed",w:"full",zIndex:l?0:20},ty.createElement(tg.Flex,{"data-test":"mobile-top-nav",w:"full",alignItems:"center"},c?ty.createElement(iz,{projectSlug:c,workspaceId:e.id,onSidebarTogglePress:u}):ty.createElement(iO,{workspaceName:e.name,onSidebarTogglePress:u})),ty.createElement(tg.Drawer,{isOpen:l,onClose:()=>n(!1),position:"left",zIndex:20},ty.createElement(iT,{header:ty.createElement(tg.Flex,{py:4,w:"full",px:3},ty.createElement(tg.Button,{"data-test":"hide-left-sidebar-btn",appearance:"minimal",onPress:()=>u(!1)},ty.createElement(tg.Icon,{icon:"bars"})),ty.createElement(tg.Flex,{fontSize:"xl",fontWeight:"semibold",flexGrow:!0,justifyContent:"center",flexDirection:"col",px:3},e.name),m?ty.createElement(ln,null):null)})),ty.createElement(o8,{onOpen:()=>{},className:"z-20",isOpen:i,setIsOpen:o,onInvitesSent:()=>{a.members.touchQueries()},workspaceId:e.id}))},iO=({workspaceName:e,onSidebarTogglePress:t})=>ty.createElement(ty.Fragment,null,ty.createElement(tg.Button,{"data-test":"show-left-sidebar-btn",onPress:()=>t(),appearance:"minimal"},ty.createElement(tg.Icon,{icon:"bars"})),ty.createElement(iq,{heading:e}),ty.createElement(ii.m,{onOpen:()=>t(!1)})),iz=({projectSlug:e,workspaceId:t,onSidebarTogglePress:a})=>{let[{data:r}]=(0,nc.wQ)({workspaceId:t,projectSlug:e});return ty.createElement(ty.Fragment,null,ty.createElement(tg.Button,{"data-test":"show-left-sidebar-btn",onPress:()=>a(),appearance:"minimal"},ty.createElement(tg.Icon,{icon:"bars"})),ty.createElement(iq,{heading:r?.name}),ty.createElement(tg.Flex,null,ty.createElement(ii.m,null),r&&ty.createElement(iV,{project:r})))},iq=({heading:e})=>ty.createElement(tg.Flex,{flex:1,"data-test":"mobile-project-top-nav",px:3,style:{minWidth:0}},ty.createElement(tg.Box,{fontSize:"xl",fontWeight:"semibold",whitespace:"nowrap",textOverflow:"overflow-ellipsis",overflowX:"hidden",overflowY:"hidden",w:"full",textAlign:"center"},e)),iV=({project:e})=>{let{isOpen:t,open:a,close:r}=(0,tg.useModalState)(),{isOpen:n,open:o,close:l}=(0,tg.useModalState)(),{canI:i,canIOnProject:s,currentWorkspaceId:c}=(0,tF.C$)(),{jwt:u}=(0,tF.hD)(),{data:d,isLoading:m}=(0,tN.useGetWorkspaceItems)(u,c),p=(0,nc.uI)(),[g,h]=ty.useState();ty.useEffect(()=>{if(!m)for(let t of d?.items||[])t.data.name===e.name&&"project"===t.type&&h(t.data.pinned)},[d,m,e]);let f=!!e&&s(e,tU.Jg8.ProjectMembersAdd)&&i(tU.E4M.WorkspaceFullMember);return ty.createElement(ty.Fragment,null,ty.createElement(tg.Button,{"data-test":"mobile-top-nav-more-options-btn",icon:"ellipsis",appearance:"minimal",size:"md",onPress:()=>{a()}}),ty.createElement(tg.Modal,{isOpen:t,onClose:r,title:"More Options"},ty.createElement(tg.VStack,{divider:!0},f&&ty.createElement(iH,{project:e,onClick:()=>{r(),o()}}),ty.createElement(tg.Button,{appearance:"minimal",size:"md",icon:[g?"fas":"fal","thumbtack"],w:"full",py:5,onPress:()=>{p(e.id,!g).then(()=>{h(!g)})}},ty.createElement(tg.Text,{ml:3,fontWeight:"medium"},g?"Unpin Project":"Pin Project")))),ty.createElement(iW,{isOpen:n,onClose:l,project:e}))},iH=({project:e,onClick:t})=>{let{effects:a}=(0,tB.U8)();return ty.createElement(ty.Fragment,null,ty.createElement(tg.Button,{"data-test":"mobile-top-nav-share-btn",appearance:"minimal",size:"md",icon:["fal","share"],w:"full",py:5,onPress:()=>{a.reporter.log({event:"share_button_clicked",payload:{project_type:e.type??void 0,location:"mobile_top_nav"}}),t()}},ty.createElement(tg.Text,{ml:3,fontWeight:"medium"},"Share Project")))},iQ=({banner:{message:e,intent:t,icon:a,primaryAction:r,secondaryAction:n,htmlId:o},isNonResponsiveBannerShowing:l})=>ty.createElement(tx.Banner,{className:t3()("danger"===t&&"alert-banner-danger"),htmlId:o,message:e,icon:a,primaryAction:r,secondaryAction:n,intent:t,isNonResponsiveBannerShowing:l}),iK=(0,tS.withErrorBoundary)(function({editor:e,leftSidebar:t,className:a,centerEditor:r,...n}){let{state:o,actions:l}=(0,tB.U8)(),i=o.notifications.banner||n.banner,{isLoggedIn:s}=(0,tF.hD)(),{currentWorkspace:c}=(0,tF.C$)(),u=(0,tA.useLocation)(),d=!!c?.features.find(e=>e.feature.name.includes("show_referral_banner")),{isLockPending:m,lockReason:p}=o$(),{isResponsiveLayoutEnabled:g}=(0,a_.s)(),h=m&&s,f=i&&!h,b=d&&!i&&!h,y=o.ui.isNonResponsivePath(u.pathname)&&g&&!o.notifications.responsiveBannerDismissed,w=h||b||f;return ty.createElement(tg.Flex,{w:"full",minH:"screen",fontSize:"base",className:t3()(a,"Page",{"Page--with-banner":w||y,"Page--with-two-banners":w&&y,"Page--with-sidebar":!!t})},ty.createElement(tg.VStack,{className:g?"banner-enabled":"",pos:"fixed",w:"full",zIndex:20},h&&ty.createElement(oN,{isNonResponsiveBannerShowing:y,lockReason:p}),b&&ty.createElement(oD,{isNonResponsiveBannerShowing:y}),f&&ty.createElement(iQ,{banner:i,isNonResponsiveBannerShowing:y}),y&&ty.createElement(oF,null)),g&&ty.createElement(iG,null),ty.createElement(tg.Box,{"data-test":"editor",pos:"relative",flex:1,minH:"full",className:t3()("Editor",{"Editor--centered":r,"Editor--with-topNav":g}),overflowX:g?"scroll":void 0,zIndex:g?0:void 0},e),t&&!g&&ty.createElement(tg.Flex,{className:"LeftSidebar",flexDirection:"col",borderR:!0,onMouseEnter:()=>l.ui.setSidebarFocused(!0),onMouseLeave:()=>l.ui.setSidebarFocused(!1)},t))}),iJ="/oauth/callback",iY={loose:e=>RegExp(`${(0,th.escapeRegExp)(e)}($|/)`,"gi"),exact:e=>RegExp(`^${(0,th.escapeRegExp)(e)}$`,"gi")},iX=(e,t,a=!0)=>(a?iY.exact:iY.loose)(t).test(e),iZ=({isLoading:e,icon:t,iconColor:a,imgUrl:r,title:n,name:o,description:l,actions:i,large:s})=>ty.createElement("header",{className:t3()("flex items-center",{"pb-5":s,"pb-2":!s})},(t||r)&&ty.createElement(tg.Box,{mr:4},ty.createElement(tg.Avatar,{src:r,icon:t,fg:a,size:"2xl",className:t3()({[tj.Classes.SKELETON]:e})})),ty.createElement("div",null,n&&ty.createElement("h1",{className:"uppercase text-sm text-gray-5 tracking-wide mb-px"},n),ty.createElement("div",{className:t3()("text-gray-8 text-xl font-bold -mt-px flex items-center",{[tj.Classes.SKELETON]:e}),"data-test":"tabbed-page-header-name"},o||"loading..."),l&&ty.createElement("p",{className:"text-gray-5 flex items-center text-sm mt-1"},l)),ty.createElement("div",{className:"flex-1"}),i?.length&&ty.createElement("div",{className:"flex-shrink-0 flex items-center ml-5"},i.map((e,t)=>ty.createElement("div",{key:t,className:"ml-3"},e)))),i0=({header:e,children:t,tabs:a,className:r,contentClassName:n,isLoading:o})=>{let l=a?.map((e,t)=>ty.createElement(tk.NavLink,{key:t,to:e.pathname||"",end:!0,onClick:e=>{o&&e.preventDefault()},className:({isActive:e})=>t3()("tracking-wide no-underline flex items-center mr-6 px-px ml-px pt-6 pb-2 hover:text-blue-6",{"border-blue-6 text-blue-6":e,"border-transparent text-gray-5":!e}),style:({isActive:e})=>({borderBottomWidth:3})},e.title));return ty.createElement(ty.Fragment,null,ty.createElement("header",{className:t3()(r,"TabbedPageHeader w-full border-b border-editor sticky inset-y-0 z-10")},e,ty.createElement("div",{className:"w-full flex items-center"},l)),o?ty.createElement("div",{className:"flex flex-1 flex-col justify-center items-center"},ty.createElement(tj.FAIcon,{className:"fa-spin text-6xl text-gray-5",icon:["far","spinner-third"]}),ty.createElement("div",{className:"text-xl font-semibold text-gray-4 mt-8"},"Loading")):ty.createElement("div",{className:t3()(n,"flex relative z-0 flex-grow")},t))},i1=e=>ty.createElement(tg.Container,{pt:{default:8,lg:20},pb:4,px:7,bg:"canvas",...e});var i2=a(42251);let i4=ty.forwardRef((e,t)=>ty.createElement(tj.HTMLSelect,{elementRef:t,...e})),i3=({title:e,icon:t,className:a,actions:r,"data-test":n})=>ty.createElement("div",{className:"flex items-center mb-6 w-full"},ty.createElement("h1",{"data-test":n,className:t3()("pl-2 font-semibold flex items-center text-xl text-gray-8",a)},t&&ty.createElement(tj.FAIcon,{icon:t,className:"mr-4 text-gray-5"})," ",e),r&&ty.createElement("div",{className:"flex flex-1 justify-end items-center"},r)),i5=({title:e,icon:t,containerClassName:a,titleClassName:r,cardClassName:n,children:o,elevation:l=tj.Elevation.TWO,actions:i,"data-test":s})=>ty.createElement("div",{"data-test":s,className:t3()("RaisedPageSection",a)},ty.createElement(i3,{title:e,icon:t,className:r,actions:i}),ty.createElement(tj.Card,{elevation:l,className:t3()(n)},o)),i8=({children:e})=>ty.createElement(i5,{"data-test":"danger-section",title:"Danger Zone",titleClassName:"text-danger text-lg",elevation:tj.Elevation.ZERO},e),i6=({children:e})=>ty.createElement(tg.Box,{as:"main",w:"full",py:16,px:8,mx:"auto",style:{maxWidth:1250}},e);var i7=a(90829),i9=a.n(i7);let se=e=>`https://gravatar.com/avatar/${i9()(e)}?s=250`,st=(0,ak.ss)((0,ak.BZ)(function({currentUser:e}){let{myRoles:t,currentWorkspace:a}=(0,tF.C$)(),r=t.includes(tU.l2p.Guest),n=!a?.guestsReceiveDailyDigest&&r;return ty.createElement(i6,null,ty.createElement(i5,{title:"Account Basics",icon:["fal","user-circle"]},ty.createElement(sa,{user:e})),ty.createElement(i5,{containerClassName:"qa-account-emails",title:"Emails",icon:["fal","at"]},ty.createElement(sr,{user:e})),!n&&ty.createElement(i5,{containerClassName:"qa-account-email-notifications",title:"Notifications",icon:["fal","bell"]},ty.createElement(sn,{user:e})),ty.createElement(tg.Callout,{mt:4,intent:"warning"},ty.createElement("span",null,"Manage your communication preferences via email by scrolling to the bottom of your latest Stoplight email received and clicking ",ty.createElement("strong",null,"Manage Preferences"),".")))}));function sa({user:e}){let{actions:t,effects:a}=(0,tB.U8)(),{register:r,handleSubmit:n,formState:{isValid:o,isSubmitting:l,isDirty:i},reset:s,setValue:c,watch:u}=(0,t5.mN)({mode:"onChange",defaultValues:{username:e.username.match(tm.CI)?"":e.username,avatarUrl:e.avatarUrl,firstName:e.firstName,lastName:e.lastName}}),d=u("avatarUrl"),[,m]=(0,tU.BL3)(),p=async({username:r,avatarUrl:n,firstName:o,lastName:l})=>{let i=e.emails.find(e=>e.primary),c=r||i?.email||e.emails[0].email,{error:u}=await m({userId:e.id,input:{username:c,avatarUrl:n??"",firstName:o,lastName:l}});u?a.notifications.danger({message:u.message||"Something went wrong, please try again"}):(a.notifications.success({message:"Account updated"}),t.auth.refreshCurrentUser(),s({username:r,avatarUrl:n,firstName:o,lastName:l}))};return ty.createElement("form",{onSubmit:n(p)},ty.createElement(tj.FormGroup,{label:"Username",labelFor:"username",helperText:"Lowercase letters, numbers, and hyphens"},ty.createElement(aj,{...r("username",{minLength:2,pattern:tm.$O}),name:"username",id:"username",placeholder:"your-username",autoComplete:"off",autoFocus:!0,large:!0})),ty.createElement(tg.Box,{display:"flex",alignItems:"center",mb:5},ty.createElement(tj.FormGroup,{label:"Avatar URL",labelFor:"avatarUrl",className:"flex-1 mb-0",helperText:"Ideal logo is a square image around 200px by 200px"},ty.createElement(tj.ControlGroup,null,ty.createElement(aj,{...r("avatarUrl",{required:!0,pattern:tm.az}),name:"avatarUrl",id:"avatarUrl",placeholder:"https://i.imgur.com/your-logo.png",className:"flex-1",large:!0}),ty.createElement(tj.Button,{text:"Use Gravatar Image",onClick:()=>{e.emails.find(e=>e.primary)?c("avatarUrl",se(e.emails[0].email)):a.notifications.danger({message:"Could not set gravatar avatar url, no primary email found."})}}))),ty.createElement(tg.Avatar,{ml:4,size:"2xl",src:d??void 0,icon:["fas","user"]})),ty.createElement(tg.Box,{display:"flex",flexDirection:"row",mt:4},ty.createElement(tj.FormGroup,{label:"First Name",labelFor:"firstName",className:"flex-1 mr-6"},ty.createElement(aj,{...r("firstName",{required:!0}),name:"firstName",id:"firstName",type:"text",placeholder:"Bart",fill:!0,large:!0})),ty.createElement(tj.FormGroup,{label:"Last Name",labelFor:"lastName",className:"flex-1"},ty.createElement(aj,{...r("lastName",{required:!0}),name:"lastName",id:"lastName",type:"text",placeholder:"Simpson",fill:!0,large:!0}))),ty.createElement(tj.Button,{type:"submit",className:"mt-3",large:!0,intent:"primary",disabled:!tm.KJ||!o||!i,loading:l},"Save"))}function sr({user:e}){let t=e.emails.slice().sort((e,t)=>e.primary?-1:t.primary?1:e.confirmedAt&&!t.confirmedAt?-1:t.confirmedAt&&!e.confirmedAt?1:e.email<t.email?-1:1);return ty.createElement(tg.VStack,{spacing:4,divider:!0},t.map(e=>ty.createElement(so,{email:e,key:e.id})),ty.createElement(sl,null),ty.createElement(si,{userId:e.id,emails:e.emails}))}function sn({user:e}){let{currentWorkspaceId:t,currentWorkspace:a}=(0,tF.C$)(),{searchParams:r}=(0,tF.ks)(),{danger:n,success:o}=(0,tF.AO)(),{log:l}=(0,tF.pw)(),{refreshCurrentUser:i}=(0,tF.BG)(),[,s]=(0,tU.oLl)(),[c,u]=ty.useState(null),[d,m]=ty.useState(!1);ty.useEffect(()=>{let a=e.workspaceMemberships.find(e=>e.workspace.id===t);u({id:a.id,receiveDailySummary:a.receiveDailySummary})},[t,e.workspaceMemberships]);let p=ty.useCallback(async e=>{let{error:t}=await s({id:c.id,receiveDailySummary:e});t?n({message:t.message||"Something went wrong, please try again later"}):(o({message:`You have ${e?"subscribed to":"unsubscribed from"} the daily summary`}),i())},[i,n,o,s,c]);ty.useEffect(()=>{if(!d&&c){m(!0);let e=r.get("daily_summary");"unsubscribe"===e&&c?.receiveDailySummary?(l({event:"daily_summary_unsubscribe_query_param"}),p(!1)):"subscribe"!==e||c?.receiveDailySummary||(l({event:"daily_summary_subscribe_query_param"}),p(!0))}},[l,n,o,r,p,d,c]);let g=e.emails.find(e=>e.primary)?.email||"your primary email";return ty.createElement(tg.Flex,{alignItems:"center"},ty.createElement(tg.Box,{flexGrow:!0},ty.createElement(tg.Box,{className:"text-lg mr-2"},"Stoplight Daily Digest"),ty.createElement(tg.Box,{className:"mt-1 text-gray-6"},"Receive a daily summary on ",ty.createElement("strong",null,g),". This will only change your daily summary settings for the ",ty.createElement("strong",null,a?.name)," workspace.")),ty.createElement(tg.Switch,{isSelected:c?.receiveDailySummary||!1,disabled:null===c,onChange:e=>{l({event:e?"daily_summary_subscribed":"daily_summary_unsubscribed"}),p(e)}}))}function so({email:e}){let{actions:t,effects:a}=(0,tB.U8)(),[r,n]=ty.useState(!1),[o,l]=ty.useState(!1),[,i]=(0,tU.Tko)(),[,s]=(0,tU.xET)(),{mutateAsync:c}=(0,tN.useConfirmEmailAddressMutation)(),{register:u,handleSubmit:d,formState:{isValid:m,isSubmitting:p}}=(0,t5.mN)({mode:"onChange"}),g=async e=>{try{await c({confirmationCode:e.code}),a.notifications.success({message:"Email confirmed!"})}catch(t){let e="There was a problem confirming your email address";(0,i2.F0)(t)&&(e=t.title),a.notifications.danger({message:e})}finally{await t.auth.refreshCurrentUser()}};return ty.createElement(tg.Box,{display:"flex",flexDirection:"row","data-test":e.email},ty.createElement(tg.VStack,{style:{width:"100%"}},ty.createElement(tg.Box,{mt:2,display:"flex",flexDirection:"row"},ty.createElement(tg.Box,{className:"text-lg flex-grow flex flex-row items-center"},ty.createElement(tg.Box,{className:"mr-4"},e.email)),ty.createElement(tg.Box,{display:"flex",ml:"auto",flexDirection:"row"},ty.createElement(tg.Box,{display:"flex",flexDirection:"row"},!e.confirmedAt&&ty.createElement(tg.Box,{display:"flex",flexDirection:"row"},ty.createElement("form",{className:"m-0",onSubmit:d(g)},ty.createElement(tj.ControlGroup,null,ty.createElement(aj,{readOnly:p,...u("code",{required:!0,minLength:1}),name:"code",placeholder:"abcdef123456",className:"w-32","data-test":"code"}),ty.createElement(tj.Button,{"data-test":"submit-code-btn",disabled:!m,loading:p,intent:"primary",type:"submit",icon:ty.createElement(tj.FAIcon,{icon:["far","sparkles"]})},"Submit Code"))),ty.createElement(tj.Button,{minimal:!0,outlined:!0,icon:ty.createElement(tj.FAIcon,{icon:["far","reply"]}),disabled:o,className:"ml-3","data-test":"resend",onClick:async()=>{l(!0),await a.sleep(2e3);let{error:t}=await s({email:e.email});l(!1),t?a.notifications.danger({message:"Something went wrong, please try again."}):a.notifications.success({message:`A verification email was sent to ${e.email}.`})}},"Resend"))),e.primary?ty.createElement(tj.Tooltip,{content:ty.createElement(ty.Fragment,null,"This is your primary email address.",ty.createElement("br",null),"To remove it, you'll first need to set another email address as primary.")},ty.createElement(tj.Button,{minimal:!0,outlined:!0,icon:ty.createElement(tj.FAIcon,{icon:["fas","trash-alt"]}),intent:"danger",disabled:!0,className:"ml-2"})):ty.createElement(tj.Popover,{isOpen:!o&&r,onClose:()=>{n(!1)},position:tj.Position.TOP_RIGHT,content:ty.createElement(tg.Box,{display:"flex",flexDirection:"col",p:6},ty.createElement(tg.Box,null,"Are you sure you want to remove this email address?"),ty.createElement(tg.Box,{display:"flex",mt:4,justifyContent:"end"},ty.createElement(tj.Button,{minimal:!0,small:!0,className:"mr-2",onClick:()=>n(!1)},"Cancel"),ty.createElement(tj.Button,{intent:"danger",outlined:!0,minimal:!0,small:!0,onClick:async()=>{l(!0),n(!1);let{error:r}=await i({id:e.id});l(!1),r?a.notifications.danger({message:"Something went wrong, please try again."}):(a.notifications.success({message:`${e.email} was removed from your account.`}),await t.auth.refreshCurrentUser())}},"Remove")))},ty.createElement(tj.Button,{minimal:!0,outlined:!0,icon:ty.createElement(tj.FAIcon,{icon:["fas","trash-alt"]}),intent:"danger",disabled:o,onClick:()=>n(!0),className:"ml-3"})))),ty.createElement(tg.Box,{mt:2},e.primary&&ty.createElement(tj.Tag,{intent:"success",minimal:!0,className:"mr-2"},"Primary"),!e.confirmedAt&&ty.createElement(tj.Tag,{intent:"warning",minimal:!0},"Pending Verification"))))}function sl(){let[,e]=(0,tU.YrK)(),[,t]=(0,tU.xET)(),{register:a,handleSubmit:r,formState:{isValid:n,isSubmitting:o},reset:l}=(0,t5.mN)({mode:"onChange"}),{actions:i,effects:s}=(0,tB.U8)(),c=async a=>{let{error:r}=await e({email:a.email});r?s.notifications.danger({message:r.message}):(await t({email:a.email}),s.notifications.success({message:`${a.email} was added. You should receive a confirmation email shortly.`}),await i.auth.refreshCurrentUser(),l({email:""}))};return ty.createElement(tg.Box,{display:"flex",alignItems:"center"},ty.createElement(tg.Box,{display:"flex",className:"flex-1"},ty.createElement("span",{className:"mr-2 text-lg"},"Add an email address")),ty.createElement(tg.Box,null,ty.createElement("form",{className:"m-0",onSubmit:r(c)},ty.createElement(tj.ControlGroup,null,ty.createElement(aj,{readOnly:o,...a("email",{required:!0,pattern:tm.CI,maxLength:255}),name:"email",placeholder:"coolperson@place.com",className:"w-64","data-test":"add-email"}),ty.createElement(tj.Button,{disabled:!n,loading:o,intent:"primary",type:"submit"},"Add Email")))))}function si({userId:e,emails:t}){let{effects:a,actions:r}=(0,tB.U8)(),{register:n,handleSubmit:o,formState:{isSubmitting:l,isDirty:i},reset:s}=(0,t5.mN)({mode:"onChange"}),[,c]=(0,tU.JoT)(),u=t.find(e=>e.primary),d=async({id:n})=>{let o=t.find(e=>e.id===Number(n));if(!o?.confirmedAt){a.notifications.danger({message:"Please confirm this email before setting it to your primary address."});return}let{error:l}=await c({id:n,userId:e});if(l)a.notifications.danger({message:"Something went wrong, please try again."});else{a.notifications.success({message:"Your primary email address was updated."});let e=await r.auth.refreshCurrentUser();e&&s({id:e.emails.find(e=>e.primary)?.id})}};return ty.createElement(tg.Box,{display:"flex",flexDirection:"col"},ty.createElement(tg.Box,{display:"flex"},ty.createElement(tg.Box,{className:"flex-1"},ty.createElement(tg.Box,{mr:2,className:"text-lg"},"Primary email address")),ty.createElement(tg.Box,null,ty.createElement("form",{className:"m-0",onSubmit:o(d)},ty.createElement(tj.ControlGroup,null,ty.createElement(i4,{disabled:l,...n("id"),defaultValue:u?.id,options:t.map(e=>({label:e.email,value:e.id}))}),ty.createElement(tj.Button,{disabled:!i,loading:l,intent:"primary",type:"submit"},"Update"))))),ty.createElement(tg.Box,{mt:2,className:"text-gray-6"},"This email address will be used for account-related notifications and password resets."))}let ss=(0,ak.ss)((0,ak.BZ)(function(){let{state:e}=(0,tB.U8)(),t=e.workspaces.integrations?.filter(e=>e.enabled&&"builtin"!==e.kind),a=e.workspaces.canI(tU.E4M.WorkspaceIntegrationCreateUpdateDelete);return ty.createElement(i6,null,t&&t.length>0?ty.createElement(ty.Fragment,null,ty.createElement(i3,{title:"Connected Accounts",icon:["fal","plug"]}),t.map(e=>ty.createElement(sc,{key:e.id,integration:e,className:"mt-4"}))):ty.createElement(tj.NonIdealState,{icon:"exchange",title:"No configured integrations",description:"This workspace doesn't have any enabled integrations.",action:a?ty.createElement(tk.Link,{className:"reset",to:"/admin/settings"},ty.createElement(tj.Button,{text:"Install some workspace integrations",intent:"primary"})):void 0}))}));function sc({integration:e,className:t}){let{state:a,actions:r,effects:n}=(0,tB.U8)(),[o,l]=ty.useState(!1),[i,s]=ty.useState(!1),[c,u]=ty.useState(!1),[,d]=(0,tU.zub)(),m=aX(),p=a.auth.currentUser?.externalUsers.find(t=>t.workspaceIntegrationId===e.id),g=async t=>{await r.auth.connectIntegration({integration:e,...t}),s(!1),u(!1)};return ty.createElement(tj.Card,{className:t},ty.createElement("div",{className:"flex items-center"},ty.createElement(tj.FAIcon,{icon:tm.Mh[e.kind],size:"3x",style:{color:tm.n9[e.kind]}}),ty.createElement("div",{className:"flex-grow ml-6"},ty.createElement("h3",null,e.name),ty.createElement("div",{className:t3()("mt-2",p?"text-success":"text-gray")},ty.createElement(tj.Icon,{icon:"dot"}),p?"Connected":"Not connected")),p?ty.createElement(tj.Popover,{isOpen:o,onClose:()=>{l(!1)},content:ty.createElement("div",{className:"flex flex-col p-8"},ty.createElement("div",null,"Are you sure you want to disconnect this account?"),ty.createElement("div",{className:"mt-8 flex flex-row justify-end"},ty.createElement(tj.Button,{intent:"danger",icon:"remove",disabled:i,minimal:!0,onClick:async()=>{s(!0);let{error:e}=await d({id:p.id});s(!1),e?n.notifications.danger({message:e.message}):(await r.auth.refreshCurrentUser(),n.notifications.success({message:"Your account was disconnected."})),l(!1)}},"Disconnect"),ty.createElement(tj.Button,{disabled:i,minimal:!0,className:"ml-2",onClick:()=>l(!1)},"Cancel")))},ty.createElement(tj.Button,{disabled:i,intent:"danger",onClick:()=>l(!0)},"Disconnect")):ty.createElement(ty.Fragment,null,ty.createElement(lZ,{title:`${e.name} authentication`,isOpen:c,onClose:()=>{u(!1),s(!1)}},ty.createElement(aN,{integrationKind:e.kind,onSubmit:({username:e,password:t})=>{g({usernameOrEmail:e,password:t})}})),ty.createElement(tj.Button,{intent:"primary",disabled:i,onClick:()=>{let t=tm.xF[e.kind];if(s(!0),(0,aK.Yr)(t,e.config)){let t=m(e.name);t&&g({popup:t});return}(0,aK.LR)(t,e.config)&&u(!0)}},"Connect"))))}let su=(0,ak.ss)((0,ak.BZ)(function(){return ty.createElement(i6,null,ty.createElement(sm,null))})),sd={currentPassword:"current-password",newPassword:"new-password",confirmNewPassword:"confirm-new-password"},sm=()=>{let{state:e,effects:t,actions:a}=(0,tB.U8)(),[,r]=(0,tU.zod)(),{register:n,getValues:o,handleSubmit:l,reset:i,formState:{isValid:s,isSubmitting:c,errors:u}}=(0,t5.mN)({mode:"onChange"}),d=e.auth.currentUser,m=async e=>{let{newPassword:n,currentPassword:o}=e,{error:l}=await r({newPassword:n,currentPassword:o});l?t.notifications.danger({message:l.message||"Something went wrong, please try again in a moment."}):(t.notifications.success({message:"Password updated"}),a.auth.refreshCurrentUser(),i())};return ty.createElement(i5,{title:"Update Account Password",icon:["fal","lock"]},ty.createElement("form",{className:"mt-4",onSubmit:l(m)},d?.hasPassword&&ty.createElement(tj.FormGroup,{intent:u.currentPassword&&"danger",helperText:u.currentPassword?.message,label:"Current Password",labelFor:sd.currentPassword},ty.createElement(aj,{readOnly:c,intent:u.currentPassword&&"danger",placeholder:"******",...n("currentPassword",{required:!0}),id:sd.currentPassword,type:"password",large:!0})),ty.createElement(tj.FormGroup,{intent:u.newPassword&&"danger",helperText:u.newPassword?.message,label:"New Password",labelFor:sd.newPassword},ty.createElement(aj,{readOnly:c,intent:u.newPassword&&"danger",placeholder:"******",...n("newPassword",{required:!0,minLength:6,maxLength:50}),id:sd.newPassword,type:"password",large:!0})),ty.createElement(tj.FormGroup,{intent:u.confirmNewPassword&&"danger",helperText:u.confirmNewPassword?.message,label:"Confirm New Password",labelFor:sd.confirmNewPassword},ty.createElement(aj,{readOnly:c,intent:u.confirmNewPassword&&"danger",placeholder:"******",...n("confirmNewPassword",{required:!0,minLength:6,maxLength:50,validate:e=>{let{newPassword:t}=o();return t===e||"Your passwords don't match, please double-check them."}}),id:sd.confirmNewPassword,type:"password",large:!0})),ty.createElement("div",{className:"mt-8"},ty.createElement(tj.Button,{large:!0,disabled:!s,loading:c,intent:"primary",icon:"floppy-disk",type:"submit",className:"mr-4"},(d?.hasPassword?"Update":"Set")+" Password"))))},sp=(0,ak.ss)((0,ak.BZ)(function({currentUser:e}){return ty.createElement("div",{className:"flex flex-col min-h-screen w-full"},ty.createElement(i0,{isLoading:!1,className:"px-24 pt-10 bg-white",header:ty.createElement(sg,{name:e?.username,logoUrl:e.avatarUrl}),tabs:[{pathname:"basics",title:"Basics"},{pathname:"security",title:"Security"},{pathname:"connected-accounts",title:"Connected Accounts"}]},ty.createElement(rb.default,null,ty.createElement("div",{className:"flex flex-1 relative"},ty.createElement(tA.Routes,null,ty.createElement(tA.Route,{path:"connected-accounts",element:ty.createElement(ss,null)}),ty.createElement(tA.Route,{path:"security",element:ty.createElement(su,null)}),ty.createElement(tA.Route,{path:"basics",element:ty.createElement(st,null)}),ty.createElement(tA.Route,{path:"*",element:ty.createElement(sh,null)})," ",ty.createElement(tA.Route,{index:!0,element:ty.createElement(tA.Navigate,{to:"basics",replace:!0})})," ")))))})),sg=({name:e,logoUrl:t})=>ty.createElement(iZ,{isLoading:!1,title:"Your Account",large:!0,name:e,imgUrl:t}),sh=(0,ak.ss)(function(){return ty.createElement(tA.Navigate,{to:"basics",replace:!0})}),sf=()=>ty.createElement(tg.Badge,{iconRight:ty.createElement(tg.Icon,{icon:["fas","stars"],style:{color:"#FED556"}}),size:"sm",appearance:"solid",style:{color:"var(--color-on-primary)",fontSize:"10px",border:"0px"},"data-test":"beta-badge",className:"sl-beta-badge"},ty.createElement(tg.Text,{px:.5},"Beta"));var sb=a(9018),sy=a(35179);let sw=e=>{let{state:t,actions:a}=(0,tB.U8)(),r=t.externalDrilldown.integrationId,n=(0,ty.useMemo)(()=>t.workspaces.enabledIntegrations?.filter(({kind:e})=>aK.hJ(tm.xF[e]))||[],[t.workspaces.enabledIntegrations]),o=[];return(0,ty.useEffect)(()=>{let e=parseInt(t.router.searchParams.get("integration")||"",10),r=n.find(({id:t})=>t===e);r&&(a.externalDrilldown.setGitSelected(!0),a.externalDrilldown.setIntegrationId(r.id))},[n,t.router.searchParams,a.externalDrilldown]),e!==tU.$GR.StyleGuide?((t.workspaces?.currentWorkspace?.allowWebProjects||e===tU.$GR.DesignLibrary)&&(o.push({name:"Stoplight Project",type:"divider"},{name:"Create Blank Project",icon:"pencil-ruler",isActive:"blank"===t.externalDrilldown.localProject||!t.externalDrilldown.gitSelected&&!t.externalDrilldown.localProject,onClick(){a.externalDrilldown.setLocalProject("blank")}}),e===tU.$GR.Design&&o.push({name:"Import OpenAPI File",icon:"upload",isActive:"import"===t.externalDrilldown.localProject,onClick(){a.externalDrilldown.setLocalProject("import")}})),n?.length>0&&(o.push({name:"Git Project",type:"divider"},{name:"Create Blank Project",icon:"pencil-ruler",isActive:"blank-git"===t.externalDrilldown.localProject,onClick(){a.externalDrilldown.setLocalProject("blank-git")}}),e===tU.$GR.Design&&o.push(...n.map(e=>({name:`Add from ${e.name}`,icon:sy.Mh[e.kind],isActive:r===e.id&&t.externalDrilldown.gitSelected,onClick(){a.externalDrilldown.setGitSelected(!0),a.externalDrilldown.setIntegrationId(e.id)}})))),e===tU.$GR.Design&&o.push({name:"CLI Project",type:"divider"},{name:"Create Blank Project",icon:"code",isActive:"cli"===t.externalDrilldown.localProject,onClick(){a.externalDrilldown.setLocalProject("cli")}})):(o.push({name:"Create Style Guide",icon:"code",isActive:"blank"===t.externalDrilldown.localProject,onClick(){a.externalDrilldown.setLocalProject("blank")}}),o.push({name:"Import Spectral File",icon:"upload",isActive:"import"===t.externalDrilldown.localProject,onClick(){a.externalDrilldown.setLocalProject("import")}})),o},sE=({workspaceIntegration:e,pause:t})=>{let[{data:a,fetching:r,error:n},o]=(0,tU.ySk)({variables:{workspaceIntegrationId:e?.id},pause:t}),l={integrationId:e?.id,value:"",label:"",isPersonal:!1};return a&&!r&&(l.value=a.getExternalOrgs.find(e=>!e.isPersonal)?.slug||a.getExternalOrgs[0]?.slug),[{data:(0,th.sortBy)(a?.getExternalOrgs||[],e=>e.name.toLowerCase()).map(e=>({label:e.name,value:e.slug,group:e.slug&&e.slug.includes("/")?e.slug.slice(0,e.slug.lastIndexOf("/")):void 0,isPersonal:e.isPersonal})),fetching:r,defaultOrg:l,error:n},o]},sv=({workspaceId:e,onChange:t,defaultGroupSlug:a,disabled:r=!1,defaultValue:n,additionalGroup:o,includeCreateGroupOpt:l=!0,isClearable:i=!0,location:s})=>{let{state:c,effects:u}=(0,tB.U8)(),{data:d}=(0,tN.useGetGroups)(c.auth.jwt,e),m=ty.useMemo(()=>d?d.items:[],[d]),p=c.workspaces.canI(tU.E4M.WorkspaceGroupsCreate),g=(0,tN.useCreateGroup)(c.auth.jwt),{openFormDialog:h}=(0,tx.useFormDialog)(),[f,b]=ty.useState(n||"");ty.useEffect(()=>{if(!f&&m&&a){let e=m.find(e=>e.slug===a);e&&(b(e.id),t(e.id))}},[a,m,n,t,f]);let y=m?m.filter(e=>e.my_permissions.includes(tU.Jd3.GroupProjectsAdd)).map(e=>({label:e.name,value:e.id,meta:`(${e.visibility})`})):[];o&&!y.find(e=>e.value===o.value)&&y.push(o);let w=(0,th.sortBy)(y||[],e=>"string"==typeof e.label?e.label.toLowerCase():e.label),E=[{label:"Create New Group",onPress:()=>h(l_,{title:"Create New Group",onSave:async({name:e,description:a,visibility:r})=>{let n=(0,t8.encodeID)("wk",c.workspaces.currentWorkspaceId||0);try{let{id:o}=await g.mutateAsync({workspaceId:n,name:e,description:a,visibility:r,icon:lh(),iconColor:lb()});u.reporter.log({event:"workspace_create_group",payload:{location:s}}),u.notifications.success({message:"Group Created Successfully!"}),b(o),t(o)}catch(e){u.notifications.danger({message:`${e.message}`})}}})}],v=[{options:w}];return p&&l&&v.push({options:E}),ty.createElement(tg.Select,{appearance:"outlined","aria-label":"Group",options:v,defaultValue:f,placeholder:"Select A Group",isClearable:i,value:f,isDisabled:r,onChange:e=>{b(e),t(e)}})},sk=({defaultGroupSlug:e,setGroupId:t,disabled:a=!1,location:r,additionalGroup:n,defaultValue:o})=>{let{state:l}=(0,tB.U8)(),i=l.features.hasFeature(tU.BAf.Groups),s=l.workspaces.currentWorkspace?.id;return s?ty.createElement(tg.Box,{display:"flex",flexDirection:"row"},ty.createElement(tg.Box,{flexGrow:!0},ty.createElement(sv,{workspaceId:s,defaultGroupSlug:e,onChange:e=>{t(e)},disabled:a||!i,location:r,additionalGroup:n,defaultValue:o})),!i&&ty.createElement(tg.Box,{flexShrink:!0,ml:2},ty.createElement(n_.y,{className:"mt-2",feature:tU.BAf.Groups}))):null};var s_=a(97357),sx=a(70343),sI=a(91087);let sS=({eventLocation:e,importFiles:t,web:a=!1})=>{let{state:r,actions:n,effects:o}=(0,tB.U8)(),l=(0,tv.useQueryClient)(),{createProject:i,createWebProject:s}=(0,sx.b)(),c=(0,tA.useNavigate)();return[async(u,d,m,p)=>{if(!r.workspaces.canI(tU.E4M.WorkspaceProjectsCreate)){o.notifications.warning({message:"You must be a Maker to open this project in Studio. Reach out to your workspace administrator to be granted access."});return}let g=await (0,sI.r)(),h=(0,th.trim)(u),f=h,b=(0,rw.m0)(),y=(0,rw.cF)(),w=p??tU.Tgv.Private;try{if(a){let{data:a,error:r}=await s({name:h,slug:f,visibility:w,iconColor:b,iconName:y,type:tU.HWy.Web,flavor:d,groupId:m},"main");f=await sC(r,a,g),o.reporter.log({event:"workspace_project_added",payload:{project_type:tU.HWy.Web,import_file:t,location:e,project_count:1,groupId:m,visibility:w,flavor:d}})}else{let{data:a,error:r}=await i({name:h,slug:f,visibility:w,iconColor:b,iconName:y,type:tU.HWy.Local});f=await sP(r,a,g),o.reporter.log({event:"workspace_project_added",payload:{project_type:tU.HWy.Local,import_file:t,location:e,project_count:1,groupId:m,visibility:w,flavor:d}})}o.notifications.success({message:(0,s_.v)(d)}),n.projects.touchQueries(),n.projects.refreshSidebarAndProjectsList({queryClient:l}),l.invalidateQueries(tN.workspaceKeys.allState()),o.router.navigate(c,sj(t,f))}catch(e){e instanceof sx.K?o.notifications.warning({message:e.message}):e?.message.match("duplicate")?o.notifications.warning({message:"There is another project in this workspace with the same name. Please choose another one."}):o.notifications.danger({message:e?.message||"Something went wrong, please try again."})}}]},sj=(e,t)=>e?`/studio/${t}?importFiles=true`:`/studio/${t}`,sC=async(e,t,a)=>{if(e)throw e;let r=t?.createYjsDocument;if(!r)throw Error("Failed to create web project");let n=r.branch.project;return await a.upsertProject({id:String(n.id),slug:n.slug,name:n.name,cwd:"/p",yjsDocId:String(r.id)}),n.slug},sP=async(e,t,a)=>{if(e)throw e;let r=t?.createProjects?.returning[0];if(!r)throw Error("Failed to create project");return await a.upsertProject({id:String(r.id),slug:r.slug,name:r.name,cwd:"/p"}),r.slug},sA=({flavor:e,workspace_id:t})=>{let{state:a,actions:r,effects:n}=(0,tB.U8)(),o=(0,tN.useCreateProject)(a.auth.jwt),l=(0,tA.useNavigate)(),i=(0,tv.useQueryClient)();return[async(a,s,c,u)=>{let d;let m=await (0,sI.r)();try{d=await o.mutateAsync({workspace_id:t,name:a,group_id:s,visibility:c,flavor:e}),n.notifications.success({message:(0,s_.v)(e??tU.$GR.StyleGuide)})}catch(e){throw"VALIDATION_ERROR"===e.type&&n.notifications.danger({message:"Invalid Spectral Ruleset Provided",timeout:5e3}),Error(JSON.stringify(e))}await m.upsertProject({id:String(d.id),slug:d.slug,name:d.name,cwd:"/p",yjsDocId:String(d.id)}),n.reporter.log({event:"workspace_project_added",payload:{project_type:tU.HWy.Web,import_file:!1,location:"workspace_add_projects",project_count:1,groupId:s,visibility:c||tU.Tgv.Private,flavor:e}}),i.invalidateQueries(tN.workspaceKeys.allState()),r.projects.touchQueries(),u&&r.projects.setInitialFileUpload({initialFileUpload:u}),n.router.navigate(l,`/studio/${d.slug}`),(0,th.debounce)(()=>r.projects.clearInitialFileUpload())}]},sB=({description:e,flavor:t,projectUsageHint:a})=>ty.createElement("div",{className:"flex flex-col items-center"},ty.createElement(tg.Box,{className:"mb-10 max-w-2xl text-center flex items-center"},ty.createElement(tg.Box,{mr:4},ty.createElement(tg.Icon,{icon:iu[t].icon,className:"text-primary",size:"2x"})),ty.createElement(tg.Text,{color:"body",fontWeight:"semibold",size:"2xl"},iu[t].name+(t!==tU.$GR.DesignLibrary?" Project":""))),ty.createElement("div",{className:"text-gray-5 mb-10 max-w-2xl"},e),ty.createElement(tg.Box,{className:"text-gray-5",mb:1},a)),sD=({onCreate:e,disabled:t})=>{let{effects:a,state:r}=(0,tB.U8)(),n=(0,t5.mN)({mode:"onChange",defaultValues:{visibility:(0,rw.ud)({currentProduct:r.billing.currentProduct})}}),{register:o,handleSubmit:l,setValue:i,watch:s,formState:{isValid:c,isSubmitting:u}}=n,{createProject:d}=(0,sx.b)(),m=s("groupId"),p=s("visibility"),{data:g}=(0,tN.useGetGroup)(r.auth.jwt,m),h=(e=p)=>tU.Tgv.Public===e&&g?.visibility&&g?.visibility==="internal",f=async({name:t,groupId:r,visibility:n})=>{let{error:o,data:l}=await d({name:t,visibility:n,slug:ow()(t).toLowerCase(),iconColor:(0,rw.m0)(),iconName:(0,rw.cF)(),type:tU.HWy.Cli,groupId:r}),i=l?.createProjects?.returning[0];o||!i?o instanceof sx.K?a.notifications.warning({message:o.message}):o?.message.match("duplicate")?a.notifications.warning({message:"There is another project in this workspace with the same name. Please choose another one."}):a.notifications.danger({message:o?.message||"Something went wrong, please try again."}):(a.notifications.success({message:"Project added, redirecting..."}),a.reporter.log({event:"workspace_project_added",payload:{project_type:tU.HWy.Cli,location:"workspace_add_projects",project_count:1,groupId:r,flavor:tU.$GR.Design}}),e&&e({id:i.id,slug:i.slug}))},b=r.router.searchParams.get("group")||"";return ty.createElement(t5.Op,n,ty.createElement("form",{onSubmit:l(f),className:"w-full","data-test":"add-cli-project"},ty.createElement(tj.FormGroup,{className:"w-full"},ty.createElement(tg.VStack,{spacing:3},ty.createElement(lp,{...o("name",{required:!0,minLength:2,maxLength:30}),name:"name",id:"name",className:"w-full",placeholder:"Project Name (Required)",style:{height:"32px"},autoComplete:"off",autoFocus:!0,showRequiredText:!1,rightElement:ty.createElement(nS,{onVisibilityChange:e=>i("visibility",e,{shouldDirty:!0}),groupId:m,defaultValue:(0,rw.ud)({currentProduct:r.billing.currentProduct})})}),ty.createElement(sk,{defaultGroupSlug:b,location:"workspace_add_projects",setGroupId:e=>i("groupId",e)}),h()&&ty.createElement(tg.Box,{textAlign:"left"},ty.createElement(aa,{name:"visibility",messageColor:"warning",errors:{visibility:{message:"A public project can ony be add to a public group."}}})),ty.createElement(tj.Button,{className:"w-full",key:"1",type:"submit",disabled:!c||t||h(),loading:u,intent:"primary"},"Create CLI Project")))))},sT=({value:e,onChange:t,...a})=>{let{state:r}=(0,tB.U8)(),n=ty.useMemo(()=>r.workspaces.enabledIntegrations?.filter(({kind:e})=>aK.hJ(tm.xF[e]))||[],[r.workspaces.enabledIntegrations]),o=n.map(e=>({value:e.id,label:e.name}));return ty.useEffect(()=>{if(!e){let e=r.auth.currentUser?.externalUsers;if(!e)return;let a=e.map(e=>e.workspaceIntegrationId),o=n.find(e=>a.includes(e.id));o&&t(o)}},[n,t,r.auth.currentUser,e]),ty.createElement(tg.Box,{textAlign:"left"},ty.createElement(tg.Text,{style:{color:"grey"},size:"sm",ml:1},"Integration"),ty.createElement(tg.Select,{options:o,appearance:"outlined",value:e?String(e.id):void 0,onChange:e=>{t(n.find(t=>t.id===parseInt(e)))},...a}))},sF=({integration:e,value:t,onChange:a,...r})=>{let{state:n}=(0,tB.U8)(),[{data:o,fetching:l,defaultOrg:i}]=sE({workspaceIntegration:e,pause:!e||n.auth?.isConnectingIntegration}),s=o?o.map(e=>({value:e.value,label:e.label.length>40?`...${e.label.slice(-40).trim()}`:e.label})):[];return ty.useEffect(()=>{!o?.find(e=>e.value===t?.value)&&o&&o.length>0&&a(o?.find(e=>e.value===i.value)||o[0])},[o,i,a,t]),ty.createElement(tg.Box,{textAlign:"left"},ty.createElement(tg.Text,{style:{color:"grey"},size:"sm",ml:1},"Organization"),ty.createElement(tg.Select,{isDisabled:0===s.length||!e||l||n.auth?.isConnectingIntegration,defaultValue:i.value,options:s,appearance:"outlined",value:t?.value,onChange:e=>{a(o?.find(t=>t.value===e))},...r}))};var s$=a(94370);!function(e){e.Manual="manual",e.PullRequestMerged="pullRequestMerged",e.PullRequestOpened="pullRequestOpened",e.Push="push"}(o||(o={})),function(e){e.Created="created",e.Denied="denied",e.Disabled="disabled"}(l||(l={})),function(e){e.Article="article",e.HttpOperation="http_operation",e.HttpServer="http_server",e.HttpService="http_service",e.Model="model",e.Unknown="unknown"}(i||(i={})),function(e){e.Internal="internal",e.Private="private",e.Public="public"}(s||(s={})),function(e){e.Internal="internal",e.Private="private",e.Public="public"}(c||(c={})),function(e){e.Asc="ASC",e.Desc="DESC"}(u||(u={})),function(e){e.Asc="asc",e.AscNullsFirst="asc_nulls_first",e.AscNullsLast="asc_nulls_last",e.Desc="desc",e.DescNullsFirst="desc_nulls_first",e.DescNullsLast="desc_nulls_last"}(d||(d={})),function(e){e.BillingProductId="billingProductId",e.FeatureId="featureId",e.Id="id",e.MaxQuantity="maxQuantity"}(m||(m={})),function(e){e.Basic="basic",e.Enterprise="enterprise",e.Free="free",e.ProTeam="pro_team",e.Startup="startup"}(p||(p={})),function(e){e.Comment="comment",e.Value="value"}(g||(g={})),function(e){e.Description="description",e.Id="id",e.IncludedMembers="includedMembers",e.Name="name",e.Priority="priority"}(h||(h={})),function(e){e.Comment="comment",e.Value="value"}(f||(f={})),function(e){e.BaseUri="baseUri",e.BranchId="branchId",e.CreatedAt="createdAt",e.Id="id",e.Internal="internal",e.IsFile="isFile",e.IsLatestVersion="isLatestVersion",e.Name="name",e.NodeId="nodeId",e.Slug="slug",e.SnapshotId="snapshotId",e.StableId="stable_id",e.Tsv="tsv",e.UpdatedAt="updatedAt",e.Version="version"}(b||(b={})),function(e){e.BranchesPkey="branches_pkey",e.BranchesProjectIdShareTokenKey="branches_project_id_share_token_key",e.BranchesProjectIdSlugKey="branches_project_id_slug_key"}(y||(y={})),function(e){e.ArticleCount="articleCount",e.BaselineBranchId="baselineBranchId",e.CommitHash="commitHash",e.CreatedAt="createdAt",e.HttpOperationCount="httpOperationCount",e.HttpServiceCount="httpServiceCount",e.Id="id",e.IsDefault="isDefault",e.IsPublished="isPublished",e.LastAnalyzedAt="lastAnalyzedAt",e.ModelCount="modelCount",e.Name="name",e.NodeCount="nodeCount",e.ProjectId="projectId",e.ShareEnabled="shareEnabled",e.ShareToken="shareToken",e.Slug="slug",e.StartCommitSha="start_commit_sha",e.TableOfContentsCount="tableOfContentsCount",e.UpdatedAt="updatedAt"}(w||(w={})),function(e){e.CommitHash="commitHash",e.IsDefault="isDefault",e.IsPublished="isPublished",e.Name="name",e.ShareEnabled="shareEnabled",e.ShareToken="shareToken",e.StartCommitSha="start_commit_sha"}(E||(E={})),function(e){e.ChildBranchNodeId="childBranchNodeId",e.ChildNodeType="childNodeType",e.ChildNodeUri="childNodeUri",e.ChildSnapshotData="childSnapshotData",e.Id="id",e.ParentBranchNodeId="parentBranchNodeId"}(v||(v={})),function(e){e.Id="id",e.ProjectId="project_id",e.Sha="sha"}(k||(k={})),function(e){e.EmailsEmailKey="emails_email_key",e.EmailsPkey="emails_pkey"}(_||(_={})),function(e){e.ConfirmedAt="confirmedAt",e.CreatedAt="createdAt",e.Email="email",e.Id="id",e.Primary="primary",e.UpdatedAt="updatedAt",e.UserId="userId"}(x||(x={})),function(e){e.Email="email",e.Primary="primary"}(I||(I={})),function(e){e.CreatedAt="createdAt",e.Data="data",e.ExternalId="externalId",e.Id="id",e.UpdatedAt="updatedAt",e.UserId="userId",e.WorkspaceIntegrationId="workspaceIntegrationId"}(S||(S={})),function(e){e.ActivityLogs="activity_logs",e.ApiAccess="api_access",e.Changelogs="changelogs",e.CustomDomain="custom_domain",e.CustomGitIntegration="custom_git_integration",e.CustomTheme="custom_theme",e.DependencyGraph="dependency_graph",e.DesignLibrary="design_library",e.DesignLibraryMasking="design_library_masking",e.Discussions="discussions",e.Editors="editors",e.Favicon="favicon",e.GoogleTagManager="google_tag_manager",e.Groups="groups",e.Guests="guests",e.GuestsAsMembers="guests_as_members",e.HostedMocking="hosted_mocking",e.Localizejs="localizejs",e.Members="members",e.MultiBranch="multi_branch",e.OauthClientApps="oauth_client_apps",e.PrivateProjects="private_projects",e.Projects="projects",e.Redirects="redirects",e.SamlLdapIntegration="saml_ldap_integration",e.ShowReferralBanner="show_referral_banner",e.StyleGuides="style_guides",e.Teams="teams",e.Viewers="viewers",e.Whitelabel="whitelabel",e.WhitelistedDomains="whitelisted_domains",e.WorkspaceClientExportRateLimitPerMinute="workspace_client_export_rate_limit_per_minute"}(j||(j={})),function(e){e.Comment="comment",e.Value="value"}(C||(C={})),function(e){e.Limit="limit",e.Toggle="toggle"}(P||(P={})),function(e){e.Comment="comment",e.Value="value"}(A||(A={})),function(e){e.Id="id",e.Name="name",e.Type="type"}(B||(B={})),function(e){e.GroupDelete="group_delete",e.GroupLeave="group_leave",e.GroupMemberAdd="group_member_add",e.GroupMemberDelete="group_member_delete",e.GroupMemberRead="group_member_read",e.GroupProjectsAdd="group_projects_add",e.GroupProjectsRemove="group_projects_remove",e.GroupRead="group_read",e.GroupSettingsView="group_settings_view",e.GroupUpdate="group_update"}(D||(D={})),function(e){e.Comment="comment",e.Value="value"}(T||(T={})),function(e){e.Permission="permission",e.Role="role"}(F||(F={})),function(e){e.Admin="admin",e.WorkspaceGlobalAdmin="workspace_global_admin"}($||($={})),function(e){e.GroupId="group_id",e.GroupMemberId="group_member_id",e.Permission="permission",e.Role="role",e.UserId="user_id",e.WorkspaceId="workspace_id"}(N||(N={})),function(e){e.AzureDevopsServer="azure_devops_server",e.AzureDevopsServices="azure_devops_services",e.BitbucketCloud="bitbucket_cloud",e.BitbucketDataCenter="bitbucket_data_center",e.Builtin="builtin",e.Github="github",e.Gitlab="gitlab",e.Ldap="ldap",e.Saml="saml"}(U||(U={})),function(e){e.Config="config",e.CreatedAt="createdAt",e.Id="id",e.Kind="kind",e.Name="name",e.Shortcode="shortcode",e.UpdatedAt="updatedAt"}(M||(M={})),function(e){e.MasksDataHashKey="masks_data_hash_key",e.MasksPkey="masks_pkey"}(R||(R={})),function(e){e.Data="data",e.DataHash="dataHash",e.Id="id"}(W||(W={})),function(e){e.Data="data",e.DataHash="dataHash"}(L||(L={})),function(e){e.Additional="additional",e.Content="content",e.Name="name",e.Node="node",e.Operation="operation",e.Optional="optional",e.Parameter="parameter",e.Required="required",e.Response="response",e.Server="server",e.Spec="spec",e.Text="text",e.Type="type",e.Unknown="unknown"}(G||(G={})),function(e){e.Added="added",e.Code="code",e.Cookie="cookie",e.Deprecated="deprecated",e.Description="description",e.First="first",e.Header="header",e.JsonSchema="json_schema",e.Last="last",e.MediaType="media_type",e.Name="name",e.Path="path",e.Property="property",e.Query="query",e.RequestBody="request_body",e.Security="security",e.Success="success",e.TwoXx="two_xx",e.Unknown="unknown"}(O||(O={})),function(e){e.Add="add",e.Copy="copy",e.Move="move",e.Remove="remove",e.Replace="replace",e.Test="test",e.Text="text",e.Unknown="unknown"}(z||(z={})),function(e){e.Major="major",e.Minor="minor",e.Patch="patch",e.Unknown="unknown"}(q||(q={})),function(e){e.BranchId="branchId",e.Code="code",e.Context="context",e.CreatedAt="createdAt",e.Data="data",e.Id="id",e.Level="level",e.Message="message",e.NodeId="nodeId",e.Operation="operation",e.Path="path",e.Semver="semver",e.UpdatedAt="updatedAt"}(V||(V={})),function(e){e.Apng="apng",e.Avif="avif",e.Bmp="bmp",e.Gif="gif",e.Javascript="javascript",e.Jpeg="jpeg",e.Json="json",e.Markdown="markdown",e.Png="png",e.Svg="svg",e.Webp="webp",e.Yaml="yaml"}(H||(H={})),function(e){e.Link="link",e.Parent="parent",e.Ref="ref"}(Q||(Q={})),function(e){e.Generic="generic",e.Image="image",e.JsonSchema="json_schema",e.Markdown="markdown",e.Md="md",e.Oas2="oas2",e.Oas3="oas3",e.SpectralRuleset="spectral_ruleset",e.Styleguide="styleguide",e.TableOfContents="table_of_contents"}(K||(K={})),function(e){e.Article="article",e.Generic="generic",e.HttpOperation="http_operation",e.HttpServer="http_server",e.HttpService="http_service",e.Image="image",e.Model="model",e.SpectralRuleset="spectral_ruleset",e.Styleguide="styleguide",e.TableOfContents="table_of_contents",e.Unknown="unknown"}(J||(J={})),function(e){e.Comment="comment",e.Value="value"}(Y||(Y={})),function(e){e.ByteSize="byteSize",e.CreatedAt="createdAt",e.Data="data",e.DataHash="dataHash",e.DataSize="dataSize",e.Id="id",e.Spec="spec",e.Summary="summary",e.TagNames="tagNames",e.Type="type",e.UpdatedAt="updatedAt"}(X||(X={})),function(e){e.CreatedAt="createdAt",e.Format="format",e.Id="id",e.Uri="uri"}(Z||(Z={})),function(e){e.ProjectRead="project_read",e.WorkspaceActivityRead="workspace_activity_read",e.WorkspaceAddAdmin="workspace_add_admin",e.WorkspaceAddBilling="workspace_add_billing",e.WorkspaceAddGuest="workspace_add_guest",e.WorkspaceAddMaker="workspace_add_maker",e.WorkspaceAddOwner="workspace_add_owner",e.WorkspaceAddViewer="workspace_add_viewer",e.WorkspaceAutomationLogsView="workspace_automation_logs_view",e.WorkspaceBilling="workspace_billing",e.WorkspaceDefaultStyleGuidesCreate="workspace_default_style_guides_create",e.WorkspaceEmailDomainCreateUpdateDelete="workspace_email_domain_create_update_delete",e.WorkspaceEmailDomainRead="workspace_email_domain_read",e.WorkspaceExplorerView="workspace_explorer_view",e.WorkspaceFullMember="workspace_full_member",e.WorkspaceGlobalAdmin="workspace_global_admin",e.WorkspaceGlobalWrite="workspace_global_write",e.WorkspaceGroupsCreate="workspace_groups_create",e.WorkspaceGroupsView="workspace_groups_view",e.WorkspaceIntegrationCreateUpdateDelete="workspace_integration_create_update_delete",e.WorkspaceInternalGroupsRead="workspace_internal_groups_read",e.WorkspaceInternalProjectsJoin="workspace_internal_projects_join",e.WorkspaceInternalProjectsRead="workspace_internal_projects_read",e.WorkspaceMembersApprove="workspace_members_approve",e.WorkspaceMembersDelete="workspace_members_delete",e.WorkspaceMembersInvite="workspace_members_invite",e.WorkspaceMembersPendingRead="workspace_members_pending_read",e.WorkspaceMembersPromote="workspace_members_promote",e.WorkspaceMembersRead="workspace_members_read",e.WorkspaceOauthClientCreateUpdateDelete="workspace_oauth_client_create_update_delete",e.WorkspacePrivateProjectsRead="workspace_private_projects_read",e.WorkspaceProjectsCreate="workspace_projects_create",e.WorkspaceProjectsView="workspace_projects_view",e.WorkspacePublicProjectsJoin="workspace_public_projects_join",e.WorkspaceSettingsCreateUpdateDelete="workspace_settings_create_update_delete",e.WorkspaceSettingsRead="workspace_settings_read",e.WorkspaceStyleguideProjectsCreate="workspace_styleguide_projects_create",e.WorkspaceTeamCreate="workspace_team_create",e.WorkspaceTeamsView="workspace_teams_view",e.WorkspaceUnpublishedBranchesRead="workspace_unpublished_branches_read"}(ee||(ee={})),function(e){e.Comment="comment",e.Value="value"}(et||(et={})),function(e){e.Design="design",e.DesignLibrary="design_library",e.StyleGuide="style_guide"}(ea||(ea={})),function(e){e.Editor="editor",e.Inherit="inherit",e.Viewer="viewer"}(er||(er={})),function(e){e.Comment="comment",e.Value="value"}(en||(en={})),function(e){e.CreatedAt="createdAt",e.Id="id",e.ProjectId="projectId",e.Role="role",e.UpdatedAt="updatedAt",e.UserId="userId",e.WorkspaceId="workspaceId"}(eo||(eo={})),function(e){e.ProjectAdminAdd="project_admin_add",e.ProjectAutomationLogsRead="project_automation_logs_read",e.ProjectBranchCreateDelete="project_branch_create_delete",e.ProjectBranchUpdate="project_branch_update",e.ProjectContentsUpdate="project_contents_update",e.ProjectDelete="project_delete",e.ProjectEditorAdd="project_editor_add",e.ProjectGroupUpdate="project_group_update",e.ProjectLeave="project_leave",e.ProjectMemberDelete="project_member_delete",e.ProjectMembersAdd="project_members_add",e.ProjectOwnershipUpdate="project_ownership_update",e.ProjectPublishedBranchRead="project_published_branch_read",e.ProjectRead="project_read",e.ProjectSettingsView="project_settings_view",e.ProjectUnpublishedBranchRead="project_unpublished_branch_read",e.ProjectUpdate="project_update",e.ProjectViewerAdd="project_viewer_add"}(el||(el={})),function(e){e.Comment="comment",e.Value="value"}(ei||(ei={})),function(e){e.CiToken="ci_token",e.ProjectId="project_id"}(es||(es={})),function(e){e.Permission="permission",e.Role="role"}(ec||(ec={})),function(e){e.Admin="admin",e.Editor="editor",e.Guest="guest",e.Owner="owner",e.Viewer="viewer",e.WorkspaceGlobalAdmin="workspace_global_admin"}(eu||(eu={})),function(e){e.Comment="comment",e.Value="value"}(ed||(ed={})),function(e){e.Cli="cli",e.Local="local",e.Vcs="vcs",e.Web="web"}(em||(em={})),function(e){e.Permission="permission",e.ProjectId="project_id",e.Role="role",e.UserId="user_id",e.WorkspaceId="workspace_id",e.WorkspaceMemberId="workspace_member_id"}(ep||(ep={})),function(e){e.Internal="internal",e.Private="private",e.Public="public"}(eg||(eg={})),function(e){e.ProjectsCiTokenKey="projects_ci_token_key",e.ProjectsIdGroupIdKey="projects_id_group_id_key",e.ProjectsPkey="projects_pkey",e.ProjectsWorkspaceIdSlugIdx="projects_workspace_id_slug_idx",e.ProjectsWorkspaceIdSlugKey="projects_workspace_id_slug_key",e.ProjectsWorkspaceIntegrationIdExternalIdKey="projects_workspace_integration_id_external_id_key"}(eh||(eh={})),function(e){e.AutoInviteCommitters="autoInviteCommitters",e.CreatedAt="createdAt",e.CreatorId="creatorId",e.Description="description",e.ExternalId="externalId",e.ExternalOrgSlug="externalOrgSlug",e.ExternalSlug="externalSlug",e.ExternalStarCount="externalStarCount",e.Flavor="flavor",e.GroupId="groupId",e.GroupRole="groupRole",e.IconColor="iconColor",e.IconName="iconName",e.Id="id",e.IsDefaultStyleGuide="isDefaultStyleGuide",e.IsDesignLibrary="isDesignLibrary",e.MigratedFromClassicProjectId="migrated_from_classic_project_id",e.MigratedFromNextProjectId="migrated_from_next_project_id",e.Name="name",e.Pinned="pinned",e.RemoteUrlHttp="remoteUrlHttp",e.RemoteUrlSsh="remoteUrlSsh",e.Slug="slug",e.Type="type",e.UpdatedAt="updatedAt",e.UseLegacyExporter="useLegacyExporter",e.Visibility="visibility",e.WorkspaceId="workspaceId",e.WorkspaceIntegrationId="workspaceIntegrationId"}(ef||(ef={})),function(e){e.AutoInviteCommitters="autoInviteCommitters",e.Description="description",e.ExternalId="externalId",e.ExternalOrgSlug="externalOrgSlug",e.ExternalSlug="externalSlug",e.ExternalStarCount="externalStarCount",e.GroupId="groupId",e.GroupRole="groupRole",e.IconColor="iconColor",e.IconName="iconName",e.IsDesignLibrary="isDesignLibrary",e.Name="name",e.RemoteUrlHttp="remoteUrlHttp",e.RemoteUrlSsh="remoteUrlSsh",e.Slug="slug",e.Type="type",e.Visibility="visibility",e.WorkspaceIntegrationId="workspaceIntegrationId"}(eb||(eb={})),function(e){e.AllowUserLogin="allow_user_login",e.AllowUserRegister="allow_user_register",e.Config="config",e.Enabled="enabled",e.Id="id",e.IntegrationId="integration_id",e.Kind="kind",e.Name="name",e.WorkspaceId="workspace_id"}(ey||(ey={})),function(e){e.Admin="admin",e.Billing="billing",e.Guest="guest",e.Maker="maker",e.Owner="owner",e.ProjectExport="project_export",e.Viewer="viewer"}(ew||(ew={})),function(e){e.Comment="comment",e.Value="value"}(eE||(eE={})),function(e){e.Permission="permission",e.Role="role"}(ev||(ev={})),function(e){e.Id="id",e.Priority="priority",e.Role="role"}(ek||(ek={})),function(e){e.Billing="billing",e.EmailServer="email_server"}(e_||(e_={})),function(e){e.Comment="comment",e.Value="value"}(ex||(ex={})),function(e){e.Id="id",e.Name="name"}(eI||(eI={})),function(e){e.StarsNodeIdUserIdProjectIdKey="stars_node_id_user_id_project_id_key",e.StarsPkey="stars_pkey"}(eS||(eS={})),function(e){e.CreatedAt="createdAt",e.Id="id",e.NodeId="nodeId",e.ProjectId="projectId",e.UserId="userId"}(ej||(ej={})),function(e){e.NodeId="nodeId",e.ProjectId="projectId"}(eC||(eC={})),(eP||(eP={})).IsFreshInstall="is_fresh_install",function(e){e.DurationMs="duration_ms",e.Error="error",e.Id="id",e.JobId="job_id",e.LogLevel="log_level",e.LoggedAt="logged_at",e.Message="message",e.Meta="meta",e.ProjectId="project_id",e.Success="success",e.TaskId="task_id",e.WorkspaceId="workspace_id"}(eA||(eA={})),function(e){e.Id="id",e.JobId="jobId",e.LogLevel="logLevel",e.LoggedAt="loggedAt",e.Message="message",e.Meta="meta",e.TaskId="taskId",e.WorkspaceId="workspaceId"}(eB||(eB={})),function(e){e.Depth="depth",e.FromBranchNodeId="fromBranchNodeId",e.FromBranchNodeName="fromBranchNodeName",e.FromBranchNodePath="fromBranchNodePath",e.FromBranchNodeType="fromBranchNodeType",e.FromBranchNodeUri="fromBranchNodeUri",e.FromBranchNodeVersion="fromBranchNodeVersion",e.Id="id",e.ToBranchNodeId="toBranchNodeId",e.ToBranchNodeName="toBranchNodeName",e.ToBranchNodePath="toBranchNodePath",e.ToBranchNodeType="toBranchNodeType",e.ToBranchNodeUri="toBranchNodeUri",e.ToBranchNodeVersion="toBranchNodeVersion",e.Type="type"}(eD||(eD={})),function(e){e.BranchCommitHash="branch_commit_hash",e.BranchId="branch_id",e.BranchIsDefault="branch_is_default",e.BranchNodeId="branch_node_id",e.BranchNodeInternal="branch_node_internal",e.BranchNodeIsFile="branch_node_is_file",e.BranchNodeIsLatestVersion="branch_node_is_latest_version",e.BranchNodeName="branch_node_name",e.BranchNodeSlug="branch_node_slug",e.BranchNodeStableId="branch_node_stable_id",e.BranchNodeVersion="branch_node_version",e.BranchSlug="branch_slug",e.HighlightedData="highlighted_data",e.HighlightedName="highlighted_name",e.HighlightedSummary="highlighted_summary",e.Id="id",e.NodeId="node_id",e.NodeUri="node_uri",e.ProjectDescription="project_description",e.ProjectIconName="project_icon_name",e.ProjectId="project_id",e.ProjectIsDesignLibrary="project_is_design_library",e.ProjectName="project_name",e.ProjectSlug="project_slug",e.ProjectVisibility="project_visibility",e.Score="score",e.SnapshotId="snapshot_id",e.SnapshotSpec="snapshot_spec",e.SnapshotSummary="snapshot_summary",e.SnapshotTagNames="snapshot_tag_names",e.SnapshotType="snapshot_type",e.SnapshotUpdatedAt="snapshot_updated_at",e.WorkspaceId="workspace_id"}(eT||(eT={})),function(e){e.DurationMs="durationMs",e.JobId="jobId",e.Payload="payload",e.ProjectId="projectId",e.StartedAt="startedAt",e.Status="status",e.TaskId="taskId",e.TaskJobId="task_job_id",e.WorkspaceId="workspaceId"}(eF||(eF={})),function(e){e.AvatarUrl="avatarUrl",e.BetaWebProjects="betaWebProjects",e.CreatedAt="createdAt",e.FirstName="firstName",e.Id="id",e.IsSiteAdmin="isSiteAdmin",e.LastName="lastName",e.LastSeenAt="lastSeenAt",e.SurveyCollaboration="surveyCollaboration",e.SurveyCompanyName="surveyCompanyName",e.SurveyDesign="surveyDesign",e.SurveyExternalDocs="surveyExternalDocs",e.SurveyGovernance="surveyGovernance",e.SurveyInternalDocs="surveyInternalDocs",e.SurveyMocking="surveyMocking",e.SurveyNumApis="surveyNumApis",e.SurveyOpenapiUsage="surveyOpenapiUsage",e.SurveyPersona="surveyPersona",e.SurveySpeakToProductExpert="surveySpeakToProductExpert",e.SurveyUc="surveyUC",e.Timezone="timezone",e.UpdatedAt="updatedAt",e.Username="username"}(e$||(e$={})),function(e){e.Attempts="attempts",e.CreatedAt="created_at",e.Id="id",e.LastError="last_error",e.MaxAttempts="max_attempts",e.Payload="payload",e.ProjectId="project_id",e.RunAt="run_at",e.Task="task",e.UpdatedAt="updated_at",e.WorkspaceId="workspace_id"}(eN||(eN={})),(eU||(eU={})).WorkspaceDefaultStyleguidesPkey="workspace_default_styleguides_pkey",function(e){e.EnabledForNewProjects="enabledForNewProjects",e.Id="id",e.ProjectId="project_id",e.WorkspaceId="workspace_id"}(eM||(eM={})),function(e){e.EnabledForNewProjects="enabledForNewProjects",e.Id="id",e.ProjectId="project_id",e.WorkspaceId="workspace_id"}(eR||(eR={})),function(e){e.WorkspaceDomainWhitelistPkey="workspace_domain_whitelist_pkey",e.WorkspaceDomainWhitelistWorkspaceIdDomainKey="workspace_domain_whitelist_workspace_id_domain_key"}(eW||(eW={})),function(e){e.Domain="domain",e.Id="id",e.RoleName="roleName",e.WorkspaceId="workspaceId"}(eL||(eL={})),function(e){e.Domain="domain",e.RoleName="roleName"}(eG||(eG={})),function(e){e.FeatureId="featureId",e.Id="id",e.MaxQuantity="maxQuantity",e.WorkspaceId="workspaceId"}(eO||(eO={})),function(e){e.WorkspaceIntegrationsPkey="workspace_integrations_pkey",e.WorkspaceIntegrationsWsIdIntgIdApiUrlKey="workspace_integrations_ws_id_intg_id_api_url_key",e.WorkspaceIntegrationsWsIdIntgIdEntryPointKey="workspace_integrations_ws_id_intg_id_entry_point_key",e.WorkspaceIntegrationsWsIdIntgIdHostUrlKey="workspace_integrations_ws_id_intg_id_host_url_key"}(ez||(ez={})),function(e){e.AllowUserLogin="allowUserLogin",e.AllowUserRegister="allowUserRegister",e.Config="config",e.CreatedAt="createdAt",e.Enabled="enabled",e.Id="id",e.IntegrationId="integrationId",e.Name="name",e.UpdatedAt="updatedAt",e.WorkspaceId="workspaceId"}(eq||(eq={})),(eV||(eV={})).Config="config",function(e){e.CreatedAt="createdAt",e.GroupId="groupId",e.Id="id",e.RoleName="roleName",e.UpdatedAt="updatedAt",e.WorkspaceInvitationId="workspaceInvitationId"}(eH||(eH={})),function(e){e.WorkspaceInvitationProjectsPkey="workspace_invitation_projects_pkey",e.WorkspaceInvitationProjectsWorkspaceInvitationIdProjectI="workspace_invitation_projects_workspace_invitation_id_project_i"}(eQ||(eQ={})),function(e){e.CreatedAt="created_at",e.Id="id",e.ProjectId="project_id",e.RoleName="roleName",e.UpdatedAt="updated_at",e.WorkspaceInvitationId="workspace_invitation_id"}(eK||(eK={})),(eJ||(eJ={})).ProjectId="project_id",function(e){e.WorkspaceInvitationsInviteTokenKey="workspace_invitations_invite_token_key",e.WorkspaceInvitationsPkey="workspace_invitations_pkey",e.WorkspaceInvitationsWorkspaceIdEmailKey="workspace_invitations_workspace_id_email_key"}(eY||(eY={})),function(e){e.CreatedAt="createdAt",e.Email="email",e.Id="id",e.InvitedByUserId="invitedByUserId",e.RoleName="roleName",e.UpdatedAt="updatedAt",e.WorkspaceId="workspaceId"}(eX||(eX={})),(eZ||(eZ={})).UpdatedAt="updatedAt",function(e){e.CreatedAt="createdAt",e.Id="id",e.IsDenied="isDenied",e.UpdatedAt="updatedAt",e.UserId="userId",e.WorkspaceId="workspaceId"}(e0||(e0={})),function(e){e.Id="id",e.Role="role",e.WorkspaceMemberId="workspaceMemberId"}(e1||(e1={})),function(e){e.CreatedAt="createdAt",e.Id="id",e.ReceiveDailySummary="receiveDailySummary",e.ShowOnboardProgress="show_onboard_progress",e.UpdatedAt="updatedAt",e.UserId="userId",e.WorkspaceId="workspaceId"}(e2||(e2={})),function(e){e.Permission="permission",e.Role="role",e.UserId="user_id",e.WorkspaceId="workspace_id",e.WorkspaceMemberId="workspace_member_id"}(e4||(e4={})),function(e){e.Id="id",e.Priority="priority",e.Role="role",e.UserId="user_id",e.WorkspaceId="workspace_id"}(e3||(e3={})),function(e){e.Id="id",e.MaxPriority="max_priority",e.Roles="roles",e.UserId="user_id",e.WorkspaceId="workspace_id"}(e5||(e5={})),function(e){e.AllowPublicProjects="allowPublicProjects",e.AllowSearchIndexing="allowSearchIndexing",e.AllowWebProjects="allowWebProjects",e.CreatedAt="createdAt",e.CreatorId="creatorId",e.Description="description",e.DisableCookieTracking="disableCookieTracking",e.DisableDefaultStyleguideEditing="disableDefaultStyleguideEditing",e.Domain="domain",e.FaviconUrl="faviconUrl",e.GoogleTagManager="googleTagManager",e.GuestsReceiveDailyDigest="guestsReceiveDailyDigest",e.HidePoweredBy="hidePoweredBy",e.HideSignIn="hideSignIn",e.HomeContent="homeContent",e.Id="id",e.IsTrial="isTrial",e.JoinRequestsDisabled="joinRequestsDisabled",e.Localizejs="localizejs",e.LogoUrl="logoUrl",e.MigratedFromClassic="migratedFromClassic",e.MigratedFromNext="migratedFromNext",e.Name="name",e.Redirects="redirects",e.ShowTryit="showTryit",e.ShowTryitMockServer="showTryitMockServer",e.ShowUserway="showUserway",e.Slug="slug",e.Theme="theme",e.UpdatedAt="updatedAt",e.UseAutomaticSsgConversion="useAutomaticSsgConversion",e.UseNewElements="useNewElements"}(e8||(e8={})),function(e){e.YjsDocumentsBranchIdKey="yjs_documents_branch_id_key",e.YjsDocumentsPkey="yjs_documents_pkey"}(e6||(e6={})),function(e){e.BranchId="branchId",e.CreatedAt="createdAt",e.Id="id",e.UpdatedAt="updatedAt"}(e7||(e7={})),(e9||(e9={})).Placeholder="_PLACEHOLDER",(te||(te={})).YjsSnapshotsPkey="yjs_snapshots_pkey",function(e){e.AutoSaved="auto_saved",e.CreatedAt="createdAt",e.DocId="docId",e.Hash="hash",e.Id="id",e.Snapshot="snapshot"}(tt||(tt={})),(ta||(ta={})).Placeholder="_PLACEHOLDER",(0,s$.default)`
    query GetBranchByYjsDocId($id: Int!) {
  branches(where: {yjsDocument: {id: {_eq: $id}}}) {
    id
    slug
    name
    isDefault
  }
}
    `,(0,s$.default)`
    query GetBranchNode($projectSlug: String!, $workspaceSlug: String!, $uri: String!) {
  branchNodes(
    limit: 1
    where: {isLatestVersion: {_eq: true}, branch: {project: {slug: {_eq: $projectSlug}, workspace: {slug: {_eq: $workspaceSlug}}}}, _or: [{baseUri: {_eq: $uri}}, {node: {uri: {_eq: $uri}}}]}
  ) {
    id
    version
  }
}
    `,(0,s$.default)`
    query GetBranchSlugsByProjectId($id: Int!) {
  branches(where: {project: {id: {_eq: $id}}}) {
    id
    slug
    name
    isDefault
  }
}
    `,(0,s$.default)`
    query GetCommitById($id: String!) {
  commit(id: $id) {
    sha
    project_id
  }
}
    `,(0,s$.default)`
    query GetCommitBySha($hash: String!, $projectId: Int!) {
  commits(limit: 1, where: {sha: {_eq: $hash}, project_id: {_eq: $projectId}}) {
    id
  }
}
    `,(0,s$.default)`
    query GetFileBranchNodesByStableId($branchId: Int!, $ids: [String!]!) {
  branchNodes(where: {branchId: {_eq: $branchId}, stable_id: {_in: $ids}}) {
    id
    baseUri
    createdAt
  }
}
    `,(0,s$.default)`
    query GetLatestYjsSnapshot($docId: Int, $autoSaved: Boolean) {
  yjsSnapshots(
    order_by: {createdAt: desc}
    limit: 1
    where: {docId: {_eq: $docId}, auto_saved: {_eq: $autoSaved}}
  ) {
    createdAt
    docId
    id
    snapshot
    hash
  }
}
    `,(0,s$.default)`
    query GetMask($id: Int!) {
  mask(id: $id) {
    id
    data
  }
}
    `,(0,s$.default)`
    query GetYjsSnapshot($id: Int!) {
  yjsSnapshot(id: $id) {
    createdAt
    docId
    id
    snapshot
    hash
  }
}
    `,(0,s$.default)`
    query GetYjsSnapshots($docId: Int, $limit: Int, $offset: Int) {
  yjsSnapshots(
    order_by: {createdAt: asc}
    limit: $limit
    offset: $offset
    where: {docId: {_eq: $docId}}
  ) {
    createdAt
    docId
    id
    snapshot
    hash
  }
}
    `,(0,s$.default)`
    mutation InsertYjsSnapshot($docId: Int!, $snapshot: bytea!, $hash: String!) {
  createYjsSnapshot(object: {docId: $docId, snapshot: $snapshot, hash: $hash}) {
    createdAt
    docId
    id
    snapshot
    hash
  }
}
    `,(0,s$.default)`
    query Me($id: Int!) {
  user(id: $id) {
    id
    username
    avatarUrl
    emails {
      id
      email
      primary
    }
    lastSeenAt
    createdAt
    isSiteAdmin
    externalUsers {
      id
      externalId
      data
      resolvedWorkspaceIntegration {
        id
        integration_id
        workspace_id
        name
        enabled
        kind
        allow_user_login
        allow_user_register
        config
      }
    }
  }
}
    `,(0,s$.default)`
    query searchGraph($search: String, $workspaceId: Int!, $snapshotTypes: _text, $isDesignLibrary: Boolean) {
  sl_sl_search_nodes(
    args: {workspaceid: $workspaceId, search: $search, snapshottypes: $snapshotTypes}
    where: {project_is_design_library: {_eq: $isDesignLibrary}}
    order_by: {branch_node_name: asc}
  ) {
    id
    snapshot_type
    branch_node_name
    branch_node_id
    branch_node_version
    branch_node_stable_id
    project_slug
    project_name
    node_uri
    node_id
    project_is_design_library
  }
}
    `,(0,s$.default)`
    mutation UpsertMask($input: [MaskSelectionInput!]!) {
  upsertMask(maskSelection: $input) {
    __typename
    id
    mask {
      data
      dataHash
    }
  }
}
    `;let sN=({slug:e,workspaceIntegration:t,pause:a})=>{let[{data:r,fetching:n,error:o},l]=(0,tU.tsH)({variables:{slug:e,workspaceIntegrationId:t?.id},pause:a}),i={integrationId:t?.id,value:"",label:"",isPersonal:!1};r&&!n&&(i.value=r.getExternalOrg.slug);let s=r?.getExternalOrg;return[{data:s?{label:s?.name,value:s?.slug,group:s.slug&&s.slug.includes("/")?s.slug.slice(0,s.slug.lastIndexOf("/")):void 0,isPersonal:s.isPersonal,isEnterprise:!!s.isEnterprise}:void 0,fetching:n,defaultOrg:i,error:o},l]},sU={[tU.fxF.Public]:"Anyone",[tU.fxF.Internal]:"Organization members",[tU.fxF.Private]:"Owner and repository members"},sM=[tU.fxF.Public,tU.fxF.Internal,tU.fxF.Private],sR=({integration:e,organization:t,value:a,isDisabled:r,onChange:n,...o})=>{let{state:l}=(0,tB.U8)(),[{data:i,fetching:s}]=sN({slug:t?.value,workspaceIntegration:e,pause:!e||l.auth?.isConnectingIntegration}),c=Object.values(tU.fxF).filter(t=>t!==tU.fxF.Internal||i?.isEnterprise&&e?.kind===U.Github).sort((e,t)=>sM.indexOf(e)-sM.indexOf(t)),u=c.map(e=>({value:e,label:(0,th.capitalize)(e),description:sU[e]}));return ty.useEffect(()=>{let a=e?.config.defaultVisibility;t&&n(a||tU.fxF.Private)},[n,t,e]),ty.createElement(tg.Box,{ml:1,textAlign:"left"},ty.createElement(tg.Text,{style:{color:"grey"},size:"sm"},"Repository Visibility"),ty.createElement(tg.Select,{isDisabled:r||!e||s||l.auth?.isConnectingIntegration,options:u,appearance:"outlined",value:a?String(a):void 0,onChange:e=>{let t=c.find(t=>t===e);t&&n(t)},...o}))},sW="slug-info";function sL(e){return e.repoName&&e.repoName.trim()!==e.repoSlug?ty.createElement(tg.Box,{mt:1,ml:1,textAlign:"left","data-test":sW},ty.createElement(tg.Icon,{icon:["far","circle-info"],size:"sm",style:{color:"grey"}}),ty.createElement(tg.Text,{style:{color:"grey"},size:"sm",ml:1,title:"this version of the project name will be used in URL path segments"},"Your new repository will be created as ",ty.createElement(tg.Text,{fontWeight:"bold"},e.repoSlug),".")):ty.createElement(ty.Fragment,null)}(sL||(sL={})).testId=sW,function(e){e[e.None=0]="None",e[e.Creating=1]="Creating",e[e.Made=2]="Made",e[e.Navigating=3]="Navigating"}(tr||(tr={}));let sG=({disabled:e,actionLabel:t="Create Project"})=>{let{state:a,actions:r,effects:n}=(0,tB.U8)(),[o,l]=ty.useState(),[i,s]=ty.useState(),[c,u]=ty.useState(),[d,m]=ty.useState(),[p,g]=ty.useState(0),[h,f]=ty.useState(),[b,y]=ty.useState((0,rw.ud)({currentProduct:a.billing.currentProduct})),w=(0,tv.useQueryClient)(),E=(0,tA.useNavigate)(),v=void 0!==o&&void 0!==i&&!!d,k=function(e){if(!e)return"";let t=ow()(e,{lower:!0});return t.length<=75?t:t.slice(0,75)}(d),[,_]=(0,tU.eU_)(),x=async()=>{if(void 0!==o&&void 0!==i&&void 0!==d){g(1);try{let e=await _({workspaceIntegrationId:o.id,orgSlug:i.value,repoName:d,repoSlug:k,isPersonal:i.isPersonal,visibility:c}),t=e.data?.createExternalRepository;t?(g(2),r.externalDrilldown.selectProject({owner:i?.value,project:{...t,name:d}}),r.externalDrilldown.addProjects({projects:a.externalDrilldown.selectedProjects,workspaceIntegrationId:o?.id,installWebhooks:!0,destination:"studio",queryClient:w,groupId:h,visibility:b,flavor:a.externalDrilldown.flavor,navigate:E}),g(3),w.invalidateQueries(tN.workspaceKeys.allState())):e.error&&(n.notifications.warning({message:e.error.message}),g(0))}catch{g(0)}}},I=a.auth.currentUser?.externalUsers.find(e=>e.workspaceIntegrationId===o?.id),S=a.router.searchParams.get("group")||"",{data:j}=(0,tN.useGetGroup)(a.auth.jwt,h),C=(e=b)=>tU.Tgv.Public===e&&j?.visibility&&j?.visibility==="internal";return ty.createElement(tj.FormGroup,{className:"w-full"},ty.createElement(tg.VStack,{spacing:3},ty.createElement(tg.HStack,null,ty.createElement(tg.Flex,{w:"full"},ty.createElement(tg.Box,{w:"1/3",mr:1},ty.createElement(sT,{placeholder:"Git Provider","aria-label":"Git Provider",value:o,onChange:l})),ty.createElement(tg.Box,{w:"1/3",ml:1},ty.createElement(sF,{placeholder:"Organization","aria-label":"Organization",integration:o,value:i,onChange:s})),ty.createElement(tg.Box,{w:"1/3",ml:1},ty.createElement(sR,{placeholder:"Repository Visibility","aria-label":"Repository Visibility",integration:o,organization:i,value:c,isDisabled:o&&[tU.KXp.AzureDevopsServer,tU.KXp.AzureDevopsServices].includes(o.kind),onChange:u})))),ty.createElement(tg.VStack,{w:"full"},ty.createElement(tg.Flex,{border:!0},ty.createElement(tg.Input,{appearance:"minimal",required:!0,minLength:1,maxLength:75,disabled:!o||!i||!I||p>0,name:"name",id:"name",placeholder:"Project Name (Required)",autoComplete:"off",flex:1,value:d??"",onChange:e=>m(e.currentTarget.value)}),ty.createElement(tg.Box,{ml:"auto",borderL:!0},ty.createElement(tg.Flex,{alignItems:"center"},ty.createElement(nS,{onVisibilityChange:e=>y(e),groupId:h,isReadOnly:!o||!i||!I||p>0,defaultValue:(0,rw.ud)({currentProduct:a.billing.currentProduct})})))),ty.createElement(sL,{repoName:d,repoSlug:k})),ty.createElement(sk,{defaultGroupSlug:S,location:"workspace_add_projects",setGroupId:e=>f(e),disabled:!o||!i||!I||p>0}),C()&&ty.createElement(tg.Box,{textAlign:"left"},ty.createElement(aa,{name:"visibility",messageColor:"warning",errors:{visibility:{message:"A public project can ony be add to a public group."}}})),!o||I||e?ty.createElement(tg.Button,{fullWidth:!0,key:"1",type:"submit",disabled:!v||e||0!==p||C(),onClick:x,appearance:"primary"},0!==p?"Creating...":t):ty.createElement(sO,{integration:o})))},sO=({integration:e})=>{let{state:t,effects:a}=(0,tB.U8)(),[r,n]=ty.useState(!1);return ty.createElement("div",{className:"flex-1 flex flex-col w-full items-center justify-center"},ty.createElement(l2,{integration:e,isOpen:r,onClose:()=>n(!1)}),ty.createElement(aJ,{kind:e.kind,className:"w-full",isLoading:t.auth.isConnectingIntegration,onClick:()=>{n(!0),a.reporter.log({event:"vcs_dialog_opened"})}},"Connect ",e.name))},sz=({createProject:e,disabled:t,actionLabel:a="Create API Project"})=>{let{state:r}=(0,tB.U8)(),n=(0,t5.mN)({mode:"onChange",defaultValues:{visibility:(0,rw.ud)({currentProduct:r.billing.currentProduct})}}),{register:o,handleSubmit:l,setValue:i,watch:s,formState:{isValid:c,isSubmitting:u}}=n,d=r.router.searchParams.get("group")||"",m=r.externalDrilldown.flavor,p=s("groupId"),g=s("visibility"),{data:h}=(0,tN.useGetGroup)(r.auth.jwt,p),f=(e=g)=>tU.Tgv.Public===e&&h?.visibility&&h?.visibility==="internal",b=async({name:t,groupId:a,visibility:r})=>{e(t,m,a,r)};return ty.createElement(t5.Op,n,ty.createElement("form",{onSubmit:l(b),className:"w-full"},ty.createElement(tg.VStack,{spacing:3},ty.createElement(lp,{...o("name",{minLength:1,maxLength:75,required:!0}),name:"name",className:"w-full",id:"name","aria-label":"name",style:{height:"32px"},placeholder:"Project Name",autoComplete:"off",rightElement:ty.createElement(nS,{onVisibilityChange:e=>i("visibility",e,{shouldDirty:!0}),groupId:p,defaultValue:(0,rw.ud)({currentProduct:r.billing.currentProduct}),appearance:"outlined"}),autoFocus:!0}),ty.createElement(sk,{defaultGroupSlug:d,location:"workspace_add_projects",setGroupId:e=>i("groupId",e,{shouldDirty:!0})}),f()&&ty.createElement(tg.Box,{textAlign:"left"},ty.createElement(aa,{name:"visibility",messageColor:"warning",errors:{visibility:{message:"A public project can ony be add to a public group."}}})),ty.createElement(tg.Button,{"data-test":"submit",fullWidth:!0,key:"1",type:"submit",disabled:!c||t||f(),loading:u,appearance:"primary"},a))))},sq=({disabled:e,actionLabel:t="Create Project",createStyleGuideProject:a})=>{let{state:r}=(0,tB.U8)(),n=(0,t5.mN)({mode:"onChange",defaultValues:{visibility:tU.Tgv.Internal}}),{register:o,handleSubmit:l,setValue:i,watch:s,formState:{isValid:c,isSubmitting:u}}=n,d=r.router.searchParams.get("group")||"",m=s("groupId"),p=s("visibility"),{data:g}=(0,tN.useGetGroup)(r.auth.jwt,m),h=(e=p)=>tU.Tgv.Public===e&&g?.visibility&&g?.visibility==="internal",f=async({name:e,groupId:t,visibility:r})=>{a(e,t,r)};return ty.createElement(t5.Op,n,ty.createElement("form",{onSubmit:l(f),className:"w-full"},ty.createElement(tg.VStack,{spacing:3},ty.createElement(lp,{...o("name",{minLength:1,maxLength:75,required:!0}),name:"name",className:"w-full",id:"name","aria-label":"name",style:{height:"32px"},placeholder:"Project Name",autoComplete:"off",autoFocus:!0}),ty.createElement(sk,{defaultGroupSlug:d,location:"workspace_add_projects",setGroupId:e=>i("groupId",e,{shouldDirty:!0})}),h()&&ty.createElement(tg.Box,{textAlign:"left"},ty.createElement(aa,{name:"visibility",messageColor:"warning",errors:{visibility:{message:"A public project can ony be add to a public group."}}})),ty.createElement(tg.Button,{fullWidth:!0,key:"1",type:"submit",disabled:!c||e||h(),loading:u,appearance:"primary"},t))))},sV=({onChange:e})=>{let[t,a]=ty.useState(),r=async t=>{let r=t.currentTarget.files?.[0];if(r){let t=[...new Uint8Array(await r.arrayBuffer())];a(r.name),e("importFiles",[{name:r.name,type:r.type,rawData:t}])}},n=()=>{e("importFiles",void 0),a(void 0)};return ty.createElement(tg.Box,{border:!0,borderColor:"input"},ty.createElement(tg.Flex,{flex:1,alignItems:"center"},ty.createElement(tg.Input,{id:"spectral-file-name",style:{backgroundColor:"white",border:"transparent",cursor:"default"},appearance:"minimal",flex:1,placeholder:"Choose a Spectral File",type:"text",required:!0,value:t??"",disabled:!0}),t&&ty.createElement(tg.Button,{appearance:"minimal","aria-label":"spectral-file-upload-remove-btn",onPress:()=>n()},ty.createElement(tg.Icon,{icon:"times"})),ty.createElement(tg.Box,null,ty.createElement("label",{role:"button",htmlFor:"spectral-file-upload-btn"},ty.createElement(tg.Text,{fontWeight:"semibold",pr:2.5,color:"primary"},"Upload")),ty.createElement("input",{onChange:e=>r(e),type:"file",accept:".json, .yaml, .yml, .zip",hidden:!0,id:"spectral-file-upload-btn"}))))},sH=({disabled:e,actionLabel:t="Create Project",createStyleGuideProject:a})=>{let{state:r}=(0,tB.U8)(),n=(0,t5.mN)({mode:"onChange",defaultValues:{visibility:(0,rw.ud)({currentProduct:r.billing.currentProduct})}}),{register:o,handleSubmit:l,setValue:i,watch:s,formState:{isValid:c,isSubmitting:u}}=n,d=r.router.searchParams.get("group")||"",m=s("groupId"),p=s("visibility"),{data:g}=(0,tN.useGetGroup)(r.auth.jwt,m),h=(e=p)=>tU.Tgv.Public===e&&g?.visibility&&g?.visibility==="internal",f=(0,tv.useQueryClient)();return ty.createElement(t5.Op,n,ty.createElement("form",{onSubmit:l(({name:e,groupId:t,visibility:r,importFiles:n})=>{try{a(e,t,r,n),f.invalidateQueries(tN.workspaceKeys.allState())}catch(n){a(e,t,r),console.error(n)}}),className:"w-full"},ty.createElement(tg.VStack,{m:"auto",w:"4/6",spacing:3},ty.createElement(sV,{onChange:i}),ty.createElement(lp,{...o("name",{minLength:1,maxLength:75,required:!0}),name:"name",className:"w-full",id:"name",style:{height:"32px"},placeholder:"Project Name",autoComplete:"off",autoFocus:!0}),ty.createElement(sk,{defaultGroupSlug:d,location:"workspace_add_projects",setGroupId:e=>i("groupId",e,{shouldDirty:!0})}),h()&&ty.createElement(tg.Box,{textAlign:"left"},ty.createElement(aa,{name:"visibility",messageColor:"warning",errors:{visibility:{message:"A public project can ony be added to a public group."}}})),ty.createElement(tg.Button,{alignSelf:"center",w:"min",key:"1",type:"submit",disabled:!c||e||h(),loading:u,appearance:"primary"},t))))},sQ=({projectUsageHint:e,projectDescription:t,disabled:a})=>{let r=(0,tF.OP)(),n=(0,tF.C$)(),o=(0,tF._m)(),l=(0,tF.lw)(),i=(0,tF.bZ)(),s=(0,tA.useNavigate)(),c=r.localProject,u=r.flavor,d=({disabled:e,importFiles:t})=>{let[a]=sS({eventLocation:"workspace_add_projects",importFiles:t,web:!0});return ty.createElement(ty.Fragment,null,ty.createElement(sz,{createProject:(e,t,r,n)=>a(e??void 0,u,r??void 0,n),disabled:e,actionLabel:t?"Create Project & Import File":void 0}),e&&ty.createElement(n_.y,{className:"mt-2",feature:tU.BAf.Projects,suffix:"Required"}))},m=({disabled:e})=>ty.createElement(ty.Fragment,null,ty.createElement(sG,{disabled:e}),e&&ty.createElement(n_.y,{className:"mt-2",feature:tU.BAf.Projects,suffix:"Required"})),p=({disabled:e})=>{let t=(0,tv.useQueryClient)();return ty.createElement(ty.Fragment,null,ty.createElement(sD,{disabled:e,onCreate:({slug:e})=>{l.touchQueries(),l.refreshSidebarAndProjectsList({queryClient:t}),i.navigate(s,`/docs/${e}`),t.invalidateQueries(tN.workspaceKeys.allState())}}),e&&ty.createElement(n_.y,{className:"mt-2",feature:tU.BAf.Projects,suffix:"Required"}))},g=()=>{let e=n.currentWorkspaceId?(0,t8.encodeID)("wk",n.currentWorkspaceId):"",[t]=sA({flavor:tU.$GR.StyleGuide,workspace_id:e});return ty.createElement(sq,{createStyleGuideProject:(e,a,r)=>t(e,a??void 0,r),actionLabel:"Create Style Guide",disabled:a})},h=()=>{let e=o.featureRequiresUpgrade(tU.BAf.Projects),t=n.currentWorkspaceId?(0,t8.encodeID)("wk",n.currentWorkspaceId):"",[a]=sA({flavor:tU.$GR.StyleGuide,workspace_id:t});return ty.createElement(sH,{createStyleGuideProject:(e,t,r,n)=>a(e,t??void 0,r,n??void 0),actionLabel:"Create Style Guide",disabled:e})},f=({disabled:e,importFiles:t})=>{let[a]=sS({eventLocation:"workspace_add_projects",importFiles:t,web:!0}),{featureRequiresUpgrade:r}=(0,tF._m)(),n=r(tU.BAf.DesignLibrary);return ty.createElement(ty.Fragment,null,ty.createElement(sz,{createProject:(e,t,r,n)=>a(e??void 0,tU.$GR.DesignLibrary,r??void 0,n),disabled:e||n,actionLabel:"Create Component Library"}),!n&&e&&ty.createElement(n_.y,{className:"mt-2",feature:tU.BAf.Projects,suffix:"Required"}),n&&ty.createElement(n_.y,{className:"mt-2",feature:tU.BAf.DesignLibrary,suffix:"Required"}))},b=({disabled:e})=>{let{featureRequiresUpgrade:t}=(0,tF._m)(),a=t(tU.BAf.DesignLibrary)&&u===tU.$GR.DesignLibrary;return ty.createElement(ty.Fragment,null,ty.createElement(sG,{disabled:e||a,actionLabel:"Create Component Library"}),e&&ty.createElement(n_.y,{className:"mt-2",feature:tU.BAf.Projects,suffix:"Required"}),a&&ty.createElement(n_.y,{className:"mt-2",feature:tU.BAf.DesignLibrary,suffix:"Required"}))},y=e=>{switch(e){case"blank":default:return ty.createElement(d,{importFiles:!1,disabled:a});case"blank-git":return ty.createElement(m,{disabled:a});case"cli":return ty.createElement(p,{disabled:a});case"import":return ty.createElement(d,{importFiles:!0,disabled:a})}},w=e=>{switch(e){case"blank":default:return ty.createElement(g,null);case"import":return ty.createElement(h,null)}},E=e=>{switch(e){case"blank":default:return ty.createElement(f,{importFiles:!1,disabled:a});case"blank-git":return ty.createElement(b,{disabled:a})}};return ty.createElement(tg.Flex,{flex:1,direction:"col",alignItems:"center",justifyContent:"center",borderL:!0,px:20,textAlign:"center"},ty.createElement(sB,{projectUsageHint:e,description:t,flavor:u}),ty.createElement(()=>{switch(u){case tU.$GR.StyleGuide:return w(c);case tU.$GR.DesignLibrary:return E(c);default:return y(c)}},null))},sK=/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_\+.~#?&//=]*)/,sJ=({multiple:e,label:t,projectUsageHint:a})=>{let r;let{state:n,actions:o}=(0,tB.U8)(),{integrationId:l,localProject:i}=n.externalDrilldown,s=n.features.featureRequiresUpgrade(tU.BAf.Projects),c=n.externalDrilldown.flavor;if(ty.useEffect(()=>{o.externalDrilldown.setDefaultProjectType()},[o.externalDrilldown]),i){let e=iu[c].description[i];r=ty.createElement(sQ,{projectUsageHint:a,projectDescription:e,disabled:s})}if(l&&n.externalDrilldown.gitSelected){let o=n.workspaces.integrations?.find(e=>e.id===l),i=n.auth.currentUser?.externalUsers.find(e=>e.workspaceIntegrationId===o?.id);r=i&&!i.usesOldIntegration?ty.createElement(ty.Fragment,null,ty.createElement("div",{className:"flex-1 border-l flex flex-col"},ty.createElement(s0,{projectUsageHint:a,integration:o,label:t,multiple:e}))):ty.createElement(sY,{projectUsageHint:a,integration:o})}return ty.createElement(tj.Card,{className:"flex flex-1 p-0",style:{height:480,borderTopLeftRadius:0,borderTopRightRadius:0,borderBottomRightRadius:0}},ty.createElement("div",{className:"w-72 flex flex-col"},ty.createElement(sX,null)),r)},sY=({integration:e,projectUsageHint:t})=>{let{state:a,effects:r}=(0,tB.U8)(),[n,o]=ty.useState(!1);return ty.createElement("div",{className:"flex-1 flex flex-col items-center justify-center border-l px-16"},ty.createElement(sB,{flavor:a.externalDrilldown.flavor,projectUsageHint:t,description:"Add private or public repos that contain OpenAPI, Json Schemas or Markdown"}),ty.createElement(l2,{integration:e,isOpen:n,onClose:()=>o(!1)}),ty.createElement(aJ,{kind:e.kind,className:"w-full",isLoading:a.auth.isConnectingIntegration,onClick:()=>{o(!0),r.reporter.log({event:"vcs_dialog_opened"})}},"Connect ",e.name))},sX=()=>{let{state:e}=(0,tB.U8)(),t=sw(e.externalDrilldown.flavor),a=e=>ty.createElement(ty.Fragment,null,e.item.name&&"divider"!==e.item.type?ty.createElement(tj.Tooltip,{content:e.item.name.toString(),targetClassName:"w-full",targetProps:{"data-test":`${function(e){if(e.includes("Add")){let t=e.substring(e.indexOf(" ")+1);return t.substring(t.indexOf(" ")+1).replace(/\s+/g,"-").toLowerCase()+"-git-project"}return e.replace(/\s+/g,"-").toLowerCase()}(e.item.name.toString())}-button`}},ty.createElement(tj.DefaultRow,{item:e.item,index:e.index,isExpanded:e.isExpanded,toggleExpanded:e.toggleExpanded})):ty.createElement(tj.DefaultRow,{item:e.item,index:e.index,isExpanded:e.isExpanded,toggleExpanded:e.toggleExpanded}));return ty.createElement(ty.Fragment,null,ty.createElement(tj.TableOfContents,{withScroller:!0,rowComponent:e=>a(e),contents:t,className:"flex-1 qa-integrations-drilldown"}),e.workspaces.canI(tU.E4M.WorkspaceIntegrationCreateUpdateDelete)&&ty.createElement(tk.Link,{className:"border-t px-5 h-16 block reset hover:bg-gray-1 flex items-center",to:"/admin/settings"},ty.createElement("span",{className:"text-gray-5"},ty.createElement(tj.FAIcon,{className:"mr-1",icon:["fal","cog"]})," Manage Git Providers")))},sZ=e=>!!(e.message.includes("401")||e.graphQLErrors.some(e=>(e.extensions?.message).includes("refresh_token"))),s0=({integration:e,label:t,multiple:a,projectUsageHint:r})=>{let n;let{effects:o,actions:l,state:i}=(0,tB.U8)(),{selectedProjects:s,owner:c}=i.externalDrilldown,u=(0,tA.useLocation)(),d=(0,tA.useNavigate)(),m=(0,tv.useQueryClient)(),[p,g]=ty.useState(),[h,f]=ty.useState((0,rw.ud)({currentProduct:i.billing.currentProduct})),[b,y]=ty.useState(""),[w,E]=ty.useState(!1),v=(0,t5.mN)({mode:"onChange"});(0,t5.FH)({control:v.control,name:"repoUrl",defaultValue:""});let k=v.getValues("repoUrl"),[{data:_,fetching:x,defaultOrg:I,error:S}]=sE({workspaceIntegration:e}),j=s.length+(k?1:0);ty.useEffect(()=>{let e=s.find(({project:e})=>e.remoteUrlHttp===k);e&&l.externalDrilldown.toggleProject(e)},[k,s,l.externalDrilldown]),ty.useEffect(()=>{if(S){let t=S.message;sZ(S)&&(t=`Looks like your access token is expired. Please click "Connect ${e.name}" button to reconnect ${e.name} application.`),o.notifications.danger({message:t||"Something went wrong, please try again.",timeout:1e4})}},[o.notifications,S,e.name]);let C=c;C||I.integrationId!==e.id||(C=I.value);let P=i.workspaces.currentWorkspaceId,[A]=(0,sb.u)({workspaceId:P}),[{data:B,isFetching:D,error:T},F]=rE({pause:!C||x,query:tU.b7w,limit:100,initialData:{getExternalRepos:[]},concatData:(e,t)=>({getExternalRepos:[...e.getExternalRepos,...t.getExternalRepos]}),numOfFetchedItems:e=>e?.getExternalRepos?.length||0,variables:{workspaceIntegrationId:e.id,owner:C,query:null}});ty.useEffect(()=>{if(D)o.notifications.clear();else if(T){let e=T.message;o.notifications.danger({message:e||"Something went wrong, please try again.",timeout:1e4})}},[o.notifications,D,T]);let{data:$}=(0,tN.useGetGroup)(i.auth.jwt,p),N=A.data?.projects||[],U=i.features.getFeatureMaxUsage(tU.BAf.Projects),M=i.features.featureRequiresUpgrade(tU.BAf.Projects,s.length),R=function(e,t){return t&&0!==t.length&&e?e.filter(e=>e.name.toLowerCase().includes(t))||[]:e||[]}(B?.getExternalRepos,b),W=i.flags.isFlagEnabled("auto_invite_committers"),L=(0,th.sortBy)(R,e=>e.name.toLowerCase()).map(t=>{let r=N.some(a=>a.externalSlug===t.slug&&a.workspaceIntegrationId===e.id&&a.externalOrgSlug===C),n=s.some(e=>e.project.id===t.id),o=t.remoteUrlHttp===k;return{name:t.name,meta:r?"added":void 0,isDisabled:r||o,isSelected:n,footer:o&&ty.createElement("span",{className:"ml-8 sl-text-xs"},"Will be added by repository URL"),type:"item",icon:r||n||o?["fas","check-circle"]:["fal","circle"],onClick(){C&&l.externalDrilldown[a?"toggleProject":"selectProject"]({project:t,owner:C})}}});if(S){if(sZ(S))return ty.createElement(sY,{projectUsageHint:r,integration:e});L=[{name:"Something went wrong, no data to display.",icon:["far","exclamation-triangle"]}]}else!C||D||A.fetching||x?L=[{name:"Fetching data, hang tight...",isLoading:!0}]:L.length||D||(L=[{name:"No results. Try another search term. ",icon:["far","exclamation-circle"]},{name:"Suggested terms: API, OpenAPI, Docs"}]);if(_&&(n=_.find(e=>e.value===C)),C&&!n&&(n={label:C,value:C,isPersonal:!1}),D&&!C)return null;let G=new URLSearchParams(u.search).get("group")??i.router.searchParams.get("group")??"",O=(e=h)=>tU.Tgv.Public===e&&$?.visibility&&$?.visibility==="internal";return ty.createElement("div",{className:"flex-1 border-l flex flex-col"},ty.createElement("div",{className:"px-6 py-4 text-gray-6 dark:text-gray-6 font-semibold uppercase"},"Add Project via Repository URL"),ty.createElement(tg.Box,{borderB:!0,px:4,pb:4},ty.createElement(tj.FormGroup,{intent:v.formState.errors.repoUrl&&"danger",helperText:v.formState.errors.repoUrl?.message,labelFor:"repository-url",className:"m-0"},ty.createElement(aj,{"data-test":"add-repo-by-url",intent:v.formState.errors.repoUrl&&"danger",placeholder:(()=>{switch(e.kind){case"github":return"https://github.com/github/docs.git";case"gitlab":return"https://gitlab.com/gitlab-tests/sample-project.git";case"azure_devops_server":return"https://your-azure-server-ip/public1/MyFirstProject/_git/MyGreatLibrary";case"bitbucket_cloud":case"bitbucket_data_center":return"https://username@bitbucket.org/teamsinspace/documentation-tests.git";default:return"Repository URL"}})(),id:"repository-url",...v.register("repoUrl",{pattern:{value:sK,message:"Must be a valid URL"}})}))),ty.createElement("div",{className:"px-6 pt-4 text-gray-6 dark:text-gray-6 font-semibold uppercase"},"Select Repository from the list"),ty.createElement(tg.Flex,{p:4},ty.createElement(r2.default,{options:_,className:"org-drilldown",styles:{control:e=>({...e,minHeight:30,height:30,width:175}),valueContainer:e=>({...e,height:"30px",padding:"0 6px"}),indicatorsContainer:e=>({...e,height:"30px"}),menu:e=>({...e,width:400})},value:n,placeholder:"Orgs...",formatCreateLabel:e=>`Manually lookup: ${e}`,formatOptionLabel:(e,t)=>ty.createElement("div",{className:"flex w-full","data-test":"org-drilldown-item"},ty.createElement("div",{className:"flex-1"},e.label),"value"!==t.context&&e.group&&ty.createElement("div",{className:"text-sm"},e.group)),onChange:e=>{e&&(F({owner:e.value}),l.externalDrilldown.setOwner({owner:e.value}))}}),ty.createElement(aj,{leftIcon:"search",placeholder:"Search...",className:"flex-1 ml-2",value:b,autoFocus:!0,onChange:e=>y(e.currentTarget.value)})),ty.createElement(tj.TableOfContents,{withScroller:!0,"data-test":"project-drilldown",className:"flex-1",contents:[{name:"Projects",type:"divider"},...L]}),M&&ty.createElement("div",{"data-test":"add-project-cap-warning",className:"border-t flex py-3 px-5 items-center text-red text-sm"},ty.createElement(n_.y,{className:"mr-2",feature:tU.BAf.Projects,suffix:"Required"}),"Your workspace has a cap of ",U," projects."),ty.createElement(tg.Flex,{flexDirection:"row",px:4,borderT:!0,pt:2,h:16,mb:2},ty.createElement(tg.Box,{flexGrow:!0,mr:4},ty.createElement(sk,{defaultGroupSlug:G,location:"workspace_add_projects",setGroupId:e=>g(e),disabled:0===j||M}),O()&&ty.createElement(aa,{name:"visibility",messageColor:"warning",errors:{visibility:{message:"A public project can only be added to a public group."}}})),ty.createElement(tg.Box,{flexShrink:!0},ty.createElement(nS,{onVisibilityChange:e=>f(e),groupId:p,isReadOnly:0===j||M,defaultValue:(0,rw.ud)({currentProduct:i.billing.currentProduct}),appearance:"outlined"}))),ty.createElement("div",{className:"border-t pl-5 pr-4 h-16 flex justify-between items-center"},ty.createElement("div",{className:"flex items-center"},ty.createElement(tj.Checkbox,{checked:i.externalDrilldown.installWebhooks,onChange:()=>l.externalDrilldown.toggleInstallWebhooks(),inline:!0,className:"mb-0"},ty.createElement("span",{className:"text-gray-5 mr-2"},"Install Webhooks"),ty.createElement(tj.Tooltip,{content:ty.createElement("div",{style:{maxWidth:400}},"Install a webhook to keep your Stoplight project in sync with the Git repository. You must have permissions on the Git repository to add webhooks.")},ty.createElement(tj.FAIcon,{icon:"question-circle",className:"text-gray-5 ml-1"}))),W&&ty.createElement(tj.Checkbox,{checked:w,onChange:()=>E(e=>!e),className:"mb-0"},ty.createElement("span",{style:{overflow:"hidden",whiteSpace:"nowrap"}},ty.createElement("span",{className:"text-gray-5 mr-2"},"Auto-Invite Future Committers"),ty.createElement(tj.Tooltip,{content:ty.createElement("div",{style:{maxWidth:400}},"Automatically invite committers as project members. This may impact the number of allowed users for your plan.")},ty.createElement(tj.FAIcon,{icon:"question-circle",className:"text-gray-5 ml-1"}))))),ty.createElement(tg.Flex,{flexDirection:"col"},ty.createElement(tg.Box,{display:"flex",flexDirection:"row"},ty.createElement(tj.Button,{intent:"primary",className:"ml-4",loading:i.externalDrilldown.isAddingProjects,disabled:!v.formState.isValid||0===j||M||O(),onClick:()=>{l.externalDrilldown.addProjects({projects:s,repoUrls:k?[k]:[],workspaceIntegrationId:e.id,installWebhooks:i.externalDrilldown.installWebhooks,destination:"docs",queryClient:m,groupId:p||void 0,visibility:h,flavor:i.externalDrilldown.flavor,autoInviteCommitters:w,navigate:d})}},"object"==typeof t?`${t.verb} Git ${tV()(t.noun,j>1?j:1)}`:t)))))},s1=({projectFeatures:e})=>{let{state:t}=(0,tB.U8)(),a=t.externalDrilldown.gitSelected||"blank-git"===t.externalDrilldown.localProject?"git":"cli"===t.externalDrilldown.localProject?"cli":"standard";return ty.createElement(tj.Card,{className:"p-0",style:{height:480,width:275,borderTopRightRadius:0,borderTopLeftRadius:0,borderBottomLeftRadius:0}},ty.createElement(tg.Flex,{direction:"col",h:"full",justifyContent:"between"},ty.createElement(tg.Box,null,ty.createElement(tg.Box,{py:3,px:4},ty.createElement(function(){let e;let r=t.externalDrilldown.flavor;return e=r===tU.$GR.Design?"git"===a?"Git Project Behavior":"cli"===a?"CLI":"Standard Project Behavior":r===tU.$GR.StyleGuide?"Style Guide Features":"Component Library Features",ty.createElement(tg.Text,{fontSize:"lg",fontWeight:"medium",color:"muted"},e)},null)),ty.createElement(tg.Box,{ml:6},a&&e.features.map((e,t)=>e.projectType.includes(a)&&ty.createElement(tg.Flex,{py:4,flexGrow:!0,direction:"row",alignItems:"baseline",key:t},ty.createElement(tg.Flex,{mr:2,flexShrink:0},ty.createElement(tg.Icon,{size:"sm",fixedWidth:!0,icon:e.icon&&"string"!=typeof e.icon?e.icon:["far",(0,rw.wN)({iconName:e.icon})]})),ty.createElement(tg.Text,{color:"body",w:"4/5",flexWrap:!0,fontSize:"base",flexShrink:!0},e.name))))),ty.createElement(tg.Flex,{justifyContent:"center",py:6},ty.createElement(tg.Link,{href:e.docsUrl,target:"_blank"},"Go To Docs"))))},s2=(0,ak.aZ)(({projectUsageHint:e,flavor:t})=>ty.createElement(tg.Flex,{w:"full",direction:"row"},ty.createElement(sJ,{multiple:!0,label:{verb:"Add",noun:"Project"},projectUsageHint:e}),ty.createElement(s1,{projectFeatures:ic[t]})),tU.E4M.WorkspaceProjectsCreate),s4=(0,ak.ss)((0,ak.BZ)((0,ak.aZ)(function({myWorkspace:e}){let{actions:t,state:a}=(0,tB.U8)(),{getFeatureMaxUsage:r}=(0,tF._m)(),{canI:n}=(0,tF.C$)(),{isFlagEnabled:o}=(0,tF.aS)(),l=e?.project_count||0,i=r(tU.BAf.Projects),s=n(tU.E4M.WorkspaceStyleguideProjectsCreate),c=Math.floor(.9*i)||1,u=l>=i,d=i-l,m=i===1/0?"unlimited":d<=0?0:d,p=`You currently have ${m} project${1===m?"":"s"} available`,g=`${p}. Upgrade your subscription soon.`;(0,a6.e)("add_project");let h=a.externalDrilldown.flavor,f=[tU.$GR.Design];return o("ssg_disabled")||f.push(tU.$GR.StyleGuide),f.push(tU.$GR.DesignLibrary),ty.createElement(ty.Fragment,null,ty.createElement("div",{className:"flex flex-col min-h-screen w-full"},ty.createElement("div",{className:"flex flex-col pl-8 py-8"},ty.createElement(tk.Link,{className:"flex items-center text-gray-7 font-semibold no-underline",to:"/","data-test":"back-to-workspace"},ty.createElement(tj.FAIcon,{className:"mr-2",icon:["far","arrow-left"]})," Back to Workspace")),ty.createElement("div",{className:"flex flex-1 items-center justify-center"},ty.createElement("div",{className:"w-full px-4 mt-2",style:{maxWidth:1200}},ty.createElement("div",{className:"text-gray-7 text-4xl font-semibold text-center pb-6"},l?"Create or Import a Project":"Create a Project"),l>=c&&ty.createElement("div",{"data-test":"add-project-cap-warning",style:{maxWidth:750,margin:"auto"}},ty.createElement(tx.BasicProgressBar,{label:`${l} / ${i} Projects`,hintText:u?"You have 0 projects available. Upgrade your subscription for more projects and features.":g,value:l,maxValue:i,actionButtonContent:ty.createElement("span",{style:{maxHeight:100}},ty.createElement(n_.y,{large:!0,feature:tU.BAf.Projects,suffix:"Required"}))})),ty.createElement("div",{className:"w-full mt-6 flex flex-row"},ty.createElement(tj.Card,{className:"flex flex-1 p-0 items-center justify-center sl-add-projects-card",style:{borderBottomLeftRadius:0,borderBottomRightRadius:0}},ty.createElement(tg.Box,null,s&&ty.createElement(tg.Tabs,{appearance:"line",onChange:e=>{(e===tU.$GR.Design||e===tU.$GR.StyleGuide||e===tU.$GR.DesignLibrary)&&t.externalDrilldown.setProjectFlavor(e),a.workspaces?.currentWorkspace?.allowWebProjects?t.externalDrilldown.setLocalProject("blank"):t.externalDrilldown.setLocalProject("blank-git")}},ty.createElement(tg.TabList,null,f.map(e=>ty.createElement(tg.Tab,{key:e,id:e},ty.createElement(tg.Icon,{icon:iu[e].icon}),ty.createElement(tg.Text,{px:2},iu[e].name),iu[e]?.betaBadge&&ty.createElement(sf,null)))))))),ty.createElement(s2,{flavor:h,projectUsageHint:p})))))}))),s3=({title:e="Permission Denied",className:t,...a})=>ty.createElement("div",{className:t3()("flex items-center justify-center w-full",t)},ty.createElement(tj.NonIdealState,{title:e,icon:ty.createElement(tj.FAIcon,{icon:["fad","ban"]}),...a})),s5=({children:e,...t})=>ty.createElement(i1,{as:"main",h:"full",...t},e),s8=()=>[{title:"No user cap",slug:tU.BAf.Members,image:"members.png",description:ty.createElement(ty.Fragment,null,"Each plan includes a set number of workspace members. All of our paid plans allow you to add any number of members beyond the included amount, for a simple fixed price per member."),product:tU.mmV.Startup},{title:"10 project cap",slug:tU.BAf.Projects,image:"startup_projects.png",description:ty.createElement(ty.Fragment,null,"Looking for more project capacity? You've come to the right place! The Startup plan significantly increases your workspace's max project cap from 1 project to ",ty.createElement("b",null,"10 projects.")),product:tU.mmV.Startup},{title:"100 project cap",slug:tU.BAf.Projects,image:"pro_projects.png",description:ty.createElement(ty.Fragment,null,"100 Projects Included. Support your growing API program with 100 Stoplight projects including designs and style guides."),product:tU.mmV.ProTeam},{title:"Extended project cap",slug:tU.BAf.Projects,image:"enterprise_projects.png",description:ty.createElement(ty.Fragment,null,"Need even more projects in Stoplight? If you're looking for unlimited projects, consider upgrading to"," ",ty.createElement("b",null,"Enterprise.")),product:tU.mmV.Enterprise},{title:"Private projects",slug:tU.BAf.PrivateProjects,image:"private_projects.png",description:ty.createElement(ty.Fragment,null,"Only workspace members and guests with direct project access can view Private Projects. Create and ideate new API designs and choose which team members can collaborate early in the lifecycle."),product:tU.mmV.Startup},{title:"Custom domains",slug:tU.BAf.CustomDomain,image:"custom_domain.png",description:ty.createElement(ty.Fragment,null,"Use your own domain for your workspace."),product:tU.mmV.Startup},{title:"Favicon",slug:tU.BAf.Favicon,image:"favicon-feature.png",description:ty.createElement(ty.Fragment,null,"Add a custom favicon to be displayed on your workspace."),product:tU.mmV.Startup},{title:"Analytics integration",slug:tU.BAf.GoogleTagManager,image:"tag_manager.png",description:ty.createElement(ty.Fragment,null,"See how your docs are performing by adding analytics scripts using Google Tag Manager."),product:tU.mmV.Startup},{title:"Redirects",slug:tU.BAf.Redirects,image:"redirects.png",description:ty.createElement(ty.Fragment,null,"Manually configure redirects on your custom domain to ensure that your customers are always routed to the correct page."),product:tU.mmV.Startup},{title:"Multiple doc versions",slug:tU.BAf.MultiBranch,image:"branches.png",description:ty.createElement(ty.Fragment,null,"Publish multiple versions to your docs readers, where each version is backed by a Git branch."),product:tU.mmV.Startup},{title:"Theming",slug:tU.BAf.CustomTheme,image:"theming.png",description:ty.createElement(ty.Fragment,null,"Change the primary colors in the workspace to match your brand."),product:tU.mmV.Startup},{title:"Allowed email domains",slug:tU.BAf.WhitelistedDomains,image:"allowed_domains.png",description:ty.createElement(ty.Fragment,null,"Adding allowed email domains to your workspace allows your team to join your workspace quickly, and streamlines the onboarding process. No invite management required."),product:tU.mmV.Startup},{title:"Groups",slug:tU.BAf.Groups,image:"groups.png",description:ty.createElement(ty.Fragment,null,"Make it easier to manage and discover projects by organizing them into groups that reflect your API business or domain model."),product:tU.mmV.ProTeam},{title:"Style Guides",slug:tU.BAf.StyleGuides,image:"style_guides.png",description:ty.createElement(ty.Fragment,null,"Add consistency and easy governance to your API program with style guides that you can share across your organization."),product:tU.mmV.ProTeam},{title:"Activity logs",slug:tU.BAf.ActivityLogs,image:"activity.png",description:ty.createElement(ty.Fragment,null,"Activity logs provide a record of important actions that your users are performing. This allows you to track what's happening within your workspace."),product:tU.mmV.ProTeam},{title:"Guest role",slug:tU.BAf.Guests,image:"guests.png",description:ty.createElement(ty.Fragment,null,"Grant contractors, customers, and other ",ty.createElement("b",null,"external stakeholders")," access to view specific projects, without exposing your workspace's internal projects."),product:tU.mmV.ProTeam},{title:"Remove Stoplight branding",slug:tU.BAf.Whitelabel,image:"remove_branding.png",description:ty.createElement(ty.Fragment,null,"Remove the Powered by Stoplight badge from your workspace to further customize and emphasize your own Company's brand."),product:tU.mmV.ProTeam},{title:"Dependency graphs",slug:tU.BAf.DependencyGraph,image:"dependency_graph.png",description:ty.createElement(ty.Fragment,null,"Explore the ",ty.createElement("b",null,"relationships")," in your data. See which APIs, endpoints, or models reference a particular model, and navigate outbound dependencies via a visual diagram."),product:tU.mmV.ProTeam},{title:"Localize integration",slug:tU.BAf.Localizejs,image:"localizejs.png",description:ty.createElement(ty.Fragment,null,"Offer multilingual support for your documentation to increase retention and boost customer satisfaction using Localize."),product:tU.mmV.ProTeam},{title:"Enterprise Git integrations",slug:tU.BAf.CustomGitIntegration,image:"custom_git_integration.png",description:ty.createElement(ty.Fragment,null,"Setup a custom Bitbucket, GitLab, or GitHub OAuth integration to connect your enterprise VCS installation. If your VCS installation is behind a firewall, you can leverage our Static IPs to allow Stoplight's servers to reach it."),product:tU.mmV.ProTeam},{title:"SAML & LDAP single sign-on",slug:tU.BAf.SamlLdapIntegration,image:"saml_ldap_integration.png",description:ty.createElement(ty.Fragment,null,"SSO via Okta, Active Directory, OneLogin, AuthO, and others enables your team to log in quickly, streamlines the on-boarding/off-boarding process for accounts, and strengthens your login with secure credentials."),product:tU.mmV.ProTeam},{title:"Teams",slug:tU.BAf.Teams,image:"teams.png",description:ty.createElement(ty.Fragment,null,"Easily manage your members and guests with Teams."),product:tU.mmV.ProTeam},{title:"Component Libraries",slug:tU.BAf.DesignLibrary,image:"pro_projects.png",description:ty.createElement(ty.Fragment,null,"Define a set of standard components to be used across your API ecosystem"),product:tU.mmV.ProTeam}],s6=({requiredProductForFeature:e,activeFeature:t})=>{let{state:a}=(0,tB.U8)();if(!t)return null;let r=tG(a.billing.currentProduct?.name);return ty.createElement(tg.Paragraph,null,"This feature is included with the ",ty.createElement("strong",null,e," Plan")," and up."," ",r&&`You are currently on the ${(0,th.capitalize)(r)} Plan.`)},s7=({name:e,isActive:t,handleClick:a,icon:r,href:n})=>ty.createElement(tg.HStack,{as:n?"a":void 0,spacing:1,rounded:!0,py:1.5,px:2,ml:-2,userSelect:"none",bg:{default:t?"canvas-100":void 0,hover:"canvas-50"},color:t?"primary-dark":"muted",onClick:a,href:n,target:n?"_blank":void 0},r&&ty.createElement(tg.Box,null,ty.createElement(tg.Icon,{icon:r,fixedWidth:!0})),ty.createElement(tg.Box,null,e)),s9=({title:e,features:t,showMoreLink:a})=>{let{actions:r,state:n}=(0,tB.U8)(),o=n.ui.selectedFeature,l=n.ui.selectedProduct??n.billing.getLowestPaidProductForFeature(o)?.name,i=t.map((e,t)=>{let a=o===e.slug;return e.product&&(a=o===e.slug&&l===e.product),ty.createElement(s7,{key:t,name:e.title,isActive:a,handleClick:()=>{r.ui.setSelectedFeature(e.slug),r.ui.setSelectedProduct(e.product)}})});return ty.createElement(tg.VStack,{spacing:2},ty.createElement(tg.Heading,{size:4},e),ty.createElement(tg.Box,null,i,a&&ty.createElement(s7,{name:"And much more...",href:"https://stoplight.io/pricing",icon:["fas","bolt"]})))},ce=({feature:e,isFocused:t,imageStyle:a,withImageFade:r})=>{let{state:n,actions:o}=(0,tB.U8)(),{isFlagEnabled:l}=(0,tF.aS)(),i=n.workspaces.canI(tU.E4M.WorkspaceBilling),s=e??n.ui.selectedFeature,c=n.ui.selectedProduct??n.billing.getLowestPaidProductForFeature(s)?.name,u=n.billing.getProduct(c??tU.mmV.Startup),d=(u?.priority??0)>(n.billing.currentProduct?.priority??0),m=s8(),p=m.find(e=>e.slug===s&&e?.product===c);void 0===p&&(p=m.find(e=>e.slug===s));let g={[tU.mmV.Free]:[],[tU.mmV.Basic]:[],[tU.mmV.Startup]:[],[tU.mmV.ProTeam]:[],[tU.mmV.Enterprise]:[]};m.filter(e=>"string"!=typeof e.showOnFlag||l(e.showOnFlag)).forEach(e=>{let t=n.billing.getLowestPaidProductForFeature(e.slug)?.name??tU.mmV.Free;e.product&&(t=e.product),g[t].push(e)});let h=tG(u?.name)??tG(tU.mmV.Startup),f=ty.createElement(tg.VStack,{pos:"relative",spacing:8},ty.createElement(l1,{title:p?.title,description:p?.description,image:p?.image,imageStyle:a,withImageFade:r,isCentered:t}),ty.createElement(s6,{activeFeature:p,requiredProductForFeature:h}),u&&d&&p&&ty.createElement(ty.Fragment,null,i?ty.createElement(tg.HStack,{spacing:2,justifyContent:t?"center":void 0},ty.createElement(ct,{productId:u.id,productName:h}),t&&ty.createElement(tg.Button,{appearance:"minimal",onPress:()=>o.ui.showFeatureDialog(s)},"More Features")):ty.createElement(tg.Callout,{intent:"warning"},"Please contact your workspace admin to upgrade.")));return t?ty.createElement(tg.Box,{textAlign:"center"},f):ty.createElement(tg.Flex,null,ty.createElement(tg.Box,{flex:1,pr:20},f),ty.createElement(tg.VStack,{style:{width:230},spacing:4,mt:1},ty.createElement(s9,{title:"Basic Plan Features",features:g[tU.mmV.Basic]}),ty.createElement(s9,{title:"Startup Plan Features",features:g[tU.mmV.Startup]}),ty.createElement(s9,{title:"Pro Team Plan Features",features:g[tU.mmV.ProTeam]}),ty.createElement(s9,{title:"Enterprise Plan Features",features:g[tU.mmV.Enterprise],showMoreLink:!0})))},ct=({productId:e,productName:t})=>{let{effects:a}=(0,tB.U8)(),[r,n]=ty.useState(!1),o=(0,tF.C$)(),l=(o.myWorkspace?.billing_product).id;return ty.createElement(ty.Fragment,null,ty.createElement(tg.Button,{"data-test":"plan-upgrade-button",appearance:"primary",textTransform:"capitalize",onPress:()=>{a.reporter.log({event:"upsell_modal_cta_clicked",payload:{plan:t}}),"enterprise"===t?window.open("https://stoplight.io/contact-sales","_blank","noopener"):n(!0)}},`Upgrade to ${t}`),ty.createElement(ac,{isOpen:r,onClose:()=>n(!1),productId:e,ctaButton:({account:e,product:t,interval:a})=>{let r=t2(l,t.id);return e.stripe_subscription_id?ty.createElement(t0,{product:t,mode:r}):ty.createElement(tz,{product:t,interval:a})}}))};function ca({feature:e,imageStyle:t,withImageFade:a}){return ty.createElement(tg.Container,{as:"main",py:20,px:8,bg:"canvas",size:"md"},ty.createElement(tg.VStack,{spacing:2},ty.createElement(ce,{feature:e,imageStyle:t,withImageFade:a,isFocused:!0})))}let cr=(e,t)=>{let a=String(e).split("_"),r=a[0],n=a[a.length-1],o=t.old?a[a.length-2]:"";return{resourceName:r,resource:t[r],action:function(e){if("leave"===e)return"Left";{let t=e.charAt(0).toUpperCase()+e.slice(1);return"e"===t.charAt(t.length-1)?`${t}d`:`${t}ed`}}(n),changedResource:"type"===o?"role":o}},cn=ty.memo(({type:e,metadata:t})=>{let{resourceName:a,resource:r,action:n,changedResource:o}=cr(e,t),l=ty.createElement(ty.Fragment,null,"the ",ty.createElement("b",null,r)," ",a),i=t.old?ty.createElement(ty.Fragment,null,"from ",ty.createElement("b",null,t.old)," to ",ty.createElement("b",null,t[o])):"";switch(e){case"workspace_create":case"workspace_delete":case"group_create":case"group_delete":case"project_create":case"project_delete":case"workspace_user_leave":case"group_user_leave":case"project_user_leave":return ty.createElement(ty.Fragment,null,n," ",l);case"workspace_undo_delete":return ty.createElement(ty.Fragment,null,"Reinstated ",l);case"workspace_trial_start":return ty.createElement(ty.Fragment,null,n," trial for ",l);case"workspace_slug_update":return ty.createElement(ty.Fragment,null,n," ",l," slug ",i);case"group_rename":case"project_rename":return ty.createElement(ty.Fragment,null,n," the ",a," ",i);case"group_visibility_update":case"project_visibility_update":return ty.createElement(ty.Fragment,null,"Changed visibility ",i," for ",l);case"workspace_user_add":return ty.createElement(ty.Fragment,null,"Accepted invite"," ",t.user?ty.createElement(ty.Fragment,null,"from ",ty.createElement("b",null,t.user)," "):null,"to ",l," as ",ty.createElement("b",null,t.role));case"workspace_user_invite":case"group_user_add":case"project_user_add":return ty.createElement(ty.Fragment,null,n," ",ty.createElement("b",null,t.user)," to ",l," as ",ty.createElement("b",null,t.role));case"workspace_user_join":case"group_user_join":case"project_user_join":return ty.createElement(ty.Fragment,null,n," ",l," as ",ty.createElement("b",null,t.role));case"workspace_user_remove":case"group_user_remove":case"project_user_remove":return ty.createElement(ty.Fragment,null,n," ",ty.createElement("b",null,t.user)," from ",l);case"workspace_user_account_type_update":case"group_user_role_update":case"project_user_role_update":return ty.createElement(ty.Fragment,null,"Changed ",ty.createElement("b",null,t.user)," ",i," for ",l);case"workspace_integration_add":case"workspace_integration_update":case"workspace_integration_remove":return ty.createElement(ty.Fragment,null,n," the ",ty.createElement("b",null,t.integration)," integration");case"workspace_plan_create":return ty.createElement(ty.Fragment,null,"Added ",l," to the ",ty.createElement("b",null,t.plan)," plan");case"workspace_plan_update":return ty.createElement(ty.Fragment,null,n," ",l," from the ",ty.createElement("b",null,t.old)," plan to the ",ty.createElement("b",null,t.plan)," plan");case"workspace_plan_delete":return ty.createElement(ty.Fragment,null,"Removed ",l," from the ",ty.createElement("b",null,t.plan)," plan");case"billing_cancel":return ty.createElement(ty.Fragment,null,"Canceled the"," ",ty.createElement(tg.Box,{as:"b",textTransform:"capitalize"},cl(t))," ","plan");case"billing_undo_cancel":case"billing_undo_downgrade":case"billing_undo_interval_change":return ty.createElement(ty.Fragment,null,"Reinstated the"," ",ty.createElement(tg.Box,{as:"b",textTransform:"capitalize"},cl(t))," ","plan");case"billing_interval_change":return ty.createElement(ty.Fragment,null,"Switched to the"," ",ty.createElement(tg.Box,{as:"b",textTransform:"capitalize"},cl(t))," ","plan");case"billing_subscribe":return ty.createElement(ty.Fragment,null,"Subscribed to the"," ",ty.createElement(tg.Box,{as:"b",textTransform:"capitalize"},cl(t))," ","plan");case"billing_upgrade":return ty.createElement(ty.Fragment,null,"Upgraded to the"," ",ty.createElement(tg.Box,{as:"b",textTransform:"capitalize"},cl(t))," ","plan");case"billing_downgrade":return ty.createElement(ty.Fragment,null,"Downgraded to the"," ",ty.createElement(tg.Box,{as:"b",textTransform:"capitalize"},cl(t))," ","plan");case"project_move":let s=t.group?ty.createElement(ty.Fragment,null,"the ",ty.createElement("b",null,t.group)," group"):"no group";if(t.old)return ty.createElement(ty.Fragment,null,n," ",l," from the ",ty.createElement("b",null,t.old)," group to ",s);return ty.createElement(ty.Fragment,null,n," ",l," to ",s);case"project_default_branch_update":return ty.createElement(ty.Fragment,null,n," the default branch ",i," for ",l);case"project_contents_update":return ty.createElement(ty.Fragment,null,n," contents in ",l,"'s ",ty.createElement("b",null,t.branch)," branch via"," ",ty.createElement("b",null,"worker"===t.source?"webhook":t.source),t.sourceVersion?ty.createElement(ty.Fragment,null,"@",ty.createElement("b",null,t.sourceVersion)):"");case"user_create":case"user_delete":return ty.createElement(ty.Fragment,null,n," the user");case"user_sign_in":return ty.createElement(ty.Fragment,null,"Signed in");case"user_sign_out":return ty.createElement(ty.Fragment,null,"Signed out");case"user_password_update":return ty.createElement(ty.Fragment,null,n," password");case"team_create":return ty.createElement(ty.Fragment,null,"Team ",ty.createElement("b",null,t.team)," created.");case"team_rename":return ty.createElement(ty.Fragment,null,"Team ",ty.createElement("b",null,t.oldName)," renamed to ",ty.createElement("b",null,t.team),".");case"team_delete":return ty.createElement(ty.Fragment,null,"Team ",ty.createElement("b",null,t.team)," deleted.");case"team_user_add":return ty.createElement(ty.Fragment,null,"User ",ty.createElement("b",null,t.email)," added to team ",ty.createElement("b",null,t.team)," with ",ty.createElement("b",null,co(t))," team role.");case"team_user_role_update":return ty.createElement(ty.Fragment,null,"User ",ty.createElement("b",null,t.email)," in team ",ty.createElement("b",null,t.team)," changed from ",ty.createElement("b",null,t.oldRole)," to"," ",ty.createElement("b",null,co(t))," team role.");case"team_user_remove":return ty.createElement(ty.Fragment,null,"User ",ty.createElement("b",null,t.email)," removed from team ",ty.createElement("b",null,t.team),".");case"project_team_join":return ty.createElement(ty.Fragment,null,"Team ",ty.createElement("b",null,t.team)," added to project ",ty.createElement("b",null,t.project)," with ",ty.createElement("b",null,co(t))," role.");case"project_team_role_update":return ty.createElement(ty.Fragment,null,"Team ",ty.createElement("b",null,t.team)," in project ",ty.createElement("b",null,t.project)," changed from ",ty.createElement("b",null,t.oldRole)," to"," ",ty.createElement("b",null,co(t)),".");case"project_team_remove":return ty.createElement(ty.Fragment,null,"Team ",ty.createElement("b",null,t.team)," removed from project ",ty.createElement("b",null,t.project),".");case"workspace_machine_principal_create":return ty.createElement(ty.Fragment,null,"Workspace Token ",ty.createElement("b",null,t.machinePrincipal)," created.");case"workspace_machine_principal_update":return ty.createElement(ty.Fragment,null,"Workspace Token ",ty.createElement("b",null,t.oldName)," renamed to ",ty.createElement("b",null,t.machinePrincipal),".");case"workspace_machine_principal_delete":return ty.createElement(ty.Fragment,null,"Workspace Token ",ty.createElement("b",null,t.machinePrincipal)," deleted.");default:return ty.createElement(ty.Fragment,null,e)}});function co(e){return e.role??e.new_role}function cl(e){return`${e.product} ${12===Number(e.interval)?"yearly":"monthly"}`}let ci=[{value:"all",label:"All"},{title:"Workspace",options:[{label:"Membership changed",value:"workspace_user_add,workspace_user_remove,workspace_user_join,workspace_user_invite,workspace_user_leave,workspace_user_account_type_update"},{label:"Billing plan changed",value:"workspace_plan_create,workspace_plan_delete,workspace_plan_update,workspace_trial_start,billing_subscribe,billing_cancel,billing_undo_cancel,billing_interval_change,billing_undo_interval_change,billing_upgrade,billing_downgrade,billing_undo_downgrade"},{label:"Integration changed",value:"workspace_integration_add,workspace_integration_remove,workspace_integration_update"},{label:"Workspace changed",value:"workspace_create,workspace_delete,workspace_slug_update"},{label:"Workspace Token Created",value:"workspace_machine_principal_create"},{label:"Workspace Token Changed",value:"workspace_machine_principal_update"},{label:"Workspace Token Deleted",value:"workspace_machine_principal_delete"}]},{title:"Group",options:[{label:"Created a group",value:"group_create"},{label:"Deleted a group",value:"group_delete"},{label:"Renamed a group",value:"group_rename"},{label:"Changed visibility of a group",value:"group_visibility_update"},{label:"Membership changed",value:"group_user_add,group_user_remove,group_user_join,group_user_leave,group_user_role_update"}]},{title:"Project",options:[{label:"Created a project",value:"project_create"},{label:"Deleted a project",value:"project_delete"},{label:"Renamed a project",value:"project_rename"},{label:"Moved a project",value:"project_move"},{label:"Updated contents of a project",value:"project_contents_update"},{label:"Changed visibility of a project",value:"project_visibility_update"},{label:"Changed default branch of a project",value:"project_default_branch_update"},{label:"Membership changed",value:"project_user_add,project_user_remove,project_user_join,project_user_leave,project_user_role_update"},{label:"Team membership changed",value:"project_team_join,project_team_remove,project_team_role_update"}]},{title:"Team",options:[{label:"Created a team",value:"team_create"},{label:"Deleted a team",value:"team_delete"},{label:"Renamed a team",value:"team_rename"},{label:"Membership changed",value:"team_user_add,team_user_remove,team_user_role_update"}]}],cs=({value:e,onChange:t})=>ty.createElement(tg.Select,{"aria-label":"Event type",triggerTextPrefix:"Event: ",value:e.join(",")||"all",onChange:e=>t("all"===e?[]:String(e).split(",")),options:ci}),cc=[{id:"actor",Header:"Member",accessor:"actor",disableSortBy:!0,Cell:({value:e,row:t})=>{if(!e)return"project_contents_update"===t.original.type&&t.original.metadata.user?t.original.metadata.user:"-";let a=e.name??e.email??"";return ty.createElement(tg.Flex,{overflowX:"hidden",alignItems:"center"},ty.createElement(tg.Flex,{flex:"initial",flexDirection:"col",justifyContent:"center"},ty.createElement(tg.Avatar,{name:a})),ty.createElement(tg.Box,{flex:1,ml:3,overflowX:"hidden"},ty.createElement(tg.Box,{textTransform:e.name?"capitalize":"lowercase",w:"full",textOverflow:"truncate"},e.name?e.name:e.email),e.name&&ty.createElement(tg.Box,{color:"light",textOverflow:"truncate"},e.email)))},width:200},{id:"created_at",Header:"Date",accessor:"created_at",disableSortBy:!0,Cell:({value:e})=>{let t=new Date(e),a=t.toLocaleDateString(),r=t.toLocaleTimeString();return ty.createElement(tg.Box,null,ty.createElement(tg.Box,{textTransform:"capitalize"},a),ty.createElement(tg.Box,{color:"light"},r))},width:100},{id:"event",Header:"Event",accessor:"type",disableSortBy:!0,Cell:({value:e,row:{original:t}})=>ty.createElement(tg.Box,{wordBreak:"words",whitespace:"normal"},ty.createElement(cn,{type:e,metadata:t.metadata})),width:300},{id:"group",Header:"Group",accessor:"metadata",disableSortBy:!0,Cell:({value:e})=>ty.createElement("span",null,e.group||"-"),width:100},{id:"ip_address",Header:"IP address",accessor:"ip_address",disableSortBy:!0,Cell:({value:e})=>ty.createElement("span",null,e||"-"),width:80,maxWidth:100}],cu=({workspaceId:e})=>{let{state:t}=(0,tB.U8)(),[a,r]=ty.useState([]),n=(0,tN.useGetWorkspaceActivity)({jwt:t.auth.jwt,workspace_id:(0,t8.encodeID)("wk",e),type:a?.length?a:void 0}),o=n.data?.pages?.flatMap(e=>e.data)||[],l=nu(o,n);return ty.createElement(ty.Fragment,null,ty.createElement(tg.Flex,null,ty.createElement(cs,{value:a,onChange:r})),ty.createElement(ns.A,l,({onItemsRendered:e,ref:t})=>ty.createElement(tx.Table,{columns:cc,virtualizedListRef:t,onItemsRendered:e,data:o})))},cd=(0,ak.ss)((0,ak.aZ)(function({workspace:e}){(0,a6.e)("workspace_activity");let{state:t}=(0,tB.U8)();return t.features.hasFeature(tU.BAf.ActivityLogs)?ty.createElement(s5,null,ty.createElement(cu,{workspaceId:e.id})):ty.createElement(ca,{feature:tU.BAf.ActivityLogs})},tU.E4M.WorkspaceActivityRead));var cm=a(44007);function cp({task:e,className:t}){let a;let{jwt:r}=(0,tF.hD)(),[n,o]=ty.useState(!1),{data:l,isFetched:i}=(0,tN.useGetProject)(r,{projectId:e?.projectId||0},{enabled:!!e?.projectId}),s="queued"!==e.status;switch(e.payload?.event){case tU.iBT.Manual:a=ty.createElement("div",{className:"text-gray mr-8"},ty.createElement(tj.FAIcon,{icon:["fas","hand-paper"],className:"mr-2 text-lg"}),"Manual");break;case tU.iBT.Push:a=ty.createElement("div",{className:"text-gray mr-8"},ty.createElement(tj.FAIcon,{icon:["fas","upload"],className:"mr-2 text-lg"}),"Push");break;case tU.iBT.PullRequestOpened:a=ty.createElement("div",{className:"text-gray mr-8"},ty.createElement(tj.FAIcon,{icon:["fas","code-branch"],className:"mr-2 text-lg"}),"PR opened");break;case tU.iBT.PullRequestOpened:a=ty.createElement("div",{className:"text-gray mr-8"},ty.createElement(tj.FAIcon,{icon:["fas","code-merge"],className:"mr-2 text-lg"}),"PR merged");break;default:a=null}return ty.createElement(tj.Card,{className:t3()("border-l-4",{"border-success":"success"===e.status,"border-danger":"failed"===e.status,"border-primary":"running"===e.status,"border-purple":"queued"===e.status,"cursor-pointer":s},t),onClick:()=>{s&&o(!n)}},ty.createElement("div",{"data-test":"analyzer-job-item",className:"flex flex-row items-center"},ty.createElement("div",{className:"flex flex-col flex-1"},ty.createElement("div",{className:"flex flex-row"},ty.createElement("div",{className:t3()("font-medium",{"text-success":"success"===e.status,"text-danger":"failed"===e.status,"text-primary":"running"===e.status,"text-purple":"queued"===e.status})},!l?.name&&i&&ty.createElement("span",{className:"text-gray"},"(deleted)"),(!i||l?.name)&&ty.createElement("span",{className:t3()(!i&&tj.Classes.SKELETON)},l?.name||"Loading...")),ty.createElement("div",{className:"ml-8 text-gray"},e.payload?.ref)),ty.createElement("div",{className:"flex flex-row mt-2"},a,"deleteBranch"===e.taskId&&ty.createElement("div",{className:"text-gray mr-8"},ty.createElement(tj.FAIcon,{icon:["fal","trash-alt"],className:"mr-2 text-lg"}),"Delete"),e.startedAt&&ty.createElement("div",{className:"text-gray mr-8"},ty.createElement(tj.Icon,{icon:"calendar",className:"mr-2"}),"started ",ty.createElement(cm.f,{date:e.startedAt})),e.durationMs&&ty.createElement("div",{"data-test":"analyzer-finished-timer",className:"text-gray"},ty.createElement(tj.Icon,{icon:"time",className:"mr-2"}),"done in ",function(e){let t=Math.floor(e/1e3),a=Math.floor(t/3600),r=Math.floor((t%=3600)/60),n=t%60,o=[];return a>0&&o.push(`${a}h`),(a>0||r>0)&&o.push(`${r}m`),o.push(`${n}s`),o.join(" ")}(e.durationMs)))),s&&ty.createElement(tj.Button,{rightIcon:n?"chevron-up":"chevron-down",minimal:!0,onClick:()=>o(!n)})),s&&ty.createElement(tj.Collapse,{isOpen:n},ty.createElement(cg,{jobId:e.jobId})))}function cg({jobId:e}){let[{fetching:t,data:a}]=(0,tU.PSJ)({pollInterval:3e3,variables:{jobId:e}});return ty.createElement(tj.Pre,{className:"h-80 overflow-auto"},t&&!a?"Loading...":a?.taskLogDetails.map(e=>e.message).join("\n"))}let ch=(0,ak.ss)((0,ak.aZ)((0,ak.BZ)(function(){(0,a6.e)("workspace_automation");let{state:e}=(0,tB.U8)(),[{fetching:t,data:a}]=(0,tU.nzi)({variables:{workspaceId:e.workspaces.currentWorkspaceId},pollInterval:1e4});return ty.createElement(i6,null,t&&!a&&ty.createElement(tj.Spinner,null),a?.sl_sl_task_log_status.map((e,t)=>ty.createElement(cp,{key:e.jobId,task:e,className:t>0?"mt-4":void 0})),a?.sl_sl_task_log_status.length===0&&ty.createElement(tj.NonIdealState,{icon:ty.createElement(tj.FAIcon,{icon:["fad","robot"]}),title:"No events to show here yet...",description:"As you connect Git repositories to your workspace, webhook events & other logs will be displayed here to aid in debugging."}))}))),cf=({warningText:e,confirmExpectedValue:t,inputField:a=!0})=>{let{register:r}=(0,t5.xW)();return ty.createElement(tg.Box,null,e,a&&ty.createElement(tg.Box,{my:3},ty.createElement(lp,{"data-test":"confirm-input",autoFocus:!0,placeholder:t,helperText:`Type in "${t}" to confirm.`,...r("confirm-text",{validate:{matchesConfirmation:e=>e===t}})})))},cb=()=>{let{register:e}=(0,t5.xW)();return ty.createElement(tg.Box,null,ty.createElement(lp,{label:"Email",autoFocus:!0,...e("email",{required:!0})}))},cy=e=>"dialog"===e.type?ty.createElement(cw,{...e,hasMoreIcon:["far","chevron-right"],valueElem:ty.createElement(tg.Box,null,e.value)}):ty.createElement(tg.Link,{href:e.href},ty.createElement(cw,{...e,hasMoreIcon:["far","link"]})),cw=({label:e,tooltip:t,dangerText:a,hint:r,children:n,onClick:o,testId:l,hasMoreIcon:i,valueElem:s,actionElem:c,value:u,rowPosition:d})=>ty.createElement(tg.Box,{bg:{hover:"canvas-50"},border:0,borderColor:"transparent",roundedT:"first"===d?"lg":void 0,roundedB:"last"===d?"lg":void 0},ty.createElement(tg.Flex,{cursor:"pointer","data-test":(0,th.kebabCase)(`setting-row-${l||e}`),alignItems:"center",py:4,px:5,onClick:o},ty.createElement(tg.Flex,{flex:1,alignItems:"center"},ty.createElement(tg.Box,{flex:1},ty.createElement(cE,{label:e,hint:r,tooltip:t,dangerText:a})),ty.createElement(tg.HStack,{spacing:3},s,c,ty.createElement("span",{className:"sl-text-muted"},u),i&&ty.createElement(tg.Box,{color:"muted"},ty.createElement(tg.Icon,{icon:i}))))),n),cE=({label:e,tooltip:t,dangerText:a="foo",hint:r})=>{let n=r||a;return ty.createElement(tg.Box,null,ty.createElement(tg.Flex,{align:"center"},ty.createElement(tg.Box,{fontSize:"lg",fontWeight:"medium",color:"body",mr:2,display:"flex"},e,t&&ty.createElement(tg.Tooltip,{placement:"right",renderTrigger:ty.createElement(tg.Box,{ml:2},ty.createElement(tg.Icon,{className:"sl-text-light",icon:["fal","circle-question"]}))},t))),n&&ty.createElement(tg.Box,{display:"block",pt:1,mr:2},n))},cv=(e,t,a,r,n)=>{let o=e>=t;return isFinite(t)?!o||r||a?o&&!r&&a?ck(e,t,"Your subscription will be updated on your next invoice if additional members are added.",n):o&&r&&!a||o&&r&&a?ck(e,t,"Please contact your account manager."):ck(e,t):ck(e,t,ty.createElement(tg.Link,{href:"/admin/billing/plans"},"Upgrade your plan today.")):ty.createElement(tg.Box,{color:"muted"},`${e||0} in use / Unlimited`)};function ck(e,t,a,r){return ty.createElement(tg.Flex,{align:"center"},a&&ty.createElement(tg.Icon,{icon:["fas","circle-exclamation"],color:tj.Colors.RED4,className:"mr-2"}),ty.createElement(tg.Box,{color:a?"danger":"muted"},`${e||0} in use / ${t} paid`,a?` - ${r||"Workspace"} limit reached. `:null,a))}let c_=()=>{let{state:e,effects:t}=(0,tB.U8)(),a=String(e.workspaces.currentWorkspaceId),{mutate:r}=(0,tN.useCreateCustomerPortalSession)(e.auth.jwt);return ty.useCallback(()=>{r({workspace_id:a,return_url:window.location.href},{onSuccess({redirect_url:e}){window.location.href=e},onError(e){t.notifications.danger({message:e.message||"An unknown error occurred"})}})},[r,a,t.notifications])},cx=()=>{let e=c_();return ty.createElement(cy,{type:"external-link",label:"Payment Methods & Billing Information",hint:"Update your payment method or billing contact information",onClick:()=>e(),rowPosition:"first"})},cI=({email:e})=>{let{state:t}=(0,tB.U8)(),a=(0,tN.useUpdateBillingAccount)(t.auth.jwt),{openFormDialog:r}=(0,tx.useFormDialog)(),n=String(t.workspaces.currentWorkspaceId);return ty.createElement(cy,{type:"dialog",label:"Billing Contact",value:e,hint:"Well send invoices and payment related info to this email",onClick:()=>{r(cb,{title:"Billing Contact",defaultValues:{email:e},onSave:async({email:e})=>await a.mutateAsync({workspace_id:n,stripe_billing_email:e})})}})},cS=()=>{let e=c_();return ty.createElement(cy,{type:"external-link",label:"Invoices",hint:"View a list of historical invoices",onClick:()=>e(),rowPosition:"last"})},cj=({title:e,children:t})=>ty.createElement(tg.VStack,{spacing:3},ty.createElement(tg.Heading,{mx:2,size:3},e),ty.createElement(tg.VStack,{divider:!0,rounded:"lg",border:!0,borderColor:"dark"},t)),cC=({title:e,projection:t,interval:a,isOpen:r,onClose:n})=>t?ty.createElement(tg.Modal,{isOpen:r,onClose:n,size:"sm"},ty.createElement(ar,{title:e,cost:`${t7(t.total)}`,lineItems:t.details.map(({amount:e,...t})=>({...t,right:`${t7(e)}`})),ctaButton:ty.createElement(tg.Button,{onPress:n},"Close Summary"),interval:a})):null,cP=({members:e})=>ty.createElement(cy,{type:"external-link",href:"/admin/members",label:"Members",value:"Manage Members",hint:cv(e.current,e.billingLimit,e.isSoftCap,e.isManualManagedCustomer,"Members"),rowPosition:"first"}),cA=({makers:e})=>ty.createElement(cy,{type:"external-link",href:"/admin/members",label:"Makers+",value:"Manage Members",hint:cv(e.current,e.billingLimit,e.isSoftCap,e.isManualManagedCustomer,"Makers+"),tooltip:"Makers+ consists of users with Maker, Billing Admin, Admin, or Owner Workspace roles.",rowPosition:"first"}),cB=({viewers:e})=>ty.createElement(cy,{type:"external-link",href:"/admin/members",label:"Viewers",value:"Manage Members",hint:cv(e.current,e.billingLimit,e.isSoftCap,e.isManualManagedCustomer,"Viewers")}),cD=({guests:e})=>ty.createElement(cy,{type:"external-link",href:"/admin/members",label:"Guests",value:"Manage Members",hint:cv(e.current,e.billingLimit,e.isSoftCap,e.isManualManagedCustomer,"Guests"),rowPosition:"last"}),cT=({lines:e,actions:t,"data-test":a})=>ty.createElement(tg.Box,{"data-test":a,border:!0,borderColor:"button",rounded:"lg",p:4,flex:1},ty.createElement(tg.VStack,{spacing:3},e.map((e,t)=>ty.createElement(cF,{key:t,...e}))),t?ty.createElement(tg.HStack,{mt:4,spacing:2},t):null),cF=({label:e,text:t,hint:a,datatest:r})=>ty.createElement(tg.Box,null,ty.createElement(tg.HStack,{spacing:2,textTransform:"uppercase",opacity:60},ty.createElement(tg.Box,null,e),a&&ty.createElement(tg.Tooltip,{renderTrigger:ty.createElement(tg.Box,null,ty.createElement(tg.Icon,{icon:["fal","question-circle"]}))},a)),ty.createElement(tg.Box,{"data-test":r,fontWeight:"semibold",fontSize:"2xl"},t)),c$=({workspaceUsageData:e})=>{let{teams:t,projects:a}=e,{hasFeature:r}=(0,tF._m)();return ty.createElement(cj,{title:"Workspace Usage"},r(tU.BAf.Teams)&&ty.createElement(cy,{type:"external-link",href:"/admin/teams",label:"Current Teams",value:"Manage Teams",hint:cv(t.current,t.billingLimit),rowPosition:"first"}),r(tU.BAf.Projects)&&ty.createElement(cy,{type:"external-link",href:"/admin/projects",label:"Current Projects",value:"Manage Projects",hint:cv(a.current,a.billingLimit),rowPosition:"last"}))},cN={members:{current:0,billingLimit:0},makers:{current:0,billingLimit:0},viewers:{current:0,billingLimit:0},guests:{current:0,billingLimit:0}},cU={teams:{current:0,billingLimit:0},projects:{current:0,billingLimit:0}},cM=({account:e})=>{let{state:t}=(0,tB.U8)(),{hasFeature:a}=(0,tF._m)(),[r,n]=ty.useState(cN),[o,l]=ty.useState(cU),{data:i=[]}=(0,tN.useGetBillingProducts)(),s=i.find(t=>t.id===e.billing_product_id),c=e.renew_billing_pricing_plan_id,u=c?i.find(e=>e.pricing_plans.find(e=>e.id===c)):void 0,d=u?.pricing_plans.find(e=>e.id===c),m=!!(s&&u&&s.id===u.id&&e.cycle_interval_months!==d?.cycle_interval_months),p=!!(s&&u&&s.priority>u.priority),g=!!(e.billing_pricing_plan_id&&e.stripe_cancel_at_period_end),h="incomplete"===e.stripe_status,f=!!e.stripe_subscription_id,b=1!==e.billing_product_id&&!f,{billingLimit:y,isSoftCap:w}=o2(),{getFeatureUsage:E,getFeatureMaxUsage:v,getFeature:k}=t.features,_=k(tU.BAf.Guests),x=k(tU.BAf.GuestsAsMembers),I=ty.useCallback(e=>e===tU.BAf.Members&&null!==y?{current:E(e),billingLimit:y,isSoftCap:w,isManualManagedCustomer:b}:{current:E(e),billingLimit:v(e),isSoftCap:!1,isManualManagedCustomer:b},[y,v,E,b,w]);return ty.useEffect(()=>{t.features&&(n({members:I(tU.BAf.Members),makers:I(tU.BAf.Editors),viewers:I(tU.BAf.Viewers),guests:I(tU.BAf.Guests)}),l({teams:I(tU.BAf.Teams),projects:I(tU.BAf.Projects)}))},[v,I,t.features]),ty.createElement(tg.VStack,{spacing:10},g&&ty.createElement(cL,{currentProduct:s,currentPeriodEnd:e.stripe_current_period_end}),h&&ty.createElement(cG,null),m&&ty.createElement(cR,{productName:e.billing_product_name,billingCycleInterval:e.cycle_interval_months,nextRenewalAt:e.next_renewal_at}),p&&ty.createElement(cW,{currentProduct:s,renewProduct:u,nextRenewalAt:e.next_renewal_at}),ty.createElement(tg.HStack,{spacing:4,alignItems:"stretch"},ty.createElement(cO,{currentProduct:s,productName:e.billing_product_name,billingPeriodEnd:e.stripe_current_period_end,billingCycleInterval:b?12:e.cycle_interval_months,nextRenewalAt:e.next_renewal_at,isCanceling:g,isIncomplete:"incomplete"===e.stripe_status,isChangingInterval:m,isManualManagedCustomer:b,hasActiveTrial:!!e.trial_end_at&&new Date(e.trial_end_at)>new Date,trialEnd:e.trial_end_at}),ty.createElement(cq,{productName:e.billing_product_name,nextInvoiceType:e.next_invoice_type,billingCycleInterval:e.cycle_interval_months,nextInvoiceAt:e.next_invoice_at,projection:e.next_invoice_projection})),b?ty.createElement(tg.Callout,{appearance:"outline"},ty.createElement(tg.Flex,{direction:"row"},ty.createElement("span",null,"Please contact your account manager or"," ",ty.createElement("a",{className:"text-primary",href:tm.FI,target:"_blank",rel:"noreferrer"},"Stoplight Support")," ","with billing related questions."))):ty.createElement(cj,{title:"Billing"},!b&&f&&ty.createElement(ty.Fragment,null,ty.createElement(cx,null),ty.createElement(cI,{email:e.stripe_billing_email??""}),ty.createElement(cS,null))),ty.createElement(cj,{title:"Seat Usage"},a(tU.BAf.Members)&&ty.createElement(cP,{members:r.members}),a(tU.BAf.Editors)&&ty.createElement(cA,{makers:r.makers}),a(tU.BAf.Viewers)&&ty.createElement(cB,{viewers:r.viewers}),!!_&&!x&&ty.createElement(cD,{guests:r.guests})),ty.createElement(c$,{workspaceUsageData:o}))};function cR({productName:e,billingCycleInterval:t,nextRenewalAt:a}){let{state:r,effects:n}=(0,tB.U8)(),o=(0,tN.useChangeBillingInterval)(r.auth.jwt);return ty.createElement(tg.Callout,{"data-test":"interval-change-callout",appearance:"outline"},ty.createElement(tg.Flex,{alignItems:"center",justify:"between"},ty.createElement(tg.Box,{flex:1,mr:2},"On ",ty.createElement(tg.Text,{fontWeight:"bold"},tQ(new Date(a||"")))," your subscription will change from ",1===t?"monthly to yearly.":"yearly to monthly."),ty.createElement(tg.Button,{size:"sm",onPress:async()=>{try{let a=String(r.workspaces.currentWorkspaceId);await o.mutateAsync({workspace_id:a,interval:t}),n.reporter.log({event:"billing_change_interval_canceled",payload:{product:e}})}catch(e){n.notifications.danger({message:tm.Mt}),n.reporter.error(e)}}},"Cancel Change")))}function cW({currentProduct:e,renewProduct:t,nextRenewalAt:a}){let r=(0,tF.hD)(),n=(0,tF.C$)(),{danger:o}=(0,tF.AO)(),{log:l,error:i}=(0,tF.pw)(),s=(0,tN.useUpgradeBillingProduct)(r.jwt),{openFormDialog:c}=(0,tx.useFormDialog)();async function u(){try{let a=String(n.currentWorkspaceId);await s.mutateAsync({workspace_id:a,product_id:e.id}),l({event:"billing_downgrade_canceled",payload:{product:t.name}})}catch(e){o({message:tm.Mt}),i(e)}}return ty.createElement(tg.Callout,{"data-test":"downgrade-callout",appearance:"outline"},ty.createElement(tg.Flex,{alignItems:"center",justify:"between"},ty.createElement(tg.Box,{flex:1,mr:2},"On ",ty.createElement(tg.Text,{fontWeight:"bold"},tQ(new Date(a||"")))," your subscription will downgrade from ",tG(e.name)," to"," ",tG(t.name),"."),ty.createElement(tg.Button,{"data-test":"cancel-change",size:"sm",onPress:()=>{let e=ty.createElement("div",null,"Are you sure you want to cancel the downgrade process? You will be charged according to your current plan at the end of the billing period.");c(()=>ty.createElement(cf,{warningText:e,inputField:!1}),{title:"Cancel Downgrade?",saveButtonText:"Confirm",onSave:async()=>{await u()}})}},"Cancel Change")))}function cL({currentProduct:e,currentPeriodEnd:t}){let{state:a,effects:r}=(0,tB.U8)(),n=(0,tN.useUpgradeBillingProduct)(a.auth.jwt);return ty.createElement(tg.Callout,{appearance:"outline",intent:"warning"},ty.createElement(tg.Flex,{alignItems:"center",justify:"between"},ty.createElement(tg.Box,{flex:1,mr:2},"On ",ty.createElement(tg.Text,{fontWeight:"bold"},tQ(new Date(t)))," your subscription will be canceled."),ty.createElement(tg.Button,{size:"sm",loading:n.isLoading,onPress:()=>{n.mutate({workspace_id:String(a.workspaces.currentWorkspaceId),product_id:e.id},{onError:e=>{r.notifications.danger({message:tm.Mt}),r.reporter.error(e)}})}},"Cancel Change")))}function cG(){let{state:e}=(0,tB.U8)(),{data:t,isLoading:a}=(0,tN.useGetBillingInvoices)(e.auth.jwt,{workspace_id:e.workspaces.currentWorkspaceId});if(a)return null;let r=t?.length&&t[0].stripe_last_finalization_error_message?.replace(/\.$/,"");return ty.createElement(tg.Callout,{appearance:"outline",intent:"danger"},ty.createElement(tg.Flex,{alignItems:"center",justify:"between"},ty.createElement(tg.Box,{flex:1,mr:2},`There was an error processing your invoice${r?`: "${r}"`:""}. Please update your payment method to resolve it or visit ${tm.FI} if you continue to have issues.`)))}function cO({currentProduct:e,productName:t,billingPeriodEnd:a,billingCycleInterval:r,nextRenewalAt:n,isCanceling:o,isIncomplete:l,isChangingInterval:i,isManualManagedCustomer:s,hasActiveTrial:c,trialEnd:u}){let[d,m]=ty.useState(!1),p=[{label:"Plan",text:t,datatest:"plan"},...e?.id===1?[]:[{label:`${12===r?"Yearly":"Monthly"} - ${o?"Canceling":"Renews"} On`,text:n?tQ(new Date(n)):"-"}]];u&&c&&p.push({label:"Free Trial Ends On",text:tQ(new Date(u))});let g=[];return s||l||o||e?.id===4||g.push(ty.createElement(tg.Button,{as:tk.Link,key:"plan",size:"sm",to:"plans"},"Change Plan")),s||o||i||1!==r&&12!==r||g.push(ty.createElement(tg.Button,{key:"interval",size:"sm",onPress:()=>m(!0)},"Switch to ",1===r?"Yearly":"Monthly")),ty.createElement(ty.Fragment,null,ty.createElement(cT,{lines:p,actions:g.length?g:void 0}),e&&d&&ty.createElement(cz,{currentProduct:e,billingPeriodEnd:a,billingCycleInterval:r,handleClose:()=>m(!1)}))}let cz=({currentProduct:e,billingPeriodEnd:t,billingCycleInterval:a,handleClose:r})=>{let{state:n,effects:o}=(0,tB.U8)(),l=(0,tN.useChangeBillingInterval)(n.auth.jwt);ty.useEffect(()=>{o.reporter.log({event:"billing_change_interval_dialog_opened",payload:{product:e.name}})},[]);let i=tG(e.name),s=1===a;return ty.createElement(ac,{title:`Switch to ${i} ${s?"Yearly":"Monthly"}`,context:"change_interval",isOpen:!0,displayYearly:s,showSavings:s,onClose:r,productId:e.id,switchBillingInterval:!0,ctaButton:({product:e,interval:a})=>ty.createElement(tg.Box,null,s&&ty.createElement(tg.Box,{pb:6},"Yearly subscriptions require a one-year non-cancellable commitment. Your yearly subscription will begin at the end of your current billing period",t?`, on ${tQ(new Date(t))}`:"","."),ty.createElement(tg.Button,{appearance:"primary",loading:l.isLoading||l.isSuccess,onPress:async()=>{try{let t=String(n.workspaces.currentWorkspaceId);await l.mutateAsync({workspace_id:t,interval:a}),o.reporter.log({event:"billing_change_interval_completed",payload:{product:e.name}}),o.notifications.success({message:`Successfully switched to the ${i} ${s?"yearly":"monthly"} plan!`}),r()}catch(e){o.notifications.danger({message:tm.Mt}),o.reporter.error(e)}}},"Switch to ",s?"Yearly":"Monthly"))})};function cq({productName:e,billingCycleInterval:t,nextInvoiceType:a,nextInvoiceAt:r,projection:n}){let[o,l]=ty.useState(!1),i="Next Invoice";"true-up"===a&&(i="Next Invoice - True-up");let s=`${e} ${12===t?"Yearly":"Monthly"} Renewal`;"true-up"===a&&(s="Quarterly True-up");let c=[{label:i,text:r?tQ(new Date(r)):"-"},{label:"Projected Total",text:n?`${t7(n.total)}`:"-",datatest:"projected-total"}],u=[];return n?.total&&u.push(ty.createElement(tg.Button,{key:"plan",size:"sm",onPress:()=>l(!0)},"Details")),ty.createElement(ty.Fragment,null,ty.createElement(cT,{lines:c,actions:u.length?u:void 0}),ty.createElement(cC,{title:s,projection:n,isOpen:o,onClose:()=>l(!1),interval:t}))}let cV=(0,ak.ss)((0,ak.aZ)(function({workspace:e}){(0,a6.e)("billing_details");let{state:t}=(0,tB.U8)(),{data:a,isLoading:r,isError:n}=(0,tN.useGetBillingAccount)(t.auth.jwt,{workspace_id:e.id}),o=ty.createElement(tg.Box,null,"There was an error fetching billing info. Please"," ",ty.createElement(tg.Link,{target:"blank",href:tm.FI},"reach out to support")," ","if this continues.");return!a||r||n?ty.createElement(oK.P,null,ty.createElement(tg.Box,{p:20,color:r?"muted":"danger"},r?"Loading...":o)):1!==a.billing_product_id||a.stripe_customer_id?ty.createElement(cM,{account:a}):ty.createElement(oo,{account:a})},tU.E4M.WorkspaceBilling)),cH=({account:e})=>{let t=(0,tF.C$)(),a=(t.myWorkspace?.billing_product).id,r=!!(e.billing_pricing_plan_id&&e.stripe_current_period_end),[n,o]=ty.useState(null),[l,i]=ty.useState(!r||12===e.cycle_interval_months),s=1===e.billing_product_id,c=4===e.billing_product_id;return ty.createElement(ty.Fragment,null,ty.createElement(n7,{title:"Change your plan",isYearly:l,handleYearlySwitch:i}),ty.createElement(tg.Box,{mt:12,style:{minWidth:600,maxWidth:1100},overflowX:"auto"},ty.createElement(ah,{handleYearlySwitch:i,displayYearly:l,isScreen:!0})),r&&!c&&!s&&ty.createElement(tg.Flex,{justifyContent:"end",mt:6,style:{maxWidth:1024}},ty.createElement(on,{billingPeriodEnd:e.stripe_current_period_end,subscriptionId:e.stripe_subscription_id})),n?ty.createElement(ac,{isOpen:!0,onClose:()=>o(null),productId:n.id,ctaButton:({product:e})=>{let t=t2(a,e.id);return ty.createElement(t0,{product:e,mode:t})}}):null)},cQ=(0,ak.ss)((0,ak.aZ)(function({workspace:e}){(0,a6.e)("billing_plans");let{state:t}=(0,tB.U8)(),{data:a,isLoading:r,isError:n}=(0,tN.useGetBillingAccount)(t.auth.jwt,{workspace_id:e.id}),o=ty.createElement(tg.Box,null,"There was an error fetching billing info. Please"," ",ty.createElement(tg.Link,{target:"blank",href:tm.FI},"reach out to support")," ","if this continues.");return!a||r||n?ty.createElement(oK.P,null,ty.createElement(tg.Box,{p:20,color:r?"muted":"danger"},r?"Loading...":o)):1!==a.billing_product_id||a.stripe_customer_id?4===a.billing_product_id||a.billing_pricing_plan_id?ty.createElement(cH,{account:a}):ty.createElement(oo,{account:a}):ty.createElement(tA.Navigate,{to:"../",replace:!0})},tU.E4M.WorkspaceBilling)),cK=(0,ak.ss)(function(){let{state:e,effects:t,actions:a}=(0,tB.U8)(),{isSuccess:r,error:n,mutate:o}=(0,tN.useCompleteStripeCheckoutSession)(e.auth.jwt),l=(0,tA.useParams)();return ty.useEffect(()=>{o({workspace_id:String(e.workspaces.currentWorkspaceId),session_id:l.id??""})},[o,e.workspaces.currentWorkspaceId,l.id]),ty.useEffect(()=>{(r||n)&&(n?t.reporter.error(new o_(n)):t.reporter.log({event:"stripe_checkout_completed_successfully"}),window.location.href=window.location.href.replace(/\/success\/cs_.*$/,""))},[a.reporter,r,n,t.reporter]),null}),cJ=(0,ak.ss)((0,ak.aZ)((0,ak.BZ)(function(){let[e,t]=(0,tk.useSearchParams)();return ty.useEffect(()=>{e.delete("email"),e.delete("slug"),t(e)},[e,t]),ty.createElement(tg.Container,{as:"main",py:20,px:8,bg:"canvas",size:"full",style:{overflowX:"auto"}},ty.createElement(tA.Routes,null,ty.createElement(tA.Route,{path:"/",element:ty.createElement(cV,null)}),ty.createElement(tA.Route,{path:"/plans",element:ty.createElement(cQ,null)}),ty.createElement(tA.Route,{path:"/success/:id",element:ty.createElement(cK,null)})))})));!function(e){e[e.extendedSSGs=0]="extendedSSGs",e[e.defaultStyleGuide=1]="defaultStyleGuide"}(tn||(tn={}));let cY=()=>{let[e,t]=ty.useState(!1),[a,r]=ty.useState(0),[n,o]=ty.useState([]),{extendedSSGs:l,initExtendedSSGs:i}=function({projectIds:e}){let t=ty.useRef(new Map),[a,r]=ty.useState(null),{jwt:n}=(0,tF.hD)(),o=(0,tN.useGetExtendedSSGsForProjects)(n,{projectIds:e});return ty.useEffect(()=>{t.current=new Map,r(null)},[e]),ty.useEffect(()=>{o.length&&o.every(e=>e.isFetched)&&(o.map(e=>{e.data&&t.current.set(e.data.project_id,e.data.extendedSSGS)}),a||r(new Map(t.current)))},[a,n,o]),{extendedSSGs:t.current,initExtendedSSGs:a}}({projectIds:n});return{isOpen:e,openExtendedSSGModel:ty.useCallback(e=>{t(!0),o(e),r(0)},[]),openDefaultSSGModel:ty.useCallback(()=>{t(!0),r(1)},[]),close:ty.useCallback(()=>{t(!1)},[]),selectedProjectIds:n,setSelectedProjectIds:o,extendedSSGs:l,initExtendedSSGs:i,activeModel:a}},cX=ty.createContext({extendedSSGs:new Map,initExtendedSSGs:new Map,openExtendedSSGModel:()=>null,isOpen:!1,close:()=>null,selectedProjectIds:[],openDefaultSSGModel:()=>null,activeModel:tn.extendedSSGs,setSelectedProjectIds:()=>null});function cZ({children:e}){let{openDefaultSSGModel:t,openExtendedSSGModel:a,close:r,isOpen:n,activeModel:o,extendedSSGs:l,initExtendedSSGs:i,selectedProjectIds:s,setSelectedProjectIds:c}=cY();return ty.createElement(cX.Provider,{value:{extendedSSGs:l,initExtendedSSGs:i,openExtendedSSGModel:a,isOpen:n,close:r,selectedProjectIds:s,openDefaultSSGModel:t,activeModel:o,setSelectedProjectIds:c}},e)}function c0(){return ty.useContext(cX)}let c1=e=>{let{jwt:t}=(0,tF.hD)();return(0,tN.useGetDefaultStyleGuides)(t,{workspaceId:e})},c2=e=>{let{jwt:t}=(0,tF.hD)();return(0,tN.useSetDefaultStyleGuide)(t,{workspaceId:e})},c4=({items:e,activeStyleGuideIds:t})=>{let{getFilterValue:a,searchTerm:r}=(0,tx.useFilterContext)();return{filteredStyleGuides:ty.useMemo(()=>{let n=a(tx.ENABLED_FILTER_KEY)||"all";return e.filter(e=>"all"==n||"enabled"===n&&t.includes(e.id)||"disabled"===n&&!t.includes(e.id)).filter(e=>e.name.toLowerCase().includes(r.toLowerCase()))},[t,a,e,r])}},c3=()=>{let[e,t]=ty.useState([]),[a,r]=ty.useState(!1),{jwt:n}=(0,tF.hD)(),{currentWorkspace:o}=(0,tF.C$)(),{danger:l}=(0,tF.AO)(),{data:i,isFetched:s,isError:c}=(0,tN.useGetStyleGuides)(n,{}),{data:u,isFetched:d,isError:m}=(0,tN.useProjectsList)(n,{workspaceId:o?.id,flavor:"styleguide",visibility:tU.Tgv.Internal}),{data:p,isFetched:g}=c1(o?.id);return ty.useEffect(()=>{if(d&&s&&(t([...i?.items.filter(e=>e.latest_release)||[],...u?.filter(e=>e.default_branch?.latest_release)||[]].map(e=>{let t=p?.items.find(t=>e.id===t.id);return{...e,isDefault:!!t}})),r(!0)),c||m){let e=c?"Public":"Internal";l({message:`Error getting ${e} styleguides`})}},[d,s,g,c,m,i,u,p,l]),{data:e,isFetched:a}},c5=({dataTest:e,onCancel:t,onSave:a,StyleGuideCard:r,LibraryHeader:n,saveButtonText:o})=>{let{currentWorkspace:l}=(0,tF.C$)(),{selectedProjectIds:i,setSelectedProjectIds:s}=c0(),{data:c,isFetched:u}=c3(),{filteredStyleGuides:d}=c4({items:c,activeStyleGuideIds:i}),m=ty.useCallback(()=>{a&&a(i)},[i,a]),p=ty.useCallback((e,t,a)=>{s(a?i.includes(e)?[...i]:[...i,e]:i.filter(t=>t!==e))},[i,s]),g=u&&!c.length?"No style guides found":d&&!d.length?"No results match your criteria":void 0,h=d.filter(e=>e.workspace.slug!==l?.slug),f=d.filter(e=>!h.includes(e));return ty.createElement(tx.Library,{dataTest:e,onSave:m,onCancel:t,isLoading:!u,LibraryHeader:n,saveButtonText:o},!!f.length&&ty.createElement(tx.LibrarySection,{heading:`Workspace Style Guides (${f?.length})`},g&&ty.createElement(tg.Flex,{align:"center",justify:"center",flexGrow:!0},ty.createElement(tg.Text,{fontWeight:"medium"},g)),f?.map(e=>{let t=i.includes(e.id);return ty.createElement(r,{key:e.id,styleGuide:e,isActive:t,onChange:p})})),!!h.length&&ty.createElement(tx.LibrarySection,{heading:`Public Style Guides (${h?.length})`},h?.map(e=>{let t=i.includes(e.id);return ty.createElement(r,{key:e.id,styleGuide:e,isActive:t,onChange:p})})))},c8=({onSuccessMessage:e,onErrorMessage:t}={})=>{let{effects:a}=(0,tB.U8)(),{jwt:r}=(0,tF.hD)(),{refreshCurrentWorkspace:n}=(0,tF.iS)(),{mutateAsync:o,isLoading:l}=(0,tN.useUpdateWorkspace)(r);return{fetching:l,executeMutation:ty.useCallback(async({workspace_id:r,...l})=>{try{let t=await o({workspace_id:(0,t8.encodeID)("wk",r),...l});return a.notifications.success({message:e||"Save Successful"}),await n(r),t}catch(e){a.notifications.danger({message:t||`Error on updating workspace: ${e.message}`})}},[o,a.notifications,e,n,t])}};!function(e){e.GuestsReceiveDailyDigest="Guest Daily Digest",e.SearchIndexing="Search Indexing",e.StyleGuides="Style Guides",e.JoinRequests="Join Requests",e.TryIt="Try It",e.TryItMockServer="Try It Mock Server",e.UseAutomaticSsgConversion="Automatic Shared Styleguides conversion",e.ShowUserway="Userway Accessibility Widget",e.AllowPublicProject="Allow Public Project",e.AllowWebProjects="Allow Web Projects"}(to||(to={})),function(e){e.GuestsReceiveDailyDigest="guestsReceiveDailyDigest",e.DisableDefaultStyleguide="disableDefaultStyleguideEditing",e.JoinRequestsDisabled="joinRequestsDisabled",e.ShowTryit="showTryit",e.ShowUserway="showUserway",e.ShowTryitMockServer="showTryitMockServer",e.AllowSearchIndexing="allowSearchIndexing",e.UseAutomaticSsgConversion="useAutomaticSsgConversion",e.AllowPublicProject="allowPublicProject",e.AllowWebProjects="allowWebProjects"}(tl||(tl={}));let c6={disableDefaultStyleguideEditing:"allow_default_style_guide_disable",guestsReceiveDailyDigest:"allow_guests_receive_daily_digest",joinRequestsDisabled:"allow_join_requests",showTryit:"show_tryit",showTryitMockServer:"show_tryit_mock_server",allowSearchIndexing:"allow_search_indexing",useAutomaticSsgConversion:"use_automatic_ssg_conversion",showUserway:"show_userway",allowPublicProject:"allow_public_projects",allowWebProjects:"allow_web_projects"},c7=({workspace:e})=>{let[t,a]=ty.useState(e.disableDefaultStyleguideEditing),{executeMutation:r}=c8({onSuccessMessage:"Default Style Guide Editing Updated"}),n=async()=>{a(!t),r({workspace_id:e.id,[c6.disableDefaultStyleguideEditing]:!t})};return ty.createElement(tg.HStack,{spacing:2},ty.createElement(tg.Text,null,"Allow admins/editors to disable the default style guide"),ty.createElement(tg.Switch,{"aria-label":"Toggle disabling default style guides",isSelected:t,onClick:n}))},c9=(e,t=new URL("https://stoplight.io"))=>{let a,r;return e.workspace.domain?(a=e.workspace.domain,r=(0,tx.getLocation)().protocol):(a=`${e.workspace.slug}.${t.host}`,r=t.protocol),`${r}//${a}/docs/${e.slug}`},ue=e=>{let[t,a]=ty.useState(""),r=function(){let{state:e}=(0,tB.U8)();return e.router}();return ty.useEffect(()=>{a(c9(e,new URL(r.appUrl)))},[r.appUrl,e]),t},ut=({styleGuide:e,isActive:t,onChange:a})=>{let r=ue(e),n=ty.createElement(tg.Box,{color:"success"},ty.createElement(tg.Icon,{icon:["fas","check-circle"]})),o=ty.createElement(tg.Flex,{px:2,py:1,justifyContent:"evenly"},ty.createElement(tg.Box,{flexGrow:!0},ty.createElement(tg.Button,{"data-test":"card-action-view-docs",appearance:"minimal",onClick:()=>{window.open(r,"blank")}},"View Docs")),ty.createElement(tg.HStack,{spacing:1,flexGrow:!0},ty.createElement(ua,{checked:t,onChange:t=>{a(e.id,e.name,t.currentTarget.checked)}}),ty.createElement(tg.Text,{color:"light"},"Enabled")));return ty.createElement(tg.Box,{"data-test":`${e.name.toLowerCase()}-card`,p:3,w:"1/3"},ty.createElement(tg.Card,{title:e.name,logoIcon:e.presentation?.icon?["fas",e.presentation?.icon]:void 0,logoIconColor:e.presentation?.color||void 0,logoBackgroundColor:e.color?e.color+Math.round(38.25).toString(16).toUpperCase():void 0,description:e.description,isActive:t,badge:t?n:void 0,actionBar:o}))},ua=({checked:e,onChange:t})=>{let a=ty.useRef(null);return ty.useEffect(()=>{a.current.checked=e},[a,e]),ty.createElement(tg.Box,{"data-test":"card-action-enable-ssg",ref:a,as:"input","aria-label":"Enable Style Guide",onChange:t,type:"checkbox",pos:"relative",display:"block"})},ur=(0,ak.aZ)(function({workspace:e}){let{close:t,setSelectedProjectIds:a}=c0(),{id:r}=e,n=c2(r),{data:o}=c1(r),{success:l,danger:i}=(0,tF.AO)(),{log:s}=(0,tF.pw)(),c=ty.useMemo(()=>o?o.items.map(e=>e.id):[],[o]);ty.useEffect(()=>{a(c)},[c,a]);let u=ty.useCallback(async a=>{let o=a.filter(e=>!c.includes(e)),u=c.filter(e=>!a.includes(e)),d=o.map(e=>n.mutateAsync({project_id:(0,t8.decodeID)(e).id,workspace_id:(0,t8.encodeID)("wk",r),enabledForNewProjects:!0})),m=u.map(e=>n.mutateAsync({project_id:(0,t8.decodeID)(e).id,workspace_id:(0,t8.encodeID)("wk",r),enabledForNewProjects:!1}));await Promise.all([...d,...m]).then(()=>{l({message:"Default Style Guides Updated"})}).catch(()=>{i({message:"Some errors occurred updating your Default Style Guides"})}),s({event:"workspace_default_style_guide_set",payload:{workspace_id:e.id,added:o,removed:u}}),t()},[t,r,i,c,s,n,l,e.id]),d=ty.useCallback(()=>{t()},[t]),m=ty.createElement(tg.VStack,{spacing:1,pb:4},ty.createElement(tx.LibraryHeader,{heading:"Default Style Guides",subHeading:"Add default Style Guide rules to your new projects!",headerPrefix:ty.createElement(c7,{workspace:e})}),ty.createElement(tg.Callout,{appearance:"outline"},ty.createElement(tg.Text,{size:"lg"},"Stoplight recommends that you set one style guide as your default so that your team follows best practices")));return ty.createElement(c5,{"data-test":"default-style-guide-library",onSave:u,onCancel:d,StyleGuideCard:ut,LibraryHeader:m,saveButtonText:"Set Default"})}),un=()=>{let{jwt:e}=(0,tF.hD)(),t=(0,tN.useEnableExtendedSSGs)(e),a=(0,tN.useSetExtendedSSGs)(e),r=(0,tv.useQueryClient)(),{success:n,warning:o,danger:l}=(0,tF.AO)();return{enableSSGs:({project_ids:e,ssg_id:a})=>{t.mutateAsync({project_ids:e,ssg_id:a})},disableSSGs:({project_ids:e,ssg_id:a})=>{t.mutateAsync({project_ids:e,ssg_id:a})},setSSGs:async({project_id:e,extended_ssg_ids:t})=>{await a.mutateAsync({extended_ssg_ids:t,project_id:e}),r.invalidateQueries(tN.workspaceKeys.items(),{refetchActive:!0})},setSSGsForProjects:async e=>{await Promise.all(e.map(async({extended_ssg_ids:e,project_id:t})=>{await a.mutateAsync({extended_ssg_ids:e,project_id:t}).catch(e=>{l({message:e})})})).then(()=>{n({message:"Style Guides Updated"})}).catch(()=>{o({message:"Some errors occurred updating your Style Guides"})}).finally(()=>{r.invalidateQueries(tN.workspaceKeys.items(),{refetchActive:!0})})}}},uo=({styleGuide:e,isActive:t})=>{let{jwt:a}=(0,tF.hD)(),{currentWorkspaceId:r}=(0,tF.C$)(),{selectedProjectIds:n,extendedSSGs:o,initExtendedSSGs:l}=c0(),i=(0,tN.useGetWorkspaceItemsForExtendedSSG)(a,{workspaceId:r,ssg_id:e.id}),s=i?.filter(e=>n.includes(e.data.id)),c=s?.length===n.length,u=!c&&!!s?.length,d=ue(e),m=ty.useRef(null),p=ty.createElement(tg.Box,{color:"success"},ty.createElement(tg.Icon,{icon:["fas","check-circle"]})),g=ty.createElement(tg.Flex,{py:3,px:4},ty.createElement(tg.Box,{flexGrow:!0},s?.length?ty.createElement(ui,{projects:s||[]}):ty.createElement(tg.Text,{fontWeight:"semibold"},"0 Project(s)")),ty.createElement(tg.HStack,{spacing:1,flexGrow:!0},ty.createElement(ul,{ref:m,indeterminate:u,checked:c,onChange:t=>{switch(t){case"true":n.map(t=>{o.set(t,[...o.get(t)||[],e.id])});break;case"false":n.map(t=>{o.set(t,o.get(t)?.filter(t=>t!==e.id)||[])});break;case"initial":n.map(t=>{l?.get(t)?.includes(e.id)&&o.set(t,[...o.get(t)||[],e.id])})}}}),ty.createElement(tg.Text,{color:"light"},"Enabled"))),h=ty.createElement(tg.HStack,{spacing:1},ty.createElement(tg.Text,null,e.name),ty.createElement(()=>ty.createElement(tg.Tooltip,{renderTrigger:ty.createElement(tg.Flex,{alignItems:"center",py:.5,px:1.5,onClick:()=>{window.open(d,"blank")}},ty.createElement(tg.Icon,{icon:["far","external-link"]}))},"Preview Style Guide"),null));return ty.createElement(tg.Box,{"data-test":`${e.name.toLowerCase()}-card`,p:3,w:"1/3"},ty.createElement(tg.Card,{title:h,logoIcon:e.presentation?.icon?["fas",e.presentation.icon]:void 0,logoIconColor:e.presentation?.color||void 0,logoBackgroundColor:e.color?e.color+Math.round(38.25).toString(16).toUpperCase():void 0,description:e.description,isActive:t,badge:t?p:void 0,actionBar:g}))},ul=ty.forwardRef(({indeterminate:e,checked:t,onChange:a,...r},n)=>{let[o,l]=ty.useState(!!e);return ty.useEffect(()=>{l(e)},[e]),ty.useEffect(()=>{n.current.indeterminate=o},[n,o]),ty.useEffect(()=>{n.current.checked=t},[n,t]),ty.createElement(tg.Box,{"data-test":"card-action-enable-ssg",as:"input","aria-label":"toggle enable style guide","aria-checked":o?"mixed":t,onClick:t=>{if(t.currentTarget.checked&&e&&o){t.currentTarget.checked=!0,l(!1),a("true");return}if(t.currentTarget.checked&&e&&!o){t.currentTarget.checked=!1,l(!0),a("initial");return}a(t.currentTarget.checked?"true":"false")},...r,ref:n,type:"checkbox",pos:"relative",display:"block"})}),ui=({projects:e})=>ty.createElement(tg.Tooltip,{renderTrigger:ty.createElement(tg.Text,{fontWeight:"semibold"},`${e?.length} Project(s)`)},ty.createElement(tg.VStack,null,e.map(e=>ty.createElement(tg.HStack,{key:e.data.id,spacing:1},ty.createElement(tg.Avatar,rC({name:e.data.name,presentation:{icon:e.data.presentation?.icon,icon_color:e.data.presentation?.color}})),ty.createElement(tg.Text,null,e.data.name))))),us=(0,ak.aZ)(function({workspace:e}){let{setSSGsForProjects:t}=un(),{extendedSSGs:a,close:r}=c0(),{log:n}=(0,tF.pw)(),o=ty.useCallback(()=>{t([...a.entries()].map(e=>({project_id:e[0],extended_ssg_ids:e[1]}))),n({event:"extend_ssgs_bulk_edit",payload:{workspace_id:e.id,extended_ssgs:Array.from(a)}}),r()},[r,a,n,t,e.id]),l=ty.useCallback(()=>{r()},[r]);return ty.createElement(c5,{"data-test":"extended-ssgs-library",onSave:o,onCancel:l,StyleGuideCard:uo})}),uc=()=>{let{isOpen:e,close:t,activeModel:a}=c0();return ty.createElement(tg.Modal,{title:"Manage Style Guides",isOpen:e,onClose:t,size:"lg"},ty.createElement(tx.SearchFilterProvider,null,a===tn.extendedSSGs?ty.createElement(us,null):ty.createElement(ur,null)))};!function(e){e.Group="group",e.Project="project"}(ti||(ti={}));let uu=e=>e.map(e=>ud(e)),ud=e=>"group"===e.type?up(e):um(e.data);function um(e,t){return{...e,itemType:"project",projectOwnerName:e.owner.display_name,group:t,flavor:e.flavor}}let up=e=>{let t={...e.data,itemType:"group",updatedAt:e.data.updated_at,projectOwnerName:""};return e.children&&(t.subRows=e.children.map(t=>um(t,e.data))),t};!function(e){e.Enabled="Governed",e.NotEnabled="Not Governed"}(ts||(ts={}));let ug=({column:{preFilteredRows:e,id:t},data:a,label:r,defaultFilterValue:n})=>{let{getFilterValue:o,setFilter:l}=(0,tx.useTableContext)(),i=ty.useCallback(()=>(0,th.chain)(e).groupBy(e=>e.original.projectExtendedSSGs&&e.original.projectExtendedSSGs.length?"Governed":"Not Governed").map((e,t)=>({value:t,count:e.length})).value(),[e]),s=ty.useMemo(()=>{let e=Object.values(ts).reduce((e,t)=>(e[String(t)]=0,e),{});return i().forEach(t=>{e[t.value]=t.count}),(0,th.map)(e,(e,t)=>({value:t,label:(0,th.capitalize)(t),meta:e}))},[i]);ty.useMemo(()=>{n&&l({id:t,value:n})},[a]);let c=s.reduce((e,t)=>e+t.meta,0);return ty.createElement(tg.Select,{"aria-label":r,value:o(t)||"all",onChange:e=>{l({id:t,value:e})},triggerTextPrefix:`${r}: `,options:[{options:[{label:"All",value:"all",meta:c}]},{options:s}]})},uh=(e,t,a)=>{let r=e=>"project"===e.original.itemType?t.some(t=>{let r=e.values[t],n=r&&!!r.length;switch(a){case ts.NotEnabled:return!n;case ts.Enabled:return!!n;default:return!0}}):!!("group"===e.original.itemType&&e.subRows.length&&e.subRows.find(r))&&(e.toggleRowExpanded&&e.toggleRowExpanded(!0),!0);return e.filter(r).map(e=>({...e,subRows:e.subRows}))};uh.autoRemove=e=>"all"===e;let uf=(e,t,a)=>{let r=a.trim().toLowerCase(),n=e=>"project"===e.original.itemType?!!e.isSelected||-1!==e.original.name.toLowerCase().indexOf(r):!!("group"===e.original.itemType&&e.subRows.length&&e.subRows.find(n))&&(e.toggleRowExpanded&&e.toggleRowExpanded(!0),!0);return e.filter(n).map(e=>({...e,subRows:e.subRows}))};uf.autoRemove=e=>""===e;let ub=({row:{original:e}})=>{let{openExtendedSSGModel:t}=c0(),{canIOnProject:a}=(0,tF.C$)(),r=(0,tA.useNavigate)(),n=a(e.my_permissions,tU.Jg8.ProjectContentsUpdate),o="cli"===e.type;return ty.createElement(tg.HStack,{justifyContent:"end"},ty.createElement(tg.Tooltip,{placement:"top",renderTrigger:ty.createElement(tg.Button,{"data-testid":"manage_ssgs_action",appearance:"minimal",icon:["fal","ballot-check"],onClick:()=>t([e.id]),disabled:!n})},ty.createElement(tg.Box,null,"Manage Style Guides")),!o&&ty.createElement(tg.Tooltip,{placement:"top",renderTrigger:ty.createElement(tg.Button,{"data-testid":"navigate_to_action",appearance:"minimal",onClick:()=>{r(`/studio/${e.slug}`)},disabled:!n},ty.createElement(tg.Icon,{icon:["fal","pencil-ruler"]}))},ty.createElement(tg.Box,null,n?"Edit in Studio":"No edit access. Contact project owner.")))},uy=[{id:"name",Header:"Name",accessor:"name",Cell:({row:e,value:t})=>{if("group"===e.original.itemType){let a=e.subRows.length||0;return ty.createElement(tg.Flex,{align:"center",textOverflow:"truncate","data-test":`projects-table-${e.original.itemType}-${e.original.id}`},ty.createElement(tg.Icon,{icon:["fas","folder"],style:{color:"var(--color-text-light)"}}),ty.createElement(tg.Box,{flex:1,ml:2,textOverflow:"truncate"},`${t} (${a})`))}return ty.createElement(tg.Flex,{align:"center",textOverflow:"truncate",pl:e.depth?7:0,"data-test":`projects-table-${e.original.itemType}-${e.original.id}`},ty.createElement(tg.Avatar,rC({name:e.original.name,presentation:{icon:e.original.presentation?.icon,icon_color:e.original.presentation?.color}})),ty.createElement(tg.Box,{flex:1,ml:2,textOverflow:"truncate"},t))},Filter:tx.TableSearchFilter,sortType:"SL_AlphSort",filter:uf,width:100},{id:"owner",Header:"Owner",accessor:"projectOwnerName",Cell:({row:e})=>e.original.itemType===ti.Project&&e.original.owner?ty.createElement(tg.Tooltip,{placement:"top",renderTrigger:ty.createElement(tg.Avatar,{...rC(e.original.owner),noTitleAlt:!0})},ty.createElement(tg.Box,null,e.original.owner.display_name)):null,disableFilters:!0,width:30},{id:"projectExtendedSSGs",Header:"Style Guides",accessor:"projectExtendedSSGs",Cell:({row:e})=>{let{openExtendedSSGModel:t}=c0(),{canIOnProject:a}=(0,tF.C$)(),r=a(e.original.my_permissions,tU.Jg8.ProjectContentsUpdate);return e.original.itemType===ti.Project?ty.createElement(tg.Flex,{wrap:!0},e.original.projectExtendedSSGs.length?e.original.projectExtendedSSGs?.map((t,a)=>ty.createElement(tg.Tooltip,{key:`${e.original.id}-${a}`,placement:"top",renderTrigger:ty.createElement(tg.Box,{p:.5},ty.createElement(tg.Avatar,rC({name:t.name,presentation:{icon:t.presentation?.icon,icon_color:t.presentation?.color}})))},t.name)):r&&ty.createElement(tg.Link,{onClick:()=>t([e.original.id])},ty.createElement(tg.Icon,{icon:["fal","plus"]})," Enable Styles")):null},width:30,Filter:e=>ty.createElement(ug,{...e,label:"Style Guides"}),filter:uh,filterOrder:1},{id:"visibility",Header:"Visibility",accessor:"visibility",Cell:({row:{original:e}})=>ty.createElement(tg.Text,{textTransform:"capitalize"},e.visibility),width:40,disableFilters:!0},{id:"quickActions",Header:"Actions",accessor:"id",Cell:e=>e.row.original.itemType===ti.Project?ub({...e}):null,disableFilters:!0,centerContent:!1,width:100,maxWidth:100}],uw=(0,ak.aZ)(function({workspace:e}){let{jwt:t}=(0,tF.hD)(),{getScrollToRowId:a}=lx(),r=a(lj.sJ.styleGuidesTable),n={...r&&{scrollTo:r}},{openExtendedSSGModel:o,openDefaultSSGModel:l}=c0(),{data:i,isFetched:s}=(0,tN.useGetWorkspaceItems)(t,e.id,{flavors:["design","design_library"]}),{canI:c}=(0,tF.C$)(),u=ty.useMemo(()=>i?uu(i.items):[],[i]),d=ty.useMemo(()=>[{text:"Manage Style Guides",dataTest:"bulk-action-manage-ssgs",icon:["fal","ballot-check"],showFn:()=>c(tU.E4M.WorkspaceGlobalAdmin),onClick:async({selectedFlatRows:e})=>{o(e.map(e=>e.original.id))}}],[c,o]),m=c(tU.E4M.WorkspaceGlobalAdmin)?e=>{if(e?.original.itemType==="project"){e.toggleRowSelected();return}e.toggleRowExpanded&&e.toggleRowExpanded()}:void 0;return ty.createElement(s5,null,ty.createElement(tx.Table,{row:{canExpandFn:e=>e&&"group"===e.original.itemType&&!!e.subRows.length,canSelectFn:(e,t)=>e?.original.itemType==="project"&&t.length>0,onRowClick:m},columns:uy,data:u,isLoading:!s,initialState:{sortBy:[{id:"name",asc:!0}]},bulkSelectActions:d,stateReducer:(e,t)=>{if(["setFilter"].includes(t.type)&&""===t.filterValue)return{...e,expanded:{}};if(["resetSelectedRows","toggleAllRowsSelected","toggleRowSelected","toggleAllPageRowsSelected"].includes(t.type)){let t={};for(let[a]of Object.entries(e.selectedRowIds))a.startsWith("project")&&(t[a]=!0);return{...e,selectedRowIds:t}}return e},getRowId:uE,autoResetExpanded:!1,headerAppendix:ty.createElement(tg.Box,{px:2},ty.createElement(tg.Button,{"data-test":"settings-governance-default-style-guide-settings",appearance:"minimal",icon:ty.createElement(tg.Icon,{color:"var(--color-primary)",icon:["fal","gear"]}),color:"primary",onClick:()=>{l()}},ty.createElement(tg.Text,{color:"primary"},"Default Style Guide Settings"))),...n}),ty.createElement(uc,null))});function uE({itemType:e,id:t}){return`${e}-${t}`}let uv=(0,ak.ss)(function(){return(0,a6.e)("governance"),ty.createElement(tg.Flex,{as:"main",h:"full"},ty.createElement(tg.Box,{flexGrow:!0},ty.createElement(cZ,null,ty.createElement(uw,null))))}),uk={sortBy:[{id:"next-project-name",asc:!0}]},u_=({apiKey:e})=>{let{data:t,error:a,isFetched:r,isFetching:n}=ux(e),{effects:o,actions:l}=(0,tB.U8)(),i=ty.useMemo(()=>[{id:"next-project-name",Header:"NEXT Project",accessor:"project_name",Filter:tx.TableSearchFilter,filter:"contains",sortType:"SL_AlphSort"},{id:"next-org-name",Header:"NEXT Org",accessor:"namespace_name",filter:"exactText",Filter:e=>ty.createElement(tx.TableSelectFilter,{...e,label:"NEXT Org",defaultFilterOptions:t?.orgs?.map(e=>e.name)||[]}),filterOrder:1},{id:"lastactivity",Header:"Last Activity",accessor:"project_last_activity",sortType:(e,t)=>e.original.project_last_activity_time>t.original.project_last_activity_time?1:-1}],[t]);return(ty.useEffect(()=>{let e=setInterval(()=>{l.projects.touchQueries()},5e3);return()=>clearInterval(e)},[l.projects]),!r&&n)?ty.createElement(s5,null,ty.createElement(tx.LoadingIndicator,null)):a?ty.createElement(s5,null,a.message):ty.createElement(tx.Table,{columns:i,data:t?.projects||[],initialState:uk,itemType:"NEXT project",noResultsMessage:ty.createElement(tg.Box,{p:10},e?"Could not find projects associated with this access token...":"Enter your NEXT access token first..."),bulkSelectActions:[{text:"Migrate",onClick:async t=>{let a=t.selectedFlatRows.map(e=>e.original.project_id);await o.api.queueNextMigration(e,a),t.toggleAllRowsSelected(!1),o.notifications.success({message:`NEXT migration started for ${a.length} projects! They will appear in your sidebar soon (usually under a minute).`})}}]})},ux=e=>{let{state:t}=(0,tB.U8)();return(0,tv.useQuery)(["classic",e],()=>uI(e,t.router.serverHost),{enabled:!!e,refetchInterval:!1,retry:!1})},uI=async(e,t)=>{let a=await fetch(`${t}/api/v1/legacy-migration/next`,{headers:{Authorization:e},credentials:"include",mode:"cors"}),r=await a.json();if(!a.ok)throw r;let n=(0,th.groupBy)(r,"namespace_id"),o=(0,th.map)(n,(e,t)=>({id:t,name:e[0].namespace_name,projectsCount:e.length}));return{orgs:(0,th.sortBy)(o,"name"),projects:(0,th.sortBy)((0,th.map)(r,e=>({...e,project_last_activity:new Date(e.project_last_activity).toLocaleString(),project_last_activity_time:new Date(e.project_last_activity).getTime()})),"project_name")}},uS=(0,ak.ss)((0,ak.BZ)((0,ak.aZ)(function({legacyPlatform:e,workspace:t}){let[a,r]=ty.useState(""),{jwt:n}=(0,tF.hD)(),{mutateAsync:o}=(0,tN.useUpdateWorkspace)(n);"next"!==e||t.migratedFromNext||o({workspace_id:(0,t8.encodeID)("wk",t.id),migrated_from_next:!0});let l="NEXT",i="access token";return ty.createElement(s5,null,ty.createElement(tg.Flex,{h:"full",direction:"col",w:"full"},ty.createElement(tg.Heading,{size:2},l," Migration"),ty.createElement(tg.Box,{mt:5,style:{maxWidth:800}},ty.createElement(tg.Paragraph,{size:"small"},"Provide your ",l," ",i," below, and then choose the ",l," projects you wish to migrate. For help finding your ",i,", please see this"," ",ty.createElement(tg.Link,{color:"primary",href:"https://docs.stoplight.io/platform/projects/access-tokens",target:"__blank"},"article.")),ty.createElement(tg.Paragraph,{mt:3,size:"small"},"For more information about the migration process,"," ",ty.createElement(tg.Link,{color:"primary",href:ab.xz[`${e}_migration`],target:"__blank"},"click here."))),ty.createElement(tg.Flex,{mt:6},ty.createElement("form",{autoComplete:"off"},ty.createElement(tg.Input,{type:"password",placeholder:`${l} ${i}`,value:a,onChange:e=>r(e.currentTarget.value),"aria-label":i,autoComplete:"off",size:"lg",style:{width:350},autoFocus:!0}))),ty.createElement(tg.Box,{mt:6,flex:1},ty.createElement(u_,{apiKey:a}))))},tU.E4M.WorkspaceSettingsCreateUpdateDelete))),uj=(e,t,a,r,n)=>n||e||!a||r<t,uC=({userId:e,roles:t,onRoleSelected:a,disabled:r,loading:n,appearance:o,isRoleDisabled:l})=>{let{state:i,actions:s}=(0,tB.U8)(),c=t&&t[0],u=e===i.auth.currentUser?.id,d=(0,th.sortBy)(i.metadata.roles,"priority").reverse(),m=uj(u,d.find(e=>e.name===c?.role)?.priority||0,i.workspaces.canI(tU.E4M.WorkspaceMembersPromote),i.workspaces.myPriority,r),p=i.features.featureRequiresUpgrade(tU.BAf.Guests),g=!i.workspaces.iHaveRole(tU.l2p.Owner),h=async e=>{p&&e===tU.l2p.Guest?s.ui.showFeatureDialog(tU.BAf.Guests):void 0!==a&&a(e)},f=c?c.role:"Pending",b=[{id:"role",type:"option_group",value:f,onChange:h,children:d.map(e=>({title:uP[e.name],value:e.name,isDisabled:l?l(e.name):g&&"owner"===e.name}))}];return m&&c?ty.createElement(tg.Box,{px:3,textTransform:"capitalize"},c.role):ty.createElement(tg.Box,{display:"inline-block"},ty.createElement(tg.Menu,{"aria-label":"Role Selector",items:b,closeOnPress:!0,renderTrigger:({isOpen:e})=>ty.createElement(tg.FieldButton,{appearance:o,textTransform:"capitalize",disabled:n,active:e},f)}))},uP={[tU.l2p.Owner]:"Owner",[tU.l2p.Billing]:"Billing Admin",[tU.l2p.Admin]:"Admin",[tU.l2p.Maker]:"Maker",[tU.l2p.Viewer]:"Viewer",[tU.l2p.Guest]:"Guest"},uA=({children:e})=>{let[t,a]=ty.useState(!1),r=ty.useRef(null),n=ty.useRef(null),[o]=np(),l=({current:e})=>(e?.offsetWidth||0)<(n?.current?.offsetWidth||0);return ty.useEffect(()=>{a(l(r))},[r,o]),ty.createElement(tg.Box,{textOverflow:"truncate",whitespace:"nowrap",overflowX:"hidden",w:"auto",ref:r},ty.createElement("span",{ref:n},t?ty.createElement(tg.Tooltip,{renderTrigger:ty.createElement(tg.Box,{cursor:"auto",display:"inline"},e)},ty.createElement(ty.Fragment,null,e)):ty.createElement(ty.Fragment,null,e)))},uB=e=>{let t,a,r;let n=uP[e.role];switch(e.mode){case"single":t=ty.createElement(tg.Text,{fontWeight:"bold"},e.userDisplayName),a=ty.createElement(tg.Text,null,"a ",ty.createElement(tg.Text,{fontWeight:"bold"},"Workspace ",n));break;case"bulk":t=ty.createElement(tg.Text,{fontWeight:"bold"},e.numRows," ",tV()("member",e.numRows)),a=ty.createElement(tg.Text,null,1===e.numRows?"a ":"",ty.createElement(tg.Text,{fontWeight:"bold"},"Workspace ",tV()(n,e.numRows)));break;default:return null}let o=ty.createElement(tg.Link,{href:ab.xz.workspace_roles,rel:"noreferrer",target:"_blank"},"Learn More");switch(e.role){case tU.l2p.Owner:r=ty.createElement(ty.Fragment,null,ty.createElement(tg.Text,{"data-test":"role-message"},"Making ",t," ",a," grants them complete control over all members, projects, project settings, teams, and workspace settings."),ty.createElement(tg.Text,{fontStyle:"italic"},"It is highly recommended that workspaces strictly limit the number of Workspace ",n,"s."));break;case tU.l2p.Billing:case tU.l2p.Admin:r=ty.createElement(tg.Text,{"data-test":"role-message"},"Making ",t," ",a," means that they'll be able to manage workspace settings in addition to creating, editing, and managing projects.");break;case tU.l2p.Maker:r=ty.createElement(tg.Text,{"data-test":"role-message"},"Making ",t," ",a," means that they'll be able to create, edit, share, and manage projects.");break;case tU.l2p.Viewer:r=ty.createElement(tg.Text,{"data-test":"role-message"},"Making ",t," ",a," means that they'll be able to view and share projects, but will not be able to create or edit them.");break;case tU.l2p.Guest:r=ty.createElement(tg.Text,{"data-test":"role-message"},"Making ",t," ",a," means that they'll only be able to view projects that they've been added to, but will not be able to create or edit them.")}return ty.createElement(tg.VStack,{spacing:4},r,o)},uD=({userIds:e,onSelectRole:t})=>{let a=e.length,{roles:r}=(0,tF.y1)(),[n,o]=ty.useState(""),l=e=>{t(e)},i=(0,th.sortBy)(r,"priority").reverse().map(e=>({label:(0,th.capitalize)(e.name),value:e.name}));return ty.createElement(tg.Box,null,ty.createElement(tg.Box,{mb:2},ty.createElement(rr,{htmlFor:"role"},`Approve ${a} Join ${tV()("Request",a)} with the following role:`)),ty.createElement(tg.Box,null,ty.createElement(tg.Select,{"aria-label":"Join Request Role",options:i,placeholder:"Select A Role",value:n,appearance:"outlined",onChange:e=>{o(e),l(e)}})))},uT=({userIds:e,role:t,hasError:a,handleOnPress:r})=>{let n=()=>{r()};return ty.createElement(ty.Fragment,null,a&&ty.createElement(tg.Box,{mt:1,mb:3},ty.createElement(tg.Callout,{"data-test":"bulk-approve-join-request-confirmation-callout",icon:"exclamation",intent:"danger",heading:"Upgrade Required",actions:ty.createElement(tg.Button,{size:"sm",onPress:()=>{n()}},"Go to Billing")},"The limit for this role has been reached. This workspace will need to be upgraded to complete this.")),ty.createElement(uB,{mode:"bulk",role:t,numRows:e.length}))},uF=({memberIds:e,onChangeRole:t})=>{let a=e.length,{state:r}=(0,tB.U8)(),[n,o]=ty.useState(""),l=e=>{t(e)},i=(0,th.sortBy)(r.metadata.roles,"priority").reverse().map(e=>({label:(0,th.capitalize)(e.name),value:e.name}));return ty.createElement(tg.Box,{"data-test":"bulk-role-selector"},ty.createElement(tg.Box,{mb:2},ty.createElement(rr,{htmlFor:"role"},`Change the role of ${a} ${tV()("Member",a)}:`)),ty.createElement(tg.Box,null,ty.createElement(tg.Select,{"aria-label":"Role",options:i,placeholder:"Select A Role",value:n,appearance:"outlined",onChange:e=>{o(e),l(e)}})))},u$=({memberIds:e,role:t,hasError:a,handleOnPress:r})=>{let n=()=>{r()};return ty.createElement(ty.Fragment,null,a&&ty.createElement(tg.Box,{mt:1,mb:3},ty.createElement(tg.Callout,{"data-test":"bulk-member-role-confirmation-callout",icon:"exclamation",intent:"danger",heading:"Upgrade Required",actions:ty.createElement(tg.Button,{size:"sm",onPress:()=>{n()}},"Go to Billing")},"The limit for this role has been reached. This workspace will need to be upgraded to complete this.")),ty.createElement(uB,{mode:"bulk",role:t,numRows:e.length}))};var uN=a(68317);let uU=({onSuccess:e})=>{let{actions:t,effects:a}=(0,tB.U8)(),{touchQueries:r}=(0,uN.i)(),{jwt:n}=(0,tF.hD)(),o=(0,tN.useBulkUpdateWorkspaceJoinRequests)(n);return ty.useCallback(async(n,l,i)=>{try{await o.mutateAsync({workspace_id:(0,t8.safelyEncodeID)("wk",n),user_ids:[(0,t8.safelyEncodeID)("usr",l)],action:i}),void 0!==e&&e(),r(),a.notifications.success({message:"The request was approved."}),a.reporter.log({event:"workspace_join_request_approved"})}catch(e){t.reporter.error({error:e,event:"workspace_join_request_approved"}),a.notifications.danger({message:`Error approving join request: ${e.message}`});return}},[o,e,r,a.notifications,a.reporter,t.reporter])},uM=()=>{let{effects:e}=(0,tB.U8)(),[t,a]=ty.useState(!1),{jwt:r}=(0,tF.hD)(),n=(0,tN.useBulkUpdateWorkspaceJoinRequests)(r);return[{isLoading:t},ty.useCallback(async(t,r,o)=>{let l;e.reporter.log({event:"bulk_approve_join_request",payload:{count:r.length,role:o}});let i=0;if(a(!0),r.length>0)try{await n.mutateAsync({workspace_id:(0,t8.safelyEncodeID)("wk",t),user_ids:[(0,t8.safelyEncodeID)("usr",r[0]),...r.slice(1).map(e=>(0,t8.safelyEncodeID)("usr",e))],action:o}),i=r.length}catch(e){l=e}return a(!1),{succeeded:i,error:l}},[e.reporter,n])]},uR=()=>{let{effects:e}=(0,tB.U8)(),[t,a]=ty.useState(!1),{jwt:r}=(0,tF.hD)(),n=(0,tN.useBulkUpdateWorkspaceJoinRequests)(r);return[{isLoading:t},ty.useCallback(async(t,r)=>{e.reporter.log({event:"bulk_deny_join_request",payload:{count:r.length}});let o=0,l=0;if(a(!0),r.length>0)try{await n.mutateAsync({workspace_id:(0,t8.safelyEncodeID)("wk",t),user_ids:[(0,t8.safelyEncodeID)("usr",r[0]),...r.slice(1).map(e=>(0,t8.safelyEncodeID)("usr",e))],action:"deny"}),o=r.length}catch{l=r.length}return a(!1),{succeeded:o,failed:l}},[e.reporter,n])]},uW=()=>{let{effects:e}=(0,tB.U8)(),[t,a]=ty.useState(!1),{jwt:r}=(0,tF.hD)(),{mutateAsync:n}=(0,tN.useDeleteWorkspaceMember)(r);return[{isLoading:t},ty.useCallback(async(t,r)=>{e.reporter.log({event:"bulk_remove_ws_member",payload:{count:t.length}});let o=0,l=0;for(let e of(a(!0),t))try{await n({email:e,workspace_id:(0,t8.safelyEncodeID)("wk",r)}),o++}catch{l++}return a(!1),{succeeded:o,failed:l}},[e.reporter,n])]},uL=e=>{let{effects:t}=(0,tB.U8)(),[a,r]=ty.useState(!1),n=(0,tN.useBulkUpdateWorkspaceMembers)(e);return[{isLoading:a},ty.useCallback(async(e,a,o)=>{t.reporter.log({event:"bulk_update_ws_member_role",payload:{count:a.length,role:o}});let l=0,i=Error();if(r(!0),a.length>0)try{await n.mutateAsync({workspace_id:(0,t8.safelyEncodeID)("wk",e),user_ids:[(0,t8.safelyEncodeID)("usr",a[0]),...a.slice(1).map(e=>(0,t8.safelyEncodeID)("usr",e))],data:{role:o}}),l=a.length}catch(e){i=e}return r(!1),{succeeded:l,failed:i}},[t.reporter,n])]},uG=()=>{let{actions:e,effects:t}=(0,tB.U8)(),{jwt:a}=(0,tF.hD)(),r=(0,tN.useBulkUpdateWorkspaceJoinRequests)(a);return ty.useCallback(async(a,n)=>{try{await r.mutateAsync({workspace_id:(0,t8.safelyEncodeID)("wk",a),user_ids:[(0,t8.safelyEncodeID)("usr",n)],action:"deny"}),t.notifications.success({message:"Workspace Join Request denied"}),t.reporter.log({event:"workspace_join_request_denied"})}catch(a){e.reporter.error({error:a,event:"workspace_join_request_denied"}),t.notifications.danger({message:`Error on DenyWorkspaceJoinRequest: ${a.message}`});return}},[r,t.notifications,t.reporter,e.reporter])},uO=({workspace:e})=>{let[{data:t,isFetching:a,stale:r,hasFetched:n},o]=rE({requestPolicy:"network-only",query:tU.vml,pollInterval:5e3,limit:500,numOfFetchedItems:e=>e?.workspaceInvitations?.length||0,initialData:{workspaceInvitations:[]},concatData:(e,t)=>({workspaceInvitations:[...e.workspaceInvitations,...t.workspaceInvitations]}),variables:{workspaceId:e.id}});return[{data:t?.workspaceInvitations||[],isFetching:a,hasFetched:n,stale:r},o]},uz=({workspace:e})=>{let[{data:t,isFetching:a,stale:r,hasFetched:n},o]=rE({requestPolicy:"network-only",query:tU.H96,pollInterval:5e3,limit:500,numOfFetchedItems:e=>e?.workspaceJoinRequests?.length||0,initialData:{workspaceJoinRequests:[]},concatData:(e,t)=>({workspaceJoinRequests:[...e.workspaceJoinRequests,...t.workspaceJoinRequests]}),variables:{workspaceId:e.id}});return[{data:t?.workspaceJoinRequests||[],isFetching:a,hasFetched:n,stale:r},o]},uq=({workspace:e,excludeRoles:t})=>{let[{data:a,isFetching:r,hasFetched:n,stale:o},l]=rE({requestPolicy:"network-only",query:tU.gNr,pollInterval:3e4,limit:500,numOfFetchedItems:e=>e?.workspaceMembers?.length||0,initialData:{workspaceMembers:[]},concatData:(e,t)=>({workspaceMembers:[...e.workspaceMembers,...t.workspaceMembers]}),variables:{workspaceId:e.id,excludeRoles:t}});return[{data:a?.workspaceMembers||[],isFetching:r,hasFetched:n,stale:o},l]},uV=({workspace:e})=>{let[t,a]=ty.useState({workspaceMembers:[],workspaceInvitations:[],workspaceJoinRequests:[]}),[r,n]=uO({workspace:e}),[o,l]=uz({workspace:e}),[i,s]=uq({workspace:e}),c=r.isFetching||o.isFetching||i.isFetching,u=r.hasFetched&&o.hasFetched&&i.hasFetched;ty.useEffect(()=>{let e=r.stale&&t.workspaceInvitations?.length!==r.data?.length,n=o.stale&&t.workspaceJoinRequests?.length!==o.data?.length;(e||n)&&a({...t,workspaceInvitations:r.data,workspaceJoinRequests:o.data})},[o.stale,r.stale]),ty.useEffect(()=>{i.stale&&i.data&&a({...t,workspaceMembers:i.data})},[i.stale]);let d=ty.useCallback(()=>{s(),l(),n()},[s,l,n]);return ty.useEffect(()=>{c||a({workspaceInvitations:r.data,workspaceJoinRequests:o.data,workspaceMembers:i.data})},[r.isFetching,o.isFetching,i.isFetching]),[{items:t,fetching:c,hasFetched:u,refreshTableData:d}]},uH=()=>{let{actions:e,effects:t}=(0,tB.U8)(),[,a]=(0,tU.jlC)();return ty.useCallback(async r=>{let{error:n}=await a({id:r});if(n){e.reporter.error({error:n,event:"workspace_invite_removed"}),t.notifications.danger({message:`Error on removeWorkspaceInvitation for Request:[ ${r} ]: ${n.message}`});return}t.notifications.success({message:"Invitation Removed"}),t.reporter.log({event:"workspace_invite_removed",payload:{workspace_slug:"Workspace"}})},[e.reporter,t.reporter,t.notifications,a])},uQ=()=>{let{actions:e,effects:t}=(0,tB.U8)(),{jwt:a}=(0,tF.hD)(),{mutateAsync:r}=(0,tN.useDeleteWorkspaceMember)(a);return ty.useCallback(async(a,n)=>{try{await r({email:a,workspace_id:(0,t8.safelyEncodeID)("wk",n)}),t.notifications.success({message:"Member Removed"}),t.reporter.log({event:"workspace_member_removed"})}catch(r){e.reporter.error({error:r,event:"workspace_member_removed"}),t.notifications.danger({message:`Error occurred while removing member ${a}: ${r.message}`});return}},[e.reporter,t.reporter,t.notifications,r])},uK=({onSuccess:e})=>{let{jwt:t}=(0,tF.hD)(),{currentWorkspaceId:a}=(0,tF.C$)(),{success:r,danger:n}=(0,tF.AO)(),{log:o}=(0,tF.pw)(),{touchQueries:l}=(0,tF.in)(),{mutateAsync:i}=(0,tN.useUpdateWorkspaceMember)(t),s=(0,tv.useQueryClient)();return ty.useCallback(async(t,c)=>{try{await i({workspaceId:(0,t8.encodeID)("wk",a||0),userId:(0,t8.encodeID)("usr",t),role:c}),void 0!==e&&e(),s.invalidateQueries(tN.QueryKeyRoots.teams),s.invalidateQueries(tN.teamKeys.details()),s.invalidateQueries(tN.workspaceKeys.items()),s.invalidateQueries(tN.QueryKeyRoots.groupMembers),s.invalidateQueries(tN.QueryKeyRoots.projects),s.invalidateQueries(tN.QueryKeyRoots.projectMembers),r({message:"Role updated"}),o({event:"update_role",payload:{new_role:c}}),l(),s.invalidateQueries(tN.workspaceKeys.allState())}catch(e){n({message:`Could not update role: ${e.message}`})}},[i,a,e,r,o,l,s,n])};!function(e){e.sl_workspace_invitations="sl_workspace_invitations",e.sl_workspace_members="sl_workspace_members",e.sl_workspace_join_requests="sl_workspace_join_requests"}(tc||(tc={}));let uJ=({row:{original:e}})=>{let{isWorkspaceLocked:t}=o$(),{currentUser:a}=(0,tF.hD)();return ty.createElement(tg.Flex,{overflowX:"hidden"},ty.createElement(tg.Flex,{flex:"initial",flexDirection:"col",justifyContent:"center"},t&&e.userId!==a?.id?ty.createElement(tg.Tooltip,{renderTrigger:()=>ty.createElement(tg.Avatar,{"data-test":"danger-lock",icon:["fad","lock"],bg:"red"})},"Locked out due to plan limits"):e.typename!==tc.sl_workspace_members?ty.createElement(tg.Avatar,{className:"avatar__pending"}):ty.createElement(tg.Avatar,{name:e.fullName})),ty.createElement(tg.Box,{flex:1,ml:3,overflowX:"hidden"},ty.createElement(tg.Box,{w:"full",textOverflow:"truncate"},e.fullName?e.fullName:e.username),ty.createElement(tg.Box,{color:"light",textOverflow:"truncate"},e.email)))},uY=({row:{original:e},value:t})=>{let{canI:a,currentWorkspaceId:r}=(0,tF.C$)(),{openDialog:n,closeDialog:o}=(0,tx.useDialog)(),{state:l,actions:i}=(0,tB.U8)(),s=uU({onSuccess:()=>o()}),c=uK({onSuccess:()=>o()}),u=r||0,d=l.billing.currentProduct?.name,{execute:m}=r0(u),{isWorkspaceLocked:p}=o$();switch(e.typename){case tc.sl_workspace_invitations:return ty.createElement(tg.Box,{ml:3,textTransform:"capitalize"},ty.createElement(tg.Text,{color:"warning"},"Pending"));case tc.sl_workspace_join_requests:let g=t=>{n({title:"Approve Request?",message:()=>ty.createElement(uB,{mode:"single",role:t,userDisplayName:e.email}),confirmText:"Confirm",onConfirm:async()=>{await s(u,e.userId,t)}})},h=()=>{n({title:"Workspace Members Limits",message:()=>ty.createElement(tg.Text,{"data-test":"role-message"},"This workspace has reached its member limit. Contact Stoplight to add more seats."),confirmText:"Close",onConfirm:async()=>{o()}})};return a(tU.E4M.WorkspaceMembersApprove)&&!p?ty.createElement(uC,{userId:e.userId,onRoleSelected:t=>{let{hasExceededLimit:a,feature:r}=m(t,[{type:"email",data:e.email}]);a?"enterprise"===d?h():i.ui.showFeatureDialog(r):g(t)},disabled:p}):ty.createElement(tg.Box,{ml:3,textTransform:"capitalize",color:"muted"},t);case tc.sl_workspace_members:let f=async t=>{n({title:"Change Role?",message:()=>ty.createElement(uB,{mode:"single",role:t,userDisplayName:e.fullName||e.username}),confirmText:"Confirm",onConfirm:async()=>{await c(e.userId,t)}})};return a(tU.E4M.WorkspaceMembersPromote)?ty.createElement(uC,{userId:e.userId,roles:e.roles,onRoleSelected:f,disabled:p}):ty.createElement(tg.Box,{ml:3,textTransform:"capitalize",color:"muted"},t);default:return ty.createElement(tg.Box,{ml:3,textTransform:"capitalize"},t)}},uX=({row:{original:e}})=>{switch(e.typename){case tc.sl_workspace_invitations:return ty.createElement(uA,null,"Invited as ",ty.createElement(tg.Text,{textTransform:"capitalize"},`"${e.invitedAs}"`)," by ",`${e.invitedBy}`," ",ty.createElement(cm.f,{date:e.createdAt}));case tc.sl_workspace_join_requests:return ty.createElement(tg.Box,{textOverflow:"truncate"},"Requested access ",ty.createElement(cm.f,{date:e.createdAt}));default:return ty.createElement(tg.Box,null,"-")}},uZ=(0,ak.ss)((0,ak.aZ)(function({workspace:e}){let{touchQueriesCounter:t}=(0,tF.sn)(),{jwt:a,currentUser:r}=(0,tF.hD)(),{searchParams:n}=(0,tF.ks)(),{canI:o}=(0,tF.C$)(),{warning:l,success:i}=(0,tF.AO)(),{navigate:s}=(0,tF.bZ)(),{isWorkspaceLocked:c}=o$(),u=(0,tA.useNavigate)(),{closeFormDialog:d}=(0,tx.useFormDialog)(),{openDialog:m,closeDialog:p}=(0,tx.useDialog)(),{refresh:g}=(0,tN.useRefreshWorkspaceState)(e.id),h=uH(),f=uQ(),b=uG(),[,y]=uW(),[,w]=uR(),[,E]=uM(),[,v]=uL(a),[{items:k,hasFetched:_,refreshTableData:x}]=uV({workspace:e});ty.useEffect(x,[t]);let I=ty.useMemo(()=>{let{workspaceMembers:e,workspaceInvitations:t,workspaceJoinRequests:a}=k;return function(e){let t=[];for(let[a,r]of Object.entries(e))switch(a){case"workspaceMembers":t=[...t,...function(e){let t=e=>{let t=e.user?.emails;return t.find(e=>e.primary)||t[0]||{}},a=e=>{let t=e.roles||[];return t[0]?.role||""},r=e=>e.user?.firstName?e.user?.firstName+" "+e.user?.lastName:"";return(0,th.isArray)(e)?e.map(e=>({typename:"sl_workspace_members",id:e.id,userId:e.user.id,username:e.user.username||"-",fullName:r(e),avatarUrl:e.user.avatarUrl||"",lastSeenAt:e.user.lastSeenAt||"-",roles:e.roles||[],role:a(e),email:t(e)?.email||"-"})):[]}(r)];break;case"workspaceInvitations":t=[...t,...r.map(e=>({typename:"sl_workspace_invitations",id:e.id,username:"-",fullName:"-",lastSeenAt:"-",createdAt:e.createdAt,role:"pending",roles:["pending"],email:e.email||"-",invitedBy:e.invitedBy?.username||"-",invitedAs:e.roleName}))];break;case"workspaceJoinRequests":t=[...t,...r.map(e=>({typename:"sl_workspace_join_requests",id:e.id,userId:e.userId,username:"-",fullName:"-",lastSeenAt:"-",createdAt:e.createdAt,roles:["pending"],role:"pending",email:e.emails[0].email||"-",isDenied:e.isDenied}))]}return t}({workspaceMembers:e,workspaceInvitations:t,workspaceJoinRequests:a})},[k]);function S(e){return e.fullName&&"-"!==e.fullName?e.fullName:e.username&&"-"!==e.username?e.username:e.email}let j=ty.useMemo(()=>[{id:"name",Header:"Name",accessor:"username",Cell:uJ,Filter:tx.TableSearchFilter,filter:(e,t,a)=>e.filter(e=>{let t=a.trim().toLowerCase();return -1!==(e.original.fullName||e.original.username||"").toLowerCase().indexOf(t)||-1!==(e.original.email||"").toLowerCase().indexOf(t)}),sortType:(e,t)=>{let a=S(e.original).toLowerCase(),r=S(t.original).toLowerCase();return a===r?0:a<r?-1:1},width:150},{id:"lastSeenAt",Header:"Last Active",accessor:"lastSeenAt",Cell:({value:e})=>e&&"-"!==e?ty.createElement(cm.f,{date:e}):"-",disableFilters:!0,width:70},{id:"role",Header:()=>ty.createElement(tg.Box,{display:"inline-block",pl:3},"Role"),accessor:"role",Cell:uY,Filter:e=>ty.createElement(tx.TableSelectFilter,{...e,label:"Role",defaultFilterValue:n.get("role"),defaultFilterOptions:["owner","admin","maker","viewer","guest","billing","pending"]}),filter:"includes",filterOrder:1,width:50},{id:"notes",Header:"Notes",accessor:"notes",Cell:uX,disableFilters:!0,width:100}],[k,n]),C=[{text:"Delete",showFn:({original:e})=>o(tU.E4M.WorkspaceMembersApprove)&&e.typename!==tc.sl_workspace_join_requests,disabledFn:({original:e})=>e.userId===r?.id,onClick:async({original:t})=>{if(window.confirm("Are you sure?")){switch(t.typename){case tc.sl_workspace_invitations:await h(t.id);break;case tc.sl_workspace_members:await f(t.email,e.id)}x(),g()}}},{text:"Deny",showFn:({original:e})=>o(tU.E4M.WorkspaceMembersApprove)&&e.typename===tc.sl_workspace_join_requests,onClick:async({original:t})=>{window.confirm("Are you sure?")&&(await b(e.id,t.userId),x())}}],[P,A]=ty.useState({role:"",memberIds:[],shouldSetLoading:!0,hasError:!1,isDisabled:!1}),B=ty.useCallback(async t=>{let a=()=>{p(),s(u,"/admin/billing")};m({title:"Change Role?",confirmText:"Confirm",message:()=>ty.createElement(u$,{memberIds:t,role:P.role,hasError:P.hasError,handleOnPress:a}),shouldSetLoading:P.shouldSetLoading,isDisabled:P.isDisabled,onConfirm:async()=>{let{succeeded:a,failed:r}=await v(e.id,t,P.role);r&&r.code?402===r.code?A({role:P.role,memberIds:t,shouldSetLoading:!1,hasError:!0,isDisabled:!0}):(A({role:P.role,memberIds:t,shouldSetLoading:!1,hasError:!1,isDisabled:!1}),l({message:`Errors were encountered and ${t.length} ${tV()("member",t.length)} could not be updated.`})):(d(),i({message:`${a} ${tV()("member",a)} successfully updated to role ${P.role}`})),x()}})},[m,P.shouldSetLoading,P.isDisabled,P.role,P.hasError,p,s,u,v,e.id,x,l,d,i]);ty.useEffect(()=>{P.role&&P.memberIds.length>0&&(B(P.memberIds),A({role:"",memberIds:[],shouldSetLoading:!0,hasError:!1,isDisabled:!1}))},[P.role,P.memberIds,B]);let D=async e=>{let t="",a=e=>{t=e};m({title:"Change Role?",confirmText:"Change",message:()=>ty.createElement(uF,{memberIds:e,onChangeRole:a}),onConfirm:async()=>{A({role:t,memberIds:e,shouldSetLoading:!0,hasError:!1,isDisabled:!1})}})},[T,F]=ty.useState({role:"",userIds:[],shouldSetLoading:!0,hasError:!1,isDisabled:!1}),$=ty.useCallback(async t=>{let a=()=>{p(),s(u,"/admin/billing")};m({title:"Approve Join Requests?",confirmText:"Confirm",message:()=>ty.createElement(uT,{userIds:t,role:T.role,hasError:T.hasError,handleOnPress:a}),shouldSetLoading:T.shouldSetLoading,isDisabled:T.isDisabled,onConfirm:async()=>{let{succeeded:a,error:r}=await E(e.id,t,T.role);r?r.code&&402===r.code?F({role:T.role,userIds:t,shouldSetLoading:!1,hasError:!0,isDisabled:!0}):(F({role:T.role,userIds:t,shouldSetLoading:!1,hasError:!1,isDisabled:!1}),l({message:`Errors were encountered and ${t.length} ${tV()("join request",t.length)} could not be aprpoved.`})):(d(),i({message:`${a} ${tV()("join request",a)} successfully approve with role ${T.role}`})),x()}})},[m,T.shouldSetLoading,T.isDisabled,T.role,T.hasError,p,s,u,E,e.id,x,l,d,i]);ty.useEffect(()=>{T.role&&T.userIds.length>0&&($(T.userIds),F({role:"",userIds:[],shouldSetLoading:!0,hasError:!1,isDisabled:!1}))},[T.role,T.userIds,$]);let N=[{text:"Change Role",icon:["fas","user"],showFn:()=>o(tU.E4M.WorkspaceGlobalAdmin)&&!c,onClick:async e=>{let t=[];for(let a of e.selectedFlatRows)a.original.userId!==r?.id&&a.original.typename===tc.sl_workspace_members&&t.push(a.original.userId);D(t)}},{text:"Delete Member",icon:["fas","user-minus"],showFn:()=>o(tU.E4M.WorkspaceGlobalAdmin),onClick:async t=>{let a=t.selectedFlatRows.filter(e=>e.original.typename===tc.sl_workspace_members&&e.original.userId!==r?.id).map(e=>e.original.email),n="";n=0===a.length?"You have not selected any valid workspace members. Please select a workspace member other than yourself.":"You will take ownership of all projects and groups owned by the selected members",m({title:"Delete Member",intent:"danger",message:()=>ty.createElement(tg.Box,null,ty.createElement(tg.Text,null,`Do you want to delete ${a.length} ${tV()("member",a.length)}?`),ty.createElement(aa,{name:"role",messageColor:"warning",errors:{role:{message:n}}})),confirmText:"Delete",isDisabled:0===a.length,onConfirm:async()=>{let{succeeded:t,failed:r}=await y(a,e.id);x(),g(),p(),r?l({message:`${t} ${tV()("member",t)} ${1===t?"was":"were"} successfully deleted from the workspace. However, ${r} ${tV()("member",r)} encountered errors and could not be deleted.`}):i({message:`${t} ${tV()("member",t)} successfully deleted from workspace`})}})}},{text:"Approve Request",dataTest:"bulk-approve-join-requests",icon:["fas","check-circle"],showFn:()=>o(tU.E4M.WorkspaceGlobalAdmin)&&!c,onClick:async e=>{let t="",a=e=>{t=e},r=e.selectedFlatRows.filter(e=>e.original.typename===tc.sl_workspace_join_requests).map(e=>e.original.userId);m({title:"Approve Join Requests?",confirmText:"Approve",message:()=>ty.createElement(uD,{userIds:r,onSelectRole:a}),isDisabled:0===r.length,onConfirm:()=>{F({role:t,userIds:r,shouldSetLoading:!0,hasError:!1,isDisabled:!1})}})}},{text:"Deny Request",icon:["fas","ban"],showFn:()=>o(tU.E4M.WorkspaceGlobalAdmin),onClick:async t=>{let a=t.selectedFlatRows.filter(e=>e.original.typename===tc.sl_workspace_join_requests).map(e=>e.original.userId),r="";r=0===a.length?"You have not selected any join requests. Please select a join request to deny.":"Denied users cannot request to join again, but you can send them direct invitations later.",m({title:"Deny Join Requests?",intent:"danger",message:()=>ty.createElement(tg.Box,null,ty.createElement(tg.Text,null,`Do you want to deny ${a.length} Join ${tV()("Request",a.length)}?`),ty.createElement(aa,{name:"role",messageColor:"warning",errors:{role:{message:r}}})),confirmText:"Deny",isDisabled:0===a.length,onConfirm:async()=>{let{succeeded:t,failed:r}=await w(e.id,a);x(),p(),r?l({message:`Errors were encountered and ${a.length} ${tV()("join request",a.length)} could not be denied.`}):i({message:`${t} join ${tV()("request",t)} successfully denied`})}})}}];return ty.createElement(tx.Table,{row:{rowActions:[C]},initialState:{sortBy:[{id:"name",asc:!0}]},columns:j,data:I,isLoading:!_,bulkSelectActions:N,isRowDisabled:e=>c&&e.original.userId!==r?.id})})),u0=(0,ak.ss)((0,ak.aZ)(function(){let{getFeatureUsage:e,getFeatureMaxUsage:t}=(0,tF._m)(),{isWorkspaceLocked:a}=o$(),r=(e(tU.BAf.Members)??0)>t(tU.BAf.Members);return(0,a6.e)("members"),ty.createElement(ty.Fragment,null,ty.createElement(tg.Box,null,a&&r&&ty.createElement(u1,null)),ty.createElement(s5,null,ty.createElement(uZ,null)))},tU.E4M.WorkspaceMembersRead));function u1(){let{effects:e}=(0,tB.U8)();return ty.createElement(tg.Callout,{mx:4,mt:6,w:"auto",intent:"danger",actions:ty.createElement(tg.Button,{size:"sm",onPress:()=>{window.open(ab.xz.workspace_locking_overusage,"_blank","noopener"),e.reporter.log({event:"workspace_locked_members_callout_learn_more_clicked"})}},"Learn More")},ty.createElement(tg.Flex,{color:"danger-dark"},"Upgrade your workspace to a paid plan to restore access to other members."))}var u2=a(41806);function u4({tabs:e,dismissPanel:t,...a}){let r=ty.createElement(tg.TabList,null,e.filter(e=>e.visible).map((e,t)=>ty.createElement(tg.Tab,{id:e.title,key:t},e.title))),n=ty.createElement(tg.TabPanels,{p:0},e.filter(e=>e.visible).map((e,t)=>ty.createElement(tg.TabPanel,{id:e.title,key:t},e.panel)));return ty.createElement(tg.Tabs,{selectedId:e[0]?.title,...a},ty.createElement(tg.VStack,{divider:!0,w:"full",h:"full"},ty.createElement(tg.Flex,{alignItems:"center",h:"3xl",ml:5,pr:4,zIndex:10},ty.createElement(tg.Flex,{flex:1,alignContent:"center",alignItems:"center"},r),ty.createElement(tg.Button,{appearance:"minimal","aria-label":"dismiss",icon:ty.createElement(tg.Icon,{icon:"times",size:"lg"}),onPress:t,ml:2})),ty.createElement(tg.Flex,{flexDirection:"col",px:2,py:2,h:"full"},n)))}function u3(){return ty.createElement(tg.Box,{"data-test":"new-group-member-role-select"},ty.createElement(tg.Select,{"aria-label":"role",defaultValue:tU.gDJ.Admin,isDisabled:!1,options:[...u8]}))}function u5({group:e,existingGroupMember:t,onRemove:a}){let{jwt:r,currentUser:n}=(0,tF.hD)(),{openDialog:o,closeDialog:l}=(0,tx.useDialog)(),{canIOnGroup:i}=(0,tF.C$)(),s=(0,tN.useRemoveGroupMember)(r);async function c(){void 0!==t&&o({intent:"danger",title:"Remove Member",message:()=>ty.createElement(ty.Fragment,null,"Are you sure you want to remove",ty.createElement(tg.Text,{fontWeight:"bold"}," ",t.displayName," "),"from this group?"),confirmText:"Remove",onConfirm:async()=>{await s.mutate({groupId:e.id,userId:(0,t8.encodeID)("usr",t.id)}),a(),l()}})}let u=[{options:[...u8]}];i(e,tU.Jd3.GroupMemberDelete)&&u.push({options:[{value:"remove",label:"Remove Member",onPress:c,isDisabled:t?.isLastAdmin}]});let d=void 0===t||n?.id===t.id;return ty.createElement(tg.Box,{"data-test":"existing-group-member-role-select"},ty.createElement(tg.Select,{"aria-label":"role",value:tU.gDJ.Admin,isDisabled:d,options:u,defaultValue:tU.gDJ.Admin}))}let u8=[{label:(0,th.capitalize)(tU.gDJ.Admin),value:tU.gDJ.Admin}];function u6({actionButton:e,additionalInfo:t,avatar:a,displayName:r,email:n,roleSelector:o,...l}){return ty.createElement(nf,{mx:2,direction:"row",...l,media:a},ty.createElement(tg.HStack,{spacing:2},ty.createElement(tg.VStack,{w:"full",overflowX:"auto"},ty.createElement(tg.HStack,null,ty.createElement(tx.TextOverflowTooltip,{placement:"top"},r),u7[t]),n&&ty.createElement(tx.TextOverflowTooltip,{placement:"top",content:ty.createElement(tg.Text,{fontSize:"sm",color:"light"},n)},n)),ty.createElement(tg.Box,null,e),o))}!function(e){e.PENDING="pending",e.YOU="you",e.NONE="none"}(tu||(tu={}));let u7={pending:ty.createElement(tg.Box,{ml:1,color:"light"},"(Pending)"),you:ty.createElement(tg.Box,{ml:1,color:"light"},"(You)"),none:null},u9=({group:e,onRemove:t})=>{let{currentUser:a,jwt:r}=(0,tF.hD)(),{canIOnGroup:n}=(0,tF.C$)(),{openDialog:o,closeDialog:l}=(0,tx.useDialog)(),{danger:i,success:s}=(0,tF.AO)(),c=(0,tN.useRemoveGroupMember)(r),{data:u,isLoading:d,refetch:m}=(0,tN.useGetGroupMembers)({jwtToken:r,group_id:e.id}),{data:p,isLoading:g,refetch:h}=(0,tN.useGetGroupInvites)({jwtToken:r,group_id:e.id});if(d||g)return ty.createElement(tx.LoadingIndicator,null);let f=(u?.items||[]).map(e=>({type:"member",data:e})),b=[...f,...(p?.items||[]).map(e=>({type:"invitation",data:e}))].sort(e=>"member"===e.type&&(0,t8.safelyDecodeID)(e.data.user_id)===a?.id?-1:1),y=f.filter(e=>"admin"===e.data.role),w=async a=>{try{await c.mutateAsync({groupId:e.id,userId:a}),m(),h(),t(),l(),s({message:"You have left the group"})}catch(e){i({message:e.message})}};return ty.createElement(tg.Box,null,b?.map((r,l)=>{let i,s,c="",u="",d=!1,p=tu.NONE,g="admin"===r.data.role&&1===y.length;if("invitation"===r.type)c=u=r.data.workspace_invitation.email,i=ty.createElement(tg.Avatar,{className:"avatar__pending"}),p=tu.PENDING;else if("member"===r.type){let{data:e}=r,t=e.first_name?`${e.first_name} ${e.last_name}`:"";u=rI(e.emails)||"",c=t||e.username||u,i=ty.createElement(tg.Avatar,{name:c}),p=(d=t8.safelyDecodeID(e.user_id)===a?.id)?tu.YOU:p,s={id:t8.safelyDecodeID(e.user_id),email:u,username:e.username,displayName:c,workspacePermissions:e.workspace_permissions,isLastAdmin:g}}let f=ty.createElement(u5,{group:e,existingGroupMember:s,onRemove:function(){m(),h(),t()}});return ty.createElement(u6,{"data-test":"member-row",key:l,pt:0===l?0:3,avatar:i,displayName:c,email:u,additionalInfo:p,actionButton:d&&"member"===r.type&&!g&&n(e,tU.Jd3.GroupLeave)&&ty.createElement(tg.Button,{size:"sm",onPress:()=>{o({intent:"danger",title:"Leave Group",message:"Are you sure you want to leave this group?",confirmText:"Leave",onConfirm:async()=>{await w(r.data.user_id)}})}},"Leave"),roleSelector:f})}))},de=({groupId:e,disabled:t,onVisibilityUpdated:a,visibility:r})=>{let{jwt:n}=(0,tF.hD)(),{canIOnGroup:o}=(0,tF.C$)(),{success:l,danger:i}=(0,tF.AO)(),s=(0,tN.useUpdateGroup)(n),{data:c}=(0,tN.useGetGroup)(n,e),[u,d]=ty.useState(r),m=t||!(c&&o(c,tU.Jd3.GroupUpdate)),p=async t=>{d(t);try{await s.mutateAsync({group_id:e,visibility:t}),l({message:`Visibility changed from ${u} to ${t}`}),a&&a(t)}catch(e){i({message:e.message||"Something went wrong, please try again"}),d(u)}};return ty.useEffect(()=>{c?.visibility&&d(c.visibility)},[c?.visibility]),ty.createElement(tg.Flex,{alignItems:"center"},ty.createElement(tg.Select,{"aria-label":"visibility",value:u,isDisabled:m,options:[{visibility:"public",description:void 0},{visibility:"internal",description:"All public projects inside group will be made internal"}].map(e=>({label:(0,th.capitalize)(e.visibility),value:e.visibility,description:e.description})),onChange:e=>p(e)}))},dt=({group:e})=>ty.createElement(ty.Fragment,null,ty.createElement(da,{group:e})),da=({group:e})=>{let[t,a]=ty.useState(e.visibility),r=lk[t],n=ty.createElement(tg.Icon,{icon:r,style:{color:"var(--color-text-light)"},size:"2x"}),o=ty.createElement(de,{groupId:e.id,visibility:t,onVisibilityUpdated:a});return ty.createElement(nf,{media:n,mediaWidth:"md",suffix:o},ty.createElement(tg.Box,null,"Group Visibility"),ty.createElement(tg.Box,{color:"light"},t?({public:"Visible to everyone",internal:"Visible to workspace members and invited guests"})[t]:"-"))};function dr({workspaceId:e,group:t,...a}){let{canIOnGroup:r}=(0,tF.C$)(),{jwt:n}=(0,tF.hD)(),{log:o}=(0,tF.pw)(),l=r(t,tU.Jd3.GroupMemberAdd),[{isLoading:i},s]=(0,tN.useAddGroupMembers)({jwtToken:n,groupId:t.id}),{data:c,isLoading:u,refetch:d}=(0,tN.useListGroupAssignableMembersQuery)(n,{group_id:t.id}),m=ty.useMemo(()=>c?.items.filter(e=>!!e.type&&!!e.data).map(rU)||[],[c?.items]),p=async e=>{let a=e.map(e=>({group_id:t.id,email:rF(e),role:tU.gDJ.Admin}));s(a);for(let e=0;e<a.length;e++)o({event:"group_invite_sent"})},g=ty.createElement(u3,null);return ty.createElement(tg.Flex,{...a,flexDirection:"col",h:"full"},ty.createElement(dn,null),ty.createElement(tg.VStack,{spacing:3,mt:3,divider:!0,h:"full"},ty.createElement(r5,{isDisabled:!l,availableMembersLoading:u,availableMembers:m,roleSelector:g,workspaceRole:tU.l2p.Maker,onAdd:p,onAddLoading:i}),ty.createElement(dt,{group:t}),ty.createElement(tg.Box,{className:"util__scrollbar",h:"full",pos:"relative"},ty.createElement(tg.Box,{overflowY:"auto",h:"full",w:"full",pos:"absolute"},ty.createElement(u9,{group:t,onRemove:d})))))}function dn(){return ty.createElement(tg.Box,{m:2,mb:0},ty.createElement(tg.Callout,null,"If you're looking to give access to projects to other members of your workspace, this is now controlled via the"," ",ty.createElement(tk.Link,{to:"/admin/teams",style:{display:"contents",color:"var(--color-link)"}},"Teams tab"),"."))}let dl=(0,ak.ss)((0,ak.aZ)(function({workspace:e,groupId:t}){let{jwt:a}=(0,tF.hD)(),{data:r,isFetched:n}=(0,tN.useGetGroup)(a,t);return n&&r?ty.createElement(dr,{workspaceId:e.id,group:r}):ty.createElement(tx.LoadingIndicator,null)})),di=({project:e,branchSlug:t,...a})=>{let{canIOnProject:r}=(0,tF.C$)(),{slug:n}=e,o=`/studio/${n}`,l=`/docs/${n}`,i="Edit",s=`/settings/${n}`;if(t){let e=encodeURIComponent(t);o+=`:${e}`,l+=`/branches/${e}`}let c=r(e.my_permissions,tU.Jg8.ProjectSettingsView),[u]=nW(e.id),d=["connect","readOnly","readWrite"].includes(u);return"connect"===u&&(i=`Connect to ${i}`),ty.createElement(tg.Box,a,ty.createElement(tg.HStack,{spacing:2,pt:4},d&&ty.createElement(tg.Button,{"data-test":"edit-project-btn",className:"link-section-btn",as:tk.Link,to:o,color:{default:"primary",hover:"primary-dark"}},ty.createElement(tg.Icon,{icon:["fal","pencil-ruler"]}),ty.createElement(tg.Text,{ml:1},i)),ty.createElement(tg.Button,{"data-test":"view-docs-btn",className:"link-section-btn",as:tk.Link,to:l,color:{default:"primary",hover:"primary-dark"}},ty.createElement(tg.Icon,{icon:["fal","book"]}),ty.createElement(tg.Text,{ml:1},"View Docs")),c&&ty.createElement(tg.Button,{"data-test":"project-settings-btn",className:"link-section-btn",as:tk.Link,to:s,color:{default:"primary",hover:"primary-dark"}},ty.createElement(tg.Icon,{icon:["fal","cog"]}),ty.createElement(tg.Text,{ml:1},"Settings"))))},ds=({title:e,name:t,description:a,iconName:r,iconColor:n,defaultBranch:o,project:l,...i})=>{let s=ty.createElement(tg.Avatar,{...rC({name:t,presentation:{icon:r,icon_color:n}}),size:"lg"});return ty.createElement(tg.Box,i,ty.createElement(tg.Box,{display:"block"},ty.createElement(nf,{media:s},ty.createElement(tg.Text,{"data-test":"title",textTransform:"uppercase",fontSize:"base",color:"light"},e),ty.createElement(tg.Box,{"data-test":"name",w:"full",textOverflow:"truncate"},ty.createElement(tg.Text,{fontWeight:"semibold",fontSize:"xl"},t)))),a&&ty.createElement(tg.Box,{"data-test":"description",pt:4,display:"block"},a),l&&ty.createElement(di,{project:l,branchSlug:o}))},dc=({projectCount:e,adminsCount:t,invitationCount:a,...r})=>{let n=ty.createElement(tg.Box,{color:"muted"},ty.createElement(tg.Icon,{size:"lg",icon:["fas","pencil-ruler"]})),o=ty.createElement(tg.Box,{color:"muted"},ty.createElement(tg.Icon,{color:"muted",size:"lg",icon:["fas","users"]})),l=ty.createElement(tg.Box,{color:"muted"},ty.createElement(tg.Icon,{color:"muted",size:"lg",icon:["fas","user-clock"]}));return ty.createElement(tg.Box,r,ty.createElement(nd,null,"Summary"),ty.createElement(tg.VStack,{spacing:5},ty.createElement(nf,{media:n},ty.createElement(tg.Text,{color:"muted",fontWeight:"medium"},"Projects: ",e)),ty.createElement(nf,{media:o},ty.createElement(tg.Text,{color:"muted",fontWeight:"medium"},"Admins: ",t)),ty.createElement(nf,{media:l},ty.createElement(tg.Text,{color:"muted",fontWeight:"medium"},"Pending Admins: ",a))))},du=({group:e,...t})=>ty.createElement(tg.Box,t,ty.createElement(tg.VStack,{spacing:6},ty.createElement(dc,{projectCount:e.projects_count,adminsCount:e.admins_count,invitationCount:e.invitations_count}))),dd=({groupId:e})=>{let{jwt:t}=(0,tF.hD)(),{data:a,isFetched:r}=(0,tN.useGetGroup)(t,e);return ty.createElement(tg.Box,{h:"full",px:2,pt:4},r&&a?ty.createElement(tg.VStack,{spacing:6,align:"stretch",w:"full",divider:!0,h:"full"},ty.createElement(ds,{px:2.5,title:"Group",name:a.name,description:a.description,iconName:a.presentation?.icon,iconColor:a.presentation?.color}),ty.createElement(tg.Flex,{pos:"relative",overflowY:"auto",h:"full"},ty.createElement(du,{pos:"absolute",px:2.5,group:a}))):ty.createElement(tx.LoadingIndicator,null))},dm=e=>{let{showFeatureDialog:t}=(0,tF.L3)();switch(e.type){case"switch":return ty.createElement(dp,{...e,actionElem:ty.createElement(tg.Switch,{isSelected:e.isSelected,isDisabled:e.isDisabled,"aria-label":e.switchLabel}),onClick:()=>{e.onClick(!e.isSelected)}});case"dialog":return ty.createElement(ty.Fragment,null,ty.createElement(dp,{...e,hasMoreIcon:["far","chevron-right"],valueElem:ty.createElement(tg.Box,null,e.value)}),e.hasDivider&&ty.createElement(tg.Box,null,ty.createElement(tg.Box,{h:"px",bg:"canvas-300"}),ty.createElement(tg.VStack,{spacing:6,align:"stretch",w:"full",divider:!0,pos:"absolute"})));case"external-link":return ty.createElement(dp,e);case"copy":return ty.createElement(df,e);case"list":return ty.createElement(dp,{...e,onClick:e.noAction?void 0:e.onClick,actionElem:e.noAction?void 0:ty.createElement(tg.Button,{size:"sm","data-test":(0,th.kebabCase)(`button-add-${e.testId||e.label}`),disabled:e.isDisabled,onPress:()=>{if(e.featureBadge)return t(e.featureBadge);e.onClick&&e.onClick()}},e.actionText||"Add")},e.items&&e.items.length?ty.createElement(tg.Box,{pl:14},ty.createElement(tg.Box,{h:"px",bg:"canvas-300"}),ty.createElement(tg.VStack,{divider:!0},e.items.map((e,t)=>ty.createElement(dg,{key:t,...e})))):null);default:return null}},dp=({label:e,hint:t,icon:a,children:r,onClick:n,featureBadge:o,testId:l,isDisabled:i,hasMoreIcon:s,valueElem:c,actionElem:u,isPanelTab:d})=>{let{showFeatureDialog:m}=(0,tF.L3)(),p=!!n&&!i;return ty.createElement(tg.Box,{"data-test":(0,th.kebabCase)(`setting-row-${l||e}`)},ty.createElement(tg.Flex,{onClick:()=>{if(o)return m(o);!i&&n&&n()},"data-test":"setting-row-top",cursor:p?"pointer":"auto",bg:p?{hover:"canvas-50"}:void 0,alignItems:"center",py:d?0:3.5,pl:d?2.5:1.5,pr:3},a&&ty.createElement(tg.Box,{w:20,textAlign:"center",ml:-6},ty.createElement(tg.Icon,{icon:a.icon,size:"3x",style:a.color?{color:a.color}:{color:"var(--color-text-muted)"}})),ty.createElement(tg.Flex,{flex:1,alignItems:"center"},ty.createElement(tg.Box,{flex:1},ty.createElement(dh,{label:e,hint:t,featureBadge:o})),ty.createElement(tg.HStack,{spacing:3},c,u,s&&ty.createElement(tg.Box,{color:"muted"},ty.createElement(tg.Icon,{icon:s}))))),r)};function dg({children:e,onClick:t,isDisabled:a}){return ty.createElement(tg.Flex,{onClick:a?void 0:t,cursor:a?"auto":"pointer",bg:a?void 0:{hover:"canvas-50"},"data-test":(0,th.kebabCase)("setting-row-item"),alignItems:"center",py:3,pl:1.5,pr:3},ty.createElement(tg.Flex,{flex:1,alignItems:"center"},e),ty.createElement(tg.Box,{color:"muted"},ty.createElement(tg.Icon,{icon:["far","chevron-right"]})))}function dh({label:e,hint:t,featureBadge:a}){return ty.createElement(tg.Box,null,ty.createElement(tg.Flex,{align:"center"},ty.createElement(tg.Box,{fontSize:"lg",fontWeight:"medium",mr:2},e),a&&ty.createElement(n_.y,{feature:a})),t&&ty.createElement(tg.Box,{display:"block",pt:1,color:"muted"},t))}let df=({value:e,...t})=>{let{info:a}=(0,tF.AO)(),{onCopy:r,hasCopied:n}=(0,tg.useClipboard)(e);return ty.createElement(dp,{...t,hasMoreIcon:["fal",n?"check":"copy"],valueElem:ty.createElement(tg.Box,null,e),onClick:()=>{r(),a({message:"Copied to clipboard!"})}})},db=({title:e,callout:t,isDangerZone:a,children:r})=>ty.createElement(tg.VStack,{spacing:3},ty.createElement(tg.Heading,{size:3,color:a?"danger":void 0},e),t&&ty.createElement(tg.Callout,{mt:-4,mb:-1,intent:"warning"},t),ty.createElement(tg.VStack,{divider:!0,mx:-2,p:1,rounded:"lg",border:!!a||void 0,borderColor:a?"danger":void 0},r));var dy=a(19170);let dw=ty.memo(({color:e,onChange:t,defaultColor:a,inputProps:r,readOnly:n,name:o})=>{let[l,i]=ty.useState(e);return ty.useEffect(()=>{i(e)},[e]),ty.createElement(tg.Popover,{appearance:"minimal",placement:"bottom left",autoFocus:!1,renderTrigger:ty.createElement(tg.Pressable,null,ty.createElement(tg.Flex,{flexDirection:"row"},ty.createElement(tg.Box,{display:"inline-block",flexShrink:!0,"data-test":"color-output",className:"border cursor-pointer",style:{backgroundColor:l||a,width:30,minWidth:30}}),ty.createElement(tg.Box,{flexGrow:!0},ty.createElement(tg.Input,{name:o,"data-test":"color-input",value:l,onChange:e=>i(e.currentTarget.value),onBlur:()=>{l!==e&&t(l)},placeholder:a,autoComplete:"off",readOnly:n,...r}))))},ty.createElement(dy.xk,{color:l||a,onChange:e=>i(e.hex),onChangeComplete:a=>{a.hex!==e&&t(a.hex)}}))}),dE=()=>{let{register:e,watch:t,setValue:a,control:r}=(0,t5.xW)(),n=t("iconColor")||r._defaultValues.iconColor;return ty.createElement(tg.Box,null,ty.createElement(lp,{label:"Icon Name",autoFocus:!0,helperText:ty.createElement(ty.Fragment,null,"Give your group a little flair - pick a"," ",ty.createElement("a",{href:"https://fontawesome.com/icons",target:"_blank",rel:"noopener noreferrer"},"FontAwesome icon")),icon:ty.createElement(tg.Avatar,{icon:["fad",t("icon")],fg:n,ml:-1}),...e("icon")}),ty.createElement(tg.Box,{mt:5},ty.createElement(rr,{htmlFor:"iconColor"},"Icon Color"),ty.createElement(dw,{name:"iconColor",color:n||"",defaultColor:n||"",onChange:e=>a("iconColor",e,{shouldDirty:!0})}),ty.createElement(tg.Text,{color:"muted",size:"sm"},"Pick a color in hex format, for example #2ea44e.")))},dv=()=>{let{register:e}=(0,t5.xW)();return ty.createElement(tg.Box,null,ty.createElement(lp,{textarea:!0,label:"Group Description",autoFocus:!0,...e("description",{maxLength:{value:300,message:"Must be no more than 300 characters"}})}))},dk=()=>{let{register:e}=(0,t5.xW)();return ty.createElement(tg.Box,null,ty.createElement(lp,{label:"Group Name",autoFocus:!0,...e("name",{required:!0,minLength:1,maxLength:{value:100,message:"Must be no more than 100 characters"}})}))},d_=ty.memo(({name:e,label:t,defaultValue:a,...r})=>{let{control:n,formState:{isSubmitting:o},setValue:l,defaultValues:i={}}=(0,t5.xW)(),s=a||n._defaultValues[e]||i[e];return ty.createElement(tg.Flex,{flexDirection:"col"},t&&ty.createElement(rr,{htmlFor:e},t),ty.createElement(t5.xI,{defaultValue:s,control:n,name:e,render:({field:t})=>ty.createElement(tg.RadioGroup,{key:`${e}-${s}`,"data-test":`radiogroup-field-${e}`,defaultValue:t.value,onChange:e=>{l(t.name,e,{shouldDirty:!0})},isDisabled:o,...r})}))}),dx=ty.memo(({value:e,disabled:t,children:a,name:r})=>ty.createElement(tg.Radio,{"data-test":`radio-field-${r}-${e}`,value:e,disabled:t,size:"md",intent:"default"},a)),dI=()=>ty.createElement(tg.Box,null,ty.createElement(d_,{autoFocus:!0,name:"visibility",size:"md",orientation:"vertical"},ty.createElement(dx,{value:"public"},ty.createElement(tg.Flex,{flexDirection:"col",pl:3},ty.createElement(tg.Text,null,"Public"),ty.createElement(tg.Text,{fontSize:"sm",color:"muted"},"Visible to everyone"))),ty.createElement(tg.Box,{mt:5},ty.createElement(dx,{value:"internal"},ty.createElement(tg.Flex,{flexDirection:"col",pl:3},ty.createElement(tg.Text,null,"Internal"),ty.createElement(tg.Text,{fontSize:"sm",color:"muted"},"Visible to workspace members and invited guests"),ty.createElement(aa,{name:"visibility",messageColor:"warning",errors:{visibility:{message:"All public projects within the group will be set to internal visibility."}}})))))),dS=(0,ak.ss)(function({group:e}){(0,a6.e)("group_settings");let{canIOnGroup:t}=(0,tF.C$)(),a=!t(e,tU.Jd3.GroupUpdate),r=t(e,tU.Jd3.GroupDelete),n=a?"Heads up, you'll need write access to the group in order to change these settings.":void 0;return ty.createElement(ty.Fragment,null,ty.createElement(tg.Box,tg.flexProps,ty.createElement(tg.VStack,{spacing:6},n&&ty.createElement(tg.Box,{px:2},ty.createElement(tg.Box,tg.flexProps,ty.createElement(tg.Callout,{intent:"warning"},n))),ty.createElement(({nameLabel:t,visibilityLabel:r,avatarLabel:n,isPanelTab:o,hasDivider:l})=>ty.createElement(ty.Fragment,null,ty.createElement(dj,{group:e,readOnly:a,label:t,isPanelTab:o,hasDivider:l}),ty.createElement(dC,{group:e,readOnly:a,isPanelTab:o,hasDivider:l}),ty.createElement(dP,{group:e,readOnly:a,label:r,isPanelTab:o,hasDivider:l}),ty.createElement(dA,{group:e,readOnly:a,label:n,isPanelTab:o,hasDivider:l})),{nameLabel:"Group Name",visibilityLabel:"Group Visibility",avatarLabel:"Group Avatar",isPanelTab:!0,hasDivider:!0}),r&&ty.createElement(tg.Box,{py:5,px:2.5},ty.createElement(tg.Box,tg.flexProps,ty.createElement(db,{title:"Danger Zone",isDangerZone:!0},ty.createElement(dB,{group:e,isPanelTab:!1,hasDivider:!1})))))))}),dj=({group:e,readOnly:t,label:a,isPanelTab:r,hasDivider:n})=>{let{state:o,effects:l}=(0,tB.U8)(),{openFormDialog:i}=(0,tx.useFormDialog)(),s=(0,tN.useUpdateGroup)(o.auth.jwt);return ty.createElement(ty.Fragment,null,ty.createElement(dm,{type:"dialog",label:a,isPanelTab:r,hasDivider:n,hint:"The display name for this group of projects",isDisabled:t,onClick:()=>i(dk,{title:"Edit Group Name",defaultValues:{name:e.name},onSave:async({name:t})=>{try{await s.mutateAsync({group_id:e.id,name:t}),l.notifications.success({message:"Group Name updated"})}catch(e){if(e.type&&"CONFLICT"===e.type)throw new tx.FormFieldError("name",e.message,e.type);throw e}}})}))},dC=({group:e,readOnly:t,isPanelTab:a,hasDivider:r})=>{let{state:n,effects:o}=(0,tB.U8)(),{openFormDialog:l}=(0,tx.useFormDialog)(),i=(0,tN.useUpdateGroup)(n.auth.jwt);return ty.createElement(dm,{type:"dialog",label:"Description",isPanelTab:a,hasDivider:r,hint:"The purpose of this group",isDisabled:t,onClick:()=>l(dv,{title:"Edit Group Description",defaultValues:{description:e.description},onSave:async({description:t})=>{await i.mutateAsync({group_id:e.id,description:t}),o.notifications.success({message:"Group Description updated"})}})})},dP=({group:e,readOnly:t,label:a,isPanelTab:r,hasDivider:n})=>{let{state:o,effects:l}=(0,tB.U8)(),{openFormDialog:i}=(0,tx.useFormDialog)(),s=(0,tN.useUpdateGroup)(o.auth.jwt);return ty.createElement(dm,{type:"dialog",label:a,isPanelTab:r,hasDivider:n,hint:"Who can join this group",isDisabled:t,value:(0,th.capitalize)(e.visibility),onClick:()=>i(dI,{title:"Edit Group Visibility",defaultValues:{visibility:e.visibility},onSave:async({visibility:t})=>{await s.mutateAsync({group_id:e.id,visibility:t}),l.notifications.success({message:"Group Visibility updated"})}})})},dA=({group:e,readOnly:t,label:a,isPanelTab:r,hasDivider:n})=>{let{state:o,effects:l}=(0,tB.U8)(),{openFormDialog:i}=(0,tx.useFormDialog)(),s=(0,tN.useUpdateGroup)(o.auth.jwt);return ty.createElement(dm,{type:"dialog",label:a,isPanelTab:r,hasDivider:n,hint:"Customize this group's avatar icon and color",isDisabled:t,onClick:()=>i(dE,{size:"sm",title:"Edit Group Avatar",defaultValues:{icon:e.presentation?.icon,iconColor:e.presentation?.color},onSave:async({icon:t,iconColor:a})=>{await s.mutateAsync({group_id:e.id,icon:t,iconColor:a}),l.notifications.success({message:"Group Avatar updated"})}})})},dB=({group:e,isPanelTab:t,hasDivider:a})=>{let{state:r,actions:n,effects:o}=(0,tB.U8)(),{openFormDialog:l}=(0,tx.useFormDialog)(),i=(0,tN.useDeleteGroup)(r.auth.jwt);return ty.createElement(dm,{type:"dialog",label:"Delete Group",isPanelTab:t,hasDivider:a,hint:"This action will permanently remove the group and disassociate all projects. Projects will not be deleted.",onClick:()=>l(()=>ty.createElement(cf,{confirmExpectedValue:e.name,warningText:"This action will permanently remove the group and disassociate all projects. Note that projects will not be deleted and their visibility will remain the same."}),{title:"Delete Group?",saveButtonText:"Delete",onSave:async()=>{await i.mutateAsync({groupId:e.id}),o.reporter.log({event:"workspace_delete_group"}),o.notifications.success({message:"Group has been deleted"}),n.workspaceItemDetails.setIsOpen(!1)}})})},dD=(0,ak.ss)((0,ak.aZ)(function({groupId:e}){let{jwt:t}=(0,tF.hD)(),{data:a,isFetched:r}=(0,tN.useGetGroup)(t,e);return ty.createElement(tg.Box,{h:"full",px:2,pt:4},r&&a?ty.createElement(tg.VStack,{spacing:6,align:"stretch",w:"full",h:"full"},ty.createElement(tg.Flex,{pos:"relative",overflowY:"auto",h:"full"},ty.createElement(dS,{group:a,path:"settings"}))):ty.createElement(tx.LoadingIndicator,null))}));function dT({id:e,...t}){let{jwt:a}=(0,tF.hD)(),{canIOnGroup:r}=(0,tF.C$)(),{setIsOpen:n}=(0,tF.nc)(),{data:o,isFetched:l,error:i}=(0,tN.useGetGroup)(a,e);if(!l)return ty.createElement(tx.LoadingIndicator,null);if(!o){if(!i)return null;{let e=404===i.code?"Group Not Found":i.message;return ty.createElement(rd.m,{title:e})}}let s=[{panel:ty.createElement(dd,{groupId:e}),title:"Overview",visible:!0},{panel:ty.createElement(dl,{groupId:e}),title:"Admins",visible:r(o,tU.Jd3.GroupMemberRead)},{panel:ty.createElement(dD,{groupId:e}),title:"Settings",visible:r(o,tU.Jd3.GroupSettingsView)}];return ty.createElement(u4,{tabs:s,dismissPanel:()=>n(!1),...t})}let dF=(0,ak.ss)((0,ak.aZ)(function({workspace:e,projectId:t}){let a=(0,t8.safelyDecodeID)(t);return ty.createElement(nF,{projectId:a,workspaceId:e.id})}));function d$(e){return e?`${e.name} ${e?.is_default?"(default)":""}`:""}let dN=({isFetched:e,branch:t,options:a,onBranchChange:r})=>{let n=a?.items.map(e=>({id:e.id,title:d$(e),value:e.id}))??[];return ty.createElement(tg.Menu,{"aria-label":"Versions",placement:"bottom left",closeOnPress:!0,matchTriggerWidth:!0,renderTrigger:({isOpen:r})=>ty.createElement(tg.FieldButton,{"aria-label":"select version",w:"full",icon:"layer-group",outline:"none",h:"md",active:r,disabled:!e||!a?.items?.length},d$(t)),items:[{type:"option_group",value:t?.id??"",title:"Branches",onChange:e=>{e!==t?.id&&r&&r(t=a?.items?.find(t=>t.id===e)??null)},children:n}]})},dU=({projectId:e,branch:t,onBranchChange:a})=>{let{jwt:r}=(0,tF.hD)(),{data:n,isFetched:o}=(0,tN.useGetProjectBranches)(r,{projectId:e});return ty.createElement(tg.Box,{"data-test":"versions-section"},ty.createElement(nd,{meta:`(${n?.items.length||0})`},"Versions"),ty.createElement(dN,{options:n,isFetched:o,branch:t,onBranchChange:a}))},dM=({branch:e})=>{let t=[{key:"Articles",value:e?.node_counts?.article_count||0,presentation:{icon:rw.bS.article,color:rw.wL.article}},{key:"Model",value:e?.node_counts?.schema_count||0,presentation:{icon:rw.bS.model,color:rw.wL.model}},{key:"APIs",value:e?.node_counts?.api_count||0,presentation:{icon:rw.bS.api,color:rw.wL.api}},{key:"Endpoints",value:e?.node_counts?.operation_count||0,presentation:{icon:rw.bS.endpoint,color:rw.wL.endpoint}}],a=t?.map(e=>ty.createElement(tg.Box,{w:"full",key:e?.key},ty.createElement(tg.Box,null,ty.createElement(tg.Icon,{icon:["fas",e?.presentation.icon],style:{color:`${e?.presentation.color}`},size:"lg",fixedWidth:!0}),ty.createElement(tg.Text,{pl:3},e?.key,": ",e?.value))));return ty.createElement(tg.Box,{"data-test":"nodes-section"},ty.createElement(nd,null,"Nodes"),ty.createElement(tg.VStack,{spacing:5,pt:2},a))},dR=({branch:e})=>ty.createElement(tg.Box,{"data-test":"commit-section"},ty.createElement(nd,null,"Commit"),ty.createElement(tg.Text,{color:"light"},e?.commit_hash)),dW=({branch:e})=>ty.createElement(tg.Box,{"data-test":"updated-section"},ty.createElement(nd,null,"Updated"),ty.createElement(tg.Text,{color:"light"},e&&ty.createElement(cm.f,{date:e?.updated_at}))),dL=({projectId:e,branch:t,onBranchChange:a,...r})=>ty.createElement(tg.Box,{...r,"data-test":"branch-section"},ty.createElement(tg.VStack,{spacing:6},ty.createElement(dU,{projectId:e,branch:t,onBranchChange:a}),ty.createElement(dM,{branch:t}),t?.commit_hash&&ty.createElement(dR,{branch:t}),ty.createElement(dW,{branch:t}))),dG=({updatedAt:e})=>ty.createElement(tg.Box,{"data-test":"updated-section"},ty.createElement(nd,null,"Updated"),ty.createElement(tg.Text,{color:"light"},e&&ty.createElement(cm.f,{date:e}))),dO=({updatedAt:e,...t})=>ty.createElement(tg.Box,{...t,"data-test":"style-guide-section"},ty.createElement(dG,{updatedAt:e})),dz=(e,t,a)=>ty.createElement(tg.Tooltip,{key:t,placement:"top",renderTrigger:a},e.name),dq=(e,t)=>ty.createElement(tg.HStack,{key:t,spacing:1},ty.createElement(tg.Avatar,{...e,size:"sm",noTitleAlt:!0}),ty.createElement(tg.Box,null,e.name)),dV=(e,t)=>{let a=e.length>10?e.slice(0,9):e,r=Math.max(e.length-a.length,0);return ty.createElement(tg.Tooltip,{placement:"bottom",renderTrigger:t},ty.createElement(tg.VStack,{spacing:1},a.map(dq),r>0?ty.createElement(tg.Box,null,"...and ",r," more"):void 0))};function dH({items:e,...t}){return ty.createElement(tg.AvatarList,{...t,noTitleAlt:!0,items:e.map(rC),itemRendererOverride:dz,overflowRendererOverride:dV})}let dQ=({project:e})=>{let t=e.teams??[];return ty.createElement(tg.Box,{"data-test":"teams-section",px:2.5},ty.createElement(nd,{meta:`(${t.length})`,dataTestId:"project-teams-section-title"},"Teams"),ty.createElement(tg.Box,null,t.length>0?ty.createElement(dH,{items:t}):ty.createElement(tg.Text,{color:"light"},"No teams assigned")))},dK=({projectId:e})=>{let{jwt:t}=(0,tF.hD)(),{hasFeature:a}=(0,tF._m)(),r=a(tU.BAf.Teams),{data:n,isFetched:o}=(0,tN.useGetProject)(t,{projectId:(0,t8.safelyDecodeID)(e)}),[l,i]=ty.useState(n?.default_branch??null);ty.useEffect(()=>{i(n?.default_branch??null)},[n]);let s=n?.flavor===tU.$GR.StyleGuide,c=`${s?"Style Guide":"API"} Project`;return ty.createElement(tg.Box,{h:"full",pt:4,px:2},o&&n?ty.createElement(tg.VStack,{spacing:6,align:"stretch",w:"full",divider:!0,h:"full"},ty.createElement(ds,{px:2.5,title:c,project:n,name:n.name,description:n.description,iconName:n.presentation.icon,iconColor:n.presentation.color,defaultBranch:n?.default_branch?.slug}),r?ty.createElement(dQ,{project:n}):null,ty.createElement(tg.Flex,{pos:"relative",overflowY:"auto",h:"full"},ty.createElement(tg.VStack,{spacing:6,align:"stretch",w:"full",divider:!0,pos:"absolute"},s?ty.createElement(dO,{px:2.5,updatedAt:n.updated_at}):n.default_branch&&ty.createElement(dL,{px:2.5,projectId:n.id,branch:l,onBranchChange:e=>i(e)})))):ty.createElement(tx.LoadingIndicator,null))};function dJ({id:e,...t}){let{jwt:a}=(0,tF.hD)(),{data:r,isFetched:n,error:o}=(0,tN.useGetProject)(a,{projectId:(0,t8.safelyDecodeID)(e)}),{canI:l,canIOnProject:i}=(0,tF.C$)(),{setIsOpen:s}=(0,tF.nc)();if(!n)return ty.createElement(tx.LoadingIndicator,null);if(!r){if(!o)return null;{let e=404===o.code?"Project Not Found":o.message;return ty.createElement(rd.m,{title:e})}}let c=[{panel:ty.createElement(dK,{projectId:e}),title:"Overview",visible:!0},{panel:ty.createElement(dF,{projectId:e}),title:"Members",visible:i(r.my_permissions,tU.Jg8.ProjectMembersAdd)&&l(tU.E4M.WorkspaceFullMember)}];return ty.createElement(u4,{tabs:c,dismissPanel:()=>s(!1),...t})}var dY=a(67114);function dX(e){return(0,th.isError)(e)?e.message:String(e)}let dZ=({hasPublicProjects:e})=>{let{setValue:t,register:a}=(0,t5.xW)();a("groupId",{required:!0,validate:e=>""!==e});let{state:r}=(0,tB.U8)(),n=r.workspaces.currentWorkspace.id,[o,l]=ty.useState();t("groupId",o,{shouldDirty:!1,shouldValidate:!0});let{data:i}=(0,tN.useGetGroup)(r.auth.jwt,o),s=e&&i?.visibility==="internal";return ty.createElement(tg.Box,null,ty.createElement(rr,{htmlFor:"group"},"Select a group from the dropdown to move selected projects to"),ty.createElement(sv,{location:"project_bulk_move_form",workspaceId:n,defaultValue:o,isClearable:!1,includeCreateGroupOpt:!1,onChange:e=>{l(e),t("groupId",o,{shouldDirty:!0,shouldValidate:!0})}}),s&&ty.createElement(aa,{name:"group",messageColor:"warning",errors:{group:{message:"The target group is internal. Moving projects here will change them from public to internal, possibly limiting the visibility for some users."}}}))},d0=({project:e})=>{let{setValue:t,register:a}=(0,t5.xW)();a("groupId",{required:!0,validate:e=>""!==e});let{jwt:r}=(0,tF.hD)(),{currentWorkspace:n}=(0,tF.C$)(),o=n.id,l=e.group?.id||void 0,[i,s]=ty.useState(l);t("groupId",i,{shouldDirty:!1,shouldValidate:!0});let{data:c}=(0,tN.useGetGroup)(r,i),u=c?.visibility==="internal"&&e.visibility===tU.Tgv.Public;return ty.createElement(tg.Box,null,ty.createElement(rr,{htmlFor:"group"},"Select a group name from the dropdown to move project"),ty.createElement(sv,{location:"project_move_form",workspaceId:o,defaultValue:i,isClearable:!1,includeCreateGroupOpt:!1,onChange:e=>{s(e),t("groupId",i,{shouldDirty:!0,shouldValidate:!0})}}),u&&ty.createElement(aa,{name:"group",messageColor:"warning",errors:{group:{message:"The target group is internal. Moving this project will change it from public to internal and will limit the visibility for some users."}}}))},d1=()=>{let{state:e}=(0,tB.U8)(),[t,a]=ty.useState([]),[r,n]=ty.useState(!1),o=(0,tN.useDeleteProject)(e.auth.jwt);return[{data:t,isLoading:r},ty.useCallback(async e=>{let t=e.map(e=>o.mutateAsync({projectId:(0,t8.safelyDecodeID)(e)}).then(()=>((0,nz.eh)((0,t8.safelyDecodeID)(e)),{success:!0})).catch(e=>({success:!1,message:e.message||e.toString()})));return n(!0),await Promise.all(t).then(e=>e.reduce((e,t)=>(e.push(t),e),[])).then(e=>(a(e),e)).finally(()=>n(!1))},[o])]},d2=()=>{let{effects:e,state:t}=(0,tB.U8)(),[a,r]=ty.useState([]),[n,o]=ty.useState(!1),l=(0,tN.useUpdateProjectGroup)(t.auth.jwt);return[{data:a,isLoading:n},ty.useCallback(async(t,a)=>{let n=async e=>{try{await l.mutateAsync({projectId:(0,t8.safelyDecodeID)(e),groupId:a})}catch(e){return{success:!1,message:e?.response?.data?.message||e.message}}return{success:!0}},i=t.map(e=>n(e));return e.reporter.log({event:"bulk_move_projects",payload:{count:t.length}}),o(!0),await Promise.all(i).then(e=>e.reduce((e,t)=>(e.push(t),e),[])).then(e=>(r(e),e)).finally(()=>o(!1))},[e.reporter,l])]},d4=({isPinned:e,onChange:t,isProjectAction:a})=>ty.createElement(tg.Button,{className:`pin-project-btn ${a&&"project-action-pin"}`,role:"button",appearance:"minimal",onClick:a=>{a.preventDefault(),t(!e)}},ty.createElement(tg.Icon,{icon:[e?"fas":a?"fal":"far","thumbtack"]}));var d3=a(15758);let d5=({column:{preFilteredRows:e,id:t},data:a,label:r,defaultFilterOptions:n,defaultFilterValue:o})=>{let{getFilterValue:l,setFilter:i}=(0,tx.useTableContext)(),s=ty.useCallback(()=>{let a=[];return e.forEach(e=>{"project"===e.original.itemType&&a.push(e),e.subRows.length&&a.push(...e.subRows)}),(0,th.chain)(a).groupBy(e=>e.values[t]).map((e,t)=>({value:t,count:e.length})).value()},[e,t]),c=ty.useMemo(()=>{let e=n.reduce((e,t)=>(e[String(t)]=0,e),{});return s().forEach(t=>{e[t.value]=t.count}),(0,th.map)(e,(e,t)=>({value:t,label:(0,th.capitalize)(t),meta:e}))},[s,n]);ty.useMemo(()=>{o&&i({id:t,value:"all"!==o&&o})},[a]);let u=c.reduce((e,t)=>e+t.meta,0);return ty.createElement(tg.Select,{"aria-label":r,value:l(t)||"all",onChange:e=>{i({id:t,value:e})},triggerTextPrefix:`${r}: `,options:[{options:[{label:"All",value:"all",meta:u}]},{options:c}]})},d8=(e,t,a)=>{let r=a.trim().toLowerCase(),n=e=>"project"===e.original.itemType?-1!==e.original.name.toLowerCase().indexOf(r):!!("group"===e.original.itemType&&e.subRows.length&&e.subRows.find(n))&&(e.toggleRowExpanded&&e.toggleRowExpanded(!0),!0);return e.filter(n).map(e=>({...e,subRows:e.subRows}))};d8.autoRemove=e=>""===e;let d6=(e,t,a)=>{let r=e=>"project"===e.original.itemType?t.some(t=>e.values[t]==a):!!("group"===e.original.itemType&&e.subRows.length&&e.subRows.find(r))&&(e.toggleRowExpanded&&e.toggleRowExpanded(!0),!0);return e.filter(r).map(e=>({...e,subRows:e.subRows}))};d6.autoRemove=e=>"all"===e;let d7=({nodes:e})=>{let t=e?.map(e=>ty.createElement(tg.Box,{w:"full",key:e?.key},ty.createElement(tg.Box,null,ty.createElement(tg.Icon,{icon:["fas",e?.presentation.icon],style:{color:`${e?.presentation.color}`}}),ty.createElement(tg.Text,{pl:1},e?.key,": ",e?.value))));return ty.createElement(tg.VStack,{spacing:1,px:1},t)},d9=({row:{original:e}})=>{let{effects:t}=(0,tB.U8)(),{canIOnProject:a}=(0,tF.C$)(),r=(0,d3.u)(),[n,o]=ty.useState(e.pinned),l=a(e.my_permissions,tU.Jg8.ProjectContentsUpdate),i=e.slug,s="cli"===e.type,c=l?ty.createElement(tk.Link,{to:`/studio/${i}`,style:{marginRight:"16px"}},ty.createElement(tg.Icon,{icon:["fal","pencil-ruler"]})):ty.createElement("a",null,ty.createElement(tg.Icon,{className:"studio-edit-disabled",icon:["fal","pencil-ruler"],style:{marginRight:"16px"}}));return ty.createElement(tg.HStack,{justifyContent:"end"},!s&&ty.createElement(tg.Tooltip,{placement:"top",renderTrigger:c},ty.createElement(tg.Box,null,l?"Edit in Studio":"No edit access. Contact project owner.")),ty.createElement(tg.Tooltip,{placement:"top",renderTrigger:ty.createElement(tk.Link,{to:`/docs/${i}`,style:{marginRight:"16px"}},ty.createElement(tg.Icon,{icon:["fal","book"]}))},ty.createElement(tg.Box,null,"Go to docs")),ty.createElement(tg.Tooltip,{placement:"top",renderTrigger:ty.createElement(d4,{isPinned:n,onChange:()=>{t.reporter.log({event:n?"project_unpinned_from_sidebar":"project_pinned_to_sidebar"}),r(e.id,!n).then(()=>o(!n))},isProjectAction:!0})},ty.createElement(tg.Box,null,n?"Unpin project from sidebar":"Pin project to sidebar")))},me=[{id:"name",Header:"Name",accessor:"name",Cell:({row:e,value:t})=>{if("group"===e.original.itemType){let a=e.subRows.length||0;return ty.createElement(tg.Flex,{align:"center",textOverflow:"truncate","data-test":`projects-table-${e.original.itemType}-${e.original.id}`},ty.createElement(tg.Icon,{icon:["fas","folder"],style:{color:"var(--color-text-light)"}}),ty.createElement(tg.Box,{flex:1,ml:2,textOverflow:"truncate"},`${t} (${a})`))}return ty.createElement(tg.Flex,{align:"center",textOverflow:"truncate",pl:e.depth?7:0,"data-test":`projects-table-${e.original.itemType}-${e.original.id}`},ty.createElement(tg.Avatar,rC({name:e.original.name,presentation:{icon:e.original.presentation?.icon,icon_color:e.original.presentation?.color}})),ty.createElement(tg.Box,{flex:1,ml:2,textOverflow:"truncate"},t))},Filter:tx.TableSearchFilter,sortType:"SL_AlphSort",filter:d8,width:100},{id:"owner",Header:"Owner",accessor:"projectOwnerName",Cell:({row:e})=>e.original.itemType===n.Project&&e.original.owner?ty.createElement(tg.Tooltip,{placement:"top",renderTrigger:ty.createElement(tg.Avatar,{...rC(e.original.owner),noTitleAlt:!0})},ty.createElement(tg.Box,null,e.original.owner.display_name)):null,disableFilters:!0,width:30},{id:"nodesTotal",Header:"Nodes",accessor:"nodesTotal",Cell:({row:{original:e},value:t})=>e.itemType!==n.Project?null:e?.nodes?.length&&ty.createElement(tg.Tooltip,{placement:"left",renderTrigger:ty.createElement(tg.Text,null,t)},ty.createElement(d7,{nodes:e.nodes})),disableFilters:!0,centerContent:!0,width:40},{id:"type",Header:"Type",accessor:"flavor",Cell:({row:{original:e}})=>e.itemType!==n.Project?null:ty.createElement(tg.Box,null,mt[e.flavor]||mt.design),disableFilters:!0,width:50},{id:"updatedAt",Header:"Last Edit",accessor:"updated_at",Cell:({value:e})=>e?ty.createElement(cm.f,{date:e}):null,disableFilters:!0,width:50},{id:"visibility",Header:"Visibility",accessor:"visibility",Filter:e=>ty.createElement(d5,{...e,label:"Visibility",defaultFilterOptions:["public","internal","private"]}),Cell:({row:{original:e}})=>ty.createElement(tg.Text,{textTransform:"capitalize"},e.visibility),filter:d6,filterOrder:1,width:40},{id:"projectPin",Header:"Actions",accessor:"id",Cell:e=>e.row.original.itemType===n.Project?d9({...e}):null,disableFilters:!0,centerContent:!1,width:100,maxWidth:100}],mt={[tU.$GR.Design]:"API",[tU.$GR.StyleGuide]:"Style Guide",[tU.$GR.DesignLibrary]:"Component Library"},ma=(0,ak.aZ)(function({workspace:e}){let{canI:t}=(0,tF.C$)(),{hasFeature:a}=(0,tF._m)(),{jwt:r}=(0,tF.hD)(),{setIsOpen:o,setWorkspaceItem:l}=(0,tF.nc)(),{id:i,itemType:s,isOpen:c}=(0,tF.v7)(),{effects:u,actions:d}=(0,tB.U8)(),[,m]=d1(),[,p]=d2(),{openFormDialog:g}=(0,tx.useFormDialog)(),{openDialog:h,closeDialog:f}=(0,tx.useDialog)(),{getScrollToRowId:b}=lx(),y=b(lj.sJ.projectsTable),w={...y&&{scrollTo:y}},{data:E,refetch:v,isFetched:k}=(0,tN.useGetWorkspaceItems)(r,e.id),_=ty.useMemo(()=>E?lC(E.items):[],[E]),x=function({refresh:e}){let{canIOnProject:t,canIOnGroup:a}=(0,tF.C$)(),{jwt:r}=(0,tF.hD)(),o=(0,tN.useUpdateProjectGroup)(r),{hasFeature:l}=(0,tF._m)(),{openFormDialog:i}=(0,tx.useFormDialog)(),{effects:s,actions:c}=(0,tB.U8)(),u=ty.useCallback(async({projectId:t,groupId:a})=>{try{await o.mutateAsync({projectId:t,groupId:a||null})}catch(t){let e=dX(t);s.notifications.danger({message:`Error moving project: ${e}`});return}s.reporter.log({event:"group_move_project"}),e(),c.projects.touchQueries(),s.notifications.success({message:"Successfully moved the project!"})},[c.projects,s.notifications,s.reporter,e,o]);return ty.useMemo(()=>l(tU.BAf.Groups)?[{text:"Move Project",onClick:({original:e})=>{e.itemType===n.Project&&i(()=>d0({project:e}),{title:"Move Project",saveButtonText:"Move",onSave:({groupId:t})=>u({projectId:(0,t8.safelyDecodeID)(e.id),groupId:t})})},showFn:({original:e})=>e.itemType===n.Project},{text:"Remove From Group",onClick:async({original:t})=>{if(t.itemType===n.Project){try{await o.mutateAsync({groupId:null,projectId:(0,t8.safelyDecodeID)(t.id)})}catch(t){let e=dX(t);s.notifications.danger({message:`Error removing project from the group: ${e}`});return}s.reporter.log({event:"group_remove_project"}),e(),c.projects.touchQueries(),s.notifications.success({message:`Removed the ${t.name} project from the ${t.group?.name} group!`})}},showFn:({original:e})=>{if(e.itemType!==n.Project)return!1;let r=t(e.my_permissions,tU.Jg8.ProjectGroupUpdate),o=!!e&&a(e,tU.Jd3.GroupProjectsRemove);return null!=e.group_id&&(r||o)}}]:[],[c.projects,a,t,s.notifications,s.reporter,u,l,i,e,o])}({refresh:v}),I=function({refresh:e}){let{effects:t}=(0,tB.U8)(),{canIOnProject:a}=(0,tF.C$)(),r=(0,dY.e)(),{openFormDialog:n}=(0,tx.useFormDialog)(),{setIsOpen:o}=(0,tF.nc)();return ty.useMemo(()=>[{text:"Delete From Workspace",onClick:({original:a})=>{let l=ty.createElement("div",null,"Are you sure you want to remove this project from Stoplight? All of the project data stored in this workspace will be ",ty.createElement("strong",null,"removed permanently"),". However, the original Git repo will not be modified.");n(()=>ty.createElement(cf,{confirmExpectedValue:a.slug,warningText:l}),{title:"Delete Project?",saveButtonText:"Delete",onSave:async()=>{let n=await r(a.id);if(!n.success){t.notifications.danger({message:'Error deleting project "'+a.slug+'": '+n.message});return}o(!1),t.notifications.success({message:'Your project "'+a.slug+'" was removed.'}),e()}})},showFn:({original:e})=>!!e.my_permissions&&a(e.my_permissions,tU.Jg8.ProjectDelete),icon:["fas","trash"]}],[a,r,t.notifications,n,e,o])}({refresh:v}),S=[{text:"Move",icon:["fas","folder"],showFn:()=>a(tU.BAf.Groups)&&t(tU.E4M.WorkspaceGlobalAdmin),onClick:async e=>{let t=Object.keys(e.state.selectedRowIds),a=t.map(e=>e.split("project-")[1]),r=!!e.flatRows.filter(e=>-1!==t.findIndex(t=>t===e.id)).find(e=>e.original?.visibility===tU.Tgv.Public);g(()=>dZ({hasPublicProjects:r}),{title:"Move",saveButtonText:"Move",onSave:async({groupId:e})=>{if(e){let t=await p(a,e);v(),d.projects.touchQueries();let r=t.filter(e=>e.success).length,n=a.length-r;n?u.notifications.warning({message:`${r} ${tV()("project",r)} were successfully moved. However, ${n} projects encountered errors and could not be moved.`}):u.notifications.success({message:`All ${r} ${tV()("project",r)} successfully moved.`})}}})}},{text:"Delete",icon:["fas","trash"],showFn:()=>t(tU.E4M.WorkspaceGlobalAdmin),onClick:async e=>{let t=Object.keys(e.state.selectedRowIds).map(e=>e.split("project-")[1]);h({title:"Bulk Delete Projects",intent:"danger",message:"Are you sure you wish to delete the selected projects from the workspace?",confirmText:"Delete",onConfirm:async()=>{let e=await m(t);v(),d.projects.touchQueries(),f();let a=e.filter(e=>e.success).length,r=t.length-a;r?u.notifications.warning({message:`${a} ${tV()("project",a)} ${1===a?"was":"were"} successfully deleted. However ${r} ${tV()("project",r)} encountered errors and could not be deleted.`}):(o(!1),u.notifications.success({message:`${a} ${tV()("project",a)} successfully deleted from workspace`}))}})}}];return ty.createElement(s5,null,ty.createElement(tx.Table,{row:{rowActions:[x,I],canExpandFn:e=>e&&"group"===e.original.itemType&&!!e.subRows.length,canSelectFn:(e,t)=>e?.original.itemType==="project"&&t.length>0,onRowClick:e=>{if(!e||c&&e.id===`${s}-${i}`){o(!1);return}e.toggleRowExpanded&&e.toggleRowExpanded(!0),l({itemType:e.original.itemType,id:e.original.id}),o(!0)}},columns:me,data:_,isLoading:!k,initialState:{sortBy:[{id:"name",asc:!0}]},bulkSelectActions:S,stateReducer:(e,t)=>{if(["setFilter"].includes(t.type)&&""===t.filterValue)return{...e,expanded:{}};if(["resetSelectedRows","toggleAllRowsSelected","toggleRowSelected","toggleAllPageRowsSelected"].includes(t.type)){let t={};for(let[a]of Object.entries(e.selectedRowIds))a.startsWith("project")&&(t[a]=!0);return{...e,selectedRowIds:t}}return e},getRowId:mr,autoResetExpanded:!1,isRowPanelOpen:e=>c&&`${s}-${i}`===e.id,...w}))});function mr({itemType:e,id:t}){return`${e}-${t}`}let mn=(0,ak.ss)(function(){(0,u2.c)({event:"workspace_projects_viewed_from_daily_digest"},"daily_summary"),(0,a6.e)("projects");let{isOpen:e,itemType:t,id:a}=(0,tF.v7)();return ty.createElement(tg.Flex,{as:"main",h:"full"},ty.createElement(tg.Box,{flexGrow:!0},ty.createElement(ma,null)),e&&ty.createElement(tg.Flex,{className:"sl-details-panel","data-test":"detail-panel"},t===n.Project?ty.createElement(dJ,{id:a}):ty.createElement(dT,{id:a})))});var mo=a(9072),ml=a(25940);function mi(e){return e.startsWith("/")?e:`/${e}`}function ms(e){return e.length>1&&e.endsWith("/")?e.slice(0,-1):e}let mc=()=>{let{register:e}=(0,t5.xW)();return ty.createElement(lp,{autoFocus:!0,label:"Google Tag Manager",placeholder:"GTM_XXXXXX",helperText:"Includes Google Tag Manager when your workspace is loaded from your custom domain",...e("googleTagManager",{required:!1})})},mu=()=>{let{register:e}=(0,t5.xW)();return ty.createElement(lp,{autoFocus:!0,label:"Localize Project Key",helperText:"Includes the Localize snippet when your workspace is loaded from your custom domain",placeholder:"xxx",...e("localizejs",{required:!1})})};var md=a(1448);let mm=()=>{let{control:e}=(0,t5.xW)(),{state:t}=(0,tB.U8)();return ty.createElement(t5.xI,{render:({field:{onChange:e,value:t}})=>ty.createElement(tg.Box,{style:{maxHeight:"50vh"},overflowY:"auto"},ty.createElement(md.CodeEditor,{style:{minHeight:300},language:"bash",onChange:e,value:t??"",placeholder:`# Simple redirect
/old/path /docs/my-project/path

# Wildcard redirect to exact path
/old/* /docs/my-project

# Wildcard redirect to path with wildcard
/old/* /docs/my-project/*
`})),name:"redirects",control:e,defaultValue:t.workspaces.currentWorkspace?.redirects||""})},mp=()=>{let{register:e}=(0,t5.xW)(),{stableHttpHost:t}=(0,tF.n5)(),a=null,r=t.match(/^https:\/\/x-(\d+).stoplight-dev.com$/)?.[1];return r?a=ty.createElement(tg.Text,null,"The only custom domain value that will work for this PR environment is"," ",ty.createElement("b",null,"x-",r,".sfs.stoplight-local.com"),". You may only set this value on ONE workspace at a time for this PR environment."):t.includes("stoplight-local.com")&&(a=ty.createElement(tg.Text,null,"Custom domains do not work in local environments. Do not set a domain value.")),ty.createElement(tg.Box,null,a&&ty.createElement(tg.Callout,{"data-test":"custom-domain-env-callout",intent:"danger",appearance:"outline",mb:4},a),ty.createElement(lp,{autoFocus:!0,label:"Your domain",placeholder:"example.com",...e("domain",{required:!1})}),ty.createElement(tg.Text,{size:"sm",color:"muted"},"To enable your domain, please add a CNAME DNS record on your domain that points to ingress.stoplight.io"))},mg=()=>{let{success:e,danger:t}=(0,tF.AO)(),{error:a}=(0,tF.u6)(),{log:r}=(0,tF.pw)(),{jwt:n}=(0,tF.hD)(),{currentWorkspace:o}=(0,tF.C$)(),{refreshCurrentWorkspace:l}=(0,tF.iS)(),{isLoading:i}=(0,tN.useUpdateWorkspace)(n),s=(0,tN.useCreateCustomDomain)(n),c=(0,tN.useUpdateCustomDomain)(n),u=ty.useCallback((e,r)=>{t({message:"Something went wrong setting the domain, please try again."}),a({error:e,event:r})},[t,a]);return{fetching:i,executeMutation:ty.useCallback(async({workspaceId:t,domain:a,slug:n})=>{if(a){let i=!!o?.domain,d=i?c:s;try{await d.mutateAsync({workspace_id:(0,t8.encodeID)("wk",t),domain_name:a}),e({message:"Your domain has been updated!"}),r({event:"workspace_domain_updated",payload:{slug:n,domain:a||void 0}}),await l(t)}catch(e){return u(e,i?"workspace_domain_updated":"workspace_domain_created"),null}}},[o?.domain,c,s,e,r,l,u])}},mh=({workspace:e})=>ty.createElement(db,{title:"Custom Domain",callout:"The below settings are only applied when loading from your custom domain."},ty.createElement(mf,{workspace:e}),ty.createElement(mb,{workspace:e}),ty.createElement(mw,{workspace:e}),ty.createElement(mE,{workspace:e}),ty.createElement(my,{workspace:e}),ty.createElement(mv,{workspace:e})),mf=({workspace:e})=>{let{canI:t}=(0,tF.C$)(),{hasFeature:a}=(0,tF._m)(),{jwt:r}=(0,tF.hD)(),{danger:n,success:o}=(0,tF.AO)(),{error:l}=(0,tF.u6)(),{log:i}=(0,tF.pw)(),{refreshCurrentWorkspace:s}=(0,tF.iS)(),{isMultiTenant:c}=(0,tF.y1)(),{executeMutation:u}=mg(),d=(0,tN.useDeleteCustomDomain)(r),m=t(tU.E4M.WorkspaceSettingsCreateUpdateDelete),p=(0,t_.useClient)(),g=ty.useMemo(()=>ml.Yj().trim().matches(/^(([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9\-]*[a-zA-Z0-9])\.)*([A-Za-z0-9]|[A-Za-z0-9][A-Za-z0-9\-]*[A-Za-z0-9])$/,{excludeEmptyString:!1,message:"Must be a valid domain name"}).lowercase().test("duplicate-domain","A workspace with the same domain already exists.",async t=>{if(!t)return!0;let{data:a,error:r}=await p.query(tU.PIk,{domain:t}).toPromise();if(r)throw r;return!(a&&a.workspaces.length>0&&a.workspaces[0].id!==e.id)}).notOneOf(["settings"],"The domain '${value}' is reserved for internal use."),[p,e.id]),h=ty.useMemo(()=>ml.Ik().shape({domain:g}),[g]),{openFormDialog:f}=(0,tx.useFormDialog)({resolver:(0,mo.t)(h)}),b=a(tU.BAf.CustomDomain),y={confirmRemove:!0,onRemove:async()=>{try{await d.mutateAsync({workspace_id:(0,t8.encodeID)("wk",e.id)}),o({message:"Your domain has been deleted!"}),await s(e.id),i({event:"workspace_domain_deleted",payload:{slug:e.slug}})}catch(e){n({message:"Something went wrong deleting your custom domain, please try again."}),l({error:e,event:"workspace_domain_deleted"})}},removeButtonDisabled:!e?.domain,removeButtonText:"Delete Custom Domain",confirmRemoveButtonText:"Yes, Delete",confirmRemoveText:"Are you sure you want to delete your custom domain?"},w=ty.createElement(tg.Tooltip,{"data-test":"on-prem-disabled-tooltip",renderTrigger:ty.createElement(tg.Badge,{"data-test":"on-prem-disabled-badge",intent:"danger",appearance:"outline",size:"sm"},"Disabled")},"This setting is not available in on premise environments");return ty.createElement(dm,{type:"dialog",label:"Domain",hint:"The domain that your workspace is accessible at. The default value of canonical URL",isDisabled:!m||!c,value:c?e?.domain||"":w,featureBadge:b?void 0:tU.BAf.CustomDomain,testId:"domain",onClick:()=>f(mp,{title:"Custom Domain",docsUrl:ab.xz[tU.BAf.CustomDomain],defaultValues:{domain:e.domain},onSave:({domain:t})=>u({workspaceId:e.id,domain:t,slug:e.slug}),...y})})},mb=({workspace:e})=>{let{openFormDialog:t}=(0,tx.useFormDialog)(),{executeMutation:a}=c8({onSuccessMessage:"Analytics settings updated"}),{state:r}=(0,tB.U8)(),n=r.workspaces.canI(tU.E4M.WorkspaceSettingsCreateUpdateDelete),o=r.features.hasFeature(tU.BAf.GoogleTagManager);return ty.createElement(dm,{type:"dialog",label:"Analytics",hint:"Enable Google Tag Manager to manage integrations",isDisabled:!n,value:e.googleTagManager||"",featureBadge:o?void 0:tU.BAf.GoogleTagManager,onClick:()=>t(mc,{title:"Analytics",docsUrl:ab.xz[tU.BAf.GoogleTagManager],defaultValues:{googleTagManager:e.googleTagManager},onSave:({googleTagManager:t})=>a({workspace_id:e.id,google_tag_manager:t})})})},my=({workspace:e})=>{let{openFormDialog:t}=(0,tx.useFormDialog)(),{executeMutation:a}=c8({onSuccessMessage:"Localize settings updated"}),{state:r}=(0,tB.U8)(),n=r.workspaces.canI(tU.E4M.WorkspaceSettingsCreateUpdateDelete),o=r.features.hasFeature(tU.BAf.Localizejs);return ty.createElement(dm,{type:"dialog",label:"Localize",hint:"Integrate with the Localize translation platform",isDisabled:!n,value:e.localizejs||"",featureBadge:o?void 0:tU.BAf.Localizejs,onClick:()=>t(mu,{title:"Localize",docsUrl:ab.xz[tU.BAf.Localizejs],defaultValues:{localizejs:e.localizejs},onSave:({localizejs:t})=>a({workspace_id:e.id,localize_js:t})})})},mw=({workspace:e})=>{let{openFormDialog:t}=(0,tx.useFormDialog)(),{executeMutation:a}=c8({onSuccessMessage:"Redirects updated"}),{state:r}=(0,tB.U8)(),n=r.workspaces.canI(tU.E4M.WorkspaceSettingsCreateUpdateDelete),o=r.features.hasFeature(tU.BAf.Redirects),l=Object.keys(function(e){let t={};for(let a of e.split("\n")){let e=a.trim();if(!e||e.startsWith("#"))continue;let[r,n,o]=e.split(/\s+/);if(r&&n){let e=ms(mi(r));if(t[e])continue;let a=parseInt(o,10);t[e]={to:ms(mi(n)),status:[301,302].includes(a)?a:301}}}return t}(e.redirects||"")).length;return ty.createElement(dm,{type:"dialog",label:"Redirects",hint:"Configure redirects for your custom domain",isDisabled:!n,value:`${l} redirects`,featureBadge:o?void 0:tU.BAf.Redirects,onClick:()=>t(mm,{title:"Redirects",docsUrl:ab.xz[tU.BAf.Redirects],defaultValues:{redirects:e.redirects},size:"lg",onSave:({redirects:t})=>a({workspace_id:e.id,redirects:t})})})},mE=({workspace:e})=>{let{state:t,actions:a}=(0,tB.U8)(),[r,n]=ty.useState(e.hideSignIn),o=t.workspaces.canI(tU.E4M.WorkspaceSettingsCreateUpdateDelete),{executeMutation:l}=c8({onSuccessMessage:"Hide Sign in updated"}),i=t.features.hasFeature(tU.BAf.CustomDomain),s=async t=>{if(!i)return a.ui.showFeatureDialog(tU.BAf.CustomDomain);let o=await l({workspace_id:e.id,hide_sign_in_button:t});return n(!o.error&&!r),o};return ty.createElement(dm,{type:"switch",label:"Hide Sign In Button",hint:"Allow visitors to authenticate to view non-public projects",featureBadge:i?void 0:tU.BAf.CustomDomain,isDisabled:!o,testId:"hide-sign-in-button",isSelected:r,onClick:s,switchLabel:"Hide Sign In Button"})},mv=({workspace:e})=>{let{state:t,actions:a}=(0,tB.U8)(),[r,n]=ty.useState(e.disableCookieTracking),o=t.workspaces.canI(tU.E4M.WorkspaceSettingsCreateUpdateDelete),{executeMutation:l}=c8({onSuccessMessage:"Disable Cookie Tracking updated"}),i=t.features.hasFeature(tU.BAf.CustomDomain),s=async t=>{if(!i)return a.ui.showFeatureDialog(tU.BAf.CustomDomain);let o=await l({workspace_id:e.id,disable_cookie_tracking:t});return n(!o.error&&!r),o};return t.flags.isFlagEnabled("disable_cookie_tracking")?ty.createElement(dm,{type:"switch",label:"Disable Cookie Tracking",hint:"Disable cookie tracking for users",featureBadge:i?void 0:tU.BAf.CustomDomain,isDisabled:!o,testId:"disable-cookie-tracking-button",isSelected:r,onClick:s,switchLabel:"Enable Cookie Tracking"}):null},mk=({workspace:e})=>{let{state:t}=(0,tB.U8)();return t.workspaces.iHaveRole(tU.l2p.Owner)?ty.createElement(db,{title:"Danger Zone",isDangerZone:!0},ty.createElement(m_,{workspace:e})):null},m_=({workspace:e})=>{let{state:t,effects:a}=(0,tB.U8)(),{openFormDialog:r,closeFormDialog:n}=(0,tx.useFormDialog)(),{mutate:o}=(0,tN.useDeleteWorkspace)(t.auth.jwt),{data:l}=(0,tN.useGetWorkspaceState)(t.auth.jwt,{workspaceId:e.id},{notifyOnChangeProps:["data"]}),i=!!l?.delete_at,s=t.billing.currentProduct?.id||1,c=t.billing.currentBillingAccount?.stripe_customer_id,u=s>1&&!!c,{data:d}=(0,tN.useGetBillingAccount)(t.auth.jwt,{workspace_id:t.workspaces.currentWorkspaceId},{enabled:u}),m=!!(d?.billing_pricing_plan_id&&d?.stripe_cancel_at_period_end),p=u&&!m;return ty.createElement(dm,{type:"dialog",label:"Remove Workspace",hint:"Removing a workspace deletes all of the workspace data stored in Stoplight",isDisabled:i,onClick:()=>r(mx,{title:"Remove Workspace",saveButtonText:"Remove",intent:"danger",isDisabled:p,props:{workspaceName:e.name,cancelRequired:p,closeFormDialog:n},onSave:async()=>{o({workspaceId:e.id},{onSuccess(){a.notifications.success({message:"Your workspace will be deleted soon"})},onError(e){a.notifications.danger({message:e.message||"An unknown error occurred"})}})}})})};function mx({workspaceName:e,cancelRequired:t,closeFormDialog:a}){let{register:r}=(0,t5.xW)();return ty.createElement(tg.VStack,{spacing:3},ty.createElement(tg.Box,{color:"muted"},"Removing a workspace deletes all of the workspace data stored in Stoplight."),t?ty.createElement(tg.Callout,{intent:"danger"},ty.createElement(tg.Box,null,"Please"," ",ty.createElement(tg.Box,{as:tk.Link,color:"link",to:"/admin/billing/plans",onClick:a},"cancel your subscription")," ","before removing your workspace")):ty.createElement(tg.Callout,{intent:"danger"},ty.createElement(tg.Box,null,ty.createElement(tg.Text,{fontWeight:"bold"},"Warning:")," This action is not reversible. Please be certain.")),ty.createElement(lp,{label:"Workspace Name",placeholder:e,...r("workspace",{required:!0,minLength:e.length,maxLength:e.length,validate:t=>t===e,disabled:t})}))}let mI=({globalSetting:e,propertyToUpdate:t,workspaceId:a,testId:r,label:n,hint:o,switchLabel:l,isSettingEnabled:i,feature:s,featureBadge:c})=>{let{hasFeature:u}=(0,tF._m)(),{showFeatureDialog:d}=(0,tF.L3)(),[m,p]=ty.useState(i),{executeMutation:g}=c8({onSuccessMessage:`${e} setting updated.`}),{canI:h}=(0,tF.C$)(),f=h(tU.E4M.WorkspaceSettingsCreateUpdateDelete),b=async()=>{if(s&&!u(s))return d(s);let e=await g({workspace_id:a,[c6[t]]:!m});return p(!m),e};return ty.createElement(dm,{type:"switch",label:n,hint:o,testId:`global-setting-${r}`,isDisabled:!f,isSelected:m,switchLabel:l,onClick:b,featureBadge:c})},mS=({workspace:e})=>{(0,a6.e)("settings");let t=ty.createElement("a",{className:"text-primary ml-2",href:"https://docs.stoplight.io/docs/platform/1ce578a7794e8-workspace-settings#docs-settings",target:"_blank",rel:"noreferrer"},"Learn more");return ty.createElement(db,{title:"Docs Settings"},ty.createElement(mI,{globalSetting:to.TryIt,workspaceId:e.id,isSettingEnabled:e.showTryit,propertyToUpdate:tl.ShowTryit,label:"Enable Try It",hint:ty.createElement(tg.Flex,null,ty.createElement("span",null,"If disabled, Try It will be hidden from API docs"),ty.createElement("span",null,t)),testId:"enable-tryit",switchLabel:"Toggle Enable Show Try It"}),ty.createElement(mI,{globalSetting:to.TryItMockServer,workspaceId:e.id,isSettingEnabled:e.showTryitMockServer,propertyToUpdate:tl.ShowTryitMockServer,label:"Show Mock Servers",hint:ty.createElement(tg.Flex,null,ty.createElement("span",null,"If disabled, mock servers will be hidden from published API docs"),ty.createElement("span",null,t)),testId:"enable-tryit-mock-server",switchLabel:"Toggle Enable Show Mock Servers in Try It"}),ty.createElement(mj,{workspace:e}))},mj=({workspace:e})=>{let{state:t}=(0,tB.U8)(),a=t.features.hasFeature(tU.BAf.CustomDomain);return ty.createElement(mI,{globalSetting:to.SearchIndexing,workspaceId:e.id,isSettingEnabled:e.allowSearchIndexing,propertyToUpdate:tl.AllowSearchIndexing,label:"Allow Search Engine Indexing",hint:"If disabled, noindex mode will be turned on in your site's meta tags",feature:tU.BAf.CustomDomain,featureBadge:a?void 0:tU.BAf.CustomDomain,testId:"allow-search-indexing",switchLabel:"Toggle Search Engine Indexing"})},mC=({handleOnRoleSelect:e,defaultValue:t})=>{let[a,r]=ty.useState(t||tU.l2p.Viewer);return ty.createElement(oY,{selectedRole:a,onRoleSelect:t=>{e(t),r(t)}})},mP=()=>{let{control:e,register:t,setValue:a,defaultValues:r,trigger:n}=(0,t5.xW)(),{fields:o,insert:l}=(0,t5.jz)({control:e,name:"domains"});return ty.useEffect(()=>{(0,th.forEach)(r?.domains,(e,t)=>{l(t,{domain:e.domain||"",roleName:e.roleName||tU.l2p.Viewer})})},[]),ty.createElement(tg.Box,null,o.map((r,o)=>ty.createElement(tg.HStack,{key:r.id,spacing:2,alignItems:"end"},ty.createElement(tg.Box,{flexGrow:!0},ty.createElement(lp,{...t(`domains.${o}.domain`,{required:!0,pattern:{value:tm.s3,message:"Must be a valid domain name"}}),autoFocus:!0,placeholder:"yourcompany.com",label:"Domain Url",defaultValue:r.domain,rightElement:ty.createElement(tg.Flex,{alignItems:"center"},ty.createElement(t5.xI,{render:()=>ty.createElement(mC,{handleOnRoleSelect:e=>{a(`domains.${o}.roleName`,e,{shouldDirty:!0}),n()},defaultValue:r.roleName}),defaultValue:r.roleName||tU.l2p.Viewer,name:`domains.${o}.roleName`,control:e}))})))))},mA=()=>{let{register:e}=(0,t5.xW)();return ty.createElement(lp,{label:"Display Name",autoFocus:!0,...e("name",{required:!0,minLength:2,maxLength:{value:20,message:"Must be no more than 20 Characters"}})})},mB=()=>{let{effects:e}=(0,tB.U8)(),[,t]=(0,tU.PnW)();return ty.useCallback(async a=>{let{error:r}=await t({workspaceDomainWhitelists:a});if(r){e.notifications.danger({message:`Error on adding domain to whitelist: ${r.message}`});return}e.notifications.success({message:"Domain Added"})},[e.notifications,t])},mD=()=>{let{effects:e}=(0,tB.U8)(),[,t]=(0,tU.nXo)();return ty.useCallback(async({id:a})=>{let{error:r}=await t({id:a});if(r){e.notifications.danger({message:"Error removing domain from whitelist"});return}e.notifications.success({message:"Domain Removed"})},[e.notifications,t])},mT=()=>{let{effects:e}=(0,tB.U8)(),[,t]=(0,tU.rWN)();return ty.useCallback(async({id:a,domain:r,roleName:n})=>{let o=await t({id:a,roleName:n,domain:r});if(o.error)return e.notifications.danger({message:`Error on updating domain whitelist: ${o.error.message}`}),o;e.notifications.success({message:"Domain Updated"})},[e.notifications,t])},mF=({workspace:e})=>{let{effects:t}=(0,tB.U8)(),[{data:a,fetching:r,error:n},o]=(0,tU.RCW)({variables:{workspaceId:e.id,limit:500}});return n&&t.notifications.danger({message:`Error getting approved workspace domains: ${n.message}`}),[{data:a?.workspaceDomainWhitelists,fetching:r,error:n},o]},m$=({workspace:e})=>{let{state:t}=(0,tB.U8)(),a=!t.workspaces.canI(tU.E4M.WorkspaceSettingsCreateUpdateDelete),r=(0,t8.encodeID)("wk",e.id);return ty.createElement(db,{title:"Workspace Settings",callout:a?"Heads up, you'll need administrative access to the workspace in order to change these settings.":void 0},ty.createElement(mN,{workspace:e}),ty.createElement(dm,{type:"copy",label:"Workspace Identifier",hint:"A unique identifier used with Elements",value:r}),ty.createElement(mM,{workspace:e}),ty.createElement(mR,{workspace:e}),ty.createElement(mU,{workspace:e}),ty.createElement(mW,{workspace:e}),ty.createElement(mL,{workspace:e}),ty.createElement(mG,{workspace:e}),ty.createElement(mO,{workspace:e}))},mN=({workspace:e})=>{let{state:t}=(0,tB.U8)(),{openFormDialog:a}=(0,tx.useFormDialog)(),{executeMutation:r}=c8({onSuccessMessage:"Workspace Name Updated"}),n=t.workspaces.canI(tU.E4M.WorkspaceSettingsCreateUpdateDelete);return ty.createElement(dm,{type:"dialog",label:"Display Name",hint:"The workspace name displayed on internal and external pages",value:e.name,isDisabled:!n,onClick:()=>a(mA,{title:"Workspace Settings",defaultValues:{name:e.name},onSave:({name:t})=>r({workspace_id:e.id,name:t})})})},mU=({workspace:e})=>{let{state:t,effects:a}=(0,tB.U8)(),r=t.workspaces.canI(tU.E4M.WorkspaceEmailDomainCreateUpdateDelete),{openFormDialog:n}=(0,tx.useFormDialog)({mode:"onChange"}),[{data:o,fetching:l},i]=mF({workspace:e}),s=mB(),c=mT(),u=mD(),d=t.features.hasFeature(tU.BAf.WhitelistedDomains),m=e=>{a.reporter.log({event:"approved_domain_open",payload:{}}),n(mP,{title:"Approved Domains",docsUrl:ab.xz[tU.BAf.WhitelistedDomains],defaultValues:{domains:[e||{}]},onSave:async({domains:t})=>{if(a.reporter.log({event:"approved_domain_confirm",payload:{}}),e&&e?.id)return await c({id:e.id,domain:t[0].domain,roleName:t[0].roleName}),i();await s(t),i()},...e&&{onRemove:async()=>{a.reporter.log({event:"approved_domain_remove",payload:{}}),await u({id:e.id}),i()}}})};return ty.createElement(dm,{type:"list",label:"Approved Email Domains",hint:"Users with a matching email domain can join without requiring a prior invite",isDisabled:!r,icon:{icon:"envelope"},onClick:()=>m(),featureBadge:d?void 0:tU.BAf.WhitelistedDomains,testId:"approved-domains",isLoadingItems:l,items:o?.sort((e,t)=>e.id-t.id).map(e=>({onClick:()=>m(e),isDisabled:!r,children:ty.createElement(tg.HStack,{spacing:4},ty.createElement(tg.Box,{fontSize:"lg"},e.domain),ty.createElement(tg.Badge,{appearance:"outline",size:"sm"},e.roleName))}))||[]})},mM=({workspace:e})=>ty.createElement(mI,{globalSetting:to.JoinRequests,workspaceId:e.id,isSettingEnabled:!e.joinRequestsDisabled,propertyToUpdate:tl.JoinRequestsDisabled,label:"Allow Join Requests",hint:"If disabled, all join requests will be denied and workspace membership will become invitation-only",testId:"allow-join-requests",switchLabel:"Toggle Join Requests"}),mR=({workspace:e})=>ty.createElement(mI,{globalSetting:to.GuestsReceiveDailyDigest,workspaceId:e.id,isSettingEnabled:e.guestsReceiveDailyDigest,propertyToUpdate:tl.GuestsReceiveDailyDigest,label:"Send Daily Digest to Guests",hint:"If enabled, guests are allowed to receive the workspace daily digest email",testId:"governance-guests-receive-daily-digest",switchLabel:"Toggle Guests Receive Daily Digest"}),mW=({workspace:e})=>ty.createElement(mI,{globalSetting:to.UseAutomaticSsgConversion,workspaceId:e.id,isSettingEnabled:e.useAutomaticSsgConversion,propertyToUpdate:tl.UseAutomaticSsgConversion,label:"Automatic Style Guide Conversion",hint:"If disabled, Spectral rulesets in newly added git projects and existing projects will not be converted",testId:"governance-ssg-conversion",switchLabel:"Toggle automatic Spectral to Style Guide conversion"}),mL=({workspace:e})=>ty.createElement(mI,{globalSetting:to.ShowUserway,workspaceId:e.id,isSettingEnabled:e.showUserway,propertyToUpdate:tl.ShowUserway,label:"Enable UserWay Accessibility Widget",hint:"If disabled, the UserWay accessibility widget will be disabled for all users in the workspace",testId:"governance-show-userway",switchLabel:"Toggle UserWay Widget"}),mG=({workspace:e})=>ty.createElement(mI,{globalSetting:to.AllowPublicProject,workspaceId:e.id,isSettingEnabled:e.allowPublicProjects,propertyToUpdate:tl.AllowPublicProject,label:"Allow Public Projects",hint:"If disabled, users won't be able to make projects public.",testId:"governance-public-projects",switchLabel:"Toggle Allow Public Projects"}),mO=({workspace:e})=>ty.createElement(mI,{globalSetting:to.AllowWebProjects,workspaceId:e.id,isSettingEnabled:e.allowWebProjects,propertyToUpdate:tl.AllowWebProjects,label:"Allow Web Projects",hint:"If disabled, users won't be able to make projects a web project.",testId:"governance-allow-web-projects",switchLabel:"Toggle Allow Web Projects"}),mz={name:"integration-config-name-input",hostUrl:"integration-config-host-url-input",apiUrl:"integration-config-api-url-input",clientId:"integration-config-client-id-input",clientSecret:"integration-config-client-secret-input",redirectUrl:"integration-config-redirect-url-input",defaultRepositoryVisibility:"integration-config-default-repository-visibility-select"},mq="**********",mV={[tU.KXp.AzureDevopsServer]:"Install to work with your Azure DevOps Server repositories",[tU.KXp.AzureDevopsServices]:"Install to work with your Azure DevOps Services repositories",[tU.KXp.BitbucketCloud]:"Install to work with your Bitbucket Cloud repositories",[tU.KXp.BitbucketDataCenter]:"Install to work with your Bitbucket Data Center repositories",[tU.KXp.Github]:"Install to work with your GitHub repositories",[tU.KXp.Gitlab]:"Install to work with your GitLab repositories",[tU.KXp.Ldap]:"Enable and configure LDAP SSO for your organization",[tU.KXp.Saml]:"Enable and configure SAML SSO for your organization"};function mH({installedIntegration:e,register:t,disabled:a,placeholder:r="https://example.com",label:n="Host URL",helperText:o}){return ty.createElement(lp,{...t("config.hostUrl",{required:!0}),label:n,id:mz.hostUrl,disabled:a,placeholder:r,defaultValue:e?e.config.hostUrl:"",helperText:o})}let mQ=ty.memo(({name:e,label:t,defaultSelected:a,...r})=>{let{control:n,formState:{isSubmitting:o},setValue:l,defaultValues:i={}}=(0,t5.xW)(),s=(0,th.get)(n,`defaultValuesRef.current.${e}`,i[e]);return void 0===s&&(s=!!a),ty.createElement(tg.HStack,{spacing:2},ty.createElement(t5.xI,{defaultValue:s,control:n,name:e,render:({field:t})=>ty.createElement(tg.Switch,{ref:t.ref,name:t.name,"data-test":`switch-field-${e}`,isSelected:t.value,onChange:e=>{l(t.name,e,{shouldDirty:!0})},readOnly:o,...r})}),t&&ty.createElement(rr,{htmlFor:e},t))}),mK=e=>[tU.KXp.AzureDevopsServer,tU.KXp.AzureDevopsServices,tU.KXp.BitbucketCloud,tU.KXp.BitbucketDataCenter,tU.KXp.Github,tU.KXp.Gitlab].includes(e),mJ=e=>e===tU.KXp.Ldap||e===tU.KXp.Saml,mY=()=>{let{effects:e}=(0,tB.U8)(),t=(0,t_.useClient)(),[a,r]=ty.useState(!1);return{fetching:a,executeMutation:ty.useCallback(async({kind:a,config:n,secrets:o,workspaceIntegrationId:l})=>{r(!0);let{error:i,data:s}=await t.query(tU.SZE,{kind:a,config:n,secrets:o,workspaceIntegrationId:l}).toPromise().finally(()=>r(!1));if(i)e.notifications.danger({message:"Something went wrong, please try again later."});else{let{testIntegrationConfig:{success:t,message:r}}=s;t?"bitbucket_data_center"===a&&(0,aK.sZ)(n)?e.notifications.success({message:"Host URL and API URL look good. Please ensure your Client ID and Client Secret are correct before saving."}):e.notifications.success({message:"Everything looks good!"}):e.notifications.danger({message:r})}},[t,e.notifications])}},mX=({workspaceIntegrations:e,installedIntegration:t,integration:a,children:r})=>{let{register:n,watch:o,getValues:l,formState:{isSubmitting:i}}=(0,t5.xW)(),{state:s}=(0,tB.U8)(),[{data:c}]=(0,tU.w9I)({variables:{workspaceId:s.workspaces.currentWorkspaceId}}),{fetching:u,executeMutation:d}=mY(),m=Object.keys(a.config).length>0,p=(c?.integrations||[]).reduce((e,t)=>e.concat(t.workspaceIntegrations),[]),g=t&&t.enabled&&t.allowUserLogin&&1===p.filter(e=>e.enabled&&e.allowUserLogin).length,h=a.kind!==tU.KXp.AzureDevopsServer&&mK(a.kind)&&!s.features.hasFeature(tU.BAf.CustomGitIntegration),f=mJ(a.kind)&&!s.features.hasFeature(tU.BAf.SamlLdapIntegration),b=o("configType",h||f||t&&0===Object.keys(t.config).length?"default":"custom")||"custom";return ty.createElement(tg.VStack,{spacing:6},ty.createElement(lp,{label:"Name",...n("name",{required:!0,validate:a=>!e.find(({id:e,name:r})=>e!==t?.id&&r===a)||"This name is associated with another integration. Please choose a different name."}),readOnly:i,name:"name",placeholder:a.name,id:mz.name,defaultValue:t?t.name:""}),ty.createElement(tg.HStack,{spacing:4},ty.createElement(mQ,{name:"enabled",isDisabled:g,label:"Enabled",defaultSelected:!0}),ty.createElement(tg.Box,null,ty.createElement(mQ,{name:"allowUserLogin",isDisabled:g,label:"Sign In",defaultSelected:!0})),ty.createElement(mQ,{name:"allowUserRegister",label:"Sign Up",defaultSelected:!0})),g&&ty.createElement(tg.Flex,{flexDirection:"row"},ty.createElement(tg.Callout,{intent:"warning"},"This integration is the last one that allows users to sign in to your workspace. Disabling it is not possible.")),"builtin"!==a.kind&&m&&ty.createElement(ty.Fragment,null,ty.createElement(d_,{name:"configType",size:"md",defaultValue:b,orientation:"horizontal"},ty.createElement(dx,{value:"default"},ty.createElement(tg.Flex,{flexDirection:"col"},ty.createElement(tg.Text,{className:"font-semibold"},"Use default configuration"),ty.createElement(tg.Text,{fontSize:"sm",color:"muted"},"The integration will use the globally configured settings."))),ty.createElement(dx,{disabled:!!(h||f),value:"custom"},ty.createElement(tg.Flex,{flexDirection:"col"},ty.createElement(tg.Text,{flexGrow:!0,className:"font-semibold"},"Customize integration settings"),ty.createElement(tg.Text,{fontSize:"sm",color:"muted"},"The integration will use the settings that you specify.")))),ty.createElement(tg.Flex,null,ty.createElement(tg.Box,{flexGrow:!0}),ty.createElement(tg.Box,{flexGrow:!0,style:{marginLeft:"100px"}},ty.createElement(()=>h?ty.createElement(n_.y,{className:"ml-2 mt-1",feature:tU.BAf.CustomGitIntegration}):null,null)||ty.createElement(()=>f?ty.createElement(n_.y,{feature:tU.BAf.SamlLdapIntegration,className:"ml-2"}):null,null)))),"builtin"!==a.kind&&"custom"===b&&ty.createElement(ty.Fragment,null,ty.createElement(tg.VStack,{spacing:4},r),ty.createElement(tg.Box,null,ty.createElement(tg.Button,{"data-test":"test-settings-btn",loading:u,icon:["fas","flask"],disabled:i,onPress:async()=>{let e;let{config:r={},secrets:n={}}=l();void 0!==r.defaultIdp&&(e=r.defaultIdp,delete r.defaultIdp);let o={};for(let e of Object.keys(n))n[e]!==mq&&(o[e]=n[e]);let i=d({kind:a.kind,config:r,secrets:o,workspaceIntegrationId:t?.id});return r.defaultIdp=e,i}},"Test Settings"))))};function mZ({installedIntegration:e,register:t,disabled:a,placeholder:r="https://api.example.com"}){return ty.createElement(lp,{...t("config.apiUrl",{required:!0}),label:"API URL",disabled:a,placeholder:r,id:mz.apiUrl,defaultValue:e?e.config.apiUrl:""})}function m0({installedIntegration:e,register:t,disabled:a,placeholder:r="0ddb477",helperText:n}){return ty.createElement(lp,{label:"Client ID",...t("config.clientId",{required:!0}),disabled:a,placeholder:r,id:mz.clientId,defaultValue:e?e.config.clientId:void 0,helperText:n})}function m1({installedIntegration:e,register:t,disabled:a,placeholder:r="d34db34t",helperText:n}){let o=e?.has_secrets?.includes("clientSecret");return ty.createElement(lp,{label:"Client Secret",...t("secrets.clientSecret",{required:!0}),disabled:a,placeholder:r,type:"password",id:mz.clientSecret,defaultValue:o?mq:void 0,helperText:n})}function m2({installedIntegration:e,register:t,helperText:a}){let{state:r}=(0,tB.U8)(),n=e?.config.redirectUrl||new URL(iJ,r.router.appUrl).toString();return ty.createElement(lp,{label:"Redirect URL",helperText:a,readOnly:!0,...t("config.redirectUrl",{value:n}),id:mz.redirectUrl,value:n})}let m4=ty.memo(({name:e,label:t,defaultValue:a,helperText:r,...n})=>{let{control:o,formState:{isSubmitting:l},setValue:i,defaultValues:s={}}=(0,t5.xW)(),c=(0,th.get)(o._defaultValues,`${e}`,s[e]);return void 0===c&&(c=a),ty.createElement(tg.VStack,{spacing:2},t&&ty.createElement(rr,{htmlFor:e},t),ty.createElement(t5.xI,{defaultValue:c,control:o,name:e,render:({field:e})=>ty.createElement(ty.Fragment,null,ty.createElement(tg.Select,{ref:e.ref,name:e.name,isSelected:e.value,onChange:t=>{i(e.name,t,{shouldDirty:!0})},readOnly:l,defaultValue:c,...n}),r&&ty.createElement(tg.Text,{color:"muted",size:"sm"},r(e.value)))}))});function m3({installedIntegration:e,includeInternal:t}){let a=e?.config.defaultVisibility||tU.fxF.Private,r=Object.values(tU.fxF).filter(e=>t||e!==tU.fxF.Internal).sort((e,t)=>sM.indexOf(e)-sM.indexOf(t)).map(e=>({value:e,label:(0,th.capitalize)(e),description:sU[e]}));return ty.createElement(tg.Box,null,ty.createElement(m4,{name:"config.defaultVisibility",label:"Default Repository Visibility",options:r,appearance:"outlined",defaultValue:a,helperText:e=>e===tU.fxF.Internal?"Internal repositories are only available for Github Enterprise Organizations":e===tU.fxF.Public?"Public repositories can be accessed by anyone":void 0,"data-test":mz.defaultRepositoryVisibility}))}!function(e){e[e.Basic=0]="Basic",e[e.OAuth=1]="OAuth"}(td||(td={}));let m5=e=>e.some(m8),m8=e=>e.config&&!(0,aK.sZ)(e.config),m6=e=>e?m8(e)?0:1:void 0,m7=(e,t)=>e||(m5(t)?0:1),m9=(e,t)=>{let a=m6(t),[r,n]=ty.useState(m7(a,e));return{initialAuth:a,currentAuth:r,setCurrentAuth:n}},pe=({authType:e})=>{let t=e===td.Basic?"Basic":"OAuth 2.0",a=e===td.Basic?"Basic Authentication":"OAuth 2.0";return ty.createElement(tg.VStack,{className:"bitbucket-data-center-auth-switch-notice","data-test":"bbdc-auth-switch-notice"},ty.createElement(tg.Callout,{alignItems:"center",intent:"warning",icon:"triangle-exclamation",mb:4},"Switching to ",t," Authentication"),ty.createElement(tg.Box,null,ty.createElement(tg.Text,null,"Switching to ",a," for Bitbucket Data Center will have the following immediate impacts:",ty.createElement("ul",{className:"impact-list"},ty.createElement("li",null,"Session Invalidations: All current workspace user sessions will be invalidated."),ty.createElement("li",null,"Re-authentication Required: Every user will need to authenticate again using ",a,"."))),ty.createElement("hr",null),ty.createElement(tg.VStack,{mt:4},ty.createElement(tg.Text,{fontWeight:"semibold",mb:4},"Before proceeding:"),ty.createElement(tg.Text,{mb:4},"Ensure you're familiar with Bitbucket Data Center and the process of setting up ",a,"."),ty.createElement(tg.Text,null,"For a detailed guide and implications of this change, read more on our documentation."," ",ty.createElement(tg.Link,{href:ab.xz.bitbucket_data_center_docs,target:"_blank"},"Learn More")))))},pt=({authType:e,register:t})=>{let{log:a}=(0,tF.pw)(),r=e===td.Basic?"basic":"oauth",n=e===td.Basic?"Basic Authentication":"OAuth 2.0";return ty.createElement(tg.Box,{className:"checkbox-bitbucket-data-center-confirm-auth-switch",mt:0,"data-test":"bbdc-auth-switch-confirm"},ty.createElement(lp,{label:ty.createElement(ty.Fragment,null,ty.createElement(tg.Text,null,"I understand the impact of switching to ",n)," ",ty.createElement(tg.Text,{color:"danger"},"*")),onClick:()=>a({event:"confirm_bitbucket_data_center_auth_switch",payload:{auth_type:r}}),...t("oauth.confirmSwitch",{required:!0}),type:"checkbox",defaultValue:void 0,"data-test":"bbdc-auth-switch-confirm-checkbox"}))},pa=({currentAuth:e,setCurrentAuth:t})=>ty.createElement(tg.VStack,{spacing:1},ty.createElement(rr,null,"Auth Types"),ty.createElement(tg.RadioGroup,{defaultValue:e===td.Basic?"basic":"oauth",label:void 0,onChange:e=>"string"==typeof e&&t("basic"===e?td.Basic:td.OAuth),border:!0,p:2,"data-test":"bbdc-auth-radio-group"},ty.createElement(tg.Radio,{value:"oauth",size:"sm","data-test":"bbdc-oauth-radio-button"},"OAuth 2.0"),ty.createElement(tg.Radio,{value:"basic",size:"sm","data-test":"bbdc-basic-auth-radio-button"},"Basic"),e===td.Basic?ty.createElement(pr,null):null)),pr=()=>ty.createElement(tg.Flex,{pl:2,"data-test":"bbdc-basic-auth-select-text"},ty.createElement(tg.Text,{color:"muted",size:"sm"},ty.createElement(tg.Icon,{icon:"warning",size:"xs",color:"orange"})," Security Warning: Basic Authentication is considered insecure. For robust security, we highly recommend using OAuth 2.0 when integrating with Bitbucket Data Center."," ",ty.createElement(tg.Link,{target:"_blank",href:ab.xz.bitbucket_data_center_docs},"Learn More"))),pn=({installedIntegration:e,disabled:t})=>{let{register:a}=(0,t5.xW)();return ty.createElement(ty.Fragment,null,ty.createElement(mH,{placeholder:"https://bitbucket.example.com",disabled:t,register:a,installedIntegration:e}),ty.createElement(mZ,{placeholder:"https://bitbucket.example.com/rest/api/1.0",disabled:t,register:a,installedIntegration:e}),ty.createElement(m0,{disabled:t,register:a,installedIntegration:e}),ty.createElement(m1,{disabled:t,register:a,installedIntegration:e}),ty.createElement(m2,{helperText:"Set this as a Redirect URL in your Bitbucket Data Center Application Link",register:a,installedIntegration:e}),ty.createElement(m3,{installedIntegration:e}))},po=({installedIntegration:e,disabled:t})=>{let{register:a}=(0,t5.xW)();return ty.createElement(mZ,{placeholder:"https://bitbucket.example.com/rest/api/1.0",disabled:t,register:a,installedIntegration:e})};var pl=a(99472),pi=a.n(pl),ps=a(18137);let pc=()=>{let{effects:e}=(0,tB.U8)(),[{fetching:t},a]=(0,tU.JY8)();return{fetching:t,executeMutation:ty.useCallback(async t=>{let r;let{error:n}=await a(t);if(n)throw r=n.graphQLErrors&&n.graphQLErrors[0].message?.includes("check_workspace_integrations_validate_config")?"Integration for this provider with the same name, Host URL or API URL already exists or some settings are invalid.":n.graphQLErrors[0].message?.includes("workspace_integrations_ws_id_intg_id_entry_point_key")?"Integration for this provider with the same entry point is already exists or some settings are invalid.":"Something went wrong, please try again.",e.notifications.danger({message:r}),Error("INVALID_DATA");e.notifications.success({message:"Workspace Integration Added"})},[e.notifications,a])}},pu=()=>{let{effects:e}=(0,tB.U8)(),[{fetching:t},a]=(0,tU.MYH)();return{fetching:t,executeMutation:ty.useCallback(async t=>{let{error:r,data:n}=await a({id:t.id});if(r||n?.deleteWorkspaceIntegrations?.returning?.length===0){e.notifications.danger({message:`Error uninstalling integration ${t.name}${r?": "+r.message:""}`});return}e.notifications.success({message:`Your integration ${t.name} was uninstalled.`})},[e.notifications,a])}},pd=()=>{console.log("In useUpdateWorkspaceIntegration");let{state:e,effects:t}=(0,tB.U8)(),a=(0,tN.useUpdateVcsIntegration)(e.auth.jwt);return{executeMutation:ty.useCallback(async e=>{try{await a.mutateAsync(e),t.notifications.success({message:"Workspace Integration Updated."})}catch(a){let e=(0,aD.isPlainObject)(a)&&"string"==typeof a.message&&(400===a.code||422===a.code)?function(e,t){return 400===e?t.trim():t.split("\n").map(e=>e.slice(Math.max(0,e.indexOf('"')))).join("\n")}(a.code,a.message):"Something went wrong, please try again.";throw t.notifications.danger({message:e}),Error("INVALID_DATA")}},[t.notifications,a])}};function pm({integration:e,onChange:t}){let{actions:a,state:r,effects:n}=(0,tB.U8)(),{executeMutation:o}=pc(),{executeMutation:l}=pd(),{executeMutation:i}=pu(),{openFormDialog:s}=(0,tx.useFormDialog)({mode:"onChange"}),c=e.workspaceIntegrations,u=e.kind===tU.KXp.Saml&&c.length>1,d=r.workspaces.canI(tU.E4M.WorkspaceIntegrationCreateUpdateDelete),m=mJ(e.kind)?tU.BAf.SamlLdapIntegration:tU.BAf.CustomGitIntegration,p=!1;mJ(e.kind)?p=!r.features.hasFeature(tU.BAf.SamlLdapIntegration):mK(e.kind)&&(p=!r.features.hasFeature(tU.BAf.CustomGitIntegration)&&!Object.entries(e.config).length);let g=async(a,i)=>{let{name:s,enabled:u=!1,allowUserLogin:d=!1,allowUserRegister:m=!1,configType:p="custom"}=a,g={name:s,enabled:u,allowUserLogin:d,allowUserRegister:m,config:"default"===p?{}:a.config},h="default"===p?{}:(0,th.omitBy)(a.secrets,e=>e===mq)||{},f=g.config;i&&i?.id?await l({vcs_integration_id:(0,t8.encodeID)("wkintg",i.id),name:g.name,enabled:g.enabled,allow_user_login:g.allowUserLogin,allow_user_register:g.allowUserRegister,config:(0,th.isEmpty)(f)?void 0:(0,ps.transformCamelToSnake)(f),secrets:(0,th.isEmpty)(h)?void 0:(0,ps.transformCamelToSnake)(h)}):(e.kind===tU.KXp.Saml&&0===c.length&&(g.config.defaultIdp=!0),await o({...g,workspaceId:Number(r.workspaces.currentWorkspaceId),integrationId:e.id,secrets:h,unsetAllSamlIdps:e.kind===tU.KXp.Saml&&c.length>0&&g.config.defaultIdp})),n.reporter.log({event:"workspace_integration_config_saved",payload:{kind:e.kind,enabled:u,sign_in_enabled:d,sign_up_enabled:m,custom_settings:"default"===p?{}:a.config}}),t&&t()},h=r=>{let o=mJ(e.kind);if(p&&o)return a.ui.showFeatureDialog(m);let l=pp[e.kind];s(()=>l({workspaceIntegrations:c,installedIntegration:r,integration:e}),{title:e.name,docsUrl:ab.xz[o?tU.BAf.SamlLdapIntegration:tU.BAf.CustomGitIntegration],defaultValues:r?{...r,secrets:{clientSecret:r?.has_secrets?.includes("clientSecret")?mq:void 0},configType:r&&0===Object.keys(r.config).length?"default":"custom"}:{},onSave:async e=>{await g(e,r)},confirmRemove:!0,...r&&"builtin"!==e.kind&&{onRemove:async()=>{if(e.kind===tU.KXp.Saml&&c.length>1&&r.config.defaultIdp){n.notifications.danger({message:"You must set another SAML integration as a default IDP provider"});return}await i(r),t&&t()}}})};return ty.createElement(dm,{type:"list",label:e.name,hint:mV[e.kind],icon:{icon:sy.Mh[e.kind]||["fas","question"],color:sy.n9[e.kind]||"#bbbbbb"},featureBadge:p?m:void 0,onClick:h,testId:e.kind,noAction:"builtin"===e.kind,isDisabled:!d,items:c?.map(t=>({isDisabled:!d,onClick:()=>h(t),children:ty.createElement(tg.HStack,{spacing:4},ty.createElement(tg.Box,{fontSize:"lg"},e.kind===tU.KXp.Builtin?"Email and Password":t.name||t.config.hostUrl||t.config.apiUrl||t.config.url||t.config.entryPoint),0===Object.keys(t.config).length&&ty.createElement(tg.Badge,{appearance:"outline",size:"sm"},"Default"),ty.createElement(tg.Badge,{appearance:"outline",size:"sm",intent:t.enabled?"success":"danger"},t.enabled?"Enabled":"Disabled"),u&&t.config.defaultIdp?ty.createElement(tg.Badge,{appearance:"outline",size:"sm",cursor:"not-allowed",title:"Default IDP Provider"},"IDP"):null)}))||[]})}let pp={[tU.KXp.AzureDevopsServer]:({installedIntegration:e,workspaceIntegrations:t,integration:a,disabled:r})=>{let{register:n}=(0,t5.xW)();return ty.createElement(mX,{installedIntegration:e,workspaceIntegrations:t,integration:a},ty.createElement(mH,{label:"Collection URL",placeholder:"https://azure.com/tfs/DefaultCollection",disabled:r,register:n,installedIntegration:e}))},[tU.KXp.AzureDevopsServices]:({installedIntegration:e,workspaceIntegrations:t,integration:a,disabled:r})=>{let{register:n}=(0,t5.xW)();return ty.createElement(mX,{installedIntegration:e,workspaceIntegrations:t,integration:a},ty.createElement(mH,{placeholder:"https://azure.com",disabled:r,register:n,installedIntegration:e}),ty.createElement(mZ,{placeholder:"https://dev.azure.com",disabled:r,register:n,installedIntegration:e}),ty.createElement(m0,{disabled:r,register:n,installedIntegration:e}),ty.createElement(m1,{disabled:r,register:n,installedIntegration:e}),ty.createElement(m2,{helperText:"Set this in your Azure OAuth Application",register:n,installedIntegration:e}))},[tU.KXp.BitbucketCloud]:({installedIntegration:e,workspaceIntegrations:t,integration:a,disabled:r})=>{let{register:n}=(0,t5.xW)();return ty.createElement(mX,{installedIntegration:e,workspaceIntegrations:t,integration:a},ty.createElement(mH,{placeholder:"https://bitbucket.org",disabled:r,register:n,installedIntegration:e}),ty.createElement(mZ,{placeholder:"https://api.bitbucket.org/2.0",disabled:r,register:n,installedIntegration:e}),ty.createElement(m0,{disabled:r,register:n,installedIntegration:e}),ty.createElement(m1,{disabled:r,register:n,installedIntegration:e}),ty.createElement(m2,{helperText:"Set this in your BitBucket OAuth Consumer",register:n,installedIntegration:e}),ty.createElement(m3,{installedIntegration:e}))},[tU.KXp.BitbucketDataCenter]:({installedIntegration:e,workspaceIntegrations:t,integration:a,disabled:r})=>{let{register:n}=(0,t5.xW)(),{initialAuth:o,currentAuth:l,setCurrentAuth:i}=m9(t,e),s=void 0!==o&&o!==l;return ty.createElement(tg.Box,{overflowY:"auto",style:{maxHeight:700},px:2},ty.createElement(mX,{installedIntegration:e,workspaceIntegrations:t,integration:a},ty.createElement(pa,{currentAuth:l,setCurrentAuth:i}),l===td.Basic?ty.createElement(po,{installedIntegration:e,workspaceIntegrations:t,integration:a,disabled:r}):ty.createElement(pn,{installedIntegration:e,workspaceIntegrations:t,integration:a,disabled:r})),s&&ty.createElement(tg.Box,{my:6},ty.createElement("hr",null),ty.createElement(tg.Box,{my:4},ty.createElement(pe,{authType:l}),ty.createElement(pt,{authType:l,register:n}))))},[tU.KXp.Github]:({installedIntegration:e,workspaceIntegrations:t,integration:a,disabled:r})=>{let{register:n}=(0,t5.xW)();return ty.createElement(mX,{installedIntegration:e,workspaceIntegrations:t,integration:a},ty.createElement(mH,{placeholder:"https://github.com",disabled:r,register:n,installedIntegration:e}),ty.createElement(mZ,{placeholder:"https://api.github.com",disabled:r,register:n,installedIntegration:e}),ty.createElement(m0,{disabled:r,register:n,installedIntegration:e}),ty.createElement(m1,{disabled:r,register:n,installedIntegration:e}),ty.createElement(m2,{helperText:"Set this in your Github OAuth Application",register:n,installedIntegration:e}),ty.createElement(m3,{installedIntegration:e,includeInternal:!0}))},[tU.KXp.Gitlab]:({installedIntegration:e,workspaceIntegrations:t,integration:a,disabled:r})=>{let{register:n}=(0,t5.xW)();return ty.createElement(mX,{installedIntegration:e,workspaceIntegrations:t,integration:a},ty.createElement(mH,{placeholder:"https://gitlab.com",disabled:r,register:n,installedIntegration:e}),ty.createElement(mZ,{placeholder:"https://gitlab.com/api/v4",disabled:r,register:n,installedIntegration:e}),ty.createElement(m0,{disabled:r,register:n,installedIntegration:e}),ty.createElement(m1,{disabled:r,register:n,installedIntegration:e}),ty.createElement(m2,{helperText:"Set this in your GitLab OAuth Application",register:n,installedIntegration:e}),ty.createElement(m3,{installedIntegration:e}))},[tU.KXp.Ldap]:({installedIntegration:e,workspaceIntegrations:t,integration:a,disabled:r})=>{let{register:n}=(0,t5.xW)(),o=e?.has_secrets?.includes("clientSecret");return ty.createElement(mX,{installedIntegration:e,workspaceIntegrations:t,integration:a},ty.createElement(lp,{label:"URL",disabled:r,placeholder:"ldap://example.com",...n("config.url",{required:!0}),defaultValue:e?e.config.url:""}),ty.createElement(lp,{label:"Bind DN",disabled:r,placeholder:"cn=admin,dc=example,dc=org",...n("config.bindDN"),defaultValue:e?e.config.bindDN:""}),ty.createElement(lp,{label:"Bind Credentials",disabled:r,placeholder:"admin",...n("secrets.bindCredentials"),defaultValue:o?mq:void 0}),ty.createElement(lp,{label:"Search Base",disabled:r,placeholder:"dc=example,dc=org",...n("config.searchBase"),defaultValue:e?e.config.searchBase:""}),ty.createElement(lp,{label:"Search Filter",disabled:r,placeholder:"(uid={{username}})",...n("config.searchFilter"),defaultValue:e?e.config.searchFilter:""}))},[tU.KXp.Saml]:({installedIntegration:e,workspaceIntegrations:t,integration:a,disabled:r})=>{let{register:n,setValue:o,watch:l,formState:{isSubmitting:i}}=(0,t5.xW)(),{state:s,effects:c}=(0,tB.U8)(),u=new(pi())(s.router.appUrl),d=u.subdomain(),m=[s.router.workspaceSlug,d].join("."),p=t.length>(e?1:0),g=e?.config.callbackUrl;g||(g=s.metadata.isMultiTenant?u.subdomain(m).port("").path(iJ).toString():u.subdomain(d).path(iJ).toString()),n("config.disableRequestedAuthnContext"),n("config.defaultIdp");let h=e?.config.disableRequestedAuthnContext??!1,f=e?.config.defaultIdp??!1;ty.useEffect(()=>{o("config.disableRequestedAuthnContext",h),o("config.defaultIdp",f)},[f,h,o]);let b=l("config.disableRequestedAuthnContext")??h,y=l("config.defaultIdp")??f;return ty.createElement(mX,{installedIntegration:e,workspaceIntegrations:t,integration:a},ty.createElement(lp,{...n("config.entryPoint",{required:!0,validate:a=>!t.find(({id:t,config:r})=>t!==e?.id&&r.entryPoint===a)||"This Entry Point is associated with another integration. Please choose a different Entry Point."}),label:"Entry Point",disabled:r,placeholder:"https://example.com/saml",defaultValue:e?e.config.entryPoint:""}),ty.createElement(lp,{...n("config.identifierFormat",{required:!0}),label:"Identifier Format",disabled:r,placeholder:"urn:oasis:names:tc:SAML:1.1:nameid-format:emailAddress",defaultValue:e?e.config.identifierFormat:""}),ty.createElement(lp,{...n("config.cert",{required:!0}),label:"Identity Provider Public Certificate",helperText:"PEM-encoded X.509, 'BEGIN/END CERTIFICATE' lines should be stripped out and the certificate should be provided on a single line.",disabled:r,placeholder:"",defaultValue:e?e.config.cert:""}),ty.createElement(lp,{...n("config.issuer",{required:!0}),helperText:"Set this on your SAML server",label:"Issuer",disabled:r,placeholder:"stoplight",defaultValue:e?e.config.issuer:""}),ty.createElement(tg.Flex,{flexDirection:"col"},ty.createElement(rr,null,"Request Specific Authentication Context"),ty.createElement(tg.Flex,{alignItems:"center"},ty.createElement(tg.Switch,{"aria-label":"Request Specific Authentication Context","data-test":"switch-field-config.disableRequestedAuthnContext",isSelected:!b,onChange:e=>{o("config.disableRequestedAuthnContext",!e,{shouldDirty:!0})},readOnly:i}),ty.createElement(tg.Text,{as:"label",htmlFor:"config.disableRequestedAuthnContext",pl:2,fontWeight:"normal"},"Enabled")),ty.createElement(tg.Text,{color:"muted",size:"sm"},"Request a specific authentication context. Disabling this might help when authenticating against Active Directory (AD FS) servers.")),ty.createElement(lp,{readOnly:!0,helperText:"Set this on your SAML server",label:"Callback URL",...n("config.callbackUrl",{required:!0}),value:g}),p?ty.createElement(ty.Fragment,null,ty.createElement(rr,null,"Use as default IDP provider"),ty.createElement(tg.Flex,{alignItems:"center"},ty.createElement(tg.Switch,{"aria-label":"Default IDP Provider",isDisabled:e?.config.defaultIdp,isSelected:y,onChange:e=>{o("config.defaultIdp",e,{shouldDirty:!0})},readOnly:i,onClick:()=>{e?.config.defaultIdp&&c.notifications.danger({message:"You must set another SAML integration as the default IDP provider."})}}),ty.createElement(tg.Text,{as:"label",htmlFor:"config.defaultIdp",pl:2,fontWeight:"normal"},"Enabled"))):null)},[tU.KXp.Builtin]:({installedIntegration:e,workspaceIntegrations:t,integration:a})=>{let{register:r}=(0,t5.xW)();return ty.createElement(mX,{installedIntegration:e,workspaceIntegrations:t,integration:a},ty.createElement(lp,{label:"Display Name",...r("name",{required:!0,minLength:2,maxLength:{value:20,message:"Must be no more than 20 Characters"}})}))}},pg=({workspaceId:e})=>{let{isFlagEnabled:t}=(0,tF.aS)(),[{data:a,fetching:r},n]=(0,tU.w9I)({variables:{workspaceId:e}}),o=[];return a&&(o=(o=t("ados_integration")?a.integrations:a.integrations.filter(e=>"azure_devops_services"!==e.kind)).slice().sort((e,t)=>e.workspaceIntegrations.length!==t.workspaceIntegrations.length?e.workspaceIntegrations.length>t.workspaceIntegrations.length?-1:1:e.name!==t.name?e.name<t.name?-1:1:0)),ty.createElement(db,{title:"Integrations"},r&&ty.createElement(tj.Spinner,null),o.map(e=>ty.createElement(pm,{key:e.id,integration:e,onChange:()=>n({requestPolicy:"cache-and-network"})})))},ph=`<!-- theme: warning -->

> ####  Start building a beautiful home page
>
> This is a template to give you a head start on building a beautiful landing page for your workspace. You can edit or completely replace this template using [Stoplight Flavored Markdown](${ab.xz.stoplight_markdown}) from the [workspace settings](../admin/settings). We hope this template helps to get the creative juices flowing.

#  Welcome to your Stoplight workspace

#### With Stoplight, you can:

<!-- theme: success -->

>  It helps to start with a basic overview of what users can do with your product.

- Share interactive documentation with internal and external stakeholders
- Explore your APIs, track dependencies and view changelogs
- Invite team members to collaborate on API assets
- Create and update API designs and documentation

Dig into our [documentation and quickstarts](https://meta.stoplight.io) to govern, design, and document APIs. The Stoplight Platform has you covered with everything from an interactive API explorer, automatic mock servers, OpenAPI designer, API console, code samples in your favorite languages, and comprehensive examples.

---

## Getting Started

<!-- theme: success -->

>  Get your users onboarded quickly with the minimum set of steps required to get started.
>
> You can write getting started articles in Studio or import existing markdown documents. Adding links and icons can be useful. *Reminder: This is a template - with valuable tips and trick though*.

[Add Projects](add/projects)

Connect Git repos containing OpenAPI descriptions, JSON Schemas, and markdown articles into your workspace.

[Invite Team Members](admin/members)

Bring stakeholders and partners on board with flexible permissions to start sharing collaborating on your design assets.

[Explore your Projects](explore)

Find APIs, star reusable elements, track dependencies, and try out hosted mocks using Explorer.

---

<!-- focus: false -->
![tutorial-icon](https://img.icons8.com/cotton/128/000000/abc.png)

## Tutorials

<!-- theme: success -->

>  Cover important use cases in dedicated tutorials and walkthroughs.

Have a particular problem you're looking to solve? Explore these use cases.

<!-- focus: false -->
![governance-icon](https://img.icons8.com/cotton/64/000000/courthouse.png)

#### Governance

Promote reuse, consistency, and quality across your company.

[Learn more](${ab.xz.styleguides})

<!-- focus: false -->
![design-icon](https://img.icons8.com/cotton/64/000000/color-palette.png)

#### Design

Help architects design beautiful APIs quickly.

[Learn more](${ab.xz.design})

<!-- focus: false -->
![documentation-icon](https://img.icons8.com/cotton/64/000000/spaceship-launch-documentation.png)

#### Developer Experience

Provide an amazing developer experience for internal and external developers.

[Learn more](${ab.xz.documentation})

Can't find what you're looking for? [Contact sales](#were-here-to-help)

---

<!-- focus: false -->
![explore-icon](https://img.icons8.com/cotton/64/000000/search-in-cloud.png)

## Explore APIs

<!-- theme: success -->

>  List APIs for users to easily discover and consume them.
>
> Notice the tabs?  Read more about [Stoplight Flavored Markdown](${ab.xz.stoplight_markdown}).

Take a look at our APIs and imagine what you could build.

<!--
type: tab
title: Amazing API - I
-->

**Amazing API**

Use this amazing API to **be awesome**.

- [Getting Started]()
- [Do amazing things]()
- [API Reference]()
- [Try out API]()

<!--
type: tab
title: Not an Amazing API
-->

**Not so amazing API**

Improve the design of this API in Studio and let users do amazing things with it.

- [Getting Started](link-here)
- [API Reference](link-here)
- [Try out API](link-here)

<!--
type: tab
title: Amazing API - II
-->

**Amazing API**

Use this even more amazing API to **do even more amazing things**.

- [Getting Started](link-here)
- [API Reference](link-here)
- [Try out API](link-here)

<!-- type: tab-end -->

---

<!-- focus: false -->
![faqs-icon](https://img.icons8.com/cotton/64/000000/scroll--v1.png)

## FAQs

<!-- theme: success -->

>  Add a section for FAQs to help users solve issues quickly.
>
> Adding links and icons can be useful. *Reminder: This is a template - with useful tips and trick
  though*

**Can I update this landing page?**

Yes, you can edit or completely replace this example template using [Stoplight Flavored Markdown](${ab.xz.stoplight_markdown}) from the [workspace settings](admin/basics).

**Is this documentation publicly accessible?**

You can use this documentation for both public and private use. Adjust project visibility settings to decide which projects are public, internal, or private. Public projects are viewable by anonymous visitors, while internal projects can be accessed by the members of your Stoplight workspace. Private projects can be shared with particular workspace members from the project settings.

**How do I update the documentation?**

Documentation is always in sync with changes that you make in Studio or your Git repo. The content in your Git repository is your source of truth for the documentation.

**Is it possible to change the theme and publish this to a custom domain?**

Both of these features will be available soon.

---

<!-- focus: false -->
![support-icon](https://img.icons8.com/cotton/64/000000/technical-support.png)

## We're Here to Help

<!-- theme: success -->

>  Add a section for Support to allow users to contact your support channels.
>
> Tip: You can add emojis to make your documentation more pleasant to read. 

Get in touch and let us know how we can help.

<!--
type: tab
title: Community Support
-->

Ask a peer in our community forum about how they use the Stoplight Platform.

[Go to Community](https://community.stoplight.io)

<!--
type: tab
title: Contact Sales
-->

Contact sales at [sales@stoplight.io](mailto:sales@stoplight.io) to get help from our team of in-house experts.

<!-- type: tab-end -->

<!-- theme: warning -->

> If you are a member of this workspace, please log in [here](auth).

Built with  by [Stoplight](https://stoplight.io). Public icons by [Icons S8](https://icons8.com)`;var pf=a(61043);let pb=({control:e,defaultValues:t})=>{let[a,r]=ty.useState(!1),n=(0,t5.FH)({control:e,name:"faviconUrl",defaultValue:t.faviconUrl||""}),[o]=(0,pf.A)(n,500);return ty.createElement(ty.Fragment,null,ty.createElement("img",{src:o,"data-test":"favicon-icon-preview",style:a?{maxWidth:16,maxHeight:16,marginTop:20}:{display:"none"},onLoad:()=>r(!0),onError:()=>r(!1),alt:"Workspace Favicon"}),!a&&ty.createElement(tg.Icon,{icon:["far","image"],size:"3x",style:{color:"var(--color-text-muted)",marginTop:8}}))},py=()=>{let{register:e,control:t,defaultValues:a={}}=(0,t5.xW)();return ty.createElement(tg.HStack,{spacing:4},ty.createElement(tg.Box,{flex:1},ty.createElement(lp,{autoFocus:!0,label:"Favicon URL",placeholder:"https://i.imgur.com/your-favicon.png",helperText:"The ideal size for a favicon is 16x16 pixels, with a transparent background.",flex:1,...e("faviconUrl")})),ty.createElement(tg.Box,{w:"auto",h:"full"},ty.createElement(pb,{control:t,defaultValues:a})))},pw=e=>{let{getValues:t,setValue:r,watch:n}=(0,t5.xW)(),[o,l]=ty.useState();return ty.useEffect(()=>{let o,i;return Promise.all([a.e(2523),a.e(6237),a.e(3083),a.e(8209),a.e(3221),a.e(9162),a.e(5894),a.e(9911),a.e(3662),a.e(7553),a.e(3306),a.e(9643),a.e(3827),a.e(5095),a.e(275),a.e(8740),a.e(3375),a.e(7934),a.e(7296),a.e(229),a.e(3900),a.e(7516),a.e(3015),a.e(2955),a.e(8965),a.e(4957),a.e(5601),a.e(9150),a.e(7362),a.e(9765),a.e(978),a.e(2453),a.e(2497),a.e(5410),a.e(3777),a.e(9565),a.e(2314),a.e(1894),a.e(766),a.e(7464),a.e(4344),a.e(2128),a.e(5048),a.e(1286),a.e(8741),a.e(3338),a.e(2096)]).then(a.bind(a,82770)).then(({MonacoCodeStore:a})=>{(o=new a({id:`this must be unique -- useCodeStoreAsReactHookFormField-${e}`,path:`file://this-must-be-unique-and-a-valid-uri--useCodeStoreAsReactHookFormField-${encodeURIComponent(e)}.md`,value:t(e)||"",lang:"markdown"})).onDidUpdateValue(t=>r(e,t)),i=n((t,{name:a})=>{let r=t[e];a===e&&r!==o?.value&&o?.setValue(r||"")}),l(o)}),()=>{o?.dispose(),i?.unsubscribe()}},[e,t,r,n]),o},pE=()=>{let e=pw("homeContent");return ty.createElement(tg.Box,{h:"full"},ty.createElement(tx.MarkdownEditorWithPreview,{autoFocus:!0,height:"57vh",monacoCodeStore:e}))},pv=({control:e,defaultValues:t})=>{let[a,r]=ty.useState(!1),n=(0,t5.FH)({control:e,name:"logoUrl",defaultValue:t.logoUrl||""}),[o]=(0,pf.A)(n,500);return ty.createElement(ty.Fragment,null,ty.createElement("img",{src:o,"data-test":"workspace-logo-preview",style:a?{}:{display:"none"},onLoad:()=>r(!0),onError:()=>r(!1)}),!a&&ty.createElement(tg.Box,{textAlign:"center"},ty.createElement(tg.Box,{as:tg.Icon,icon:["far","image"],size:"3x",color:"muted"})))},pk=()=>{let{register:e,control:t,defaultValues:a={}}=(0,t5.xW)();return ty.createElement(tg.HStack,{spacing:4},ty.createElement(tg.Box,{flex:1},ty.createElement(lp,{autoFocus:!0,label:"Logo URL",placeholder:"https://i.imgur.com/your-logo.png",helperText:"An ideal logo is a rectangular image with a width of approximately 250 pixels and a height of 64 pixels, or in a relative ratio, featuring a transparent background.",...e("logoUrl")})),ty.createElement(tg.Box,{w:"2/6",h:"full"},ty.createElement(pv,{control:t,defaultValues:a})))};var p_=a(7841),px=a(41734),pI=a(49342);let pS=e=>{let t={};for(let[a,r]of Object.entries(e))t[(0,th.snakeCase)(a)]=r;return t},pj=(0,ak.BZ)((0,px.a)(function({workspace:{id:e,theme:t},isOpen:a,close:r}){let[n,o]=ty.useState(""),[l,i]=ty.useState(!1),{state:{themeEditor:{properties:s},features:{hasFeature:c}},actions:{ui:{showFeatureDialog:u},themeEditor:{turnPreviewOn:d,reset:m}},effects:{reporter:{log:p}}}=(0,tB.U8)(),{fetching:g,executeMutation:h}=c8({onSuccessMessage:"Theme Settings Updated"}),f=!(0,th.isEqual)(t||{},s),b=c(tU.BAf.CustomTheme),y=(0,tg.isEmpty)(s)?"---":pI.AO.find(e=>th.isEqual(s,e.theme))?.name;ty.useEffect(()=>{d(),i(!0),(0,tg.isEmpty)(s)&&m(t||{})},[]);let w=async()=>{try{await h({workspace_id:e,theme:pS(s)}).then(()=>{r()}).catch(()=>{o("Issue saving the form, please try again.")})}catch{o("Error Saving Form")}p({event:"workspace_theme_updated",payload:{preset:"---"===y?"default":y||"custom"}})};return ty.createElement(ty.Fragment,null,ty.createElement(tg.Modal,{isOpen:!!a,onClose:r,isDraggable:l,zIndex:20,title:ty.createElement(tg.HStack,{spacing:2},ty.createElement(tg.Heading,{size:3,fontSize:"xl"},"Theme Settings"),b?null:ty.createElement(n_.y,{feature:tU.BAf.CustomTheme}),ty.createElement(tg.Box,{flex:1}),ty.createElement(tg.Link,{mx:2,href:ab.xz[tU.BAf.CustomTheme],target:"_blank"},"Learn more")),footer:ty.createElement(tg.HStack,{spacing:2},ty.createElement(tg.Box,{flexGrow:!0},ty.createElement(tg.Button,{"data-test":"reset-theme-btn",intent:"danger",appearance:"minimal",onClick:()=>{m(t||{})},loading:g,disabled:!f},"Reset")),ty.createElement(tg.HStack,{justifyContent:"end",spacing:2,flexShrink:!0},ty.createElement(tg.Button,{onPress:()=>{r()},appearance:"minimal",disabled:g},"Cancel"),ty.createElement(tg.Button,{"data-test":"save-theme-btn",type:"submit",appearance:f?"primary":"minimal",onClick:()=>{if(!b)return u(tU.BAf.CustomTheme);w()},loading:g,disabled:!f,...f?null:{bg:"canvas-400"}},"Save")))},ty.createElement(pP,{currentPresetName:y}),n&&ty.createElement(tg.Callout,{intent:"danger",appearance:"outline",mt:5},n)))}));pj.displayName="ThemeEditorPanel";let pC=(0,p_.pipe)(ak.BZ,px.a)(pj),pP=({currentPresetName:e})=>{let{state:{themeEditor:{properties:t,showPreview:a}},actions:{themeEditor:{setThemeProperty:r,turnPreviewOn:n,turnPreviewOff:o,reset:l}},effects:{reporter:{log:i}}}=(0,tB.U8)();return ty.createElement(tg.Box,null,ty.createElement(tg.Box,null,ty.createElement(tg.Heading,{size:4},"Sidebar Theme"),ty.createElement(tg.HStack,{spacing:6,pt:5},ty.createElement(tg.Box,{w:"full"},ty.createElement(rr,{htmlFor:"preview-switch"},"Show Live Preview"),ty.createElement(tg.Switch,{name:"preview-switch","data-test":"switch-live-preview",isSelected:a,onChange:a?o:n})),ty.createElement(tg.Box,{w:"full"},ty.createElement(rr,{htmlFor:"preset-select"},"Try a Preset"),ty.createElement(tg.Select,{name:"preset-select",value:e||"---",appearance:"outlined",options:[{key:"---",value:"---"}].concat(pI.AO.map(e=>({key:e.name,value:e.name}))),onChange:e=>{n();let t=pI.AO.find(t=>t.name===e);if(i({event:"workspace_theme_preset_selected",payload:{preset:"---"===e?"default":t?.name||"custom"}}),"---"===e){l({});return}t&&l(t.theme)}}))),ty.createElement(tg.Flex,{flexWrap:!0},ty.createElement(tg.Box,{w:"1/3",pr:5,pt:5},ty.createElement(rr,{htmlFor:"background-color-picker"},"Background Color"),ty.createElement(dw,{name:"background-color-picker",color:t["color-sidebar-bg"]||"",defaultColor:pI.zQ["color-sidebar-bg"],onChange:e=>r({key:"color-sidebar-bg",value:e})})),ty.createElement(tg.Box,{w:"1/3",pr:5,pt:5},ty.createElement(rr,{htmlFor:"text-color-picker"},"Text Color"),ty.createElement(dw,{name:"text-color-picker",color:t["color-on-sidebar"]||"",defaultColor:pI.zQ["color-on-sidebar"],onChange:e=>r({key:"color-on-sidebar",value:e})})),ty.createElement(tg.Box,{w:"1/3",pr:5,pt:5},ty.createElement(rr,{htmlFor:"primary-color-picker"},"Primary Color"),ty.createElement(dw,{name:"primary-color-picker",color:t["color-primary"]||"",defaultColor:pI.zQ["color-primary"],onChange:e=>r({key:"color-primary",value:e})})),ty.createElement(tg.Box,{w:"1/3",pr:5,pt:5},ty.createElement(rr,{htmlFor:"accent-color-picker"},"Accent Color"),ty.createElement(dw,{name:"accent-color-picker",color:t["color-accent"]||"",defaultColor:pI.zQ["color-accent"],onChange:e=>r({key:"color-accent",value:e})})),ty.createElement(tg.Box,{w:"1/3",pr:5,pt:5},ty.createElement(rr,{htmlFor:"border-color-picker"},"Border Color"),ty.createElement(dw,{name:"border-color-picker",color:t["color-sidebar-border"]||"",defaultColor:pI.zQ["color-sidebar-border"],onChange:e=>r({key:"color-sidebar-border",value:e})})))))},pA=({workspace:e})=>ty.createElement(db,{title:"Look & Feel"},ty.createElement(pB,{workspace:e}),ty.createElement(pD,null),ty.createElement(pT,{workspace:e}),ty.createElement(pF,{workspace:e}),ty.createElement(p$,{workspace:e})),pB=({workspace:e})=>{let{state:t,actions:a}=(0,tB.U8)(),[r,n]=ty.useState(e.hidePoweredBy),o=t.workspaces.canI(tU.E4M.WorkspaceSettingsCreateUpdateDelete),{executeMutation:l}=c8({onSuccessMessage:"Stoplight Branding Updated"}),i=t.features.hasFeature(tU.BAf.Whitelabel),s=async t=>{if(!i)return a.ui.showFeatureDialog(tU.BAf.Whitelabel);let o=await l({workspace_id:e.id,remove_stoplight_branding:t});return n(!o.error&&!r),o};return ty.createElement(dm,{type:"switch",label:"Remove Stoplight Branding",hint:'Removes the "Powered by Stoplight" branding',featureBadge:i?void 0:tU.BAf.Whitelabel,testId:"remove-stoplight-branding",isDisabled:!o,isSelected:r,switchLabel:"Toggle Stoplight Branding",onClick:s})},pD=()=>{let{state:e}=(0,tB.U8)(),{isOpen:t,open:a,close:r}=(0,tg.useModalState)(),n=e.workspaces.canI(tU.E4M.WorkspaceSettingsCreateUpdateDelete);return ty.createElement(ty.Fragment,null,ty.createElement(dm,{type:"dialog",isDisabled:!n,label:"Theme",hint:"Customize the look and feel of your portal",onClick:a}),t&&ty.createElement(pC,{isOpen:t,close:r}))},pT=({workspace:e})=>{let{openFormDialog:t}=(0,tx.useFormDialog)(),{executeMutation:a}=c8({onSuccessMessage:"Favicon settings updated"}),{state:r}=(0,tB.U8)(),n=r.workspaces.canI(tU.E4M.WorkspaceSettingsCreateUpdateDelete),o=r.features.hasFeature(tU.BAf.Favicon),l=r.workspaces.currentWorkspace?.faviconUrl;return ty.createElement(dm,{type:"dialog",label:"Favicon",hint:"Set a custom favicon for your workspace",isDisabled:!n,value:l?ty.createElement("img",{src:l,alt:"Workspace Favicon",style:{maxHeight:32,maxWidth:32}}):ty.createElement(tg.Icon,{icon:["far","image"],size:"3x",style:{color:"var(--color-text-muted)"}}),featureBadge:o?void 0:tU.BAf.Favicon,onClick:()=>t(py,{title:"Favicon",docsUrl:ab.xz[tU.BAf.Favicon],defaultValues:{faviconUrl:e.faviconUrl},onSave:({faviconUrl:t})=>a({workspace_id:e.id,favicon_url:t})})})},pF=({workspace:e})=>{let{state:t}=(0,tB.U8)(),a=t.workspaces.canI(tU.E4M.WorkspaceSettingsCreateUpdateDelete),{executeMutation:r}=c8({onSuccessMessage:"Workspace Logo Updated"}),n=ml.Ik().shape({logoUrl:ml.Yj().url()}),{openFormDialog:o}=(0,tx.useFormDialog)({resolver:(0,mo.t)(n)});return ty.createElement(dm,{type:"dialog",label:"Logo",hint:"Displayed in the top left of your workspace",isDisabled:!a,testId:"logo",onClick:()=>{o(pk,{title:"Workspace Logo",docsUrl:ab.xz.workspace_logo,defaultValues:{logoUrl:e.logoUrl},onSave:({logoUrl:t})=>r({workspace_id:e.id,logo_url:t})})}})},p$=({workspace:e})=>{let{state:t,effects:a}=(0,tB.U8)(),{openFormDialog:r,closeFormDialog:n}=(0,tx.useFormDialog)({shouldUnregister:!1,defaultValues:{homeContent:t.workspaces.currentWorkspace?.homeContent||""}}),o=t.workspaces.canI(tU.E4M.WorkspaceSettingsCreateUpdateDelete),{executeMutation:l}=c8();return ty.createElement(ty.Fragment,null,ty.createElement(dm,{type:"dialog",label:"Landing Page",hint:"Customize the markdown content displayed on the landing page",isDisabled:!o,onClick:()=>{r(pE,{title:"Home Screen Markdown",docsUrl:ab.xz.workspace_landing,size:"full",FooterAppend:ty.createElement(pN,null),closeOnSave:!1,onSave:async({homeContent:t})=>{await l({workspace_id:e.id,landing_page_content:t})&&(n(),a.reporter.log({event:"saved_landing_page",payload:{hasContent:""!==t}}))}}),a.reporter.log({event:"edit_landing_page_clicked"})}}))},pN=({formMethods:e})=>ty.createElement(tg.Button,{onClick:()=>{e?.setValue("homeContent",ph,{shouldDirty:!0})}},"Use Default Template"),pU=[{id:1,name:"Workspace Projects: Read",helperText:"Access to all OpenAPI and JSON Schema files in all public, internal and private projects."}],pM=({state:e,createdBy:t,lastUsed:a,accessToken:r,paymentRequiredMessage:n})=>{let{register:o}=(0,t5.xW)(),{closeFormDialog:l}=(0,tx.useFormDialog)(),{navigate:i}=(0,tF.bZ)(),s=tA.useNavigate;return ty.createElement(tg.VStack,{spacing:6,divider:!0,pl:6,pr:6},ty.createElement(tg.Box,null,ty.createElement(tg.VStack,{spacing:2},n&&ty.createElement(tg.Flex,{flexDirection:"row"},ty.createElement(tg.Callout,{"data-test":"machine-principal-payment-required-callout",icon:"triangle-exclamation",intent:"danger",heading:"Upgrade Required",actions:ty.createElement(tg.Button,{size:"sm",onPress:()=>{i(s,"/admin/billing"),l()}},"Go to Billing")},n)),ty.createElement(tg.Heading,{size:4},"Token Name"),ty.createElement(lp,{"aria-label":"Token Name","data-test":"machine-principal-name-input",autoFocus:!0,disabled:"created"===e,borderR:0,...o("name",{required:!0,minLength:1,maxLength:{value:200,message:"Must be no more than 200 characters"}})})),ty.createElement(tg.VStack,{spacing:4,mt:7},ty.createElement(tg.Box,null,ty.createElement(tg.Heading,{size:4},"Permissions"),ty.createElement(tg.Text,{display:"block",pt:1,color:"muted"},"The following capabilities will be given to requestors using this API token.")),pU.map(e=>ty.createElement(ty.Fragment,{key:e.id},ty.createElement(tg.Flex,{pl:6},ty.createElement(tg.Flex,{flex:1,alignItems:"center"},ty.createElement(tg.Box,{flex:1},ty.createElement(tg.Box,null,ty.createElement(tg.Heading,{size:4},e.name),ty.createElement(tg.Box,{display:"block",pt:1,color:"muted"},e.helperText))),ty.createElement(tg.HStack,{spacing:3},ty.createElement(tj.Checkbox,{checked:!0,disabled:!0,inline:!0})))))))),ty.createElement(tg.Box,null,ty.createElement(tg.Heading,{size:4},"Token"),ty.createElement(tg.Flex,{flexDirection:"row",mt:4},ty.createElement(tg.Callout,{pb:0,appearance:"outline",noContentBottomPadding:!0,"data-test":`machine-principal-token-${e}-callout`},{new:ty.createElement(ty.Fragment,null,ty.createElement(tg.Text,null,'Your token will appear here, after you click "Create Token".'),ty.createElement(tg.Flex,{alignSelf:"center",pt:8,pb:0},ty.createElement(tg.Image,{alignContent:"center",width:125,src:"/static/images/robot-head-blue.png",alt:"Stoplight logo"}))),created:ty.createElement(pR,{createdByUsername:t,accessToken:r,state:"created"}),edit:ty.createElement(pR,{lastUsed:a,createdByUsername:t,accessToken:r,state:"edit"})}[e]))))},pR=({lastUsed:e,createdByUsername:t,accessToken:a,state:r})=>{let{info:n}=(0,tF.AO)(),{onCopy:o}=(0,tg.useClipboard)(a??"");return ty.createElement(ty.Fragment,null,ty.createElement(tg.VStack,{spacing:3,pb:2},ty.createElement(tg.Text,null,"created"===r?"You will not see this token again. It never expires, please copy and save it in a secure location.":"Here is a preview of the access token for your reference."),ty.createElement(lp,{w:"full",bg:"canvas-100",flex:1,"aria-label":"Access Token","data-test":"access-token",name:"access-token",value:a,readOnly:!0,fontFamily:"mono",rightElement:"created"===r?ty.createElement(tg.Button,{"data-test":"token-copy-button",appearance:"minimal",icon:"copy",bg:"canvas-100",onPress:()=>{o(),n({message:"Copied to clipboard!"})}}):ty.createElement(ty.Fragment,null)}),ty.createElement(tg.Text,{color:"muted",fontStyle:"italic"},"Created by ",t??"unknown"," - Last used: ",e?ty.createElement(cm.f,{date:e}):"never")))},pW=({workspaceId:e})=>{let{effects:{reporter:t}}=(0,tB.U8)(),{hasFeature:a}=(0,tF._m)(),{canI:r}=(0,tF.C$)(),{jwt:n}=(0,tF.hD)(),{danger:o}=(0,tF.AO)(),{openFormDialog:l}=(0,tx.useFormDialog)(),i=tU.BAf.OauthClientApps,s=!a(i),c=r(tU.E4M.WorkspaceOauthClientCreateUpdateDelete),{data:u,isFetched:d}=(0,tN.useListMachinePrincipals)(n,e),m=u?.items??[],p=(0,tN.useAddMachinePrincipal)(n),g=(0,tN.useUpdateMachinePrincipal)(n),h=(0,tN.useDeleteMachinePrincipal)(n),f=e=>{let{machinePrincipalName:t,machinePrincipalAccessToken:a,paymentRequiredMessage:r,creator:n}=e;l(pM,{props:{state:"created",accessToken:a,paymentRequiredMessage:r,createdBy:n},title:"Workspace Tokens",saveButtonText:"Done",size:"lg",defaultValues:{name:t},onSave:async()=>{}})},b=({paymentRequiredMessage:a,name:r}={})=>{l(pM,{props:{state:"new",paymentRequiredMessage:a},defaultValues:{name:r},title:"Workspace Tokens",saveButtonText:"Create Token",size:"lg",closeOnSave:!1,onSave:async({name:r})=>{let n=(0,t8.encodeID)("wk",e||0);try{let{access_token:e,creator:o}=await p.mutateAsync({workspace_id:n,name:r});t.log({event:"workspace_token_created",payload:{name:r,permissions:[]}}),f({machinePrincipalName:r,machinePrincipalAccessToken:e,paymentRequiredMessage:a,creator:o?.display_name})}catch(e){if(e.type&&"CONFLICT"===e.type)throw new tx.FormFieldError("name",e.message,e.type);e.type&&"PAYMENT_REQUIRED"===e.type?b({paymentRequiredMessage:e.message,name:r}):o({message:`${e.message}`})}}})},y=e=>{l(pM,{props:{state:"edit",accessToken:e.access_token_prefix.padEnd(80,""),createdBy:e.creator?.display_name,lastUsed:e.last_used??void 0},title:"Workspace Tokens",saveButtonText:"Save",size:"lg",confirmRemove:!0,defaultValues:{name:e.name},onSave:async({name:a})=>{try{await g.mutateAsync({machine_principal_id:e.id,name:a}),t.log({event:"workspace_token_updated",payload:{previous_name:e.name,previous_permissions:[],new_name:a,new_permissions:[]}})}catch(a){if(a.type&&"CONFLICT"===a.type)throw new tx.FormFieldError("name",a.message,a.type);let t=`Unable to save "${e.name}`;"object"==typeof a&&null!==a&&(t=a.message),o({message:t})}},onRemove:async()=>{try{await h.mutateAsync({machine_principal_id:e.id}),t.log({event:"workspace_token_deleted"})}catch(a){let t=`Unable to remove "${e.name}`;"object"==typeof a&&null!==a&&(t=a.message),o({message:t})}}})};return ty.createElement(db,{title:"Stoplight API"},!d&&ty.createElement(tj.Spinner,null),d&&ty.createElement(dm,{type:"list",testId:"workspace-tokens",label:"Workspace Tokens",onClick:b,hint:ty.createElement(ty.Fragment,null,"Workspace tokens provide API access for all resources in the workspace."," ",ty.createElement("a",{className:"text-primary ml-2",href:ab.A8.stoplight_api,target:"_blank",rel:"noreferrer"},"Learn more")),icon:{icon:["fas","key"],color:"#000"},featureBadge:s?i:void 0,isDisabled:!c,items:m.map(e=>({isDisabled:!c,onClick:()=>y(e),children:ty.createElement(tg.VStack,{spacing:1},ty.createElement(tg.Box,{fontSize:"lg"},e.name),ty.createElement(tg.Box,{color:"muted"},"Last used: ",e.last_used?ty.createElement(cm.f,{date:e.last_used}):"never"))}))}))},pL=(0,ak.ss)((0,ak.aZ)(function({workspace:e}){return(0,a6.e)("settings"),ty.createElement(tg.Container,{as:"main",py:20,px:8,bg:"canvas",size:"md"},ty.createElement(tg.VStack,{spacing:10},ty.createElement(m$,{workspace:e}),ty.createElement(pA,{workspace:e}),ty.createElement(mS,{workspace:e}),ty.createElement(mh,{workspace:e}),ty.createElement(pW,{workspaceId:e.id}),ty.createElement(pg,{workspaceId:e.id}),ty.createElement(mk,{workspace:e})))})),pG=()=>{let{jwt:e}=(0,tF.hD)(),{danger:t}=(0,tF.AO)(),{log:a}=(0,tF.pw)(),r=(0,tN.useDeleteTeam)(e);return ty.useCallback(async(e,n,o)=>{try{await r.mutateAsync({teamId:e}),o&&o(),a({event:"workspace_delete_team"})}catch(e){t({message:'Error deleting team "'+n+'": '+(e?.message||"unexpected error occurred")});return}},[t,r,a])},pO=()=>{let{jwt:e,currentUser:t}=(0,tF.hD)(),{danger:a}=(0,tF.AO)(),{error:r}=(0,tF.u6)(),{log:n}=(0,tF.pw)(),o=(0,tN.useDeleteTeamMember)(e);return ty.useCallback(async(e,l,i)=>{let s=t?.emails.find(e=>e.primary)?.email;if(!s){a({message:`Unexpected error leaving team "${l}"`}),r({error:Error("currentUser is undefined"),event:"user_left_team"});return}try{await o.mutateAsync({teamId:e,email:s}),i&&i(),n({event:"user_left_team"})}catch(e){a({message:'Error leaving team "'+l+'": '+(e?.message||"unexpected error occurred")});return}},[t?.emails,a,o,r,n])},pz=()=>{let{jwt:e}=(0,tF.hD)(),{log:t}=(0,tF.pw)(),[a,r]=ty.useState([]),[n,o]=ty.useState(!1),l=(0,tN.useDeleteTeam)(e);return[{data:a,isLoading:n},ty.useCallback(async e=>{let a=e.map(e=>l.mutateAsync({teamId:e}).then(()=>(t({event:"workspace_delete_team"}),{success:!0,teamId:e})).catch(t=>({success:!1,teamId:e,message:t.message||t.toString()})));return o(!0),await Promise.all(a).then(e=>e.reduce((e,t)=>(e.push(t),e),[])).then(e=>(r(e),e)).finally(()=>{o(!1)})},[l,t])]},pq=({row:e,value:t})=>ty.createElement(tg.Flex,{align:"center",textOverflow:"truncate",pl:e.depth?7:0,"data-test":`teams-table-${e.original.id}-name`},ty.createElement(tg.Avatar,rC(e.original)),ty.createElement(tg.Box,{flex:1,ml:2,textOverflow:"truncate"},t),"member"===e.original.my_role&&ty.createElement(tg.Tooltip,{placement:"top",renderTrigger:ty.createElement(tg.Box,{ml:2},ty.createElement(tg.Icon,{icon:["far","user"],color:"light"}))},"Team Member"),"admin"===e.original.my_role&&ty.createElement(tg.Tooltip,{placement:"top",renderTrigger:ty.createElement(tg.Box,{ml:2},ty.createElement(tg.Icon,{icon:["far","user-cog"],color:"light"}))},"Team Admin")),pV=({row:e})=>ty.createElement(dH,{items:[...e.original.admins],maxVisibleItems:3}),pH=({value:e})=>ty.createElement(tg.Box,null,e),pQ=e=>[{id:"name",Header:"Team",accessor:"name",Cell:pq,Filter:tx.TableSearchFilter,width:60},{id:"admins",Header:"Admins",accessor:"admins",Cell:pV,disableSortBy:!0,Filter:()=>e,filterOrder:1,width:30,minWidth:110,maxWidth:110,centerContent:!0},{id:"project_count",Header:"Projects",accessor:"project_count",Cell:pH,disableFilters:!0,centerContent:!0,width:30},{id:"member_count",Header:"Members",accessor:"member_count",Cell:pH,disableFilters:!0,centerContent:!0,width:30},{id:"updated_at",Header:"Last Edit",accessor:"updated_at",Cell:({value:e})=>e?ty.createElement(cm.f,{date:e}):null,disableFilters:!0,centerContent:!0,width:30}],pK=({value:e,onChange:t})=>ty.createElement(tg.Select,{"aria-label":"Team Table Filter",triggerTextPrefix:"Filter By: ",value:e||"all",onChange:e=>t(e),options:[{value:"all",label:"All"},{value:"mine",label:"My Teams"}]}),pJ={all:{},mine:{my_teams:!0}},pY=(0,ak.aZ)(function({workspace:e}){let{getScrollToRowId:t}=lx(),a=t(lj.sJ.teamsTable),r={...a&&{scrollTo:a}};return ty.createElement(tx.TableProvider,{defaultValues:{...r}},ty.createElement(pX,{workspace:e}))}),pX=(0,ak.aZ)(function({workspace:e}){let{success:t,warning:a}=(0,tF.AO)(),{jwt:r}=(0,tF.hD)(),{id:n,isOpen:o}=lU(),{setIsOpen:l,setTeam:i}=lN(),{canIOnTeam:s}=(0,tF.C$)(),c=pG(),{canI:u}=(0,tF.C$)(),{openDialog:d,closeDialog:m}=(0,tx.useDialog)(),[,p]=pz(),{openFormDialog:g}=(0,tx.useFormDialog)(),h=pO(),{sortBy:f,filterBy:b,setFilter:y}=(0,tx.useTableContext)(),w=f[0]?`${f[0].desc?"-":""}${f[0].id}`:void 0,E=b.find(e=>"name"===e.id)?.value,v=b.find(e=>"admins"===e.id)?.value||"all",k=e=>{if(!e||o&&e.original.id===n){l(!1);return}i({id:e.original.id}),l(!0)},_=(0,ty.useMemo)(()=>({...pJ[v],workspace_id:(0,t8.encodeID)("wk",e.id),order_by:w,search:E,limit:50}),[v,e.id,w,E]),x=(0,tN.useListTeamsQuery)(r,_),I=Array.from(x.items.values()),S=nu(I,x),j=ty.useMemo(()=>[[{text:"Leave",showFn:e=>e.original&&s(e.original,"team_leave"),onClick:async e=>{d({title:"Leave Team?",message:"Are you sure you want to leave this team?",confirmText:"Leave Team",onConfirm:async()=>{e.original.id&&await h(e.original.id,e.original.name,async()=>{m(),t({message:'You are no longer a member of Team "'+e.original.name+'".'}),await x.refetch()})}})}}],[{text:"Delete",icon:["fas","trash"],showFn:e=>s(e.original,"team_delete"),onClick:async e=>{let a=ty.createElement("div",null,"Are you sure you want to delete this team from Stoplight? Team members may lose access to projects.");g(()=>ty.createElement(cf,{confirmExpectedValue:e.original.slug,warningText:a}),{title:"Confirm Delete Team?",saveButtonText:"Delete team",onSave:async()=>{e.original.id&&await c(e.original.id,e.original.name,async()=>{o&&n===e.original.id&&l(!1),t({message:'Team "'+e.original.slug+'" was removed.'}),await x.refetch()})}})}}]],[s,d,h,m,t,x,g,o,n,c,l]),C=[{text:"Delete",icon:["fas","trash"],dataTest:"bulk-delete-teams",showFn:()=>u(tU.E4M.WorkspaceGlobalAdmin),onClick:async e=>{let r=Object.keys(e.state.selectedRowIds);d({title:"Bulk Delete Teams",intent:"danger",message:"Are you sure you wish to delete the selected teams from the workspace?",confirmText:"Delete",onConfirm:async()=>{let i=await p(r),s=i.filter(e=>e.success).map(e=>e.teamId),c=s.length,u=i.filter(e=>!1===e.success).map(e=>e.teamId),d=u.length;for(let t of s)e?.toggleRowSelected(t,!1);for(let t of u)e?.toggleRowSelected(t,!0);o&&s.includes(n||"0")&&l(!1),d>0?a({message:`${c} ${tV()("team",c)} ${1===c?"was":"were"} successfully deleted. However, ${d} ${tV()("team",d)} encountered errors and could not be deleted.`}):t({message:`${c} ${tV()("team",c)} successfully deleted from workspace`}),m()}})}}];return ty.createElement(s5,null,ty.createElement(ns.A,S,({onItemsRendered:e,ref:t})=>ty.createElement(tx.BaseTable,{name:"teamsTable",columns:pQ(ty.createElement(pK,{value:v,onChange:e=>{y({id:"admins",value:e})}})),data:I,manualSortBy:!0,manualFilters:!0,virtualizedListRef:t,onItemsRendered:e,row:{rowActions:j,onRowClick:k},getRowId:e=>String(e.id),isRowPanelOpen:e=>o&&e.original.id===n,bulkSelectActions:C,autoResetSelectedRows:!1})))}),pZ=({team:e,isDisabled:t=!1,value:a,onChange:r})=>{let[n,o]=ty.useState(a),{canIOnTeam:l}=(0,tF.C$)(),i=l(e??{},"team_member_add"),s=l(e??{},"team_admin_add");return ty.createElement(tg.Select,{"aria-label":"role",value:n,isDisabled:!i||t,options:[{options:[{label:"Admin",value:"admin",isDisabled:!s},{label:"Member",value:"member"}]}],onChange:function(e){o(e),r&&r(e)}})},p0=({team:e,member:t})=>{let{currentUser:a}=(0,tF.hD)(),{canIOnTeam:r}=(0,tF.C$)(),{execute:n}=function(e,t){let{jwt:a}=(0,tF.hD)(),{mutateAsync:r}=(0,tN.useDeleteTeamMember)(a),{openDialog:n,closeDialog:o}=(0,tx.useDialog)(),{danger:l,success:i}=(0,tF.AO)(),{log:s}=(0,tF.pw)();return{execute:()=>{let a=t?.type==="member"?t?.data?.display_name:t?.data?.email;n({intent:"danger",title:"Remove Member",message:()=>ty.createElement(ty.Fragment,null,"Are you sure you want to remove ",ty.createElement(tg.Text,{fontWeight:"medium"},a)," from the"," ",ty.createElement(tg.Text,{fontWeight:"medium"},e?.name)," team? They might lose access to projects that have this team assigned."),confirmText:"Remove",onConfirm:async()=>{try{await r({teamId:e?.id??"",email:t?.data?.email??""}),i({message:`Removed ${a} from ${e?.name}`}),s({event:"user_removed_from_team"})}catch(r){let t=r;"object"==typeof r&&null!==r&&"message"in r&&(t=r.message),l({message:`Unable to remove ${a} from ${e?.name}: ${t}`})}finally{o()}}})}}}(e,t),{execute:o}=function(e,t){let{jwt:a}=(0,tF.hD)(),{danger:r,success:n}=(0,tF.AO)(),{mutateAsync:o}=(0,tN.useAddOrUpdateTeamMember)(a);return{execute:async a=>{if(!e||!t||a===t.data?.role)return;let l="member"===t.type?t.data?.display_name:t.data?.email;try{await o({team_id:e.id,email:t.data?.email,role:a}),n({message:`${l} is now ${(0,th.capitalize)(a)}`})}catch(t){let e=t;"object"==typeof t&&null!==t&&"message"in t&&(e=t.message),r({message:`Unable to update ${l} role to ${(0,th.capitalize)(a)}: ${e}`})}}}}(e,t),l="member"===t.type&&(0,t8.safelyDecodeID)(t.data?.user_id??"")===a?.id,i="invitation"===t.type,s=r(e,"team_member_add"),c=r(e,"team_member_delete")&&!l&&!i,u=r(e,"team_admin_add"),d=!l&&!i&&(s||c||u),m=[tU.l2p.Viewer,tU.l2p.Guest].includes(t.data?.workspace_role),p=[];m?p.push({label:"Member",value:"member"}):(p.push({label:"Admin",value:"admin",isDisabled:!u}),p.push({label:"Member",value:"member",isDisabled:!d}));let g=[];return c&&g.push({options:[{label:"Remove Member",onPress:n}]}),ty.createElement(tg.Flex,{alignItems:"center"},t.data?.role==="admin"?ty.createElement(tg.Icon,{icon:["fal","shield"]}):ty.createElement(tg.Box,{w:3}),ty.createElement(tg.Select,{"aria-label":"role",value:t.data?.role,isDisabled:!(d||c),w:tm.GI,options:[{options:p},...g],onChange:e=>o(e)}))},p1=({teamId:e})=>{let{isLoading:t,members:a,infiniteLoaderProps:r,team:n}=function(e){let{jwt:t}=(0,tF.hD)(),{isLoading:a,isError:r,data:n}=(0,tN.useGetTeam)(t,{team_id:e}),o=(0,tN.useListTeamMembersQuery)(t,{team_id:e}),{items:l,isLoading:i,isError:s}=o,c=nu(l,o);return{isLoading:a||i,isError:r||s,team:n,members:l,infiniteLoaderProps:c}}(e);if(t)return ty.createElement(tx.LoadingIndicator,null);let o=a.filter(e=>"member"===e.type).map(e=>e.data?.workspace_role).some(e=>nh(e));return ty.createElement(tg.Flex,{direction:"col",h:"full"},o&&ty.createElement(tg.Callout,{appearance:"outline",intent:"warning",mb:3},nB()),ty.createElement(tg.Box,{h:"full"},ty.createElement(ns.A,r,({onItemsRendered:e,ref:t})=>ty.createElement(nw,{heightAdjustment:12,items:a,onItemsRendered:e,virtualizedListRef:t,suffixRenderer:e=>ty.createElement(p0,{team:n,member:e})}))))};function p2({team:e,...t}){let{canIOnTeam:a,currentWorkspaceId:r}=(0,tF.C$)(),{jwt:n}=(0,tF.hD)(),{log:o}=(0,tF.pw)(),{mutateAsync:l}=(0,tN.useAddOrUpdateTeamMember)(n),{data:i,isLoading:s}=(0,tN.useListTeamAssignableMembersQuery)(n,{team_id:String(e.id)}),c=ty.useMemo(()=>{let e=[];for(let t of i?.items||[])t.data&&"invitation"===t.type?e.push(rT(t.data)):t.data&&"member"===t.type&&e.push(rD(t.data));return e},[i?.items]),[u,d]=ty.useState("member"),m=a(e,"team_user_add"),p=async t=>{for(let a of t.map(t=>({requiresInvite:rA(t),params:{team_id:String(e.id),email:rF(t),role:u}})))await l(a.params),o({event:"user_added_to_team",payload:{requires_invite:a.requiresInvite,role:a.params.role,workspace_id:r}})},g=ty.createElement(pZ,{team:e,onChange:d,value:u});return ty.createElement(tg.Flex,{...t,flexDirection:"col",h:"full"},ty.createElement(tg.VStack,{spacing:3,h:"full"},m?ty.createElement(r5,{isDisabled:!m,availableMembersLoading:s,availableMembers:c||[],roleSelector:g,workspaceRole:tU.l2p.Maker,onAdd:p,onAddLoading:!1}):null,ty.createElement(p1,{teamId:String(e.id)})))}let p4=(0,ak.ss)(function({teamId:e}){let{jwt:t}=(0,tF.hD)(),{data:a,isFetched:r}=(0,tN.useGetTeam)(t,{team_id:e});return ty.createElement(tg.Box,{h:"full",px:2,pt:4},r&&a?ty.createElement(p2,{team:a}):ty.createElement(tx.LoadingIndicator,null))}),p3=({teamId:e})=>{let{jwt:t}=(0,tF.hD)(),{data:a,isFetched:r}=(0,tN.useGetTeam)(t,{team_id:e});return ty.createElement(tg.Box,{h:"full",px:2,pt:4},r&&a?ty.createElement(tg.VStack,{spacing:6,align:"stretch",w:"full",divider:!0,h:"full"},ty.createElement(tg.Box,{px:2.5},ty.createElement(p5,{team:a})),ty.createElement(tg.Box,{px:2.5},ty.createElement(p8,{team:a})),ty.createElement(tg.Box,{px:2.5,h:"full"},ty.createElement(p6,{team:a}))):ty.createElement(tx.LoadingIndicator,null))},p5=({team:e})=>{let{canIOnTeam:t}=(0,tF.C$)(),a=pO(),{openDialog:r,closeDialog:n}=(0,tx.useDialog)(),{success:o}=(0,tF.AO)();return ty.createElement(tg.Box,null,ty.createElement(ds,{title:"Team",name:e.name||"",description:e.description,iconName:e.presentation?.icon,iconColor:e.presentation?.icon_color}),t(e,"team_leave")&&ty.createElement(tg.Button,{mt:3,onPress:()=>r({title:"Leave Team?",message:"Are you sure you want to leave this team?",confirmText:"Leave Team",onConfirm:async()=>{e.id&&await a(e.id,e.name,()=>{n(),o({message:'You are no longer a member of Team "'+e.name+'".'})})}})},"Leave Team"))},p8=({team:e})=>ty.createElement(tg.Box,{"data-test":"admins-section"},ty.createElement(nd,{meta:`(${e.admins.length})`,dataTestId:"team-admins-section-title"},"Team Admins"),ty.createElement(dH,{items:[...e.admins]})),p6=({team:e})=>ty.createElement(tg.Flex,{h:"full",direction:"col"},ty.createElement(nd,{meta:`(${e.projects.length})`,dataTestId:"team-projects-section-title"},"Projects"),ty.createElement(tg.Box,{flex:1},e.projects.length>0?ty.createElement(nw,{"data-test":"team-projects",heightAdjustment:12,items:e.projects.map(e=>({type:"project",data:e})),suffixRenderer:e=>ty.createElement(tg.Text,{fontWeight:"medium"},(0,th.capitalize)(e.data.role)),w:"full"}):ty.createElement(tg.Text,{color:"light"},"This team hasnt been assigned to any projects yet"))),p7=()=>{let{register:e,watch:t,setValue:a,control:r}=(0,t5.xW)(),n=t("icon_color")||r._defaultValues.icon_color;return ty.createElement(tg.Box,null,ty.createElement(lp,{label:"Icon Name",autoFocus:!0,helperText:ty.createElement(ty.Fragment,null,"Give your team a little flair - pick a"," ",ty.createElement("a",{href:"https://fontawesome.com/icons",target:"_blank",rel:"noopener noreferrer"},"FontAwesome icon")),icon:ty.createElement(tg.Avatar,{icon:["fad",t("icon")],fg:n,ml:-1}),...e("icon")}),ty.createElement(tg.Box,{mt:5},ty.createElement(rr,{htmlFor:"icon_color"},"Icon Color"),ty.createElement(dw,{name:"icon_color",color:n||"",defaultColor:n||"",onChange:e=>a("icon_color",e,{shouldDirty:!0})}),ty.createElement(tg.Text,{color:"muted",size:"sm"},"Pick a color in hex format, for example #2ea44e.")))},p9=()=>{let{register:e}=(0,t5.xW)();return ty.createElement(tg.Box,null,ty.createElement(lp,{textarea:!0,label:"Team Description",autoFocus:!0,...e("description",{maxLength:{value:300,message:"Must be no more than 300 characters"}})}))},ge=()=>{let{register:e}=(0,t5.xW)();return ty.createElement(tg.Box,null,ty.createElement(lp,{label:"Team Name",autoFocus:!0,...e("name",{required:!0,minLength:1,maxLength:{value:100,message:"Must be no more than 100 characters"}})}))},gt=(0,ak.ss)(function({team:e}){(0,a6.e)("team_settings");let{canIOnTeam:t}=(0,tF.C$)(),a=!t(e,"team_settings_update"),r=t(e,"team_delete"),n=a?"Heads up, you'll need write access to the team in order to change these settings.":void 0;return ty.createElement(ty.Fragment,null,ty.createElement(tg.Box,tg.flexProps,ty.createElement(tg.VStack,{spacing:6},n&&ty.createElement(tg.Box,{px:2},ty.createElement(tg.Box,tg.flexProps,ty.createElement(tg.Callout,{intent:"warning"},n))),ty.createElement(({nameLabel:t,avatarLabel:r,isPanelTab:n,hasDivider:o})=>ty.createElement(ty.Fragment,null,ty.createElement(ga,{team:e,readOnly:a,label:t,isPanelTab:n,hasDivider:o}),ty.createElement(gr,{team:e,readOnly:a,isPanelTab:n,hasDivider:o}),ty.createElement(gn,{team:e,readOnly:a,label:r,isPanelTab:n,hasDivider:o})),{nameLabel:"Team Name",visibilityLabel:"Team Visibility",avatarLabel:"Team Avatar",isPanelTab:!0,hasDivider:!0}),r&&ty.createElement(tg.Box,{py:5,px:2.5},ty.createElement(tg.Box,tg.flexProps,ty.createElement(db,{title:"Danger Zone",isDangerZone:!0},ty.createElement(go,{team:e,isPanelTab:!1,hasDivider:!1})))))))}),ga=({team:e,readOnly:t,label:a,isPanelTab:r,hasDivider:n})=>{let{state:o,effects:l}=(0,tB.U8)(),{openFormDialog:i}=(0,tx.useFormDialog)(),s=(0,tN.useUpdateTeam)(o.auth.jwt);return ty.createElement(ty.Fragment,null,ty.createElement(dm,{type:"dialog",label:a,isPanelTab:r,hasDivider:n,hint:"The display name for this team",isDisabled:t,onClick:()=>i(ge,{title:"Edit Team Name",defaultValues:{name:e.name},onSave:async({name:t})=>{try{await s.mutateAsync({team_id:String(e.id),name:t}),l.notifications.success({message:"Team Name updated"})}catch(e){if(e.type&&"CONFLICT"===e.type)throw new tx.FormFieldError("name",e.message,e.type);throw e}}})}))},gr=({team:e,readOnly:t,isPanelTab:a,hasDivider:r})=>{let{state:n,effects:o}=(0,tB.U8)(),{openFormDialog:l}=(0,tx.useFormDialog)(),i=(0,tN.useUpdateTeam)(n.auth.jwt);return ty.createElement(dm,{type:"dialog",label:"Description",isPanelTab:a,hasDivider:r,hint:"The purpose of this team",isDisabled:t,onClick:()=>l(p9,{title:"Edit Team Description",defaultValues:{description:e.description},onSave:async({description:t})=>{await i.mutateAsync({team_id:String(e.id),description:t}),o.notifications.success({message:"Team Description updated"})}})})},gn=({team:e,readOnly:t,label:a,isPanelTab:r,hasDivider:n})=>{let{state:o,effects:l}=(0,tB.U8)(),{openFormDialog:i}=(0,tx.useFormDialog)(),s=(0,tN.useUpdateTeam)(o.auth.jwt);return ty.createElement(dm,{type:"dialog",label:a,isPanelTab:r,hasDivider:n,hint:"Customize this team's avatar icon and color",isDisabled:t,onClick:()=>i(p7,{size:"sm",title:"Edit Team Avatar",defaultValues:{icon:e.presentation?.icon,icon_color:e.presentation?.icon_color},onSave:async({icon:t,icon_color:a})=>{await s.mutateAsync({team_id:String(e.id),presentation:{icon:t,icon_color:a}}),l.notifications.success({message:"Team Avatar updated"})}})})},go=({team:e,isPanelTab:t,hasDivider:a})=>{let{actions:r,effects:n}=(0,tB.U8)(),{openFormDialog:o}=(0,tx.useFormDialog)(),l=pG(),i=ty.createElement("p",null,"This action will permanently remove the team and disassociate all projects and users. Note that projects will"," ",ty.createElement("strong",null,"not")," be deleted, however users may lose their access.");return ty.createElement(dm,{type:"dialog",label:"Delete Team",isPanelTab:t,hasDivider:a,hint:i,onClick:()=>o(()=>ty.createElement(cf,{confirmExpectedValue:e.name,warningText:i}),{title:"Delete Team?",saveButtonText:"Delete",onSave:async()=>{await l(String(e.id),e.name,()=>{n.notifications.success({message:"Team has been deleted"}),r.teamDetails.setIsOpen(!1)})}})})},gl=(0,ak.ss)(function({teamId:e}){let{jwt:t}=(0,tF.hD)(),{data:a,isFetched:r}=(0,tN.useGetTeam)(t,{team_id:e});return ty.createElement(tg.Box,{h:"full",px:2,pt:4},r&&a?ty.createElement(tg.VStack,{spacing:6,align:"stretch",w:"full",h:"full"},ty.createElement(tg.Flex,{pos:"relative",overflowY:"auto",h:"full"},ty.createElement(gt,{team:a,path:"settings"}))):ty.createElement(tx.LoadingIndicator,null))});function gi({id:e,...t}){let{jwt:a}=(0,tF.hD)(),{data:r,isFetched:n,error:o}=(0,tN.useGetTeam)(a,{team_id:e}),{canIOnTeam:l,canI:i}=(0,tF.C$)(),{setIsOpen:s}=lN();if(!n)return ty.createElement(tx.LoadingIndicator,null);if(!r){if(!o)return null;{let e=404===o.code?"Team Not Found":o.message;return ty.createElement(rd.m,{title:e})}}let c=[{panel:ty.createElement(p3,{teamId:e}),title:"Overview",visible:!0},{panel:ty.createElement(p4,{teamId:e}),title:"Members",visible:i(tU.E4M.WorkspaceTeamsView)},{panel:ty.createElement(gl,{teamId:e}),title:"Settings",visible:l(r,"team_view")}];return ty.createElement(u4,{tabs:c,dismissPanel:()=>s(!1),...t})}let gs=(0,ak.ss)(function(){(0,a6.e)("teams");let{isOpen:e,id:t}=lU(),{hasFeature:a,featureRequiresUpgrade:r}=(0,tF._m)(),n=a(tU.BAf.Teams),o=r(tU.BAf.Teams);return ty.createElement(tg.Flex,{as:"main",h:"full"},n?ty.createElement(ty.Fragment,null,ty.createElement(tg.Flex,{flexGrow:!0,flexDirection:"col"},ty.createElement(tg.Box,null,o&&ty.createElement(gc,null)),ty.createElement(pY,null)),e&&t&&ty.createElement(tg.Flex,{className:"sl-details-panel","data-test":"detail-panel"},ty.createElement(gi,{id:t}))):ty.createElement(ca,{feature:tU.BAf.Teams,withImageFade:!1,imageStyle:{width:"auto"}}))});function gc(){let{showFeatureDialog:e}=(0,tF.L3)(),{getFeatureMaxUsage:t}=(0,tF._m)(),a=t(tU.BAf.Teams);return ty.createElement(tg.Callout,{mx:4,mt:4,w:"auto",intent:"warning",appearance:"outline",heading:"Team Limit Reached",actions:ty.createElement(tg.Button,{size:"sm",key:"upgrade",onPress:()=>e(tU.BAf.Teams)},"Upgrade")},"You have reached your team limit of ",a,". Upgrade your plan to create more teams.")}let gu=(0,ak.ss)((0,ak.BZ)((0,ak.aZ)(function(){let{state:e}=(0,tB.U8)(),{isResponsiveLayoutEnabled:t}=(0,a_.s)();return e.workspaces.subscribedToMyWorkspace?ty.createElement(rb.default,null,ty.createElement(tg.Flex,{flexDirection:"col",w:"full",minH:"full"},!t&&ty.createElement(lV,null),ty.createElement(tg.Box,{flex:1},ty.createElement(tA.Routes,null,e.workspaces.canI(tU.E4M.WorkspaceSettingsRead)?ty.createElement(tA.Route,{path:"settings",element:ty.createElement(pL,null)}):ty.createElement(tA.Route,{path:"settings",element:ty.createElement(gm,null)}),e.workspaces.canI(tU.E4M.WorkspaceMembersRead)?ty.createElement(tA.Route,{path:"members",element:ty.createElement(u0,null)}):ty.createElement(tA.Route,{path:"members",element:ty.createElement(gm,null)}),e.workspaces.canI(tU.E4M.WorkspaceProjectsView)?ty.createElement(tA.Route,{path:"projects",element:ty.createElement(mn,null)}):ty.createElement(tA.Route,{path:"projects",element:ty.createElement(gm,null)}),e.workspaces.canI(tU.E4M.WorkspaceTeamsView)?ty.createElement(tA.Route,{path:"teams",element:ty.createElement(gs,null)}):ty.createElement(tA.Route,{path:"teams",element:ty.createElement(gm,null)}),e.workspaces.canI(tU.E4M.WorkspaceActivityRead)?ty.createElement(tA.Route,{path:"activity",element:ty.createElement(cd,null)}):ty.createElement(tA.Route,{path:"activity",element:ty.createElement(gm,null)}),e.workspaces.canI(tU.E4M.WorkspaceBilling)?ty.createElement(tA.Route,{path:"billing/*",element:ty.createElement(cJ,null)}):ty.createElement(tA.Route,{path:"billing",element:ty.createElement(gm,null)}),e.workspaces.canI(tU.E4M.WorkspaceAutomationLogsView)?ty.createElement(tA.Route,{path:"automation",element:ty.createElement(ch,null)}):ty.createElement(tA.Route,{path:"automation",element:ty.createElement(gm,null)}),e.flags.isFlagEnabled("ssg_disabled")?null:e.workspaces.canI(tU.E4M.WorkspaceDefaultStyleGuidesCreate)?ty.createElement(tA.Route,{path:"governance",element:ty.createElement(uv,null)}):ty.createElement(tA.Route,{path:"governance",element:ty.createElement(gm,null)}),ty.createElement(tA.Route,{path:"legacy-migration/:legacyPlatform",element:ty.createElement(uS,null)}),ty.createElement(tA.Route,{path:"*",element:ty.createElement(gd,null)}))))):ty.createElement(oK.P,null,ty.createElement(tg.Box,{p:20,color:"muted"},"Loading..."))}))),gd=(0,ak.ss)(function(){return ty.createElement(tA.Navigate,{to:"/",replace:!0})}),gm=(0,ak.ss)(function(){return ty.createElement(s5,null,ty.createElement(s3,{className:"h-full",title:"Permission Denied",description:"Contact the Workspace administrators for access."}))});var gp=a(44718),gg=a(83794),gh=a(79772),gf=a.n(gh);let gb={highlighter:e=>ty.createElement("em",null,e[0])},gy=(e,t,a)=>{let r=ty.useMemo(()=>({...gb,...a}),[a]);return ty.useMemo(()=>{let a;let n=[],o=0,l=t instanceof RegExp?t:RegExp(t,"gi");if("".match(l))return[e];for(l.lastIndex=0;a=l.exec(e);){let t=e.slice(o,a.index);n.push(t);let i=r.highlighter(a);if((0,ty.isValidElement)(i)?n.push(ty.cloneElement(i,{key:a.index})):n.push(i),o=a.index+a[0].length,!l.global)break}let i=e.slice(o);return n.push(i),n.filter(th.identity)},[e,t,r])},gw=/<em>(.*?)<\/em>/g,gE={highlighter:e=>ty.createElement("em",{style:{backgroundColor:"yellow"}},e[1])};var gv=a(41406),gk=a(94169);function g_(){let{state:e}=(0,tB.U8)(),t=e.notifications.banner;return ty.createElement(tg.Flex,{alignItems:"center",pr:10,borderB:2,borderColor:"light",mt:t?12:void 0},ty.createElement(gS,null),ty.createElement(gx,null),ty.createElement(gj,null))}function gx(){let{state:e,actions:t}=(0,tB.U8)(),a=e.explorer.nodeStarredFilter;return ty.createElement(tg.Tooltip,{renderTrigger:()=>ty.createElement(tg.Button,{color:a?"primary":void 0,icon:[a?"fas":"far","star"],appearance:"minimal",px:8,py:5,h:"full",borderR:!0,borderColor:"dark",border:0,onPress:()=>t.explorer.toggleNodeStarredFilter()})},"Filter to nodes that you have starred")}let gI=[gk.Z6.Article,gk.Z6.HttpService,gk.Z6.HttpOperation,gk.Z6.Model];function gS(){let{state:e,actions:t,effects:a}=(0,tB.U8)(),r=e.explorer.nodeTypeFilter;return ty.createElement(tg.Menu,{"aria-label":"Filter",renderTrigger:()=>ty.createElement(tg.Button,{icon:[r?"fas":"far","filter"],appearance:"minimal",px:8,py:5,h:"full",borderR:!0,borderColor:"dark",border:0}),items:[{title:"Filter",type:"group",children:gI.map(e=>({id:e,title:`${tm.Cp[e]}s`,icon:tm.cp[e],isActive:e===r,onPress:()=>{e!==r&&a.reporter.log({event:"explorer_node_type_filtered",payload:{node_type:e}}),t.explorer.toggleNodeTypeFilter(e)}}))}]})}function gj(){let{state:e,actions:t}=(0,tB.U8)();return ty.createElement(tg.Flex,{alignItems:"center",flex:1,px:8,color:"muted"},ty.createElement(tg.Icon,{icon:["far","magnifying-glass"]}),ty.createElement(tg.Box,{as:"input",outline:"none",pl:6,py:5,pr:12,h:"full",bg:"transparent",w:"full",fontSize:"lg",placeholder:"Search...",value:e.explorer.search.value,onChange:e=>t.explorer.search(e.target.value),autoFocus:!0}))}let gC={project:120},gP={article:["fad","book"],http_service:["fad","cloud"],model:["fad","cube"]},gA={article:"blue",http_service:"purple",model:"orange"},gB={get:"green",post:"blue",put:"purple",patch:"purple",delete:"red",head:"gray",options:"gray",trace:"gray"},gD=(0,tS.withErrorBoundary)(function({nodeSlug:e}){let{state:t,actions:a}=(0,tB.U8)(),{nodeStarredFilter:r,treeStore:n,nodeTypeFilter:o}=t.explorer,l=t.workspaces.currentWorkspaceId,i=t.auth.currentUser?.id,s=t.explorer.search.query,c=(0,tA.useNavigate)(),u=(0,tA.useLocation)(),[d,m]=(0,tU.DXd)({pause:!r,variables:{workspaceId:l,search:s,starredByUserId:i,...o&&{snapshotTypes:`{${o}}`}}}),[p,g]=(0,tU.ohD)({pause:r,variables:{workspaceId:l,search:s,...o&&{snapshotTypes:`{${o}}`}}}),h=r?m:g,{data:f,fetching:b}=r?d:p,y=f?.sl_sl_search_nodes;ty.useEffect(()=>a.explorer.updateTreeNodes({data:y}),[y]),ty.useEffect(()=>{h()},[t.explorer.touchQueriesCounter,h]);let w=ty.useCallback((e,t)=>{c(e,t)},[c]);return ty.useEffect(()=>{if(!b){if(window.history.state?.noScroll){let e=setTimeout(()=>{w(window.location.href,{replace:!0,state:{}})},100);return()=>clearTimeout(e)}if(void 0!==e)return(0,gg.when)(()=>n.tree.versionCounter>0,()=>{let t=n.tree.findInWholeTree(t=>(0,gv.Yr)(t.metadata)&&t.metadata.nodeSlug===e),a=t?.parent;void 0!==t&&(0,gp.isParentNode)(a)&&requestAnimationFrame(()=>{n.toggleExpand(a,!0),n.instanceRef.current?.scrollToItem(n.tree.indexOf(t),"center")})})}},[t.router.pathname,u.pathname,n,b,e,w]),ty.createElement(gT,{fetching:b,hasResults:!!y?.length,showRowSummary:!!t.explorer.search.value})}),gT=ty.memo(({fetching:e,hasResults:t,showRowSummary:a})=>{let r;return r||t||e||(r=ty.createElement(rd.m,{title:"No Results"},"Try updating the active search and/or filters.")),r||t||!e||(r=ty.createElement(tx.LoadingIndicator,null)),r||(r=ty.createElement(rb.default,null,ty.createElement(gF,{showRowSummary:a}))),ty.createElement(tg.Flex,{flexDirection:"col",pos:"absolute",pin:!0,overflowX:"hidden",overflowY:"hidden"},ty.createElement(g_,null),ty.createElement(tg.Flex,{flex:1},r))},gf()),gF=({showRowSummary:e})=>{let{state:t}=(0,tB.U8)();return ty.createElement(gp.TreeList,{className:"flex-1",draggable:!1,store:t.explorer.treeStore,innerPadding:10,interactive:!1,onScroll:e=>{t.explorer.treeStore.uiState.scrollOffset=e.scrollOffset},initialScrollOffset:t.explorer.treeStore.uiState.scrollOffset,rowHeight:(e,t)=>(e.type?gC[e.type]:45)||45,rowRenderer:(t,{isExpanded:a})=>ty.createElement(g$,{node:t,isExpandable:(0,gp.isParentNode)(t),isExpanded:a,showRowSummary:e})})},g$=({node:e,isExpandable:t,isExpanded:a,showRowSummary:r})=>{let n,o,l,i,s;let c=(0,gp.useNodeCallback)(gp.TreeListEvents.NodeCaretClick,e);e.type&&(n=gP[e.type],o=gA[e.type]);let u=(0,gp.isParentNode)(e),d=gp.Tree.getLevel(e),m=e.metadata;if((0,gv.rG)(m,e))s=ty.createElement(gM,{node:e});else if((0,gv.$4)(m)){let t=gB[m.method];s=ty.createElement(tg.Flex,{"data-test":"node-row",alignItems:"center",textOverflow:"truncate"},ty.createElement(tg.Box,{textAlign:"center",color:"canvas",rounded:!0,p:1,fontSize:"xs",textTransform:"uppercase",mr:2,className:`bg-${t}`},m.method),ty.createElement(tg.Box,{as:gL,markup:e.name,whitespace:"nowrap"}),r&&m.summary&&m.summary!==e.name?ty.createElement(tg.Box,{as:gL,markup:m.summary,textOverflow:"truncate",ml:4,pr:4,color:"light"}):null)}else{l=t&&ty.createElement(gR,{onClick:c,expanded:a,node:e}),i=ty.createElement(gW,{icon:n,color:o});let d=(0,gv.Yr)(m)?m.summary:void 0;s=ty.createElement(tg.Flex,{alignItems:"center",textOverflow:"truncate",fontWeight:u?"semibold":void 0,"data-test":"node-row"},ty.createElement(tg.Box,{as:gL,markup:e.name,whitespace:"nowrap"}),r&&d&&d!==e.name?ty.createElement(tg.Box,{as:gL,markup:d,textOverflow:"truncate",ml:4,pr:4,fontWeight:"normal",color:"light"}):null)}if(!s)return null;let p=ty.createElement(ty.Fragment,null,l,i,s);return(0,gv.Yr)(e.metadata)?ty.createElement(gU,{nodeType:e.metadata.nodeType,nodeSlug:e.metadata.nodeSlug,projectSlug:e.metadata.projectSlug,level:d},p):ty.createElement(tg.Flex,{...gN(d),cursor:l&&u?"pointer":void 0,bg:{default:"project"!==e.type?"canvas-50":void 0,hover:l&&u?"canvas":void 0}},p)};function gN(e){return{alignItems:"center",pos:"absolute",pin:!0,border:!0,borderColor:"transparent",my:.5,pl:3,left:4*Math.max(0,e),right:4,rounded:e>0?"sm":void 0}}let gU=({nodeType:e,nodeSlug:t,projectSlug:a,level:r,children:n})=>{let{nodeSlug:o,projectSlug:l}=(0,tA.useParams)(),{effects:i}=(0,tB.U8)(),s=o===t&&l===a;return ty.createElement(tg.Box,{as:tk.Link,to:s?"/explore":`/explore/${a}/${t}`,display:"flex",...gN(r),bg:{default:s?"canvas":"canvas-50",hover:s?"canvas-50":"canvas"},boxShadow:{default:s?"md":void 0,hover:"md"},borderColor:s?"primary":"transparent",state:{noScroll:!0},onClick:()=>{s||i.reporter.log({event:"explorer_node_selected",payload:{node_type:e}})}},n)},gM=({node:e})=>{let{state:t}=(0,tB.U8)(),a="children"in e&&t.explorer.treeStore.isFragmentCollapsed(e);return ty.createElement(tg.Flex,{alignItems:"center",mt:4,pl:4,w:"full"},ty.createElement(tg.Box,{as:tk.Link,to:`/docs/${e.metadata?.projectSlug}`,display:"flex",alignItems:"center",flex:1,className:"reset group"},ty.createElement(tg.Box,{as:tg.Icon,color:"light",fontSize:"5xl",icon:["fad",(0,rw.wN)(e.metadata)],mr:4,mt:"-px"}),ty.createElement(tg.Box,null,ty.createElement(tg.Box,{fontWeight:"bold",mt:"-px",fontSize:"xl",className:"group-hover:text-primary"},e.name),e.metadata?.description&&ty.createElement(tg.Box,{color:"muted",fontSize:"sm"},e.metadata.description))),ty.createElement(tg.Tooltip,{renderTrigger:()=>ty.createElement(tg.Button,{"data-test":"explorer-expand-all-nodes-btn",size:"sm",icon:["fas",a?"expand-alt":"compress-alt"],opacity:70,onPress:()=>{"children"in e&&t.explorer.treeStore.toggleExpandFragment(e,a)}})},a?"Expand":"Collapse"," all nodes"))},gR=({expanded:e,node:t})=>{let a=null;if((0,gp.isParentNode)(t)){let t=e?["far","chevron-down"]:["far","chevron-right"];t&&(a=ty.createElement(tg.Icon,{icon:t,className:"fa-fw"}))}return ty.createElement(tg.Box,{as:"span",color:"light",flexShrink:0,w:a?8:void 0,ml:a?-1:void 0},a)},gW=({icon:e,color:t})=>e?ty.createElement(tg.Box,{as:"span",fontSize:"lg",mt:"-px",mr:3,color:t?void 0:"light",className:t?`text-${t}`:void 0},ty.createElement(tg.Icon,{icon:e})):null,gL=({markup:e,className:t})=>{let a=gy(e,gw,gE);return ty.createElement(tg.Box,{className:t3()("sl-search-highlight",t),title:e},a)};var gG=a(90407);let gO=ty.lazy(()=>Promise.all([a.e(6354),a.e(7694),a.e(458)]).then(a.bind(a,29690))),gz=(0,ak.ss)((0,ak.aZ)((0,ak.BZ)(function(){(0,a6.e)("explorer");let{"*":e}=(0,tA.useParams)();return ty.createElement(tg.Flex,{pos:"absolute",pin:!0,overflowX:"hidden",overflowY:"hidden",bg:"canvas-100"},ty.createElement(rb.default,null,ty.createElement(tg.Box,{flex:1,minH:"screen",pos:"relative"},ty.createElement(tA.Routes,null,ty.createElement(tA.Route,{path:"/:projectSlug/*",element:ty.createElement(gq,null)}),ty.createElement(tA.Route,{path:"/*",element:ty.createElement(gq,null)})))),""!==e&&ty.createElement(tg.Box,{bg:"canvas",w:"1/2"},ty.createElement(tA.Routes,null,ty.createElement(tA.Route,{path:":projectSlug/nodes/*",element:ty.createElement(gH,null)}),ty.createElement(tA.Route,{path:":projectSlug/*",element:ty.createElement(gV,null)}))))}),tU.E4M.WorkspaceExplorerView)),gq=(0,ak.ss)(function(){let{projectSlug:e,"*":t}=(0,tA.useParams)();return console.log("Results --",e,t),ty.createElement(gD,{nodeSlug:t})}),gV=(0,ak.ss)(function(){let{projectSlug:e,"*":t}=(0,tA.useParams)();return(console.log("PanelContent --",e,t),e&&t)?ty.createElement(rb.default,null,ty.createElement(ty.Suspense,{fallback:ty.createElement(tx.DelayedLoadingSpinner,null)},ty.createElement(gO,{projectSlug:e,nodeSlug:t}))):null}),gH=(0,ak.ss)(function(){let{projectSlug:e,"*":t}=(0,tA.useParams)(),{state:a}=(0,tB.U8)(),r=a.workspaces.currentWorkspaceId,[{data:n,fetching:o}]=(0,tU.jZF)({variables:{workspaceId:r,projectSlug:e,uri:`/${t}`},pause:!r||!e||!t});if(o)return null;let l=n?.branchNodes?n.branchNodes[0]:void 0;if(!l)return ty.createElement(tA.Navigate,{to:"/explore"});let i=(0,gG.Ln)({type:l.snapshot.type,nodeId:l.nodeId,stableId:l.stable_id,name:l.name,slug:l.slug});return ty.createElement(tA.Navigate,{to:`/explore/${e}/${i}`})});var gQ=a(71571),gK=a(69738);let gJ=(0,ak.ss)((0,ak.aZ)(function({workspace:e}){(0,u2.c)({event:"workspace_opened_from_daily_digest"},"daily_summary");let{isResponsiveLayoutEnabled:t}=(0,a_.s)();return ty.createElement(tg.Box,{minH:"screen",bg:"canvas",w:"full"},!t&&ty.createElement(lV,null),ty.createElement(tg.NoSsr,null,ty.createElement(tg.Box,{as:gQ.Gd,px:t?8:24,py:20,mx:"auto",markdown:e.homeContent||ph,style:{maxWidth:1300},parseOptions:{components:{a:gY,img:(0,gK.X)()}}})))})),gY=({href:e,children:t})=>e&&/^(http|#|mailto)/.test(e)?ty.createElement("a",{href:e,target:e.startsWith("#")?void 0:"_blank",rel:"noreferrer noopener"},t):ty.createElement(tk.Link,{to:e||""},t),gX=()=>{let[e,t]=ty.useState(!1),[a,r]=(0,nH.A)(["show_non_responsive_pages"]),{state:n}=(0,tB.U8)(),o=(0,tA.useNavigate)();return ty.useEffect(()=>{a.show_non_responsive_pages||t(!0)},[t,a.show_non_responsive_pages]),ty.createElement(ty.Fragment,null,e&&ty.createElement(tg.Box,{className:"sl-overlay",zIndex:50,bg:"canvas","data-test":"non-responsive-screen-warning",justifyContent:"center"},ty.createElement(tg.Flex,{justifyContent:"center",mt:32,m:12},ty.createElement(tg.VStack,{spacing:6},ty.createElement(tg.Box,{mx:"auto",mb:5},ty.createElement(tg.Box,{mt:-2,px:2},ty.createElement(tg.Icon,{icon:["fas","mobile-android-alt"],width:"1/2",size:"7x"})),ty.createElement(tg.Box,{pos:"absolute",mt:-24,ml:-8},ty.createElement(tg.Box,{mt:-4},ty.createElement(tg.Icon,{icon:["far","ban"],size:"10x",color:"red",style:{fontSize:"12em"}})))),ty.createElement(tg.Box,null,ty.createElement(tg.Box,null,ty.createElement(tg.Heading,{textAlign:"center",size:4,mx:"auto",fontWeight:"bold"},"This page is not mobile responsive.")),ty.createElement(tg.Paragraph,{lineHeight:"snug",mt:2,textAlign:"center",mx:"auto"},"Your experience with this feature would be better on desktop.")),ty.createElement(tg.Box,{mx:"auto"},ty.createElement(tg.Button,{"data-test":"non-responsive-screen-continue-button",onClick:()=>{t(!1);let e=n.router.workspaceSlug,o=new URL(n.router.serverHost).hostname.replace(e+".","").replace(/^https?:\/\//,"").replace(/:\d+$/,"");a.show_non_responsive_pages||r("show_non_responsive_pages",!0,{path:"/",domain:"."+o})},size:"sm"},"Continue Anyway")),ty.createElement(tg.Link,{"data-test":"non-responsive-screen-go-back-link",mx:"auto",onClick:()=>o(-1)},"Go Back")))))},gZ=(0,ak.ss)(function(){let{state:e}=(0,tB.U8)();return ty.createElement(rd.m,null,e.auth.isLoggedIn?"This page does not exist or you do not have sufficient permission":e.workspaces.currentWorkspace?.hideSignIn&&e.router.isCustomDomain?null:ty.createElement(ty.Fragment,null,"Are you a member of the workspace? ",ty.createElement(tk.Link,{to:"/auth"},"Login here")))});var g0=a(95453),g1=a(86774);function g2({projectId:e}){let{state:t}=(0,tB.U8)(),[{fetching:a,data:r}]=(0,tU.nzi)({variables:{workspaceId:t.workspaces.currentWorkspaceId,projectId:e},pollInterval:1e4});return ty.createElement("div",{"data-test":"webhook-events-section",className:"RaisedPageSection w-full"},ty.createElement(i3,{title:"Webhook Events",icon:["fas","broadcast-tower"]}),a&&!r&&ty.createElement(tj.Spinner,null),r?.sl_sl_task_log_status.map((e,t)=>ty.createElement(cp,{key:e.jobId,task:e,className:t>0?"mt-4":void 0})),r?.sl_sl_task_log_status.length===0&&ty.createElement("div",{className:"mt-10 italic ml-2 text-muted"},"No events to show here yet..."))}let g4=({projectId:e,onHasNodes:t})=>{let{jwt:a}=(0,tF.hD)(),{isSaaS:r}=(0,tF.y1)(),{appUrl:n}=(0,tF.ks)(),{data:o,isFetched:l}=(0,tN.useGetProject)(a,{projectId:e},{enabled:!!e,refetchInterval:5e3}),i=(0,tN.useGetProjectBranches)(a,{projectId:e},{refetchInterval:5e3}),s=(i.data?.items||[]).some(e=>e.node_counts.total_count>0),[{data:c}]=(0,tU.Mlz)({variables:{projectId:e}}),u=c?.project?.privateInfo?.ci_token,[d,m]=ty.useState(!1);return(ty.useEffect(()=>{!d&&s&&(m(!0),t())},[s,t]),l&&o&&!i.isLoading)?ty.createElement("div",{className:"flex-1 flex flex-col items-center justify-center py-20"},ty.createElement(tj.FAIcon,{icon:["fad","sparkles"],className:"text-6xl",style:{"--fa-primary-color":"blue","--fa-secondary-color":"blue"}}),ty.createElement("div",{className:"font-semibold text-gray-7 text-2xl mt-10"},g3(o)?"No Data Yet!":`${o.name} Setup`),g3(o)?ty.createElement(ty.Fragment,null,ty.createElement("div",{className:"text-gray-5 text-lg mt-2 mb-8 max-w-2xl text-center leading-relaxed"},"This project has not been published yet - publish it into your workspace to explore its API design files, documentation, dependencies, and track changes over time."),ty.createElement(tk.Link,{key:"studio",to:`/studio/${o.slug}`,className:"reset"},ty.createElement(tj.Button,{intent:"primary",icon:ty.createElement(tg.Icon,{icon:["fad",tm.qB.studio]})},"Open in Studio to Publish"))):!function(e){var t;return e?.type===tU.HWy.Vcs||null!=(t=e?.external_id)&&t.length>0}(o)?ty.createElement(ty.Fragment,null,ty.createElement("div",{className:"text-gray-5 text-lg mt-2 mb-16 max-w-2xl text-center leading-relaxed"},"This project has no data yet - push it into Stoplight to explore its API design files, documentation, dependencies, and track changes over time."),ty.createElement("div",{className:"max-w-5xl w-full"},ty.createElement(tj.Card,{elevation:tj.Elevation.ONE,className:"p-8"},ty.createElement("div",{className:"text-gray-7 mb-5 ml-2"},"Install nodejs if you do not already have it, open your terminal to the root of your project folder, and then run the following command:"),ty.createElement(tj.CodeViewer,{className:"px-4 py-3 border border-blue-2 rounded whitespace-normal leading-relaxed",value:function(e,t,a){let r=t?"":` --url ${a}`;return`npx @stoplight/cli@6 push --ci-token ${e||"INSUFFICIENT_PERMISSIONS"}${r}`}(u,r,n)})),ty.createElement("div",{className:"mt-12 flex"},ty.createElement("div",{className:"flex items-center flex-1 text-lg text-gray-6 ml-3"},ty.createElement(tj.FAIcon,{className:"fa-pulse mr-3",icon:["far","spinner"]}),ty.createElement("div",null,"Waiting for data...")),o?ty.createElement("div",null,ty.createElement(tk.Link,{to:`/settings/${o.slug}`,className:"reset"},ty.createElement(tj.Button,{outlined:!0,rightIcon:ty.createElement(tj.FAIcon,{icon:["fal","arrow-right"]})},"Project Settings"))):null))):ty.createElement("div",{className:"max-w-6xl mx-auto mt-24 w-full px-10"},ty.createElement(g2,{projectId:e}))):null};function g3(e){return e?.type===tU.HWy.Web||e?.type===tU.HWy.Local}let g5=ty.lazy(()=>a.e(971).then(a.bind(a,56976))),g8=ty.lazy(()=>a.e(9072).then(a.bind(a,95904))),g6=(0,ak.ss)((0,ak.aZ)(function(){let{projectSlug:e,branchSlug:t,"*":a}=(0,tA.useParams)(),{state:r,effects:n}=(0,tB.U8)(),o=(0,tA.useLocation)(),l=r.workspaces.currentWorkspaceId,[{data:i,fetching:s,error:c}]=(0,nR.w)({workspaceId:l,projectSlug:e});(0,nz.pO)(i);let{jwt:u}=(0,tF.hD)(),d=(0,tN.useGetProjectBranches)(u,{projectId:i?.id}),m=d.data?.items||[],{data:p,isFetched:g}=(0,tI.BL)({projectId:(0,t8.encodeID)("prj",i?.id||0),branchSlug:t}),h=function({workspaceId:e,projectSlug:t,projectFlavor:a,branchSlug:r,nodeSlug:n}){let o=(0,tF.gx)(),l=(0,tF.ks)(),i=n&&(0,gG.q7)(n)?(0,gG.cD)(n):null,s=!i&&n&&(0,gG.q7)(n)?n.split("-")[0]:null,[{data:c}]=(0,tU.zCc)({pause:tm.KJ||!e||!t||!i&&!s&&!n,variables:{projectSlug:t,workspaceId:e,nodeId:i||0,stableId:s||"",slug:n,branchSlug:r,includeBranchNode:!!r,includeDefaultBranchNode:!r},pollInterval:0}),u=r?c?.branchNodes?.[0]:c?.defaultBranchNodes?.[0];return a!==tU.$GR.StyleGuide&&void 0===u&&o.forceStatusCode(l.forcedStatusCode??404),u}({workspaceId:l,projectSlug:e,projectFlavor:i?.flavor,branchSlug:t,nodeSlug:a});if(!a&&g&&p?.items){let e=(0,tp.uq)(p.items);if(e)return ty.createElement(tA.Navigate,{to:`./${lJ(e.slug)}`,replace:!0})}let f=null;if(s||!r.metadata.dataBootstrapComplete||d.isLoading)f=ty.createElement(tx.DelayedLoadingSpinner,null);else if(c)f=ty.createElement(g1.e,{error:c});else if(i&&!m.length)f=ty.createElement(g4,{projectId:i.id,onHasNodes:()=>{n.notifications.success({message:"Data received! Bravo. Reloading..."}),window.location.reload()}});else if(i?.flavor===tU.$GR.StyleGuide)f=ty.createElement(ty.Suspense,{fallback:ty.createElement(tx.DelayedLoadingSpinner,null)},ty.createElement(g8,{projectId:i.id,projectName:i.name}));else if(i&&a){let r=m.find(e=>e.is_default);f=ty.createElement(ty.Suspense,{fallback:ty.createElement(tx.DelayedLoadingSpinner,null)},ty.createElement(g5,{projectId:i.id,projectSlug:e,projectName:i.name,nodeSlug:a,branchSlug:t,defaultBranchSlug:r?.slug??""}))}else i||(f=ty.createElement(rd.m,{title:"Project not found"},r.auth.isLoggedIn?"You might not have permission to view it, or it might not exist at all":r.workspaces.currentWorkspace?.hideSignIn&&r.router.isCustomDomain?null:ty.createElement(tg.Box,null,"Are you a member of the workspace?"," ",ty.createElement(tk.Link,{to:`/auth?r=${lJ(o.pathname??r.router.pathname)}`,style:{color:"#5753d7"},"data-test":"project-not-found-sign-in"},"Sign in"))));return ty.createElement(ty.Fragment,null,i&&ty.createElement(g0.R,{projectName:i.name,projectDescription:i.description||"",nodeName:h?.name,nodeSummary:h?.snapshot?.summary||""}),ty.createElement(tg.Flex,{direction:"col",w:"full",bg:"canvas-pure"},ty.createElement(rb.default,null,f)))}));function g7({text:e,copyText:t}){let{onCopy:a,hasCopied:r}=(0,tg.useClipboard)(t||e);return ty.createElement(tg.Tooltip,{renderTrigger:ty.createElement(tg.Flex,{w:"full",flex:1,alignItems:"center",cursor:"pointer",px:2,border:!0,bg:"canvas-100",onClick:a},ty.createElement(tg.Box,{flex:1,textOverflow:"truncate"},e),ty.createElement(tg.Button,{appearance:"minimal",icon:r?"check":["fas","clipboard"],onClick:a}))},r?"Copied":"Copy")}let g9=({row:{original:e}})=>ty.createElement(tg.Box,{flex:1,ml:3,overflowX:"hidden"},ty.createElement(tg.Box,{w:"full",textOverflow:"truncate"},e.email)),he=({row:{original:e}})=>e.invited?ty.createElement(tg.Box,{ml:3,textTransform:"capitalize"},ty.createElement(tg.Text,{color:"warning"},"Pending")):ty.createElement(uC,{roles:[{id:1,role:tU.l2p.Maker}],isRoleDisabled:e=>e!==tU.l2p.Maker}),ht=({row:{original:e}})=>e.invited?ty.createElement(uA,null,"Invited as"," ",ty.createElement(tg.Text,{color:"muted",textTransform:"capitalize"},e.invitedAs)," ","by ",`${e.invitedBy}`," ",ty.createElement(cm.f,{date:e.createdAt||""})):ty.createElement(tg.Box,{color:"muted",textOverflow:"truncate"},"Has not been invited"),ha=(0,ak.aZ)(function({workspace:e,projectId:t}){let{actions:a,effects:r,state:n}=(0,tB.U8)(),{canI:o,canIOnProject:l}=(0,tF.C$)(),{openDialog:i,closeDialog:s}=(0,tx.useDialog)(),{touchQueriesCounter:c}=(0,tF.Lf)(),u=(0,tF.hD)(),d=(0,tN.useUpdateProject)(u.jwt),{data:m}=(0,tN.useGetProject)(u.jwt,{projectId:(0,t8.safelyDecodeID)(t)}),{data:p,isFetched:g,refetch:h}=(0,tN.useListProjectContributors)(u.jwt,(0,t8.safelyDecodeID)(t)),[f,b]=uO({workspace:e}),[{},y]=(0,tN.useAddProjectMembers)(n.auth.jwt),{execute:w}=r0(e.id),{refresh:E}=(0,tN.useRefreshWorkspaceState)(e.id),{refetch:v,hasExceededLimit:k,message:_}=w(tU.l2p.Maker,[]),x=ty.useCallback(async e=>{try{await y(e),r.notifications.success({message:`${tV()("Invitation",e.length)} sent`})}catch(t){a.reporter.error({error:t,event:"workspace_invite_sent"}),r.notifications.danger({message:`Error adding ${tV()("member",e.length)} to project`})}},[y,r.notifications,a.reporter]),I=ty.useCallback(()=>{b(),v(),h(),E()},[b,v,h,E]);ty.useEffect(I,[c]);let S=((0,th.uniqBy)(p,"email")||[]).map(e=>{let t=f.data?.find(t=>t.email===e.email);return{email:e.email,role:e.project_invite_created?"pending":"Maker",invited:!!e.project_invite_created,invitationId:t?.id,invitedBy:t?.invitedBy?.username,invitedAs:t?.roleName?.toString(),createdAt:t?.createdAt}}),j=ty.useMemo(()=>[{id:"name",Header:()=>ty.createElement(tg.Box,{display:"inline-block",pl:3},"Name"),accessor:"name",Cell:g9,Filter:tx.TableSearchFilter,filter:(e,t,a)=>e.filter(e=>{let t=a.trim().toLowerCase();return -1!==(e.original.email||"").toLowerCase().indexOf(t)}),sortType:(e,t)=>{let a=e.original.email.toLowerCase(),r=t.original.email.toLowerCase();return a===r?0:a<r?-1:1},width:150},{id:"role",Header:()=>ty.createElement(tg.Box,{display:"inline-block",pl:3},"Role"),accessor:"role",Cell:he,filterOrder:1,width:50},{id:"notes",Header:"Notes",accessor:"notes",Cell:ht,disableFilters:!0,width:100}],[]),C=[{text:"Invite",showFn:()=>o(tU.E4M.WorkspaceMembersInvite),disabledFn:({original:e})=>k||e.invited,onClick:async({original:e})=>{window.confirm("Are you sure?")&&(await x([{email:e.email,projectId:(0,t8.encodeID)("prj",t),role:tU.M2u.Editor}]),I())}}],P=[{text:"Invite committers",dataTest:"bulk-invite_committers",icon:["fas","envelope"],showFn:()=>o(tU.E4M.WorkspaceMembersInvite)&&!k,onClick:async e=>{let a=e.selectedFlatRows.filter(e=>!e.original.invited).map(e=>e.original.email),r=w(tU.l2p.Maker,a.map(e=>({type:"email",data:e}))),n="";r.hasExceededLimit&&r.message?n=r.message:0===a.length&&(n="You have not selected any contributors without invitation. Please select contributors that have not yet been invited."),i({title:"Send invitations?",confirmText:"Invite",message:()=>ty.createElement(tg.Box,null,ty.createElement(tg.Text,null,`Do you want to send ${a.length} ${tV()("Invitation",a.length)}?`),ty.createElement(aa,{name:"role",messageColor:"warning",errors:{role:{message:n}}})),isDisabled:r.hasExceededLimit||0===a.length,onConfirm:async()=>{await x(a.map(e=>({email:e,projectId:(0,t8.encodeID)("prj",t),role:tU.M2u.Editor}))),s(),I()}})}}];return ty.createElement(i5,{"data-test":"project-committers-section",title:"Invite Git Committers to Project",icon:["fal","user-plus"],actions:ty.createElement(ty.Fragment,null,ty.createElement(tg.Button,{appearance:"minimal",icon:"arrows-rotate",mr:2,style:{color:"var(--color-primary)"},onClick:()=>{I()}},"Refresh Committers"),m&&l(m?.my_permissions,tU.Jg8.ProjectUpdate)&&ty.createElement(tj.Checkbox,{checked:!!m?.auto_invite_committers,onChange:async e=>{try{await d.mutateAsync({project_id:(0,t8.encodeID)("prj",t),auto_invite_committers:e.currentTarget.checked})}catch(t){let e=t.message||"Something went wrong, please try again";r.notifications.danger({message:e});return}},className:"mb-0"},ty.createElement("span",{style:{overflow:"hidden",whiteSpace:"nowrap"}},ty.createElement("span",{className:"text-gray-5 mr-2"},"Auto-Invite Future Committers"),ty.createElement(tj.Tooltip,{content:ty.createElement("div",{style:{maxWidth:400}},"Automatically invite committers as project members. This may impact the number of allowed users for your plan.")},ty.createElement(tj.FAIcon,{icon:"question-circle",className:"text-gray-5 ml-1"})))))},g&&ty.createElement(ty.Fragment,null,ty.createElement(tg.Box,{style:{height:`${60*Math.min(Math.max(S.length,1),6)+120}px`}},ty.createElement(tx.Table,{row:{rowActions:[C]},initialState:{sortBy:[{id:"name",asc:!0}]},columns:j,data:S,isLoading:!g,bulkSelectActions:P,noResultsMessage:ty.createElement(tg.Flex,{flexDirection:"col",pt:10,textAlign:"center",h:"full"},"No recent contributors to show...")})),k&&ty.createElement(aa,{name:"upgrade",messageColor:"warning",errors:{upgrade:{message:_}}})))}),hr=(0,ak.ss)((0,ak.BZ)(function({project:e,currentUser:t}){let{state:a}=(0,tB.U8)();(0,a6.e)("workspace_project_settings_automation_tab");let r=!a.workspaces.canIOnProject(e,tU.Jg8.ProjectAutomationLogsRead),n=a.workspaces.integrations?.find(t=>t.id===e.workspaceIntegrationId),o=t?.externalUsers.find(e=>e.workspaceIntegrationId===n?.id),l=a.flags.isFlagEnabled("auto_invite_committers");return ty.createElement(i6,null,r?ty.createElement(tj.Callout,{className:"mb-12",intent:"warning"},"Heads up, you'll need editor permission on this project in order to work with automation."):ty.createElement(hn,{project:e,integration:n,integrationUser:o}),!!n&&ty.createElement(g2,{projectId:e.id}),l&&e.type===tU.HWy.Vcs&&ty.createElement(ha,{projectId:e.id}))}));function hn(e){let{project:t,integration:a,integrationUser:r}=e,[{data:n}]=(0,tU.Mlz)({variables:{projectId:t.id}}),o=n?.project?.privateInfo?.ci_token;return ty.createElement(i5,{"data-test":"push-data-section",title:"Push data into Stoplight",icon:["fal","plug"]},t.type===tU.HWy.Vcs?ty.createElement(ho,{project:t,integration:a,integrationUser:r}):ty.createElement(hs,{ciToken:o}))}let ho=({project:e,integration:t,integrationUser:a})=>{let{state:r,effects:n}=(0,tB.U8)(),o=!r.workspaces.canI(tU.E4M.WorkspaceProjectsCreate),[{isCreating:l},i]=hi(e.id,t,a),{jwt:s}=(0,tF.hD)(),c=(0,tN.useGetProjectBranches)(s,{projectId:e?.id}),u=c.data?.items||[];if(!e||!t)return ty.createElement("div",{className:tj.Classes.FORM_GROUP},ty.createElement(tj.Callout,{intent:"warning"},"Webhooks are not supported on this project because it is not connected with a Git repository that is associated with an enabled workspace integration."));{let a=ty.createElement(tj.Button,{className:"ml-4",loading:r.auth.isConnectingIntegration||l||c.isLoading,disabled:r.auth.isConnectingIntegration||l||o,onClick:async()=>{i();let t=u.find(e=>e.is_default)?.slug||u[0]?.slug;if(t){let a=`refs/heads/${t}`;n.api.queueAnalyzeProject(e.id,a)}},intent:"primary",icon:"git-push",large:!0},"Install");return ty.createElement("div",{className:tj.Classes.FORM_GROUP},ty.createElement("div",{className:t3()(tj.Classes.LABEL,"mb-2")},"Install the Git Webhook"),ty.createElement("div",{className:"flex items-center"},ty.createElement(g7,{text:r.router.appUrl+`/api/v1/webhooks/git/${t.id}`}),o?ty.createElement(tj.Tooltip,{content:"You don't have permission to install the webhook"},a):a),ty.createElement("div",{className:tj.Classes.FORM_HELPER_TEXT},"Stoplight will use this webhook url to keep your data in sync. Whenever commits are made to your Git repository, Stoplight will re-analyze the repository contents."))}},hl=()=>{let{effects:e}=(0,tB.U8)();return ty.useCallback(async t=>{let{error:a,data:r}=await e.api.createExternalWebhook({projectId:t});if(r?.createExternalWebhook)return r.createExternalWebhook;throw Error(a?.message)},[e])},hi=(e,t,a)=>{let{effects:r,actions:n}=(0,tB.U8)(),o=hl(),[l,i]=ty.useState(void 0),[s,c]=ty.useState(!1),u=aX();return[{isCreating:s,data:l},ty.useCallback(async()=>{if(t){if(c(!0),(!a||a.usesOldIntegration)&&(0,aK.Yr)(tm.xF[t.kind],t.config)){let e=u(t.name);if(e&&!await n.auth.connectIntegration({integration:t,popup:e})){c(!1);return}}try{let t=await o(e);i(t),r.notifications.success({message:"Webhook successfully installed"})}catch{r.notifications.danger({message:`Something went wrong while installing this webhook. You may not have the correct ${t.name} permissions to perform this action in your external VCS.`})}finally{c(!1)}}},[t,a,u,n.auth,o,e,r.notifications])]},hs=({ciToken:e})=>{let{state:t}=(0,tB.U8)(),[a,r]=ty.useState(!1),n=`npx @stoplight/cli@6 push --ci-token ${e?a?e:"":"INSUFFICIENT_PERMISSIONS"}${t.metadata.isSaaS?"":` --url ${t.router.appUrl}`}`,o=`npx @stoplight/cli@6 push --ci-token ${e||"INSUFFICIENT_PERMISSIONS"}${t.metadata.isSaaS?"":` --url ${t.router.appUrl}`}`;return ty.createElement("div",{className:tj.Classes.FORM_GROUP},ty.createElement("div",{className:t3()(tj.Classes.LABEL,"mb-2")},"Using the Stoplight CLI"),ty.createElement("div",{className:"flex items-center"},ty.createElement(g7,{text:n,copyText:o}),ty.createElement(tj.Button,{large:!0,className:"ml-4 whitespace-no-wrap",icon:a?"eye-off":"eye-open",onClick:()=>{r(!a)}},a?"Hide token":"Show token")),ty.createElement("div",{className:tj.Classes.FORM_HELPER_TEXT},"Push data from a folder on your computer or set up your own CI automation workflow."," ",ty.createElement("a",{href:ab.xz.cli,target:"_blank",rel:"noopener noreferrer"},"Learn more")))},hc=ty.forwardRef((e,t)=>ty.createElement(tj.Switch,{inputRef:t,...e,onChange:t=>{e.onChange&&e.onChange(t),e.onFieldChange&&e.onFieldChange(t)}})),hu=({index:e,style:t,data:a})=>ty.createElement("div",{style:t,key:a[e].key,className:t3()({"border-t":e>0})},a[e].contents);function hd({items:e}){return ty.createElement(nm.FixedSizeList,{itemData:e,itemCount:e.length,itemSize:56,height:300,width:"100%",className:"flex flex-col"},hu)}function hm({type:e,count:t,className:a,"data-test":r}){return ty.createElement(tj.Tooltip,{content:tm.Cp[e]},ty.createElement("div",{"data-test":r,className:t3()("flex items-center",a)},ty.createElement(tg.Box,{mr:2},ty.createElement(tg.Icon,{icon:["fas",tm.cp[e]],color:tm.UQ[e]})),ty.createElement("div",null,t)))}let hp=({repoUrl:e,workspaceIntegration:t,pause:a})=>{let[{data:r,fetching:n,error:o},l]=(0,tU.Kme)({variables:{repoUrl:e,workspaceIntegrationId:t?.id},pause:a});return[{data:r?.getExternalRepo,fetching:n,error:o},l]};function hg(e){let{project:t,branches:a}=e,[,r]=(0,tU.b5v)(),{effects:n}=(0,tB.U8)(),o=(0,tv.useQueryClient)();if(!t||0===a.length)return null;let l=a.find(e=>e.is_default),i=t.type===tU.HWy.Web?"Version":"Branch";return ty.createElement(tj.FormGroup,{label:`Default ${i}`},ty.createElement(tj.HTMLSelect,{"data-test":"default-branch-select",name:"branchId",defaultValue:l?.id||0,options:(0,th.sortBy)(a,"slug").map(e=>({label:e.slug,value:e.id})),onChange:async e=>{let s=e.currentTarget.value;if(s===l?.id)return;let{error:c}=await r({projectId:(0,t8.safelyDecodeID)(t.id),branchId:(0,t8.decodeID)(s).id,previousDefaultBranchId:(0,t8.decodeID)(l?.id).id});if(c)n.reporter.error(c),n.notifications.danger({message:"Something went wrong. Please try again later."});else{let e=a.find(e=>e.id===s);await o.invalidateQueries(tN.branchesKeys.detail(t.id,l?.slug)),await o.invalidateQueries(tN.branchesKeys.detail(t.id,e?.slug)),await o.invalidateQueries(tN.branchesKeys.list(t.id)),n.notifications.success({message:`The default ${i.toLowerCase()} was updated successfully.`})}}}))}let hh=e=>{let{actions:t,effects:a}=(0,tB.U8)(),r=(0,dY.e)(),{openFormDialog:n}=(0,tx.useFormDialog)(),o=(0,tA.useNavigate)(),l=async()=>{let n=await r(e.projectId);if(!n.success){a.notifications.danger({message:'Error deleting project "'+e.projectSlug+'": '+n.message});return}a.notifications.success({message:'Your project "'+e.projectSlug+'" was removed.'}),await t.projects.touchQueries(),await a.router.navigate(o,"/")};return ty.createElement("div",{className:"flex items-center"},ty.createElement("div",{className:"flex-grow"},ty.createElement("h3",null,"Delete project from Stoplight"),ty.createElement("div",{className:"mt-2"},"Deleting a project deletes all of the project data stored in Stoplight. It will not delete the underlying Git repository, if the project is connected to one.")),ty.createElement("div",{className:"flex-auto ml-4"},ty.createElement(tj.Button,{icon:ty.createElement(tj.FAIcon,{icon:["fas","trash-alt"]}),className:t3()(tj.Classes.INTENT_DANGER,"whitespace-no-wrap"),minimal:!0,onClick:()=>{let t=ty.createElement("div",null,"Are you sure you want to remove this project from Stoplight? All of the project data stored in this workspace will be ",ty.createElement("strong",null,"removed permanently"),". However, the original Git repo will not be modified.");n(()=>ty.createElement(cf,{confirmExpectedValue:e.projectSlug,warningText:t}),{title:"Delete Project?",saveButtonText:"Delete",onSave:async()=>{l()}})},"data-test":"settings-remove-project-button"},"Delete project")))},hf="*******",hb=({projectServiceAccountList:e,projectId:t,integration:a})=>{let[r,n]=(0,ty.useState)(e?.[0]?.id||""),[o,l]=(0,ty.useState)(!r),[i,s]=(0,ty.useState)(!1),c=sy.Mh[a.kind],{openDialog:u,closeDialog:d}=(0,tx.useDialog)(),m=(0,nc.tL)(t),p=(0,nc.It)(),g=(0,nc.Ui)(),h=(0,nc.N$)(),f=(0,t5.mN)({shouldFocusError:!1,mode:"onBlur",defaultValues:{vcsProviderUsername:e?.[0]?.credentials?.username||void 0,vcsProviderAuthKey:e?.[0]?.credentials?.username?hf:void 0}}),{register:b,handleSubmit:y,clearErrors:w,watch:E,setValue:v,formState:{isSubmitting:k}}=f,_=E("vcsProviderAuthKey"),x=E("vcsProviderUsername"),I=_?.length>0&&x?.length>0,S=async e=>{s(!0),u({intent:"default",title:"Save Changes?",message:"Are you sure you want to make changes to your VCS Credentials?",confirmText:"Save",cancelText:"Cancel",onCancel:()=>{d(),l(!0),s(!1)},onConfirm:async()=>{if(r)e.vcsProviderAuthKey===hf?await p(r,t,e.vcsProviderUsername):await p(r,t,e.vcsProviderUsername,e.vcsProviderAuthKey);else{let r=await m(t,a.kind,e.vcsProviderUsername,e.vcsProviderAuthKey);r&&n(r.id)}v("vcsProviderAuthKey",hf),l(!1),d(),s(!1)}})},j=async()=>{s(!0),u({intent:"danger",title:"Delete Credentials?",message:"Are you sure you want to delete your VCS Credentials?",confirmText:"Delete",cancelText:"Cancel",onCancel:()=>{d(),s(!1)},onConfirm:async()=>{await g(t,r),v("vcsProviderUsername",""),v("vcsProviderAuthKey",""),n(""),l(!0),d()}}),s(!1)},C=async()=>{s(!0);let e=E("vcsProviderAuthKey"),n={username:E("vcsProviderUsername"),token:e,type:"personal_access_token"};e===hf&&r?await h(r,t,a.name,n):await h("",t,a.name,n),s(!1)};return ty.createElement(t5.Op,f,ty.createElement("form",{onSubmit:y(S)},ty.createElement(tg.Flex,null,ty.createElement(tg.VStack,{spacing:1,pr:12},ty.createElement(rr,{id:"vcsKind"},"VCS Provider"),ty.createElement(tg.Box,{py:2,"aria-label":"VCS Provider"},ty.createElement(tg.Icon,{icon:c}),ty.createElement(tg.Text,{size:"lg",pl:2},a.name))),ty.createElement(tg.HStack,{spacing:3,alignItems:"start",flex:1},ty.createElement(tg.Box,{flex:1},ty.createElement(lp,{...b("vcsProviderUsername",{required:"Field must not be empty."}),name:"vcsProviderUsername",id:"vcsProviderUsername",label:"VCS Provider Username",placeholder:"Enter VCS Provider Username",onFocus:()=>w("vcsProviderUsername"),disabled:!o})),ty.createElement(tg.Box,{flex:1},ty.createElement(lp,{...b("vcsProviderAuthKey",{required:"Field must not be empty."}),flex:1,name:"vcsProviderAuthKey",id:"vcsProviderAuthKey",label:"VCS Provider Auth Key",placeholder:"Enter VCS Provider Auth Key",onFocus:e=>{e.target.select(),w("vcsProviderAuthKey")},disabled:!o})))),ty.createElement(tg.Box,{borderB:!0,pb:2,pt:6},ty.createElement(tg.Text,null,"Stoplight will use this Service Account to do any Git operations for this project."," ",ty.createElement(tg.Link,{target:"_blank",href:ab.xz.project_service_accounts,rel:"noreferrer"},"Learn more."))),ty.createElement(tg.HStack,{mt:3,justify:"between"},ty.createElement(tg.HStack,{justify:"start"},ty.createElement(tg.HStack,null,ty.createElement(hy,{editMode:o,canClick:I,setEditMode:()=>l(e=>!e),isSubmitting:k})),ty.createElement(tg.HStack,null,r?ty.createElement(tg.Button,{icon:["fal","trash"],appearance:"minimal",onPress:j,type:"button","data-testid":"trash-button",intent:"danger"},"Delete Credentials"):null)),I?ty.createElement(tg.Button,{appearance:"minimal",type:"button",loading:i,"data-testid":"test-vcs-account",onPress:C,disabled:i,border:2,borderColor:"dark"},"Test"):ty.createElement(tg.Tooltip,{renderTrigger:ty.createElement(tg.Flex,{alignItems:"center",py:2,px:3,bg:"canvas-100",cursor:"not-allowed",rounded:!0},ty.createElement(tg.Box,{flex:1,textOverflow:"truncate",color:"muted"},"Test"))},"All fields must be filled before testing."))))};hb.displayName="VCSAccountSettings";let hy=({editMode:e,canClick:t,setEditMode:a,isSubmitting:r})=>ty.createElement(ty.Fragment,null,e&&!t?ty.createElement(tg.Tooltip,{renderTrigger:ty.createElement(tg.Flex,{alignItems:"center",px:2.5,cursor:"not-allowed"},ty.createElement(tg.Box,{"data-test":"save-credentials-text",flex:1,textOverflow:"truncate",color:"muted"},ty.createElement(tg.Icon,{icon:["fal","save"]}),ty.createElement(tg.Text,{fontWeight:"medium",pl:2},"Save Credentials")))},"All fields must be filled before saving."):ty.createElement(tg.Button,{icon:e?["fal","save"]:["fal","pencil-alt"],appearance:"primary",onPress:a,type:e?"button":"submit","data-test":"lock-unlock-button",disabled:r||!t},`${e?"Save":"Edit"} Credentials`)),hw=(0,ak.BZ)(({project:e})=>{let t=(0,tF.C$)(),{jwt:a}=(0,tF.hD)(),r=t.integrations?.find(t=>t.id===e.workspaceIntegrationId),n=(0,tN.useGetProjectBranches)(a,{projectId:e.id},{refetchInterval:5e3}),o=(0,th.sortBy)(n.data?.items||[],"slug"),l=!t.canIOnProject(e,tU.Jg8.ProjectUpdate),i=t.canIOnProject(e,tU.Jg8.ProjectDelete),s=(0,t8.encodeID)("prj",e.id),c=(0,tN.useGetProjectServiceAccounts)({jwtToken:a,project_id:s}),u=c.data?.items||[],d=e?.flavor==="style_guide";return ty.createElement(i6,null,l&&ty.createElement(tj.Callout,{className:"mb-12",intent:"warning"},"Heads up, you'll need admin permission on this project in order to change these settings."),ty.createElement(i5,{"data-test":"project-basics-section",title:"Project Basics",icon:["fal","wrench"]},e&&ty.createElement(hE,{project:e,readOnly:l})),e&&r&&ty.createElement(hv,{project:e,integration:r}),n.isFetched&&e&&(r||o.length)&&!d?ty.createElement(hk,{projectId:e.id,branches:o}):null,"vcs"!==e.type||l?null:ty.createElement(i5,{"data-test":"service-accounts-section",title:"Version Control Service Account",icon:["fas","code-branch"]},c.isFetched&&c&&function(e){return"object"==typeof e&&null!=e&&e.kind!==tU.KXp.Saml&&e.kind!==tU.KXp.Ldap&&e.kind!==tU.KXp.Builtin}(r)?ty.createElement(hb,{projectServiceAccountList:u,projectId:s,integration:r}):null),i&&ty.createElement(i8,null,ty.createElement(hh,{projectId:e.id,projectSlug:e.slug})))});function hE({project:e,readOnly:t}){let{effects:a}=(0,tB.U8)(),r=(0,tF.hD)(),n=(0,tF.C$)(),o=(0,tF.aS)(),l=(0,tF.y1)(),{data:i}=(0,tN.useGetGroup)(r.jwt,e.groupId),s=(0,tN.useUpdateProject)(r.jwt),c=(0,tN.useUpdateProjectGroup)(r.jwt),{register:u,handleSubmit:d,watch:m,formState:{isValid:p,isSubmitting:g,isDirty:h,errors:f},reset:b,setValue:y}=(0,t5.mN)({mode:"onChange"}),w=(0,tA.useNavigate)();ty.useEffect(()=>{b({name:e.name||"",slug:e.slug||"",description:e.description||"",iconName:e.iconName||"",iconColor:e.iconColor||"",isDesignLibrary:e.isDesignLibrary||!1,groupId:e.groupId||"",useLegacyExporter:e.useLegacyExporter})},[b,e.name,e.slug,e.description,e.iconName,e.iconColor,e.isDesignLibrary,e.groupId,e.useLegacyExporter]);let E=async({name:t,slug:r,description:n,iconName:o,iconColor:l,isDesignLibrary:i,groupId:u,useLegacyExporter:d})=>{try{await s.mutateAsync({project_id:(0,t8.encodeID)("prj",e.id),name:t,slug:r,description:n,icon:o,icon_color:l,is_design_library:i,use_legacy_exporter:d}),d!==e.useLegacyExporter&&a.reporter.log({event:"legacy_export_toggled",payload:{enabled:d}})}catch(t){let e=t.message||"Something went wrong, please try again";a.notifications.danger({message:e});return}let m=function(e,t){let a=!t&&!!e.groupId,r=!!t&&e.groupId!==t;return a?{needsUpdate:!0,groupId:null}:r?{needsUpdate:!0,groupId:t}:{needsUpdate:!1}}(e,u);if(m.needsUpdate)try{await c.mutateAsync({groupId:m.groupId,projectId:(0,t8.safelyDecodeID)(e.id)})}catch(e){a.notifications.danger({message:`Error updating the project group: ${e.message}`});return}a.notifications.success({message:"Project updated"}),b({name:t,slug:r,description:n,iconName:o,iconColor:l}),e.slug!==(0,th.trim)(r)&&a.router.navigate(w,`/settings/${r}`,{replace:!1})},v=(0,rw.wN)({iconName:m("iconName")}),k=(0,rw.SR)({iconColor:m("iconColor")}),_=e?.flavor==="style_guide",x=e?.flavor==="design_library",I=n.canIOnProject(e,tU.Jg8.ProjectGroupUpdate),S=i&&i?.name?{label:i.name,value:i.id}:void 0,[j,C]=ty.useState(e.groupId||void 0);return y("groupId",j||"",{shouldDirty:!1}),ty.createElement("form",{onSubmit:d(E)},ty.createElement("div",{className:"flex"},ty.createElement(tj.FormGroup,{label:"Display Name",labelFor:"name",className:"w-2/5",intent:f.name?"danger":void 0,helperText:f.name?f.name.message:'The well formatted name. Example: "Backend APIs"'},ty.createElement(aj,{...u("name",{required:{value:!0,message:"Must be at least two characters"},minLength:2}),"data-test":"display-name-input",name:"name",id:"name",placeholder:"Project Name",readOnly:t,autoComplete:"off",autoFocus:!0,large:!0})),ty.createElement(tj.FormGroup,{label:"Slug",labelFor:"slug",className:"w-2/5 ml-6",intent:f.slug?"danger":void 0,helperText:f.slug?f.slug.message:"The value used in URLs. Must be unique in this workspace."},ty.createElement(aj,{...u("slug",{required:{value:!0,message:"Must be at least two characters, and contain only letters, numbers and -"},minLength:2,pattern:new RegExp(/^[A-Za-z0-9\-]+$/)}),name:"slug",id:"slug",placeholder:"Project Slug",readOnly:t,autoComplete:"off",large:!0})),ty.createElement(tj.FormGroup,{label:"ID",labelFor:"id",className:"w-1/5 ml-6",helperText:ty.createElement(tg.Box,null,"Useful for Elements Dev Portals and"," ",ty.createElement(tg.Link,{href:ab.A8.stoplight_api,rel:"noreferrer",target:"_blank"},"Catalog API"),".")},ty.createElement(tj.InputGroup,{value:(0,t8.encodeID)("prj",e.id),name:"id",id:"id",readOnly:!0,autoComplete:"off",large:!0}))),ty.createElement(tj.FormGroup,{label:"Tagline",labelFor:"description",helperText:"Short and sweet, 2-4 words is best."},ty.createElement(aj,{...u("description",{required:!1,maxLength:250}),name:"description",id:"description",placeholder:"In a few words, what's the purpose of this project?",readOnly:t,autoComplete:"off",large:!0})),ty.createElement("div",{className:"flex"},ty.createElement(tj.FormGroup,{label:"Icon Name",labelFor:"iconName",helperText:ty.createElement("span",null,"Give your project a little flair - pick a"," ",ty.createElement("a",{href:"https://fontawesome.com/icons",target:"_blank",rel:"noopener noreferrer"},"FontAwesome icon"))},ty.createElement("div",{className:"flex"},ty.createElement(tg.Avatar,{icon:["fad",v],fg:k,size:"lg",mt:1,mr:2}),ty.createElement(aj,{...u("iconName",{required:!1}),name:"iconName",id:"iconName",placeholder:rw.oV,className:"w-80",readOnly:t,autoComplete:"off",large:!0}))),ty.createElement(tj.FormGroup,{label:"Icon Color",labelFor:"iconColor",className:"ml-6",helperText:ty.createElement(ty.Fragment,null,"In hex format, for example #888888. ",ty.createElement("br",null)," Note that if you are using a custom sidebar theme with a dark background, icon colors will not be used.")},ty.createElement(dw,{name:"iconColor",readOnly:t,color:k,defaultColor:rw.aW,onChange:e=>{y("iconColor",e)},inputProps:{...u("iconColor",{required:!1}),name:"iconColor",id:"iconColor",className:"w-80"}}))),(o.isFlagEnabled("design_libraries")||l.designLibraries)&&!(_||x)?ty.createElement(tj.FormGroup,{label:"Design Library",labelFor:"isDesignLibrary",helperText:"Designates this project as a shared Design Library for use within other projects"},ty.createElement(hc,{inline:!0,...u("isDesignLibrary",{required:!1}),name:"isDesignLibrary",readOnly:t,defaultChecked:e.isDesignLibrary,large:!0})):null,ty.createElement(tj.FormGroup,{label:"Use Legacy Export",labelFor:"useLegacyExporter",helperText:ty.createElement(ty.Fragment,null,"This project will use legacy export. Do not use this setting if this project uses Component Libraries, Webhooks or Callbacks."," ",ty.createElement(tg.Link,{href:ab.xz.use_legacy_exporter,target:"_blank",rel:"noopener noreferrer"},"Learn More"),"."),"data-test":"use-legacy-exporter-form-group"},ty.createElement(hc,{inline:!0,...u("useLegacyExporter",{required:!1}),name:"useLegacyExporter",readOnly:t,defaultChecked:e.useLegacyExporter,large:!0,"data-test":"use-legacy-exporter-switch"})),ty.createElement(tj.FormGroup,{label:"Group",labelFor:"groupId",helperText:"Optionally choose to add this project to a Group"},ty.createElement(tg.Box,{w:"1/4"},ty.createElement(sk,{setGroupId:e=>{C(e),y("groupId",e,{shouldDirty:!0})},location:"project_settings",additionalGroup:S,disabled:!I,defaultValue:j}))),ty.createElement(tj.Button,{"data-test":"save-project-basics-btn",type:"submit",className:"mt-3",large:!0,intent:"primary",disabled:t||!tm.KJ||!p||!h,loading:g},"Save"))}hw.displayName="Settings";let hv=({project:e,integration:t})=>{let[{data:a,fetching:r}]=hp({repoUrl:e.remoteUrlHttp,workspaceIntegration:t,pause:!t});return ty.createElement(i5,{"data-test":"git-info-section",title:"Git Info",icon:["fab","git-alt"]},ty.createElement("div",{className:"flex items-center"},ty.createElement("div",{className:"flex-1 text-lg leading-none"},ty.createElement("div",{className:"mb-2 font-bold"},e.externalSlug),ty.createElement("div",null,e.externalOrgSlug),ty.createElement("div",{"data-test":"repository-visibility",className:"mt-2 text-sm sl-text-muted"},r?"Loading visibility...":a&&ty.createElement(ty.Fragment,null,ty.createElement("span",{className:"sl-font-semibold"},"Repository visibility: "),ty.createElement("span",null,(0,th.capitalize)(a?.visibility))))),ty.createElement("div",{className:"mr-1"},ty.createElement(tj.FAIcon,{icon:tm.Mh[t.kind],size:"3x",style:{color:tm.n9[t.kind]}}))),(e.remoteUrlHttp||e.remoteUrlSsh)&&ty.createElement("div",{className:"pt-5 mt-5 border-t"},e.remoteUrlHttp&&ty.createElement(tj.FormGroup,{label:"Clone URL"},ty.createElement(g7,{text:e.remoteUrlHttp}))))};function hk({projectId:e,branches:t}){let[a,r]=ty.useState(!1),{jwt:n}=(0,tF.hD)(),{canIOnProject:o}=(0,tF.C$)(),{hasFeature:l}=(0,tF._m)(),{data:i}=(0,tN.useGetProject)(n,{projectId:e},{enabled:!!e,refetchInterval:5e3}),s=!!i?.workspace_integration?.id,c=i?.type===tU.HWy.Web?"Versions":"Branches",u=!!(i&&o(i.my_permissions,tU.Jg8.ProjectBranchUpdate)),d=!!(i&&o(i.my_permissions,tU.Jg8.ProjectBranchCreateDelete));return ty.createElement(i5,{"data-test":"branches-section",title:c,icon:["fas","code-branch"],actions:s&&d&&ty.createElement(tj.Button,{"data-test":"add-branch-btn",large:!0,intent:"primary",icon:ty.createElement(tj.FAIcon,{icon:["fal","plus"]}),onClick:()=>r(!0)},"Track Branch")},d&&ty.createElement(hx,{projectId:e,isOpen:a,onClose:()=>r(!1)}),t?.length===0?`No ${c.toLowerCase()}.`:ty.createElement("div",null,u&&ty.createElement(hg,{project:i,branches:t,className:"mb-8"}),ty.createElement("div",{className:"flex py-3 font-semibold border-b"},ty.createElement("div",{className:"flex-2 w-1/3"},"Name"),ty.createElement("div",{"data-test":"published-branch-column-header",className:"flex flex-row items-center w-48"},ty.createElement("div",null,"Listed?"),ty.createElement(tj.Tooltip,{content:ty.createElement(ty.Fragment,null,ty.createElement("div",null,"Listed ",c.toLowerCase()," are displayed in the version selector for anyone that can view this project."),ty.createElement("div",{className:"mt-1"},"Unlisted ",c.toLowerCase()," are only displayed in the version selector for members of this project."),ty.createElement("div",{className:"mt-1"},"You can share a link to view individual ",c.toLowerCase()," with anyone that can view this project."))},ty.createElement(tj.FAIcon,{icon:"question-circle",className:"text-gray-5 ml-1"})),!l(tU.BAf.MultiBranch)&&ty.createElement(n_.y,{feature:tU.BAf.MultiBranch,className:"ml-2"})),ty.createElement("div",{className:"flex-1 w-64"},"Node Counts"),ty.createElement("div",{className:"w-32"},"Commit"),ty.createElement("div",{className:"w-56"},"Updated")),ty.createElement(hd,{items:(0,th.sortBy)(t,"slug").map(e=>({key:e.id,contents:ty.createElement(h_,{branch:e,project:i,canDelete:d})}))})))}function h_({project:e,branch:t,className:a,canDelete:r}){let[{fetching:n},o]=(0,tU.AYw)(),[l,i]=ty.useState(!1),{effects:s}=(0,tB.U8)(),{hasFeature:c}=(0,tF._m)(),{canIOnProject:u}=(0,tF.C$)(),{showFeatureDialog:d}=(0,tF.L3)(),{danger:m}=(0,tF.AO)(),p=(0,tv.useQueryClient)();if(!e)return null;let g=u(e.my_permissions,tU.Jg8.ProjectBranchUpdate),h=(0,t8.decodeID)(t.id).id,f=rh.f(`/docs/${encodeURIComponent(e.slug)}`,t.is_default?"":`branches/${encodeURIComponent(t.slug)}`);return ty.createElement("div",{"data-test":"branch-list-item",className:t3()("flex py-3 w-full",a)},ty.createElement("div",{className:"text-gray-6 flex items-center flex-2 w-1/3"},ty.createElement("div",{"data-test":"branch-slug",className:"mr-4 flex flex-row items-center overflow-hidden"},ty.createElement("div",{className:"flex flex-col overflow-hidden"},t.name?ty.createElement("div",{title:t.name,className:"font-medium truncate text-ellipsis"},t.name):null,ty.createElement("div",{title:t.slug,className:"truncate text-ellipsis"},ty.createElement(tg.Icon,{size:"sm",icon:"code-branch"})," ",t.slug)),t.is_default&&ty.createElement("div",{className:"flex items-center"},ty.createElement(tj.Tag,{className:"inline-block mx-4",minimal:!0},"Default")))),ty.createElement("div",{className:"flex items-center w-48"},ty.createElement(tj.Switch,{"data-test":"branch-visibility-switch",inline:!0,className:"mt-px mb-0",checked:t.is_published,disabled:n||!g||t.is_default&&t.is_published,onChange:async a=>{if(!c(tU.BAf.MultiBranch)){d(tU.BAf.MultiBranch);return}let r=a.currentTarget.checked;try{await o({id:h,input:{isPublished:r}}),await p.invalidateQueries(tN.branchesKeys.detail(e.id,t.slug)),await p.invalidateQueries(tN.branchesKeys.list(e.id))}catch(e){s.reporter.error(e),m({message:aR.Kv.generic})}}})),ty.createElement("div",{className:"w-64 flex flex-1 items-center"},ty.createElement(hm,{"data-test":`node-count-${gk.Z6.Article}`,type:gk.Z6.Article,count:t.node_counts.article_count,className:"mr-4"}),ty.createElement(hm,{"data-test":`node-count-${gk.Z6.Model}`,type:gk.Z6.Model,count:t.node_counts.schema_count,className:"mr-4"}),ty.createElement(hm,{"data-test":`node-count-${gk.Z6.HttpService}`,type:gk.Z6.HttpService,count:t.node_counts.api_count,className:"mr-4"}),ty.createElement(hm,{"data-test":`node-count-${gk.Z6.HttpOperation}`,type:gk.Z6.HttpOperation,count:t.node_counts.operation_count,className:"mr-4"})),ty.createElement("div",{className:"w-32 flex items-center"},t.commit_hash&&ty.createElement("div",{"data-test":`commit-hash-${t.name}`,className:"text-gray-5 text-sm"},t.commit_hash.substring(0,7))),ty.createElement("div",{className:"w-56 flex items-center justify-between"},ty.createElement("div",{className:"text-gray-5 text-sm"},t.last_analyzed_at?ty.createElement(cm.f,{date:t.last_analyzed_at}):"never analyzed"),ty.createElement("div",{className:"ml-5"},ty.createElement(tj.AnchorButton,{"data-test":"branch-open-btn",icon:ty.createElement(tj.FAIcon,{icon:["fas","external-link"]}),href:f,target:"_blank",small:!0}),g&&ty.createElement(ty.Fragment,null,ty.createElement(tj.Button,{"data-test":"branch-settings-btn",className:"ml-2",icon:ty.createElement(tj.FAIcon,{icon:["fas","cog"]}),onClick:()=>i(!0),small:!0}),ty.createElement(hI,{isOpen:l,projectId:(0,t8.safelyDecodeID)(e.id),branch:t,onClose:()=>i(!1),canDelete:r})))))}function hx({isOpen:e,onClose:t,projectId:a}){let{register:r,formState:{isSubmitting:n,isDirty:o},handleSubmit:l,reset:i}=(0,t5.mN)(),s=ty.useRef(null),[,c]=(0,tU.twU)(),{effects:u}=(0,tB.U8)(),d=async e=>{let{error:r}=await c({event:tU.iBT.Manual,projectId:a,branch:`refs/heads/${e.branch}`});r?(u.reporter.error(r),u.notifications.danger({message:"Something went wrong, please try again."})):(u.notifications.success({message:`"${e.branch}" was queued to be analyzed. If it exists, it will show up in your branch list shortly. Hang tight!`}),i(),t&&t())};return ty.createElement(lZ,{"data-test":"add-branch-dialog",isOpen:e,onClose:t,title:"Track Branch"},ty.createElement("form",{ref:s,onSubmit:l(d)},ty.createElement(tj.FormGroup,{label:"Name of existing branch",labelFor:"branch-name",helperText:"If the branch exists, Stoplight will queue it to be analyzed and tracked in this project"},ty.createElement(aj,{"data-test":"branch-name-input",id:"branch-name",placeholder:"feat/reticulate-splines",...r("branch",{required:!0}),autoFocus:!0,large:!0}))),ty.createElement(l0,{primaryActions:[ty.createElement(tj.Button,{key:"cancel",large:!0,disabled:n,onClick:t},"Cancel"),ty.createElement(tj.Button,{key:"add","data-test":"submit-add-branch-btn",large:!0,disabled:!o,loading:n,intent:"primary",onClick:()=>{l(d)()}},"Track")]}))}function hI({isOpen:e,onClose:t,projectId:a,branch:r,canDelete:n}){let[,o]=(0,tU._G8)(),l=(0,tv.useQueryClient)(),{effects:i}=(0,tB.U8)(),{register:s,handleSubmit:c,formState:{isValid:u,isSubmitting:d},reset:m}=(0,t5.mN)({mode:"onChange",defaultValues:{name:r.name||""}}),[,p]=(0,tU.AYw)(),g=!!r.yjs_document_id,h=g?"Version":"Branch",f=(0,t8.decodeID)(r.id).id,b=async({name:e})=>{let{error:n}=await p({id:f,input:{name:e}});n?i.notifications.danger({message:n?.message||"Something went wrong, please try again."}):(await l.invalidateQueries(tN.branchesKeys.detail(a,r.slug)),await l.invalidateQueries(tN.branchesKeys.list(a)),i.notifications.success({message:`${h} updated`}),m({name:e}),t&&t())};return ty.createElement(lZ,{isOpen:e,title:`Edit ${h}`,onClose:t},ty.createElement("form",{onSubmit:c(b)},ty.createElement(tj.FormGroup,{label:"Display Name",labelFor:"name",className:"flex-1",helperText:"A pretty name used in various areas of the UI"},ty.createElement(aj,{"data-test":"branch-name-input",...s("name",{maxLength:100}),name:"name",id:"name",placeholder:r.slug,autoComplete:"off",autoFocus:!0,large:!0})),ty.createElement(l0,{secondaryActions:[ty.createElement(tj.Button,{"data-test":"save-branch-btn",key:"1",type:"submit",disabled:!u,loading:d,intent:"primary",large:!0},"Save")],primaryActions:[n&&ty.createElement(tj.Button,{"data-test":"delete-branch-btn",key:"1",intent:"danger",large:!0,outlined:!0,onClick:async()=>{if(r.is_default){alert(`Cannot remove a project's default ${h.toLowerCase()}. Please set another ${h.toLowerCase()} as default before removing this one.`);return}let e=`Are you sure you want to remove this ${h.toLowerCase()} from Stoplight? All of the data stored in Stoplight about this ${h.toLowerCase()} will be removed permanently.`;if(g&&(e=`${e}. However, the original Git repo will not be modified.`),!confirm(e))return;let{error:a}=await o({branchId:f});a?(i.reporter.error(a),i.notifications.danger({message:"Something went wrong, please try again."})):(i.notifications.success({message:`${h} removed`}),t&&t())}},"Remove from Stoplight")]})))}let hS=(0,ak.ss)((0,ak.BZ)((0,ak.aZ)(function({workspace:e}){let{projectSlug:t}=(0,tA.useParams)(),{state:a}=(0,tB.U8)(),[{data:r,fetching:n,error:o}]=(0,nR.w)({workspaceId:e.id,projectSlug:t});if(!n&&(!r||o))return ty.createElement("div",{className:"min-h-screen flex items-center justify-center w-full"},o?ty.createElement(tj.NonIdealState,{title:"Something went wrong",description:o.message,icon:ty.createElement(tj.FAIcon,{icon:["fad","exclamation-triangle"]})}):ty.createElement(tj.NonIdealState,{title:"Project Not Found",description:"You might not have permission to view it, or it might not exist at all.",icon:ty.createElement(tj.FAIcon,{icon:["fad","map-signs"]})}));let l=n&&!r,i=!!(r&&a.workspaces.canIOnProject(r,tU.Jg8.ProjectSettingsView)),s=!!(r&&a.workspaces.canIOnProject(r,tU.Jg8.ProjectAutomationLogsRead)),c=(0,th.compact)([i?{pathname:"",title:"Settings"}:void 0,s&&r?.type!==tU.HWy.Web?{pathname:"automation",title:"Automation"}:void 0]);return ty.createElement("div",{className:"flex flex-col w-full min-h-screen"},ty.createElement(i0,{isLoading:l,className:"px-24 pt-8 bg-white",header:ty.createElement(hP,{isLoading:l,name:r?.name,iconName:r?.iconName||void 0,iconColor:r?.iconColor||void 0,description:r?.description||void 0,gitHttpUrl:r?.remoteUrlHttp||void 0,integrationKind:r?.resolvedWorkspaceIntegration?.kind||void 0}),tabs:c},ty.createElement(rb.default,null,ty.createElement("div",{className:"flex flex-1 relative bg-gray-1"},ty.createElement(tA.Routes,null,r&&i&&ty.createElement(tA.Route,{path:"/",element:ty.createElement(hw,{project:r})}),r&&s&&ty.createElement(tA.Route,{path:"automation",element:ty.createElement(hr,{project:r})}),r&&t&&ty.createElement(tA.Route,{path:"*",element:ty.createElement(hC,{projectSlug:t})}),!r&&ty.createElement(tA.Route,{path:"*",element:ty.createElement(hj,null)}))))))}))),hj=(0,ak.ss)(function(){return ty.createElement(tA.Navigate,{to:"./",replace:!0})}),hC=(0,ak.ss)(function({projectSlug:e}){return ty.createElement(tA.Navigate,{to:`/docs/${e}`,replace:!0})}),hP=({isLoading:e,iconName:t,iconColor:a,name:r,description:n,gitHttpUrl:o,integrationKind:l})=>ty.createElement(iZ,{isLoading:e,icon:["fad",(0,rw.wN)({iconName:t})],iconColor:a,description:n,title:"project",large:!0,name:ty.createElement(ty.Fragment,null,r,o&&l?ty.createElement(tj.Tooltip,{content:"Visit external Git repository"},ty.createElement("a",{className:"reset opacity-50 hover:opacity-100",target:"_blank",rel:"noopener noreferrer",href:o},ty.createElement(tj.FAIcon,{icon:tm.Mh[l],className:"ml-3",size:"sm",style:{color:tm.n9[l]}}))):null)}),hA=ty.lazy(()=>Promise.all([a.e(1397),a.e(8271),a.e(6529),a.e(2669)]).then(a.bind(a,9924))),hB=ty.lazy(()=>Promise.all([a.e(1397),a.e(8271),a.e(6529),a.e(201)]).then(a.bind(a,34171))),hD=(0,ak.ss)((0,ak.BZ)((0,ak.aZ)(({workspace:e})=>ty.createElement(ty.Suspense,{fallback:ty.createElement(tx.DelayedLoadingSpinner,null)},ty.createElement(hB,{workspace:e})),tU.E4M.WorkspaceProjectsCreate))),hT=(0,ak.ss)((0,ak.BZ)((0,ak.aZ)(({workspace:e})=>{let t=(0,tA.useParams)();return ty.createElement(ty.Suspense,{fallback:ty.createElement(tx.DelayedLoadingSpinner,null)},ty.createElement(hA,{projectSlug:t?.projectSlug,branchSlug:t.branchSlug,workspace:e}))},tU.E4M.WorkspaceProjectsCreate))),hF=(0,ak.ss)(function(){let[{data:e}]=(0,tU.OrZ)(),{"*":t}=(0,tA.useParams)();return ty.createElement(rb.default,null,ty.createElement(tg.Box,{as:"iframe",src:`https://roadmap.stoplight.io/${t}?hide_logo=1&token=${e?.productBoardToken||""}`,w:"full",frameBorder:"0"}))}),h$=(0,tS.withErrorBoundary)((0,ak.ss)(function(){let{state:e}=(0,tB.U8)(),t=(0,tA.useLocation)();return ty.createElement(hN,{isStudioActive:iX(t.pathname??e.router.pathname,"/studio")||iX(t.pathname??e.router.pathname,"/add/projects")||iX(t.pathname??e.router.pathname,"/add/api-project")||iX(t.pathname??e.router.pathname,"/add/styleguide-project")})})),hN=({isStudioActive:e})=>{let{isResponsiveLayoutEnabled:t}=(0,a_.s)(),a=e||t?null:ty.createElement(iP,null),{state:r}=(0,tB.U8)(),n=(0,tA.useLocation)(),[,o]=(0,nH.A)(["recent_workspace"]),{isLoggedIn:l}=(0,tF.hD)(),{currentWorkspaceId:i}=(0,tF.C$)(),s=r.ui.isNonResponsivePath(n.pathname);return ty.useEffect(()=>{if(l){let e=r.router.workspaceSlug,t=r.router.serverHost.replace(e+".","").replace(/^https?:\/\//,""),a=t.replace(/:\d+$/,"");o("recent_workspace",`${e}.${t}`,{path:"/",domain:"."+a,maxAge:1209600})}},[i,l,o,r.router.serverHost,r.router.workspaceSlug]),ty.createElement(iK,{className:"Workspace",leftSidebar:!t&&a,editor:ty.createElement(ty.Fragment,null,ty.createElement(rb.default,null,ty.createElement(oA,null),ty.createElement(oP,null)),s&&t&&ty.createElement(gX,null),ty.createElement(tg.Flex,{as:"main",style:{outline:"none",minHeight:"100%",flexGrow:1,display:"flex"},minH:"full",flexGrow:!0},ty.createElement(tA.Routes,null,ty.createElement(tA.Route,{path:iJ,element:ty.createElement(a8,null)}),ty.createElement(tA.Route,{path:"/explore/*",element:ty.createElement(gz,null)}),ty.createElement(tA.Route,{path:"/proposals",element:ty.createElement(hD,null)}),ty.createElement(tA.Route,{path:"/add/projects",element:ty.createElement(s4,null)}),ty.createElement(tA.Route,{path:"/settings/:projectSlug/*",element:ty.createElement(hS,null)}),ty.createElement(tA.Route,{path:"/docs/:projectSlug/branches/:branchSlug/*",element:ty.createElement(g6,null)}),ty.createElement(tA.Route,{path:"/docs/:projectSlug/*",element:ty.createElement(g6,null)}),ty.createElement(tA.Route,{path:"/account/*",element:ty.createElement(sp,null)}),ty.createElement(tA.Route,{path:"/admin/*",element:ty.createElement(gu,null)}),ty.createElement(tA.Route,{path:"/roadmap/*",element:ty.createElement(hF,null)}),ty.createElement(tA.Route,{path:"/",element:ty.createElement(gJ,null)}),ty.createElement(tA.Route,{path:"*",element:ty.createElement(gZ,null)}))))})},hU=ty.memo((0,tS.withErrorBoundary)(function(){return ty.createElement(ty.Fragment,null,ty.createElement(hR,null))})),hM="Billing-",hR=ty.memo(()=>{let{state:e,actions:t,effects:a}=(0,tB.U8)(),r=(0,tA.useNavigate)(),n=e.metadata.dataBootstrapComplete,{setMyWorkspace:o,setSubscribedToMyWorkspace:l}=t.workspaces,{currentWorkspaceId:i,canI:s}=e.workspaces,{getFeatureUsage:c,getFeatureMaxUsage:u,hasFeature:d}=e.features,{status:m}=e.billing,p=e.auth.jwt,g=s(tU.E4M.WorkspaceBilling),h=c(tU.BAf.Projects)||0,f=c(tU.BAf.Members)||0,b=e.notifications.banner?.htmlId,{data:y}=(0,tN.useGetWorkspaceState)(p,{workspaceId:i},{enabled:!!(i&&n),notifyOnChangeProps:["data"],keepPreviousData:!0});return ty.useEffect(()=>{y&&(o(y),t.reporter.forwardUserPropertiesToThirdPartyTools(),l(!0))},[t.reporter,y,o,l]),ty.useEffect(()=>{if(!g||b&&!b.startsWith(hM))return;let e={intent:"danger",icon:["far","circle-exclamation"],primaryAction:{onClick:()=>{a.router.navigate(r,"/admin/billing")},text:"Go to billing",icon:["far","external-link"]}};m&&"active"!==m?t.notifications.setBanner({...e,htmlId:`${hM}Banner`,message:"Your billing account requires some action(s). Please resolve them to continue using Stoplight."}):h>u(tU.BAf.Projects)?t.notifications.setBanner({...e,htmlId:`${hM}Banner-Project-Limit`,message:"Your Workspace is over the project limit for your current billing plan. Please upgrade your plan."}):t.notifications.setBanner(void 0)},[t.notifications,g,a.router,u,h,f,m,b,d,r]),null});tj.FocusStyleManager.onlyShowFocusOnTabs();let hW=()=>{let{state:e}=(0,tB.U8)(),t=(0,tA.useLocation)().pathname.startsWith("/docs"),a=e.workspaces.resolvedTheme,r=e.workspaces.currentWorkspace?.name||e.workspaces.currentWorkspace?.slug,n=e.workspaces.currentWorkspace?.hidePoweredBy,o=e.workspaces.currentWorkspace?.logoUrl,l=e.workspaces.currentWorkspace?.description||"The API Design Management Platform powering the world's leading API first companies.",i=[];r&&i.push(r),n||(i.push("Stoplight"),l+=" Powered by Stoplight.");let s=i.join(" | ");return ty.createElement(tE.m,{defaultTitle:t?void 0:s},ty.createElement("meta",{name:"description",content:l}),ty.createElement("meta",{property:"og:title",content:s}),ty.createElement("meta",{property:"og:type",content:"website"}),ty.createElement("meta",{property:"og:description",content:l}),o?ty.createElement("meta",{property:"og:image",content:o}):null,ty.createElement("style",null,`
  .LeftSidebar {
    ${Object.entries(a).map(([e,t])=>`	--${e}: ${t};`).join("\n")}

    --sidebar-muted-text: ${(0,tC.B3)(a["color-on-sidebar"],.75)};
    --sidebar-muted-bg: ${(0,tC.B3)(a["color-on-sidebar"],.06)};
    --sidebar-muted-border: ${(0,tC.B3)(a["color-on-sidebar"],.15)};
    --color-canvas-pure: ${a["color-sidebar-bg"]};
  }

  a.sl-link.LeftSidebarCalloutLink {
    color: ${a["color-primary"]};
  }

  a.sl-link.LeftSidebarCalloutLink:hover {
    color: ${a["color-primary"]};
    text-decoration: underline;
  }
  `))};var hL=a(45290),hG=a(67597),hO=a(94917),hz=a(76549),hq=a(35684),hV=a(62207),hH=a(84992),hQ=a(26408),hK=a(61055);let hJ=(0,tf.xH)(tB.$W,{devtools:tm.Xk});((e,t)=>{let a={};if(!e)return;e.split(",").forEach(e=>{let[t,r]=e.split("=");a[t]=r});let r=new hV.e({root:new hH.h(Math.min(1,Math.max(0,t)))}),n=new hQ.Z({resource:new hq.F(a),sampler:r}),o=new hG.Q({url:`${window.origin}/otel/v1/traces`});n.addSpanProcessor(new hK.J(o)),n.register({contextManager:new hL.T});let l=new hz.X({});l.setTracerProvider(n),(0,hO.R)({instrumentations:[l]})})(hJ.state.metadata.otelResourceAttrs,hJ.state.metadata.otelSampleRate),window.__SL=hJ,(0,tg.subscribeTheme)({mode:"light"});let hY=new tv.QueryClient({defaultOptions:{queries:{staleTime:36e5,retry:(e,t)=>{let a=(0,th.get)(t,"code");return(!a||"4"!==String(a).charAt(0))&&e<3},refetchOnWindowFocus:!1}}});performance.mark("App:mountStart"),(0,tw.hydrate)(ty.createElement(tp.WJ,null,ty.createElement(tg.Provider,null,ty.createElement(t_.Provider,{value:hJ.effects.api.getClient().urqlClient},ty.createElement(tb.Kq,{value:hJ},ty.createElement(tE.v,null,ty.createElement(tv.QueryClientProvider,{client:hY},ty.createElement(tk.BrowserRouter,null,ty.createElement(()=>{let{state:e,effects:t}=(0,tB.U8)();av(),ty.useEffect(()=>{console.log("%cInterested in working for Stoplight? Check out our jobs listing: %chttps://stoplight.io/careers","color: blue; font-weight: bold","color: green; font-weight: bold"),console.log(`Platform Version: ${e.metadata.release}`)},[e.metadata.release]);let a=(0,tg.useIconStore)(e=>e.setDefaultStyle);ty.useEffect(()=>{a("fal")},[a]),function(){let{state:e}=(0,tB.U8)(),t=e.metadata.latestAvailableRelease!==e.metadata.release,a=(0,tA.useLocation)();ty.useEffect(()=>{t&&window.location.reload()},[a.pathname])}();let r=ty.createElement(tS.ErrorBoundaryProvider,{FallbackComponent:tD,reporter:t.reporter},ty.createElement(tp.cw,null,ty.createElement(t$,null,ty.createElement(tx.GlobalDialogProvider,null,ty.createElement(tI.Bh,{platformUrl:e.api.httpHost,platformAuthToken:e.auth.jwt??void 0,isLoggedIn:e.auth.isLoggedIn},ty.createElement(tA.Routes,null,ty.createElement(tA.Route,{path:"oauth/callback",element:ty.createElement(a8,null)}),ty.createElement(tA.Route,{path:"auth/*",element:ty.createElement(a4,null)}),ty.createElement(tA.Route,{path:"welcome/*",element:ty.createElement(oC,null)}),ty.createElement(tA.Route,{path:"login/*",element:ty.createElement(ru,null)}),ty.createElement(tA.Route,{path:"studio/:projectBranchSlug/*",element:ty.createElement(nV,null)}),ty.createElement(tA.Route,{path:"proposals/:projectSlug/branches/:branchSlug/*",element:ty.createElement(hT,null)}),ty.createElement(tA.Route,{path:"links/*",element:ty.createElement(n1,null)}),ty.createElement(tA.Route,{path:"/*",element:ty.createElement(h$,null)})),ty.createElement(tP.ReactQueryDevtools,{initialIsOpen:!1}),ty.createElement(hU,null),ty.createElement(af,null),ty.createElement(aw,null),ty.createElement(tx.GlobalDialog,null))))));return ty.createElement(ty.Fragment,null,ty.createElement(hW,null),r)},null)))))))),document.getElementById("root")),performance.mark("App:mountEnd"),performance.measure("App:mount","App:mountStart","App:mountEnd")},1218:(e,t,a)=>{"use strict";a.d(t,{o:()=>o});var r=a(32353),n=a(14041);let o=({children:e})=>n.createElement(r.Flex,{alignItems:"center",justifyContent:"center",w:"full",h:"full"},e)},18767:(e,t,a)=>{"use strict";a.d(t,{P:()=>n});var r=a(14041);let n=({children:e,delay:t=2e3})=>{let[a,n]=r.useState(!1);return(r.useEffect(()=>{let e=setTimeout(()=>n(!0),t);return()=>clearTimeout(e)},[t]),a)?r.createElement(r.Fragment,null,e):null}},97174:(e,t,a)=>{"use strict";a.d(t,{e:()=>i});var r=a(32353),n=a(45250),o=a(14041),l=a(13750);let i=({branchSlug:e,branches:t,onChange:a})=>{let r=t.find(t=>e?t.slug===e:t.is_default),n=t.filter(e=>e.is_published),i=t.filter(e=>!e.is_published),{isResponsiveLayoutEnabled:u}=(0,l.s)(),d=o.useCallback(e=>{let r;if("string"==typeof e)r=t.find(t=>t.slug===e);else{let a=e.values().next().value;r=t?.find(e=>e.id.toString()===a.toString())}void 0!==r&&a(r)},[t,a]);return o.createElement(o.Fragment,null,u?o.createElement(s,{drafts:i,versions:n,handleChange:d,currentBranch:r}):o.createElement(c,{drafts:i,versions:n,handleChange:d,currentBranch:r}))},s=({drafts:e,versions:t,handleChange:a,currentBranch:n})=>o.createElement(r.Box,{"data-test":"responsive-branch-selector"},o.createElement(r.Box,{borderB:!!e.length||void 0,px:5,py:4},o.createElement(r.Box,{textTransform:"uppercase",color:"muted"},"Versions"),o.createElement(r.ListBox,{noFocusRing:!0,"aria-label":"versions",items:t,onSelectionChange:a,selectionMode:"single"},e=>o.createElement(r.ListBoxItem,{key:e.id,textValue:e.name},o.createElement(r.Flex,{align:"center"},e.name===n?.name&&o.createElement(r.Icon,{icon:"check"}),o.createElement(r.Box,{ml:e.name===n?.name?2:5,flex:1,dangerouslySetInnerHTML:{__html:e.name??""},overflowX:"hidden",textOverflow:"overflow-ellipsis",whitespace:"nowrap",mr:2,my:1}),e.is_default&&o.createElement(r.Box,{color:"muted"},"Default"))))),e.length&&o.createElement(r.Box,{px:5,py:4},o.createElement(r.Box,{textTransform:"uppercase",color:"muted"},"Unlisted"),o.createElement(r.ListBox,{noFocusRing:!0,"aria-label":"drafts",items:e,onSelectionChange:a,selectionMode:"single"},e=>o.createElement(r.ListBoxItem,{key:e.id,textValue:e.name},o.createElement(r.Flex,{align:"center"},e.name===n?.name&&o.createElement(r.Icon,{icon:"check"}),o.createElement(r.Box,{ml:e.name===n?.name?2:5,flex:1,dangerouslySetInnerHTML:{__html:e.name??""},overflowX:"hidden",textOverflow:"overflow-ellipsis",whitespace:"nowrap",mr:2,mb:1}),e.is_default&&o.createElement(r.Box,{color:"muted"},"Default")))))),c=({drafts:e,versions:t,handleChange:a,currentBranch:l})=>o.createElement(r.Menu,{"aria-label":"Versions",placement:"bottom",closeOnPress:!0,cursor:"pointer",renderTrigger:({isOpen:e})=>o.createElement(r.FieldButton,{"data-test":"branch-selector",w:"full",icon:"layer-group",h:"md",px:4,active:e,borderR:0,roundedR:"none"},l?.name||l?.slug||"Choose a version"),items:[{type:"option_group",title:"Versions",onChange:a,value:l?.slug||"",children:(0,n.sortBy)(t.map(e=>({title:e.name||e.slug,value:e.slug,meta:e.is_default?"Default":void 0})),"title")},{type:"option_group",title:"Unlisted",onChange:a,value:l?.slug||"",children:(0,n.sortBy)(e.map(e=>({title:e.name||e.slug,value:e.slug,meta:e.is_default?"Default":void 0})),"title")}]})},69738:(e,t,a)=>{"use strict";a.d(t,{X:()=>f});var r=a(92752),n=a(74197),o=a(6509),l=a(85937),i=a.n(l),s=a(14041),c=a(92696),u=a(1048).Buffer;let d=(e,t="")=>new Blob([u.from(e,"base64")],{type:t});var m=a(18735);let p=/^(.*)(\.[YJyj][ASasMm][MmLlOo][LlNn]?)(\/.*)?$/,g=e=>{let t=e.match(p);return t?t[1]+t[2]:e},h=(e,t,a,r)=>{let{state:l}=(0,m.U8)(),[c,u]=s.useState(),d=e?.startsWith(i()(l.api.stableHttpHost)+"/api")||e?.startsWith(i()(l.api.httpHost)+"/api"),p=!e?.startsWith("http"),h=g(r??""),f=encodeURIComponent(n.h(o.p(h??""),e??"")),y=`${l.api.httpHost}/api/v1/projects/${t}/branches/${a}/images/${f}`,w=d?e?.replace(l.api.stableHttpHost,l.api.httpHost):p?y:e,E=w&&(d||p);return s.useEffect(()=>{u(void 0),E&&b(w,l.auth.jwt).then(u).catch(console.error)},[w,E,l.api.httpHost,l.api.stableHttpHost,l.auth.jwt]),E?c:e},f=(e,t,a)=>{let n=s.memo(n=>{let o=h(n.src,e,t,a);return o?s.createElement(r.Kh.img,{...n,src:o}):null});return n.displayName="DocsImage",n};async function b(e,t){let a=await fetch(e,{headers:{...t?{authorization:`Bearer ${t}`}:{}}});if(404===a.status)throw Error(`${e} returned a 404`);{let e;if("application/json"===a.headers.get("content-type")){let t=await a.json(),r=(0,c.imageMimeType)(t.filepath);e=d(t.file,r)}else e=await a.blob();return URL.createObjectURL(e)}}},26276:(e,t,a)=>{"use strict";a.d(t,{m:()=>d});var r=a(15990),n=a(11491),o=a(32353),l=a(14041),i=a(18690),s=a(13750),c=a(18735),u=a(37401);let d=l.memo(({branchSlug:e,projectId:t,placeholder:a,onOpen:d})=>{let{state:m,effects:p}=(0,c.U8)(),{isOpen:g,open:h,close:f}=(0,o.useModalState)(),[b,y]=l.useState(""),{isResponsiveLayoutEnabled:w}=(0,s.s)(),E=(0,r.encodeID)("wk",m.workspaces.currentWorkspaceId),v=t?[(0,r.encodeID)("prj",t)]:void 0,k=(0,i.useNavigate)(),{data:_,error:x,isFetching:I}=(0,n.jL)({search:b,workspaceId:E,projectIds:v,branch:e,pause:!b||!g});(0,l.useEffect)(()=>{g&&p.reporter.log({event:"search_opened",payload:{scope:t?"project":"workspace"}})},[p.reporter,g,t]),x&&p.notifications.danger({message:"Error while loading search results."});let S=e=>{p.reporter.log({event:"search_result_selected",payload:{scope:t?"project":"workspace"}}),e&&p.router.navigate(k,`/docs/${e.project_slug}/${e.slug}`),f()};return l.createElement(l.Fragment,null,w?l.createElement(l.Fragment,null,l.createElement(o.Button,{"data-test":"show-search-overlay",onClick:()=>{h(),d&&d()},appearance:"minimal"},l.createElement(o.Icon,{icon:"magnifying-glass"})),l.createElement(u.P,{isFetching:I,search:b,setSearch:y,data:_,isSearchShowing:g,onClose:f,onClick:S})):l.createElement(o.Flex,{alignItems:"center",h:"full"},l.createElement(o.Icon,{icon:["far","magnifying-glass"],color:"muted"}),l.createElement(o.Box,{as:"input","data-test":"search-project","aria-label":"Search Project",pl:4,pr:12,bg:"transparent",h:"full",w:"full",fontSize:"lg",placeholder:a||"Search",value:"",onChange:g?()=>null:h,onClick:()=>{h(),d&&d()}}),l.createElement(n.vj,{isLoading:I,search:b,searchResults:_,onSearch:y,isOpen:g,onClose:f,onClick:S})))})},95453:(e,t,a)=>{"use strict";a.d(t,{R:()=>l});var r=a(14041),n=a(62004),o=a(18735);let l=({projectName:e,projectDescription:t,nodeName:a,nodeSummary:l})=>{let{state:i}=(0,o.U8)(),s=e,c=t;return a&&(s=`${a} | ${e}`),l&&(c=l),i.workspaces.currentWorkspace?.hidePoweredBy||(c+=" Powered by Stoplight."),r.createElement(n.m,null,r.createElement("title",null,s),r.createElement("meta",{property:"og:title",content:s}),r.createElement("meta",{property:"og:type",content:"article"}),c&&r.createElement("meta",{name:"description",content:c}),c&&r.createElement("meta",{property:"og:description",content:c}))}},86774:(e,t,a)=>{"use strict";a.d(t,{e:()=>l});var r=a(14041),n=a(62104),o=a(82220);let l=({error:e})=>"NOT_FOUND"===e.graphQLErrors[0]?.extensions?.code?r.createElement(n.m,null):r.createElement(o.g,null)},62104:(e,t,a)=>{"use strict";a.d(t,{m:()=>i});var r=a(32353),n=a(14041),o=a(1465),l=a(1218);let i=({title:e="Page not found",children:t})=>{let a=(0,o.gx)(),i=(0,o.ks)();return a.forceStatusCode(i.forcedStatusCode??404),n.createElement(l.o,null,n.createElement(r.VStack,{spacing:2,textAlign:"center"},n.createElement(r.Box,{fontSize:"2xl",fontWeight:"medium"},e),t))}},82220:(e,t,a)=>{"use strict";a.d(t,{g:()=>i});var r=a(32353),n=a(14041),o=a(1465),l=a(1218);let i=()=>{let e=(0,o.gx)(),t=(0,o.ks)();return e.forceStatusCode(t.forcedStatusCode??500),n.createElement(l.o,null,n.createElement(r.Box,{fontSize:"xl",fontWeight:"medium"},"500 | Something went wrong"))}},45066:(e,t,a)=>{"use strict";a.d(t,{y:()=>d});var r=a(39904),n=a(99870),o=a.n(n),l=a(14041),i=a(57691),s=a(18735),c=a(19175),u=a(11017);let d=e=>{let{feature:t,large:a,minimal:n,className:d,suffix:m,additionalUsage:p}=e,{actions:g}=(0,s.U8)(),{featureRequiresUpgrade:h}=(0,c._m)(),{getLowestPaidProductForFeature:f}=(0,u.s)();if(!h(t,p))return null;let b=f(t,p);return b?l.createElement(r.Tag,{icon:l.createElement(r.FAIcon,{icon:"bolt"}),style:i.CE[b.name],interactive:!0,onClick:()=>{g.ui.showFeatureDialog(t)},className:o()("cursor-pointer hover:opacity-75",d),large:a,"data-test":"feature-badge"},!n&&`${"Pro Team"===b.description?"Pro Team":b.description}${m?` ${m}`:""}`):null}},75499:(e,t,a)=>{"use strict";a.d(t,{$X:()=>r,WR:()=>l,Wc:()=>c,X:()=>i,Yo:()=>s,e5:()=>n,gE:()=>u,y0:()=>o});let r=1,n=2,o=3,l=4,i=5,s="Please contact sales to get a quote on pricing.",c="Please contact your workspace admin to upgrade.",u="Plan information failed to load. Sorry about that! Please refresh the page and try again."},70707:(e,t,a)=>{"use strict";a.d(t,{z:()=>l});var r=a(32353),n=a(14041);let o={error:{label:"Error",icon:"circle-exclamation",color:"danger"},warn:{label:"Warning",icon:"exclamation-triangle",color:"warning"},info:{label:"Information",icon:"circle-info",color:"primary"},hint:{label:"Hint",icon:"lightbulb-exclamation",color:"success"},off:{label:"Disabled",icon:"ban",color:"muted"}},l=({fa:e="fas",severity:t,...a})=>{let l=t?o[t].icon:"question",i=t&&o[t].color;return n.createElement(r.Box,{as:r.Icon,color:i,icon:[e,l],...a})}},44007:(e,t,a)=>{"use strict";a.d(t,{f:()=>o});var r=a(14041);let n=a(63562).A,o=({date:e,...t})=>r.createElement(n,{date:e,minPeriod:20,formatter:(e,t,a)=>"second"===t?"just now":`${e} ${t}${1!==e?"s":""} ${a}`,...t})},57691:(e,t,a)=>{"use strict";a.d(t,{$O:()=>g,CE:()=>S,CF:()=>i.CF,CI:()=>d,Cp:()=>x,FI:()=>y,GI:()=>j,KJ:()=>s,Mh:()=>i.Mh,Mt:()=>w,T_:()=>m,UQ:()=>_,Xk:()=>c,aC:()=>u,az:()=>h,cp:()=>k,mU:()=>v,n9:()=>i.n9,qB:()=>E,s3:()=>p,wZ:()=>b,xF:()=>I,xv:()=>f});var r=a(87204),n=a(3411),o=a(45250),l=a(799),i=a(35179);let s=!0,c=!1,u="/graphql",d=/^[a-zA-Z0-9.!#$%&''*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,m=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i,p=/(?:[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?\.)+[a-z0-9][a-z0-9-]{0,61}[a-z0-9]/,g=/^[a-z\d](?:[a-z_\d]|-(?=[a-z\d])){0,38}$/,h=/^https?:\/\/(?:www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b(?:[-a-zA-Z0-9()@:%_\+.~#?&\/=]*)$/,f="2.0",b="https://stoplight.io",y="https://support.stoplight.io",w=`There was an error processing your subscription. Please visit ${y} if this continues to happen.`,E={explorer:"chart-network",studio:"pencil-ruler",quality:"drafting-compass",settings:"cog",proposals:"code-pull-request"},v={http_operation:r.pvD,http_service:r.jBL,http_callback:r.KKr,http_webhook:r.y_8,article:r.ReK,model:r.br3,http_server:r.D6w,table_of_contents:r.ITF,spectral_ruleset:r.R1H,styleguide:r.R1H,generic:r.h8M,unknown:r.h8M,image:r.xdS,stoplight_resolutions:r.h8M,stoplight_override:r.h8M},k=(0,o.mapValues)(v,e=>e.iconName),_={article:"blue",model:"green",http_service:"orange",http_operation:"purple",http_callback:"green",http_webhook:"blue",http_server:"gray",generic:"gray",table_of_contents:"gray",spectral_ruleset:"red",styleguide:"red",unknown:"gray",image:"orange",stoplight_resolutions:"gray",stoplight_override:"gray"},x={article:"Article",model:"Model",http_service:"API",http_operation:"Endpoint",http_server:"HTTP Server",http_callback:"Callbacks",http_webhook:"Webhooks",table_of_contents:"Table of Contents",spectral_ruleset:"Spectral",styleguide:"Style Guide",generic:"generic",unknown:"unknown",image:"Image",stoplight_resolutions:"Stoplight Resolutions",stoplight_override:"Stoplight Override"},I={[l.KXp.AzureDevopsServices]:n.v6.AzureDevOpsServices,[l.KXp.AzureDevopsServer]:n.v6.AzureDevOpsServer,[l.KXp.Builtin]:n.v6.Builtin,[l.KXp.BitbucketCloud]:n.v6.BitbucketCloud,[l.KXp.BitbucketDataCenter]:n.v6.BitbucketDataCenter,[l.KXp.Github]:n.v6.GitHub,[l.KXp.Gitlab]:n.v6.GitLab,[l.KXp.Ldap]:n.v6.LDAP,[l.KXp.Saml]:n.v6.SAML},S={[l.mmV.Free]:{backgroundColor:"#0b6fcc",color:"#ffffff"},[l.mmV.Basic]:{backgroundColor:"#1aabff",color:"#ffffff"},[l.mmV.Startup]:{backgroundColor:"#48bb78",color:"#ffffff"},[l.mmV.ProTeam]:{backgroundColor:"#9F7AEA",color:"#ffffff"},[l.mmV.Enterprise]:{backgroundColor:"#f6993f",color:"#ffffff"}},j=20},799:(e,t,a)=>{"use strict";a.d(t,{$2t:()=>Q,$GR:()=>ee,AFr:()=>av,AYw:()=>aj,AkU:()=>aF,BAf:()=>I,BL3:()=>aW,D1J:()=>rt,DXd:()=>tQ,E4M:()=>X,Gmb:()=>o,H96:()=>rl,HAK:()=>am,HWy:()=>eu,IhF:()=>as,JCQ:()=>tz,JY8:()=>aG,Jd3:()=>A,Jg8:()=>en,JoT:()=>aM,KXp:()=>$,Kme:()=>t1,L7X:()=>tE,M2u:()=>es,MYH:()=>aJ,Mlz:()=>ay,Od2:()=>tW,Oqk:()=>ak,OrZ:()=>tk,PIk:()=>rr,PLc:()=>aE,PQr:()=>aI,PSJ:()=>a3,PnW:()=>aV,QG7:()=>t0,QTu:()=>t8,RCW:()=>rd,SZE:()=>t4,Tgv:()=>em,Tko:()=>aN,V8R:()=>ra,V9L:()=>az,YrK:()=>aB,_G8:()=>au,a8s:()=>ae,alb:()=>rc,b5v:()=>aP,b7w:()=>t2,cg:()=>tg,eI0:()=>aa,eU_:()=>an,fxF:()=>i,gDJ:()=>T,gNr:()=>ri,hn2:()=>tN,htT:()=>tf,iBT:()=>r,ihd:()=>tG,jZF:()=>tM,jlC:()=>aX,l2p:()=>eb,l4F:()=>ro,mat:()=>j,mmV:()=>d,nXo:()=>a0,nzi:()=>a8,o$U:()=>tb,oA6:()=>aR,oLl:()=>a7,oOq:()=>ao,ohD:()=>tV,pgu:()=>al,qMk:()=>tD,qlL:()=>rs,rBE:()=>ag,rUz:()=>tC,rWN:()=>re,s4v:()=>af,sDI:()=>n,sWH:()=>tK,suM:()=>at,tF6:()=>t7,tsH:()=>tY,twU:()=>a_,uXJ:()=>tw,vMM:()=>a2,vml:()=>rn,vtJ:()=>eV,w0M:()=>t3,w9I:()=>aQ,wOt:()=>aw,xET:()=>tx,yAc:()=>tS,ySk:()=>tZ,zCc:()=>tF,zod:()=>tA,zub:()=>aT});var r,n,o,l,i,s,c,u,d,m,p,g,h,f,b,y,w,E,v,k,_,x,I,S,j,C,P,A,B,D,T,F,$,N,U,M,R,W,L,G,O,z,q,V,H,Q,K,J,Y,X,Z,ee,et,ea,er,en,eo,el,ei,es,ec,eu,ed,em,ep,eg,eh,ef,eb,ey,ew,eE,ev,ek,e_,ex,eI,eS,ej,eC,eP,eA,eB,eD,eT,eF,e$,eN,eU,eM,eR,eW,eL,eG,eO,ez,eq,eV,eH,eQ,eK,eJ,eY,eX,eZ,e0,e1,e2,e4,e3,e5,e8,e6,e7,e9,te,tt=a(94370),ta=a(97249);!function(e){e.Manual="manual",e.PullRequestMerged="pullRequestMerged",e.PullRequestOpened="pullRequestOpened",e.Push="push"}(r||(r={})),function(e){e.Created="created",e.Denied="denied",e.Disabled="disabled"}(n||(n={})),function(e){e.Article="article",e.HttpOperation="http_operation",e.HttpServer="http_server",e.HttpService="http_service",e.Model="model",e.Unknown="unknown"}(o||(o={})),function(e){e.Internal="internal",e.Private="private",e.Public="public"}(l||(l={})),function(e){e.Internal="internal",e.Private="private",e.Public="public"}(i||(i={})),function(e){e.Asc="ASC",e.Desc="DESC"}(s||(s={})),function(e){e.Asc="asc",e.AscNullsFirst="asc_nulls_first",e.AscNullsLast="asc_nulls_last",e.Desc="desc",e.DescNullsFirst="desc_nulls_first",e.DescNullsLast="desc_nulls_last"}(c||(c={})),function(e){e.BillingProductId="billingProductId",e.FeatureId="featureId",e.Id="id",e.MaxQuantity="maxQuantity"}(u||(u={})),function(e){e.Basic="basic",e.Enterprise="enterprise",e.Free="free",e.ProTeam="pro_team",e.Startup="startup"}(d||(d={})),function(e){e.Comment="comment",e.Value="value"}(m||(m={})),function(e){e.Description="description",e.Id="id",e.IncludedMembers="includedMembers",e.Name="name",e.Priority="priority"}(p||(p={})),function(e){e.Comment="comment",e.Value="value"}(g||(g={})),function(e){e.BaseUri="baseUri",e.BranchId="branchId",e.CreatedAt="createdAt",e.Id="id",e.Internal="internal",e.IsFile="isFile",e.IsLatestVersion="isLatestVersion",e.Name="name",e.NodeId="nodeId",e.Slug="slug",e.SnapshotId="snapshotId",e.StableId="stable_id",e.Tsv="tsv",e.UpdatedAt="updatedAt",e.Version="version"}(h||(h={})),function(e){e.BranchesPkey="branches_pkey",e.BranchesProjectIdShareTokenKey="branches_project_id_share_token_key",e.BranchesProjectIdSlugKey="branches_project_id_slug_key"}(f||(f={})),function(e){e.ArticleCount="articleCount",e.BaselineBranchId="baselineBranchId",e.CommitHash="commitHash",e.CreatedAt="createdAt",e.HttpOperationCount="httpOperationCount",e.HttpServiceCount="httpServiceCount",e.Id="id",e.IsDefault="isDefault",e.IsPublished="isPublished",e.LastAnalyzedAt="lastAnalyzedAt",e.ModelCount="modelCount",e.Name="name",e.NodeCount="nodeCount",e.ProjectId="projectId",e.ShareEnabled="shareEnabled",e.ShareToken="shareToken",e.Slug="slug",e.StartCommitSha="start_commit_sha",e.TableOfContentsCount="tableOfContentsCount",e.UpdatedAt="updatedAt"}(b||(b={})),function(e){e.CommitHash="commitHash",e.IsDefault="isDefault",e.IsPublished="isPublished",e.Name="name",e.ShareEnabled="shareEnabled",e.ShareToken="shareToken",e.StartCommitSha="start_commit_sha"}(y||(y={})),function(e){e.ChildBranchNodeId="childBranchNodeId",e.ChildNodeType="childNodeType",e.ChildNodeUri="childNodeUri",e.ChildSnapshotData="childSnapshotData",e.Id="id",e.ParentBranchNodeId="parentBranchNodeId"}(w||(w={})),function(e){e.Id="id",e.ProjectId="project_id",e.Sha="sha"}(E||(E={})),function(e){e.EmailsEmailKey="emails_email_key",e.EmailsPkey="emails_pkey"}(v||(v={})),function(e){e.ConfirmedAt="confirmedAt",e.CreatedAt="createdAt",e.Email="email",e.Id="id",e.Primary="primary",e.UpdatedAt="updatedAt",e.UserId="userId"}(k||(k={})),function(e){e.Email="email",e.Primary="primary"}(_||(_={})),function(e){e.CreatedAt="createdAt",e.Data="data",e.ExternalId="externalId",e.Id="id",e.UpdatedAt="updatedAt",e.UserId="userId",e.WorkspaceIntegrationId="workspaceIntegrationId"}(x||(x={})),function(e){e.ActivityLogs="activity_logs",e.ApiAccess="api_access",e.Changelogs="changelogs",e.CustomDomain="custom_domain",e.CustomGitIntegration="custom_git_integration",e.CustomTheme="custom_theme",e.DependencyGraph="dependency_graph",e.DesignLibrary="design_library",e.DesignLibraryMasking="design_library_masking",e.Discussions="discussions",e.Editors="editors",e.Favicon="favicon",e.GoogleTagManager="google_tag_manager",e.Groups="groups",e.Guests="guests",e.GuestsAsMembers="guests_as_members",e.HostedMocking="hosted_mocking",e.Localizejs="localizejs",e.Members="members",e.MultiBranch="multi_branch",e.OauthClientApps="oauth_client_apps",e.PrivateProjects="private_projects",e.Projects="projects",e.Redirects="redirects",e.SamlLdapIntegration="saml_ldap_integration",e.ShowReferralBanner="show_referral_banner",e.StyleGuides="style_guides",e.Teams="teams",e.Viewers="viewers",e.Whitelabel="whitelabel",e.WhitelistedDomains="whitelisted_domains",e.WorkspaceClientExportRateLimitPerMinute="workspace_client_export_rate_limit_per_minute"}(I||(I={})),function(e){e.Comment="comment",e.Value="value"}(S||(S={})),function(e){e.Limit="limit",e.Toggle="toggle"}(j||(j={})),function(e){e.Comment="comment",e.Value="value"}(C||(C={})),function(e){e.Id="id",e.Name="name",e.Type="type"}(P||(P={})),function(e){e.GroupDelete="group_delete",e.GroupLeave="group_leave",e.GroupMemberAdd="group_member_add",e.GroupMemberDelete="group_member_delete",e.GroupMemberRead="group_member_read",e.GroupProjectsAdd="group_projects_add",e.GroupProjectsRemove="group_projects_remove",e.GroupRead="group_read",e.GroupSettingsView="group_settings_view",e.GroupUpdate="group_update"}(A||(A={})),function(e){e.Comment="comment",e.Value="value"}(B||(B={})),function(e){e.Permission="permission",e.Role="role"}(D||(D={})),function(e){e.Admin="admin",e.WorkspaceGlobalAdmin="workspace_global_admin"}(T||(T={})),function(e){e.GroupId="group_id",e.GroupMemberId="group_member_id",e.Permission="permission",e.Role="role",e.UserId="user_id",e.WorkspaceId="workspace_id"}(F||(F={})),function(e){e.AzureDevopsServer="azure_devops_server",e.AzureDevopsServices="azure_devops_services",e.BitbucketCloud="bitbucket_cloud",e.BitbucketDataCenter="bitbucket_data_center",e.Builtin="builtin",e.Github="github",e.Gitlab="gitlab",e.Ldap="ldap",e.Saml="saml"}($||($={})),function(e){e.Config="config",e.CreatedAt="createdAt",e.Id="id",e.Kind="kind",e.Name="name",e.Shortcode="shortcode",e.UpdatedAt="updatedAt"}(N||(N={})),function(e){e.MasksDataHashKey="masks_data_hash_key",e.MasksPkey="masks_pkey"}(U||(U={})),function(e){e.Data="data",e.DataHash="dataHash",e.Id="id"}(M||(M={})),function(e){e.Data="data",e.DataHash="dataHash"}(R||(R={})),function(e){e.Additional="additional",e.Content="content",e.Name="name",e.Node="node",e.Operation="operation",e.Optional="optional",e.Parameter="parameter",e.Required="required",e.Response="response",e.Server="server",e.Spec="spec",e.Text="text",e.Type="type",e.Unknown="unknown"}(W||(W={})),function(e){e.Added="added",e.Code="code",e.Cookie="cookie",e.Deprecated="deprecated",e.Description="description",e.First="first",e.Header="header",e.JsonSchema="json_schema",e.Last="last",e.MediaType="media_type",e.Name="name",e.Path="path",e.Property="property",e.Query="query",e.RequestBody="request_body",e.Security="security",e.Success="success",e.TwoXx="two_xx",e.Unknown="unknown"}(L||(L={})),function(e){e.Add="add",e.Copy="copy",e.Move="move",e.Remove="remove",e.Replace="replace",e.Test="test",e.Text="text",e.Unknown="unknown"}(G||(G={})),function(e){e.Major="major",e.Minor="minor",e.Patch="patch",e.Unknown="unknown"}(O||(O={})),function(e){e.BranchId="branchId",e.Code="code",e.Context="context",e.CreatedAt="createdAt",e.Data="data",e.Id="id",e.Level="level",e.Message="message",e.NodeId="nodeId",e.Operation="operation",e.Path="path",e.Semver="semver",e.UpdatedAt="updatedAt"}(z||(z={})),function(e){e.Apng="apng",e.Avif="avif",e.Bmp="bmp",e.Gif="gif",e.Javascript="javascript",e.Jpeg="jpeg",e.Json="json",e.Markdown="markdown",e.Png="png",e.Svg="svg",e.Webp="webp",e.Yaml="yaml"}(q||(q={})),function(e){e.Link="link",e.Parent="parent",e.Ref="ref"}(V||(V={})),function(e){e.Generic="generic",e.Image="image",e.JsonSchema="json_schema",e.Markdown="markdown",e.Md="md",e.Oas2="oas2",e.Oas3="oas3",e.SpectralRuleset="spectral_ruleset",e.Styleguide="styleguide",e.TableOfContents="table_of_contents"}(H||(H={})),function(e){e.Article="article",e.Generic="generic",e.HttpOperation="http_operation",e.HttpServer="http_server",e.HttpService="http_service",e.Image="image",e.Model="model",e.SpectralRuleset="spectral_ruleset",e.Styleguide="styleguide",e.TableOfContents="table_of_contents",e.Unknown="unknown"}(Q||(Q={})),function(e){e.Comment="comment",e.Value="value"}(K||(K={})),function(e){e.ByteSize="byteSize",e.CreatedAt="createdAt",e.Data="data",e.DataHash="dataHash",e.DataSize="dataSize",e.Id="id",e.Spec="spec",e.Summary="summary",e.TagNames="tagNames",e.Type="type",e.UpdatedAt="updatedAt"}(J||(J={})),function(e){e.CreatedAt="createdAt",e.Format="format",e.Id="id",e.Uri="uri"}(Y||(Y={})),function(e){e.ProjectRead="project_read",e.WorkspaceActivityRead="workspace_activity_read",e.WorkspaceAddAdmin="workspace_add_admin",e.WorkspaceAddBilling="workspace_add_billing",e.WorkspaceAddGuest="workspace_add_guest",e.WorkspaceAddMaker="workspace_add_maker",e.WorkspaceAddOwner="workspace_add_owner",e.WorkspaceAddViewer="workspace_add_viewer",e.WorkspaceAutomationLogsView="workspace_automation_logs_view",e.WorkspaceBilling="workspace_billing",e.WorkspaceDefaultStyleGuidesCreate="workspace_default_style_guides_create",e.WorkspaceEmailDomainCreateUpdateDelete="workspace_email_domain_create_update_delete",e.WorkspaceEmailDomainRead="workspace_email_domain_read",e.WorkspaceExplorerView="workspace_explorer_view",e.WorkspaceFullMember="workspace_full_member",e.WorkspaceGlobalAdmin="workspace_global_admin",e.WorkspaceGlobalWrite="workspace_global_write",e.WorkspaceGroupsCreate="workspace_groups_create",e.WorkspaceGroupsView="workspace_groups_view",e.WorkspaceIntegrationCreateUpdateDelete="workspace_integration_create_update_delete",e.WorkspaceInternalGroupsRead="workspace_internal_groups_read",e.WorkspaceInternalProjectsJoin="workspace_internal_projects_join",e.WorkspaceInternalProjectsRead="workspace_internal_projects_read",e.WorkspaceMembersApprove="workspace_members_approve",e.WorkspaceMembersDelete="workspace_members_delete",e.WorkspaceMembersInvite="workspace_members_invite",e.WorkspaceMembersPendingRead="workspace_members_pending_read",e.WorkspaceMembersPromote="workspace_members_promote",e.WorkspaceMembersRead="workspace_members_read",e.WorkspaceOauthClientCreateUpdateDelete="workspace_oauth_client_create_update_delete",e.WorkspacePrivateProjectsRead="workspace_private_projects_read",e.WorkspaceProjectsCreate="workspace_projects_create",e.WorkspaceProjectsView="workspace_projects_view",e.WorkspacePublicProjectsJoin="workspace_public_projects_join",e.WorkspaceSettingsCreateUpdateDelete="workspace_settings_create_update_delete",e.WorkspaceSettingsRead="workspace_settings_read",e.WorkspaceStyleguideProjectsCreate="workspace_styleguide_projects_create",e.WorkspaceTeamCreate="workspace_team_create",e.WorkspaceTeamsView="workspace_teams_view",e.WorkspaceUnpublishedBranchesRead="workspace_unpublished_branches_read"}(X||(X={})),function(e){e.Comment="comment",e.Value="value"}(Z||(Z={})),function(e){e.Design="design",e.DesignLibrary="design_library",e.StyleGuide="style_guide"}(ee||(ee={})),function(e){e.Editor="editor",e.Inherit="inherit",e.Viewer="viewer"}(et||(et={})),function(e){e.Comment="comment",e.Value="value"}(ea||(ea={})),function(e){e.CreatedAt="createdAt",e.Id="id",e.ProjectId="projectId",e.Role="role",e.UpdatedAt="updatedAt",e.UserId="userId",e.WorkspaceId="workspaceId"}(er||(er={})),function(e){e.ProjectAdminAdd="project_admin_add",e.ProjectAutomationLogsRead="project_automation_logs_read",e.ProjectBranchCreateDelete="project_branch_create_delete",e.ProjectBranchUpdate="project_branch_update",e.ProjectContentsUpdate="project_contents_update",e.ProjectDelete="project_delete",e.ProjectEditorAdd="project_editor_add",e.ProjectGroupUpdate="project_group_update",e.ProjectLeave="project_leave",e.ProjectMemberDelete="project_member_delete",e.ProjectMembersAdd="project_members_add",e.ProjectOwnershipUpdate="project_ownership_update",e.ProjectPublishedBranchRead="project_published_branch_read",e.ProjectRead="project_read",e.ProjectSettingsView="project_settings_view",e.ProjectUnpublishedBranchRead="project_unpublished_branch_read",e.ProjectUpdate="project_update",e.ProjectViewerAdd="project_viewer_add"}(en||(en={})),function(e){e.Comment="comment",e.Value="value"}(eo||(eo={})),function(e){e.CiToken="ci_token",e.ProjectId="project_id"}(el||(el={})),function(e){e.Permission="permission",e.Role="role"}(ei||(ei={})),function(e){e.Admin="admin",e.Editor="editor",e.Guest="guest",e.Owner="owner",e.Viewer="viewer",e.WorkspaceGlobalAdmin="workspace_global_admin"}(es||(es={})),function(e){e.Comment="comment",e.Value="value"}(ec||(ec={})),function(e){e.Cli="cli",e.Local="local",e.Vcs="vcs",e.Web="web"}(eu||(eu={})),function(e){e.Permission="permission",e.ProjectId="project_id",e.Role="role",e.UserId="user_id",e.WorkspaceId="workspace_id",e.WorkspaceMemberId="workspace_member_id"}(ed||(ed={})),function(e){e.Internal="internal",e.Private="private",e.Public="public"}(em||(em={})),function(e){e.ProjectsCiTokenKey="projects_ci_token_key",e.ProjectsIdGroupIdKey="projects_id_group_id_key",e.ProjectsPkey="projects_pkey",e.ProjectsWorkspaceIdSlugIdx="projects_workspace_id_slug_idx",e.ProjectsWorkspaceIdSlugKey="projects_workspace_id_slug_key",e.ProjectsWorkspaceIntegrationIdExternalIdKey="projects_workspace_integration_id_external_id_key"}(ep||(ep={})),function(e){e.AutoInviteCommitters="autoInviteCommitters",e.CreatedAt="createdAt",e.CreatorId="creatorId",e.Description="description",e.ExternalId="externalId",e.ExternalOrgSlug="externalOrgSlug",e.ExternalSlug="externalSlug",e.ExternalStarCount="externalStarCount",e.Flavor="flavor",e.GroupId="groupId",e.GroupRole="groupRole",e.IconColor="iconColor",e.IconName="iconName",e.Id="id",e.IsDefaultStyleGuide="isDefaultStyleGuide",e.IsDesignLibrary="isDesignLibrary",e.MigratedFromClassicProjectId="migrated_from_classic_project_id",e.MigratedFromNextProjectId="migrated_from_next_project_id",e.Name="name",e.Pinned="pinned",e.RemoteUrlHttp="remoteUrlHttp",e.RemoteUrlSsh="remoteUrlSsh",e.Slug="slug",e.Type="type",e.UpdatedAt="updatedAt",e.UseLegacyExporter="useLegacyExporter",e.Visibility="visibility",e.WorkspaceId="workspaceId",e.WorkspaceIntegrationId="workspaceIntegrationId"}(eg||(eg={})),function(e){e.AutoInviteCommitters="autoInviteCommitters",e.Description="description",e.ExternalId="externalId",e.ExternalOrgSlug="externalOrgSlug",e.ExternalSlug="externalSlug",e.ExternalStarCount="externalStarCount",e.GroupId="groupId",e.GroupRole="groupRole",e.IconColor="iconColor",e.IconName="iconName",e.IsDesignLibrary="isDesignLibrary",e.Name="name",e.RemoteUrlHttp="remoteUrlHttp",e.RemoteUrlSsh="remoteUrlSsh",e.Slug="slug",e.Type="type",e.Visibility="visibility",e.WorkspaceIntegrationId="workspaceIntegrationId"}(eh||(eh={})),function(e){e.AllowUserLogin="allow_user_login",e.AllowUserRegister="allow_user_register",e.Config="config",e.Enabled="enabled",e.Id="id",e.IntegrationId="integration_id",e.Kind="kind",e.Name="name",e.WorkspaceId="workspace_id"}(ef||(ef={})),function(e){e.Admin="admin",e.Billing="billing",e.Guest="guest",e.Maker="maker",e.Owner="owner",e.ProjectExport="project_export",e.Viewer="viewer"}(eb||(eb={})),function(e){e.Comment="comment",e.Value="value"}(ey||(ey={})),function(e){e.Permission="permission",e.Role="role"}(ew||(ew={})),function(e){e.Id="id",e.Priority="priority",e.Role="role"}(eE||(eE={})),function(e){e.Billing="billing",e.EmailServer="email_server"}(ev||(ev={})),function(e){e.Comment="comment",e.Value="value"}(ek||(ek={})),function(e){e.Id="id",e.Name="name"}(e_||(e_={})),function(e){e.StarsNodeIdUserIdProjectIdKey="stars_node_id_user_id_project_id_key",e.StarsPkey="stars_pkey"}(ex||(ex={})),function(e){e.CreatedAt="createdAt",e.Id="id",e.NodeId="nodeId",e.ProjectId="projectId",e.UserId="userId"}(eI||(eI={})),function(e){e.NodeId="nodeId",e.ProjectId="projectId"}(eS||(eS={})),(ej||(ej={})).IsFreshInstall="is_fresh_install",function(e){e.DurationMs="duration_ms",e.Error="error",e.Id="id",e.JobId="job_id",e.LogLevel="log_level",e.LoggedAt="logged_at",e.Message="message",e.Meta="meta",e.ProjectId="project_id",e.Success="success",e.TaskId="task_id",e.WorkspaceId="workspace_id"}(eC||(eC={})),function(e){e.Id="id",e.JobId="jobId",e.LogLevel="logLevel",e.LoggedAt="loggedAt",e.Message="message",e.Meta="meta",e.TaskId="taskId",e.WorkspaceId="workspaceId"}(eP||(eP={})),function(e){e.Depth="depth",e.FromBranchNodeId="fromBranchNodeId",e.FromBranchNodeName="fromBranchNodeName",e.FromBranchNodePath="fromBranchNodePath",e.FromBranchNodeType="fromBranchNodeType",e.FromBranchNodeUri="fromBranchNodeUri",e.FromBranchNodeVersion="fromBranchNodeVersion",e.Id="id",e.ToBranchNodeId="toBranchNodeId",e.ToBranchNodeName="toBranchNodeName",e.ToBranchNodePath="toBranchNodePath",e.ToBranchNodeType="toBranchNodeType",e.ToBranchNodeUri="toBranchNodeUri",e.ToBranchNodeVersion="toBranchNodeVersion",e.Type="type"}(eA||(eA={})),function(e){e.BranchCommitHash="branch_commit_hash",e.BranchId="branch_id",e.BranchIsDefault="branch_is_default",e.BranchNodeId="branch_node_id",e.BranchNodeInternal="branch_node_internal",e.BranchNodeIsFile="branch_node_is_file",e.BranchNodeIsLatestVersion="branch_node_is_latest_version",e.BranchNodeName="branch_node_name",e.BranchNodeSlug="branch_node_slug",e.BranchNodeStableId="branch_node_stable_id",e.BranchNodeVersion="branch_node_version",e.BranchSlug="branch_slug",e.HighlightedData="highlighted_data",e.HighlightedName="highlighted_name",e.HighlightedSummary="highlighted_summary",e.Id="id",e.NodeId="node_id",e.NodeUri="node_uri",e.ProjectDescription="project_description",e.ProjectIconName="project_icon_name",e.ProjectId="project_id",e.ProjectIsDesignLibrary="project_is_design_library",e.ProjectName="project_name",e.ProjectSlug="project_slug",e.ProjectVisibility="project_visibility",e.Score="score",e.SnapshotId="snapshot_id",e.SnapshotSpec="snapshot_spec",e.SnapshotSummary="snapshot_summary",e.SnapshotTagNames="snapshot_tag_names",e.SnapshotType="snapshot_type",e.SnapshotUpdatedAt="snapshot_updated_at",e.WorkspaceId="workspace_id"}(eB||(eB={})),function(e){e.DurationMs="durationMs",e.JobId="jobId",e.Payload="payload",e.ProjectId="projectId",e.StartedAt="startedAt",e.Status="status",e.TaskId="taskId",e.TaskJobId="task_job_id",e.WorkspaceId="workspaceId"}(eD||(eD={})),function(e){e.AvatarUrl="avatarUrl",e.BetaWebProjects="betaWebProjects",e.CreatedAt="createdAt",e.FirstName="firstName",e.Id="id",e.IsSiteAdmin="isSiteAdmin",e.LastName="lastName",e.LastSeenAt="lastSeenAt",e.SurveyCollaboration="surveyCollaboration",e.SurveyCompanyName="surveyCompanyName",e.SurveyDesign="surveyDesign",e.SurveyExternalDocs="surveyExternalDocs",e.SurveyGovernance="surveyGovernance",e.SurveyInternalDocs="surveyInternalDocs",e.SurveyMocking="surveyMocking",e.SurveyNumApis="surveyNumApis",e.SurveyOpenapiUsage="surveyOpenapiUsage",e.SurveyPersona="surveyPersona",e.SurveySpeakToProductExpert="surveySpeakToProductExpert",e.SurveyUc="surveyUC",e.Timezone="timezone",e.UpdatedAt="updatedAt",e.Username="username"}(eT||(eT={})),function(e){e.Attempts="attempts",e.CreatedAt="created_at",e.Id="id",e.LastError="last_error",e.MaxAttempts="max_attempts",e.Payload="payload",e.ProjectId="project_id",e.RunAt="run_at",e.Task="task",e.UpdatedAt="updated_at",e.WorkspaceId="workspace_id"}(eF||(eF={})),(e$||(e$={})).WorkspaceDefaultStyleguidesPkey="workspace_default_styleguides_pkey",function(e){e.EnabledForNewProjects="enabledForNewProjects",e.Id="id",e.ProjectId="project_id",e.WorkspaceId="workspace_id"}(eN||(eN={})),function(e){e.EnabledForNewProjects="enabledForNewProjects",e.Id="id",e.ProjectId="project_id",e.WorkspaceId="workspace_id"}(eU||(eU={})),function(e){e.WorkspaceDomainWhitelistPkey="workspace_domain_whitelist_pkey",e.WorkspaceDomainWhitelistWorkspaceIdDomainKey="workspace_domain_whitelist_workspace_id_domain_key"}(eM||(eM={})),function(e){e.Domain="domain",e.Id="id",e.RoleName="roleName",e.WorkspaceId="workspaceId"}(eR||(eR={})),function(e){e.Domain="domain",e.RoleName="roleName"}(eW||(eW={})),function(e){e.FeatureId="featureId",e.Id="id",e.MaxQuantity="maxQuantity",e.WorkspaceId="workspaceId"}(eL||(eL={})),function(e){e.WorkspaceIntegrationsPkey="workspace_integrations_pkey",e.WorkspaceIntegrationsWsIdIntgIdApiUrlKey="workspace_integrations_ws_id_intg_id_api_url_key",e.WorkspaceIntegrationsWsIdIntgIdEntryPointKey="workspace_integrations_ws_id_intg_id_entry_point_key",e.WorkspaceIntegrationsWsIdIntgIdHostUrlKey="workspace_integrations_ws_id_intg_id_host_url_key"}(eG||(eG={})),function(e){e.AllowUserLogin="allowUserLogin",e.AllowUserRegister="allowUserRegister",e.Config="config",e.CreatedAt="createdAt",e.Enabled="enabled",e.Id="id",e.IntegrationId="integrationId",e.Name="name",e.UpdatedAt="updatedAt",e.WorkspaceId="workspaceId"}(eO||(eO={})),(ez||(ez={})).Config="config",function(e){e.CreatedAt="createdAt",e.GroupId="groupId",e.Id="id",e.RoleName="roleName",e.UpdatedAt="updatedAt",e.WorkspaceInvitationId="workspaceInvitationId"}(eq||(eq={})),function(e){e.WorkspaceInvitationProjectsPkey="workspace_invitation_projects_pkey",e.WorkspaceInvitationProjectsWorkspaceInvitationIdProjectI="workspace_invitation_projects_workspace_invitation_id_project_i"}(eV||(eV={})),function(e){e.CreatedAt="created_at",e.Id="id",e.ProjectId="project_id",e.RoleName="roleName",e.UpdatedAt="updated_at",e.WorkspaceInvitationId="workspace_invitation_id"}(eH||(eH={})),(eQ||(eQ={})).ProjectId="project_id",function(e){e.WorkspaceInvitationsInviteTokenKey="workspace_invitations_invite_token_key",e.WorkspaceInvitationsPkey="workspace_invitations_pkey",e.WorkspaceInvitationsWorkspaceIdEmailKey="workspace_invitations_workspace_id_email_key"}(eK||(eK={})),function(e){e.CreatedAt="createdAt",e.Email="email",e.Id="id",e.InvitedByUserId="invitedByUserId",e.RoleName="roleName",e.UpdatedAt="updatedAt",e.WorkspaceId="workspaceId"}(eJ||(eJ={})),(eY||(eY={})).UpdatedAt="updatedAt",function(e){e.CreatedAt="createdAt",e.Id="id",e.IsDenied="isDenied",e.UpdatedAt="updatedAt",e.UserId="userId",e.WorkspaceId="workspaceId"}(eX||(eX={})),function(e){e.Id="id",e.Role="role",e.WorkspaceMemberId="workspaceMemberId"}(eZ||(eZ={})),function(e){e.CreatedAt="createdAt",e.Id="id",e.ReceiveDailySummary="receiveDailySummary",e.ShowOnboardProgress="show_onboard_progress",e.UpdatedAt="updatedAt",e.UserId="userId",e.WorkspaceId="workspaceId"}(e0||(e0={})),function(e){e.Permission="permission",e.Role="role",e.UserId="user_id",e.WorkspaceId="workspace_id",e.WorkspaceMemberId="workspace_member_id"}(e1||(e1={})),function(e){e.Id="id",e.Priority="priority",e.Role="role",e.UserId="user_id",e.WorkspaceId="workspace_id"}(e2||(e2={})),function(e){e.Id="id",e.MaxPriority="max_priority",e.Roles="roles",e.UserId="user_id",e.WorkspaceId="workspace_id"}(e4||(e4={})),function(e){e.AllowPublicProjects="allowPublicProjects",e.AllowSearchIndexing="allowSearchIndexing",e.AllowWebProjects="allowWebProjects",e.CreatedAt="createdAt",e.CreatorId="creatorId",e.Description="description",e.DisableCookieTracking="disableCookieTracking",e.DisableDefaultStyleguideEditing="disableDefaultStyleguideEditing",e.Domain="domain",e.FaviconUrl="faviconUrl",e.GoogleTagManager="googleTagManager",e.GuestsReceiveDailyDigest="guestsReceiveDailyDigest",e.HidePoweredBy="hidePoweredBy",e.HideSignIn="hideSignIn",e.HomeContent="homeContent",e.Id="id",e.IsTrial="isTrial",e.JoinRequestsDisabled="joinRequestsDisabled",e.Localizejs="localizejs",e.LogoUrl="logoUrl",e.MigratedFromClassic="migratedFromClassic",e.MigratedFromNext="migratedFromNext",e.Name="name",e.Redirects="redirects",e.ShowTryit="showTryit",e.ShowTryitMockServer="showTryitMockServer",e.ShowUserway="showUserway",e.Slug="slug",e.Theme="theme",e.UpdatedAt="updatedAt",e.UseAutomaticSsgConversion="useAutomaticSsgConversion",e.UseNewElements="useNewElements"}(e3||(e3={})),function(e){e.YjsDocumentsBranchIdKey="yjs_documents_branch_id_key",e.YjsDocumentsPkey="yjs_documents_pkey"}(e5||(e5={})),function(e){e.BranchId="branchId",e.CreatedAt="createdAt",e.Id="id",e.UpdatedAt="updatedAt"}(e8||(e8={})),(e6||(e6={})).Placeholder="_PLACEHOLDER",(e7||(e7={})).YjsSnapshotsPkey="yjs_snapshots_pkey",function(e){e.AutoSaved="auto_saved",e.CreatedAt="createdAt",e.DocId="docId",e.Hash="hash",e.Id="id",e.Snapshot="snapshot"}(e9||(e9={})),(te||(te={})).Placeholder="_PLACEHOLDER";let tr=(0,tt.default)`
    fragment Integration_Item on sl_integrations {
  id
  name
  kind
  config
  shortcode
  has_secrets
}
    `,tn=(0,tt.default)`
    fragment NodeChange_Item on sl_node_changes {
  id
  semver
  message
  createdAt
}
    `,to=(0,tt.default)`
    fragment Project_Item_Anonymous on sl_projects {
  id
  name
  description
  visibility
  createdAt
  updatedAt
  slug
  iconName
  iconColor
  isDesignLibrary
  workspaceIntegrationId
  type
  groupId
  useLegacyExporter
}
    `,tl=(0,tt.default)`
    fragment ProjectDetails_Anonymous on sl_projects {
  id
  type
  userPermissions {
    role
    permission
  }
  resolvedWorkspaceIntegration {
    id
    kind
    name
  }
  flavor
  ...Project_Item_Anonymous
}
    ${to}`,ti=(0,tt.default)`
    fragment Project_Item on sl_projects {
  id
  name
  description
  visibility
  createdAt
  updatedAt
  remoteUrlHttp
  remoteUrlSsh
  slug
  iconName
  iconColor
  isDesignLibrary
  externalId
  externalOrgSlug
  externalSlug
  workspaceIntegrationId
  type
  groupId
  useLegacyExporter
}
    `,ts=(0,tt.default)`
    fragment ProjectDetails on sl_projects {
  id
  type
  userPermissions {
    role
    permission
  }
  resolvedWorkspaceIntegration {
    id
    kind
    name
    config
  }
  flavor
  ...Project_Item
}
    ${ti}`,tc=(0,tt.default)`
    fragment SearchGraph_Item on sl_type_search_node_results {
  id
  highlighted_name
  highlighted_summary
  highlighted_data
  project_id
  project_name
  project_description
  project_slug
  project_visibility
  project_icon_name
  branch_commit_hash
  branch_id
  branch_slug
  branch_node_id
  branch_node_is_file
  branch_node_version
  branch_node_is_latest_version
  branch_node_name
  branch_node_stable_id
  branch_node_slug
  node_uri
  node_id
  snapshot_id
  snapshot_type
  snapshot_spec
  snapshot_summary
  snapshot_tag_names
  snapshot_updated_at
}
    `,tu=(0,tt.default)`
    fragment WorkspaceIntegration_Item on sl_workspace_integrations {
  id
  name
  integrationId
  workspaceId
  enabled
  allowUserRegister
  allowUserLogin
  config
}
    `;(0,tt.default)`
    fragment WorkspaceInvitationProject_Item on sl_workspace_invitation_projects {
  id
  workspace_invitation_id
  project_id
}
    `;let td=(0,tt.default)`
    fragment WorkspaceInvitation_Item on sl_workspace_invitations {
  id
  email
  roleName
  createdAt
  invitedBy {
    id
    username
  }
  workspaceInvitationProjects {
    id
    project_id
    project {
      id
      name
    }
  }
}
    `,tm=(0,tt.default)`
    fragment Workspace_Detail on sl_workspaces {
  id
  name
  description
  slug
  theme
  createdAt
  updatedAt
  logoUrl
  faviconUrl
  domain
  homeContent
  hidePoweredBy
  localizejs
  hideSignIn
  googleTagManager
  disableCookieTracking
  redirects
  creatorId
  migratedFromNext
  features {
    id
    maxQuantity
    feature {
      id
      name
      type
    }
  }
  integrations(order_by: {integration: {name: asc}}) {
    id
    name
    enabled
    config
    allowUserLogin
    allowUserRegister
    integration {
      id
      kind
      shortcode
      name
      config
    }
  }
  disableDefaultStyleguideEditing
  joinRequestsDisabled
  guestsReceiveDailyDigest
  allowSearchIndexing
  allowPublicProjects
  allowWebProjects
  showTryit
  showTryitMockServer
  useAutomaticSsgConversion
  showUserway
}
    `;(0,tt.default)`
    fragment Workspace_MyPermissions on sl_workspaces {
  id
  myPermissions {
    role
    permission
  }
}
    `,(0,tt.default)`
    query GlobalMetadata {
  roles(
    where: {value: {_in: ["owner", "admin", "maker", "viewer", "guest", "billing"]}}
    order_by: {priorityData: {priority: desc}}
  ) {
    value
    comment
    priorityData {
      id
      priority
    }
    permissions {
      permission
    }
  }
  permissions {
    value
    comment
  }
  nodeSnapshotTypes {
    value
    comment
  }
  systemStatus {
    is_fresh_install
  }
  billingProducts {
    id
    name
    description
    priority
    includedMembers
    features {
      id
      maxQuantity
      feature {
        id
        name
        type
      }
    }
  }
}
    `;let tp=(0,tt.default)`
    mutation AcceptInvite($token: String!, $password: String!) {
  acceptInvite(input: {password: $password, token: $token}) {
    userId
    token
    userRole
  }
}
    `;function tg(){return ta.useMutation(tp)}let th=(0,tt.default)`
    query CheckInvite($token: String!) {
  inviteEmail(token: $token) {
    output
  }
}
    `;function tf(e={}){return ta.useQuery({query:th,...e})}(0,tt.default)`
    mutation CheckLoginCapability($username: String!) {
  loginCapability(username: $username)
}
    `;let tb=(0,tt.default)`
    mutation ConnectIntegration($usernameOrEmail: String, $password: String, $code: String, $workspaceIntegrationId: Int!) {
  connectExternalAccount(
    input: {workspaceIntegrationId: $workspaceIntegrationId, usernameOrEmail: $usernameOrEmail, password: $password, code: $code}
  ) {
    token
    userId
  }
}
    `,ty=(0,tt.default)`
    mutation CreateVerifiedWorkspace($code: String!, $workspaceSlug: String!) {
  redeemCodeCreateWorkspace(input: {code: $code, workspaceSlug: $workspaceSlug}) {
    token
  }
}
    `;function tw(){return ta.useMutation(ty)}let tE=(0,tt.default)`
    query GetAuthenticationUrl($workspaceIntegrationId: Int!, $scope: String, $state: String!) {
  getAuthenticationUrl(
    workspaceIntegrationId: $workspaceIntegrationId
    scope: $scope
    state: $state
  )
}
    `,tv=((0,tt.default)`
    query GetBranchNodeAccessToken($workspaceSlug: String!, $projectSlug: String!, $nodeUri: String!, $branchSlug: String) {
  getBranchNodeAccessToken(
    workspaceSlug: $workspaceSlug
    projectSlug: $projectSlug
    nodeUri: $nodeUri
    branchSlug: $branchSlug
  ) {
    token
  }
}
    `,(0,tt.default)`
    query GetShareSessionAccessToken($workspaceId: Int!, $projectSlug: String!, $shareToken: String!) {
  getShareSessionAccessToken(
    workspaceId: $workspaceId
    projectSlug: $projectSlug
    shareToken: $shareToken
  ) {
    token
  }
}
    `,(0,tt.default)`
    query ProductBoardToken {
  productBoardToken
}
    `);function tk(e={}){return ta.useQuery({query:tv,...e})}let t_=(0,tt.default)`
    mutation SendConfirmationCode($email: String!) {
  queueConfirmationEmail(email: $email) {
    jobId
  }
}
    `;function tx(){return ta.useMutation(t_)}let tI=(0,tt.default)`
    mutation SendSignUpCode($email: String!, $workspaceId: Int!) {
  sendSignupCode(email: $email, workspaceId: $workspaceId) {
    jobId
  }
}
    `;function tS(){return ta.useMutation(tI)}let tj=(0,tt.default)`
    mutation Signup($workspaceId: Int!, $password: String!, $code: String!) {
  redeemCodeCreateAccount(
    input: {workspaceId: $workspaceId, password: $password, code: $code}
  ) {
    auth {
      token
      userId
    }
    joinRequestStatus
  }
}
    `;function tC(){return ta.useMutation(tj)}let tP=(0,tt.default)`
    mutation UpdatePassword($currentPassword: String, $newPassword: String!) {
  updatePassword(newPassword: $newPassword, currentPassword: $currentPassword)
}
    `;function tA(){return ta.useMutation(tP)}let tB=(0,tt.default)`
    mutation VerifyAndSetPassword($code: String!, $password: String!, $workspaceId: Int!) {
  redeemCodeResetPassword(
    code: $code
    password: $password
    workspaceId: $workspaceId
  ) {
    token
    userId
  }
}
    `;function tD(){return ta.useMutation(tB)}let tT=(0,tt.default)`
    query BranchNodeMetadata($projectSlug: String!, $workspaceId: Int!, $nodeId: Int, $stableId: String, $slug: String, $branchSlug: String, $includeBranchNode: Boolean!, $includeDefaultBranchNode: Boolean!) {
  branchNodes: branchNodes(
    where: {_or: [{nodeId: {_eq: $nodeId}}, {stable_id: {_eq: $stableId}}, {slug: {_eq: $slug}}], branch: {slug: {_eq: $branchSlug}, project: {slug: {_eq: $projectSlug}, workspaceId: {_eq: $workspaceId}}}}
    limit: 1
  ) @include(if: $includeBranchNode) {
    id
    name
    snapshot {
      id
      summary
    }
  }
  defaultBranchNodes: branchNodes(
    where: {_or: [{nodeId: {_eq: $nodeId}}, {stable_id: {_eq: $stableId}}, {slug: {_eq: $slug}}], branch: {isDefault: {_eq: true}, project: {slug: {_eq: $projectSlug}, workspaceId: {_eq: $workspaceId}}}}
    limit: 1
  ) @include(if: $includeDefaultBranchNode) {
    id
    name
    snapshot {
      id
      summary
    }
  }
}
    `;function tF(e={}){return ta.useQuery({query:tT,...e})}let t$=(0,tt.default)`
    query BranchNodeByUriAndBranchSlug($uri: String!, $workspaceId: Int!, $projectSlug: String!, $branchSlug: String!) {
  branchNodes(
    where: {branch: {slug: {_eq: $branchSlug}, project: {slug: {_eq: $projectSlug}, workspaceId: {_eq: $workspaceId}}}, node: {uri: {_eq: $uri}}}
    limit: 1
  ) {
    id
    name
    nodeId
    stable_id
    slug
    snapshot {
      id
      type
    }
  }
}
    `;function tN(e={}){return ta.useQuery({query:t$,...e})}let tU=(0,tt.default)`
    query BranchNodeByUriAndDefaultBranch($uri: String!, $workspaceId: Int!, $projectSlug: String!) {
  branchNodes(
    where: {branch: {isDefault: {_eq: true}, project: {slug: {_eq: $projectSlug}, workspaceId: {_eq: $workspaceId}}}, node: {uri: {_eq: $uri}}}
    limit: 1
  ) {
    id
    name
    nodeId
    stable_id
    slug
    snapshot {
      id
      type
    }
  }
}
    `;function tM(e={}){return ta.useQuery({query:tU,...e})}let tR=(0,tt.default)`
    query BranchNodeChangelog($workspaceSlug: String!, $projectSlug: String!, $uri: String!) {
  branchNodes(
    limit: 1
    where: {node: {uri: {_ilike: $uri}}, branch: {isDefault: {_eq: true}, project: {slug: {_eq: $projectSlug}, workspace: {slug: {_eq: $workspaceSlug}}}}}
  ) {
    id
    changes(limit: 50) {
      id
      ...NodeChange_Item
    }
  }
}
    ${tn}`;function tW(e={}){return ta.useQuery({query:tR,...e})}let tL=(0,tt.default)`
    query BranchNodeEdges($branchNodeId: Int!, $direction: String = "outbound", $depth: Int = 1) {
  sl_sl_node_edges(
    args: {root_branch_node_id: $branchNodeId, direction: $direction, max_depth: $depth}
  ) {
    id
    depth
    type
    fromBranchNodeId
    fromBranchNodeName
    fromBranchNodeType
    fromBranchNodeUri
    fromBranchNodePath
    fromBranchNodeVersion
    fromBranchNode {
      id
      nodeId
      stable_id
      slug
    }
    toBranchNodeId
    toBranchNodeName
    toBranchNodeType
    toBranchNodeUri
    toBranchNodePath
    toBranchNodeVersion
    toBranchNode {
      id
      nodeId
      stable_id
      slug
    }
  }
}
    `;function tG(e={}){return ta.useQuery({query:tL,...e})}let tO=(0,tt.default)`
    query DependentBranchNodeChangelog($branchNodeId: Int!, $maxDepth: Int = 5) {
  sl_sl_node_edges(
    args: {root_branch_node_id: $branchNodeId, direction: "outbound", max_depth: $maxDepth}
  ) {
    id
    toBranchNode {
      id
      changes(where: {context: {_nin: [first, last]}}) {
        id
        ...NodeChange_Item
      }
    }
  }
  sl_sl_node_edges_aggregate(
    args: {root_branch_node_id: $branchNodeId, max_depth: $maxDepth, direction: "outbound"}
  ) {
    aggregate {
      max {
        id
        depth
      }
    }
  }
}
    ${tn}`;function tz(e={}){return ta.useQuery({query:tO,...e})}let tq=(0,tt.default)`
    query SearchGraph($workspaceId: Int!, $projectIds: _int4, $search: String = "", $snapshotTypes: _text, $branchSlug: String, $limit: Int) {
  sl_sl_search_nodes(
    args: {workspaceid: $workspaceId, search: $search, snapshottypes: $snapshotTypes, projectids: $projectIds, branch: $branchSlug}
    order_by: {score: desc}
    limit: $limit
  ) {
    id
    ...SearchGraph_Item
  }
}
    ${tc}`;function tV(e={}){return ta.useQuery({query:tq,...e})}let tH=(0,tt.default)`
    query SearchGraphStarred($workspaceId: Int!, $projectIds: _int4, $search: String = "", $branchSlug: String, $snapshotTypes: _text, $starredByUserId: Int!, $limit: Int) {
  sl_sl_search_nodes(
    args: {workspaceid: $workspaceId, search: $search, projectids: $projectIds, branch: $branchSlug, snapshottypes: $snapshotTypes}
    where: {branchNode: {node: {stars: {userId: {_eq: $starredByUserId}}}}}
    order_by: {score: desc}
    limit: $limit
  ) {
    id
    ...SearchGraph_Item
  }
}
    ${tc}`;function tQ(e={}){return ta.useQuery({query:tH,...e})}let tK=(0,tt.default)`
    mutation CreateExternalWebhook($projectId: Int!) {
  createExternalWebhook(projectId: $projectId) {
    id
    webhookUrl
  }
}
    `,tJ=(0,tt.default)`
    query ExternalOrg($slug: String!, $workspaceIntegrationId: Int!) {
  getExternalOrg(slug: $slug, workspaceIntegrationId: $workspaceIntegrationId) {
    id
    name
    slug
    isPersonal
    isEnterprise
  }
}
    `;function tY(e={}){return ta.useQuery({query:tJ,...e})}let tX=(0,tt.default)`
    query ExternalOrgs($workspaceIntegrationId: Int!) {
  getExternalOrgs(workspaceIntegrationId: $workspaceIntegrationId) {
    id
    name
    slug
    isPersonal
  }
}
    `;function tZ(e={}){return ta.useQuery({query:tX,...e})}let t0=(0,tt.default)`
    query ExternalProject($workspaceIntegrationId: Int!, $repoUrl: String!) {
  getExternalRepo(url: $repoUrl, workspaceIntegrationId: $workspaceIntegrationId) {
    id
    name
    description
    slug
    visibility
    remoteUrlHttp
    remoteUrlSsh
    starCount
    defaultBranch
    orgSlug
  }
}
    `;function t1(e={}){return ta.useQuery({query:t0,...e})}let t2=(0,tt.default)`
    query ExternalProjects($workspaceIntegrationId: Int!, $owner: String!, $query: String, $limit: Int, $offset: Int) {
  getExternalRepos(
    orgSlug: $owner
    workspaceIntegrationId: $workspaceIntegrationId
    query: $query
    limit: $limit
    offset: $offset
  ) {
    id
    name
    description
    slug
    visibility
    remoteUrlHttp
    remoteUrlSsh
    starCount
    defaultBranch
  }
}
    `,t4=(0,tt.default)`
    query TestIntegrationConfig($kind: String!, $config: IntegrationConfig!, $secrets: IntegrationSecrets!, $workspaceIntegrationId: Int) {
  testIntegrationConfig(
    config: $config
    kind: $kind
    secrets: $secrets
    workspaceIntegrationId: $workspaceIntegrationId
  ) {
    success
    message
  }
}
    `,t3=(0,tt.default)`
    mutation QueueNextMigration($apiKey: String!, $projectIds: [Int!]!) {
  queueNextMigration(apiKey: $apiKey, projectIds: $projectIds) {
    jobId
  }
}
    `,t5=(0,tt.default)`
    query GetBranchNodeById($branchNodeId: Int!) {
  branchNode(id: $branchNodeId) {
    id
    nodeId
  }
}
    `;function t8(e={}){return ta.useQuery({query:t5,...e})}let t6=(0,tt.default)`
    mutation StarNode($projectId: Int!, $nodeId: Int!) {
  createStars(objects: [{projectId: $projectId, nodeId: $nodeId}]) {
    returning {
      id
    }
  }
}
    `;function t7(){return ta.useMutation(t6)}let t9=(0,tt.default)`
    mutation UnstarNode($projectId: Int!, $nodeId: Int!) {
  deleteStars(where: {nodeId: {_eq: $nodeId}, projectId: {_eq: $projectId}}) {
    returning {
      id
    }
  }
}
    `;function ae(){return ta.useMutation(t9)}let at=(0,tt.default)`
    query GetNodeStar($projectId: Int!, $nodeId: Int!) {
  stars(where: {nodeId: {_eq: $nodeId}, projectId: {_eq: $projectId}}) {
    id
  }
}
    `;function aa(e={}){return ta.useQuery({query:at,...e})}(0,tt.default)`
    mutation CreateBranchWithYjsDocument($projectId: Int!, $branchSlug: String!) {
  createYjsDocument(
    object: {branch: {data: {projectId: $projectId, slug: $branchSlug, isDefault: true, isPublished: true}}}
  ) {
    id
  }
}
    `;let ar=(0,tt.default)`
    mutation CreateExternalRepository($workspaceIntegrationId: Int!, $orgSlug: String!, $repoName: String!, $repoSlug: String!, $isPersonal: Boolean!, $visibility: RepositoryVisibility = private) {
  createExternalRepository(
    workspaceIntegrationId: $workspaceIntegrationId
    orgSlug: $orgSlug
    repoName: $repoName
    repoSlug: $repoSlug
    isPersonal: $isPersonal
    visibility: $visibility
  ) {
    id
    name
    description
    slug
    visibility
    remoteUrlHttp
    remoteUrlSsh
    starCount
    defaultBranch
  }
}
    `;function an(){return ta.useMutation(ar)}let ao=(0,tt.default)`
    mutation CreateProjects($projects: [sl_projects_insert_input!]!) {
  createProjects(objects: $projects) {
    returning {
      id
      name
      slug
      externalId
      externalSlug
      externalOrgSlug
      workspaceIntegrationId
      groupId
    }
  }
}
    `;function al(){return ta.useMutation(ao)}let ai=(0,tt.default)`
    mutation CreateWebProject($project: sl_projects_insert_input!, $slug: String!) {
  createYjsDocument(
    object: {branch: {data: {slug: $slug, isDefault: true, isPublished: true, project: {data: $project}}}}
  ) {
    id
    branch {
      id
      slug
      project {
        id
        name
        slug
        groupId
      }
    }
  }
}
    `;function as(){return ta.useMutation(ai)}(0,tt.default)`
    mutation CreateYjsDocument($branchId: Int!) {
  createYjsDocument(object: {branchId: $branchId}) {
    id
  }
}
    `;let ac=(0,tt.default)`
    mutation DeleteBranch($branchId: Int!) {
  deleteBranches(where: {id: {_eq: $branchId}}) {
    returning {
      id
      projectId
    }
  }
}
    `;function au(){return ta.useMutation(ac)}(0,tt.default)`
    query LocalStudioProjects($workspaceId: Int) {
  projects(
    limit: 100
    order_by: {slug: asc}
    where: {_or: [{type: {_eq: local}}, {type: {_is_null: true}, externalId: {_is_null: true}}], workspaceId: {_eq: $workspaceId}, userPermissions: {permission: {_eq: "project_update"}}}
  ) {
    id
    name
  }
}
    `;let ad=(0,tt.default)`
    query ProjectBySlug_Anonymous($workspaceId: Int!, $slug: String!, $limit: Int = 1, $offset: Int = 0) {
  projects(
    limit: $limit
    offset: $offset
    where: {workspaceId: {_eq: $workspaceId}, slug: {_eq: $slug}}
  ) {
    id
    ...ProjectDetails_Anonymous
  }
}
    ${tl}`;function am(e={}){return ta.useQuery({query:ad,...e})}let ap=(0,tt.default)`
    query ProjectBySlug($workspaceId: Int!, $slug: String!, $limit: Int = 1, $offset: Int = 0) {
  projects(
    limit: $limit
    offset: $offset
    where: {workspaceId: {_eq: $workspaceId}, slug: {_eq: $slug}}
  ) {
    id
    ...ProjectDetails
  }
}
    ${ts}`;function ag(e={}){return ta.useQuery({query:ap,...e})}let ah=(0,tt.default)`
    query ProjectIdBySlug($slug: String!, $workspaceId: Int!) {
  projects(
    where: {slug: {_eq: $slug}, workspaceId: {_eq: $workspaceId}}
    limit: 1
  ) {
    id
  }
}
    `;function af(e={}){return ta.useQuery({query:ah,...e})}let ab=(0,tt.default)`
    query ProjectPrivateInfo($projectId: Int!) {
  project(id: $projectId) {
    id
    privateInfo {
      ci_token
    }
  }
}
    `;function ay(e={}){return ta.useQuery({query:ab,...e})}let aw=(0,tt.default)`
    query Projects($workspaceId: Int, $nameSearch: String, $pinned: Boolean, $limit: Int!, $offset: Int!, $workspaceIntegrationId: Int, $groupId: String) {
  projects(
    limit: $limit
    offset: $offset
    order_by: {slug: asc}
    where: {pinned: {_eq: $pinned}, name: {_ilike: $nameSearch}, workspaceId: {_eq: $workspaceId}, workspaceIntegrationId: {_eq: $workspaceIntegrationId}, groupId: {_eq: $groupId}}
  ) {
    id
    userPermissions {
      permission
      role
    }
    branches {
      id
      slug
      isDefault
      nodeCount
      articleCount
      httpOperationCount
      httpServiceCount
      modelCount
      commitHash
    }
    ...Project_Item
  }
}
    ${ti}`,aE=(0,tt.default)`
    query ProjectsByExternalId($workspaceIntegrationId: Int!, $externalIds: [String!]!, $limit: Int = 50, $offset: Int = 0) {
  projects(
    limit: $limit
    offset: $offset
    where: {workspaceIntegrationId: {_eq: $workspaceIntegrationId}, externalId: {_in: $externalIds}}
  ) {
    id
    name
    slug
    remoteUrlHttp
    externalId
    externalSlug
    externalOrgSlug
    workspaceIntegrationId
    branches {
      id
      isDefault
      slug
    }
  }
}
    `,av=(0,tt.default)`
    query ProjectsByOwner($userId: Int) {
  projectMembers(where: {userId: {_eq: $userId}, role: {_eq: owner}}) {
    id
    projectId
  }
}
    `,ak=(0,tt.default)`
    mutation QueueAnalyzeProject($event: AnalyzeTaskEvent!, $projectId: Int!, $branch: String!) {
  queueAnalyzeTask(event: $event, projectId: $projectId, ref: $branch) {
    jobId
  }
}
    `;function a_(){return ta.useMutation(ak)}let ax=(0,tt.default)`
    mutation RemoveProjectMemberByUserId($projectId: Int!, $userId: Int!) {
  deleteProjectMembers(
    where: {userId: {_eq: $userId}, projectId: {_eq: $projectId}}
  ) {
    returning {
      id
    }
  }
}
    `;function aI(){return ta.useMutation(ax)}(0,tt.default)`
    query ShareProjectBySlug($workspaceId: Int!, $slug: String!) {
  projects(where: {workspaceId: {_eq: $workspaceId}, slug: {_eq: $slug}}) {
    id
    name
    description
    slug
    iconName
    iconColor
  }
}
    `;let aS=(0,tt.default)`
    mutation UpdateBranch($id: Int!, $input: sl_branches_set_input) {
  updateBranch(pk_columns: {id: $id}, _set: $input) {
    id
    name
    isPublished
  }
}
    `;function aj(){return ta.useMutation(aS)}let aC=(0,tt.default)`
    mutation UpdateDefaultBranch($projectId: Int!, $branchId: Int!, $previousDefaultBranchId: Int!) {
  unsetDefault: updateBranches(
    where: {projectId: {_eq: $projectId}, id: {_eq: $previousDefaultBranchId}}
    _set: {isDefault: false, isPublished: false}
  ) {
    returning {
      id
      isDefault
    }
  }
  setDefault: updateBranches(
    where: {projectId: {_eq: $projectId}, id: {_eq: $branchId}}
    _set: {isDefault: true, isPublished: true}
  ) {
    returning {
      id
      isDefault
    }
  }
}
    `;function aP(){return ta.useMutation(aC)}let aA=(0,tt.default)`
    mutation AddEmailAddress($email: citext!) {
  createEmails(objects: {email: $email}) {
    returning {
      id
      email
      primary
      createdAt
      confirmedAt
      updatedAt
      userId
    }
  }
}
    `;function aB(){return ta.useMutation(aA)}let aD=(0,tt.default)`
    mutation DisconnectExternalAccount($id: Int!) {
  deleteExternalUsers(where: {id: {_eq: $id}}) {
    returning {
      id
    }
  }
}
    `;function aT(){return ta.useMutation(aD)}let aF=(0,tt.default)`
    query Me($id: Int!) {
  user(id: $id) {
    id
    username
    firstName
    lastName
    createdAt
    isSiteAdmin
    avatarUrl
    hasPassword
    surveyPersona
    surveyNumApis
    surveyOpenapiUsage
    surveyExternalDocs
    surveyInternalDocs
    surveyDesign
    surveyMocking
    surveyGovernance
    surveyCollaboration
    surveyUC
    surveyCompanyName
    betaWebProjects
    timezone
    nodeStars {
      id
    }
    emails {
      id
      email
      primary
      confirmedAt
    }
    externalUsers {
      id
      data
      externalId
      workspaceIntegrationId
      usesOldIntegration
    }
    workspaceMemberships {
      id
      workspace {
        id
        slug
      }
      receiveDailySummary
    }
  }
}
    `,a$=(0,tt.default)`
    mutation RemoveEmailAddress($id: Int!) {
  deleteEmails(where: {id: {_eq: $id}}) {
    returning {
      id
      email
      primary
      createdAt
      confirmedAt
      updatedAt
      userId
    }
  }
}
    `;function aN(){return ta.useMutation(a$)}let aU=(0,tt.default)`
    mutation SetPrimaryEmailAddress($id: Int!, $userId: Int!) {
  setPrimary: updateEmails(where: {id: {_eq: $id}}, _set: {primary: true}) {
    returning {
      id
      email
      primary
    }
  }
  unsetPreviousPrimary: updateEmails(
    where: {userId: {_eq: $userId}, id: {_neq: $id}}
    _set: {primary: false}
  ) {
    returning {
      id
      email
      primary
    }
  }
}
    `;function aM(){return ta.useMutation(aU)}let aR=(0,tt.default)`
    mutation UpdateAccount($userId: Int!, $input: sl_users_set_input) {
  updateUsers(where: {id: {_eq: $userId}}, _set: $input) {
    returning {
      id
      username
      firstName
      lastName
      avatarUrl
      surveyPersona
      surveyNumApis
      surveyOpenapiUsage
      surveyExternalDocs
      surveyInternalDocs
      surveyDesign
      surveyMocking
      surveyGovernance
      surveyCollaboration
      surveyCompanyName
      betaWebProjects
      timezone
    }
  }
}
    `;function aW(){return ta.useMutation(aR)}(0,tt.default)`
    query UserOnboardingProgress($workspaceId: Int!, $userId: Int!) {
  user(id: $userId) {
    id
    hasPassword
    externalUsers {
      id
    }
  }
  starsAggregate(
    where: {userId: {_eq: $userId}, project: {workspaceId: {_eq: $workspaceId}}}
  ) {
    aggregate {
      count
    }
  }
  workspaceInvitationsAggregate(where: {workspaceId: {_eq: $workspaceId}}) {
    aggregate {
      count
    }
  }
  workspaceMembers(
    where: {userId: {_eq: $userId}, workspaceId: {_eq: $workspaceId}}
  ) {
    id
    show_onboard_progress
  }
  workspace(id: $workspaceId) {
    id
    logoUrl
    integrations {
      id
      integration {
        id
        kind
      }
    }
    members(limit: 2) {
      id
    }
    domainWhitelists {
      id
    }
  }
}
    `;let aL=(0,tt.default)`
    mutation AddWorkspaceIntegration($workspaceId: Int!, $integrationId: Int!, $enabled: Boolean! = true, $allowUserLogin: Boolean! = true, $allowUserRegister: Boolean! = true, $name: String!, $config: jsonb! = {}, $secrets: jsonb! = {}, $unsetAllSamlIdps: Boolean!) {
  updateWorkspaceIntegrations(
    where: {integration: {kind: {_eq: saml}}, workspaceId: {_eq: $workspaceId}}
    _append: {config: {defaultIdp: false}}
  ) @include(if: $unsetAllSamlIdps) {
    returning {
      id
    }
  }
  createWorkspaceIntegrations(
    objects: {enabled: $enabled, allowUserLogin: $allowUserLogin, allowUserRegister: $allowUserRegister, integrationId: $integrationId, name: $name, config: $config, secrets: $secrets}
  ) {
    returning {
      id
      ...WorkspaceIntegration_Item
    }
  }
}
    ${tu}`;function aG(){return ta.useMutation(aL)}let aO=(0,tt.default)`
    mutation AddWorkspaceInvitations($workspaceInvitations: [sl_workspace_invitations_insert_input!]!) {
  createWorkspaceInvitations(
    objects: $workspaceInvitations
    on_conflict: {constraint: workspace_invitations_workspace_id_email_key, update_columns: [updatedAt]}
  ) {
    returning {
      id
      ...WorkspaceInvitation_Item
    }
  }
}
    ${td}`;function az(){return ta.useMutation(aO)}let aq=(0,tt.default)`
    mutation AddWorkspaceWhitelistDomains($workspaceDomainWhitelists: [sl_workspace_domain_whitelist_insert_input!]!) {
  createWorkspaceDomainWhitelists(
    objects: $workspaceDomainWhitelists
    on_conflict: {constraint: workspace_domain_whitelist_workspace_id_domain_key, update_columns: []}
  ) {
    returning {
      id
    }
  }
}
    `;function aV(){return ta.useMutation(aq)}let aH=(0,tt.default)`
    query GlobalIntegrations($workspaceId: Int!) {
  integrations {
    id
    ...Integration_Item
    workspaceIntegrations(where: {workspaceId: {_eq: $workspaceId}}) {
      id
      has_secrets
      ...WorkspaceIntegration_Item
    }
  }
}
    ${tr}
${tu}`;function aQ(e={}){return ta.useQuery({query:aH,...e})}let aK=(0,tt.default)`
    mutation RemoveWorkspaceIntegration($id: Int!) {
  deleteWorkspaceIntegrations(where: {id: {_eq: $id}}) {
    returning {
      id
      ...WorkspaceIntegration_Item
    }
  }
}
    ${tu}`;function aJ(){return ta.useMutation(aK)}let aY=(0,tt.default)`
    mutation RemoveWorkspaceInvitation($id: Int!) {
  deleteWorkspaceInvitations(where: {id: {_eq: $id}}) {
    returning {
      id
    }
  }
}
    `;function aX(){return ta.useMutation(aY)}let aZ=(0,tt.default)`
    mutation RemoveWorkspaceWhitelistDomain($id: Int!) {
  deleteWorkspaceDomainWhitelists(where: {id: {_eq: $id}}) {
    returning {
      id
    }
  }
}
    `;function a0(){return ta.useMutation(aZ)}let a1=(0,tt.default)`
    mutation SendFoundWorkspaces($email: String!) {
  queueWorkspaceMembershipsEmail(email: $email) {
    jobId
  }
}
    `;function a2(){return ta.useMutation(a1)}let a4=(0,tt.default)`
    query TaskLogDetails($jobId: String!) {
  taskLogDetails(where: {job_id: {_eq: $jobId}}, order_by: {logged_at: asc}) {
    id
    message
    log_level
  }
}
    `;function a3(e={}){return ta.useQuery({query:a4,...e})}let a5=(0,tt.default)`
    query TaskStatuses($workspaceId: Int!, $projectId: Int) {
  sl_sl_task_log_status(
    args: {_workspace_id: $workspaceId, _project_id: $projectId}
    where: {taskId: {_in: ["analyze", "deleteBranch"]}}
    order_by: {task_job_id: desc}
    limit: 20
  ) {
    durationMs
    jobId
    payload
    projectId
    startedAt
    status
    taskId
    workspaceId
  }
}
    `;function a8(e={}){return ta.useQuery({query:a5,...e})}let a6=(0,tt.default)`
    mutation ToggleWorkspaceMemberReceiveDailySummary($id: Int!, $receiveDailySummary: Boolean!) {
  updateWorkspaceMembers(
    where: {id: {_eq: $id}}
    _set: {receiveDailySummary: $receiveDailySummary}
  ) {
    returning {
      id
      receiveDailySummary
    }
  }
}
    `;function a7(){return ta.useMutation(a6)}let a9=(0,tt.default)`
    mutation UpdateWorkspaceWhitelistDomains($id: Int!, $roleName: sl_role_name_enum!, $domain: String!) {
  updateWorkspaceDomainWhitelists(
    where: {id: {_eq: $id}}
    _set: {roleName: $roleName, domain: $domain}
  ) {
    returning {
      id
    }
  }
}
    `;function re(){return ta.useMutation(a9)}let rt=(0,tt.default)`
    query WorkspaceBySlug($slug: String!) {
  workspaces(limit: 1, where: {slug: {_eq: $slug}}) {
    id
    ...Workspace_Detail
  }
}
    ${tm}`,ra=(0,tt.default)`
    query WorkspaceDetailsById($id: Int!) {
  workspace(id: $id) {
    id
    ...Workspace_Detail
  }
}
    ${tm}`,rr=(0,tt.default)`
    query WorkspaceIdByDomain($domain: citext!) {
  workspaces(limit: 1, where: {domain: {_eq: $domain}}) {
    id
  }
}
    `,rn=(0,tt.default)`
    query WorkspaceInvitations($workspaceId: Int!, $limit: Int!, $offset: Int!) {
  workspaceInvitations(
    limit: $limit
    offset: $offset
    where: {workspaceId: {_eq: $workspaceId}}
  ) {
    id
    ...WorkspaceInvitation_Item
  }
}
    ${td}`;function ro(e={}){return ta.useQuery({query:rn,...e})}let rl=(0,tt.default)`
    query WorkspaceJoinRequests($workspaceId: Int!, $limit: Int!, $offset: Int!) {
  workspaceJoinRequests(
    limit: $limit
    offset: $offset
    where: {workspaceId: {_eq: $workspaceId}, isDenied: {_eq: false}}
  ) {
    id
    userId
    emails(where: {primary: {_eq: true}}) {
      email
      id
    }
    createdAt
    isDenied
  }
}
    `,ri=(0,tt.default)`
    query WorkspaceMembers($workspaceId: Int!, $usernameOrEmailSearch: citext, $excludeRoles: [sl_role_name_enum!], $limit: Int!, $offset: Int!) {
  workspaceMembers(
    limit: $limit
    offset: $offset
    order_by: [{rolesAggregate: {max_priority: desc}}, {user: {username: asc}}]
    where: {_and: [{workspaceId: {_eq: $workspaceId}}, {_or: [{user: {username: {_ilike: $usernameOrEmailSearch}}}, {user: {emails: {email: {_ilike: $usernameOrEmailSearch}}}}]}, {roles: {role: {_nin: $excludeRoles}}}]}
  ) {
    id
    user {
      id
      username
      lastSeenAt
      avatarUrl
      firstName
      lastName
      emails {
        id
        email
        primary
      }
    }
    roles(order_by: [{priority: {priority: desc}}]) {
      id
      role
    }
  }
}
    `,rs=(0,tt.default)`
    query WorkspaceMembersAndInvitees($workspaceId: Int!, $limit: Int!, $offset: Int!) {
  workspaceMembers(
    limit: $limit
    offset: $offset
    where: {workspaceId: {_eq: $workspaceId}}
  ) {
    id
    user {
      id
      emails {
        id
        email
        primary
      }
    }
    roles {
      id
      role
    }
  }
  workspaceInvitations(
    limit: $limit
    offset: $offset
    where: {workspaceId: {_eq: $workspaceId}}
  ) {
    id
    email
    roleName
  }
}
    `,rc=((0,tt.default)`
    query WorkspaceMembersByUserIds($workspaceId: Int!, $userIds: [Int!]) {
  workspaceMembers(
    where: {workspaceId: {_eq: $workspaceId}, userId: {_in: $userIds}}
  ) {
    id
    userId
    roles {
      id
      role
    }
  }
}
    `,(0,tt.default)`
    query WorkspaceSlugBySlug($slug: String!) {
  workspaces(limit: 1, where: {slug: {_eq: $slug}}) {
    slug
  }
}
    `),ru=(0,tt.default)`
    query WorkspaceWhitelistDomains($workspaceId: Int!, $limit: Int!, $offset: Int) {
  workspaceDomainWhitelists(
    limit: $limit
    offset: $offset
    where: {workspaceId: {_eq: $workspaceId}}
  ) {
    id
    domain
    roleName
  }
}
    `;function rd(e={}){return ta.useQuery({query:ru,...e})}},57891:(e,t,a)=>{"use strict";a.d(t,{ss:()=>i,BZ:()=>p,aZ:()=>g.a});var r=a(14041),n=a(79772),o=a.n(n),l=a(88638);let i=e=>{let t=r.memo(e,o());return t.displayName=`PureRouteMemo(${(0,l.M)(e)})`,t};var s=a(32353),c=a(18690),u=a(18767),d=a(57691),m=a(19175);function p(e){let t=t=>{let a=(0,m.y1)(),n=(0,m.hD)(),o=(0,c.useLocation)();if(!a.dataBootstrapComplete)return r.createElement(u.P,null,r.createElement(s.Box,{p:20,color:"muted"},"Loading..."));let l=n.currentUser;return l?r.createElement(e,{...t,currentUser:l}):r.createElement(c.Navigate,{to:`/auth?r=${encodeURIComponent(o.pathname)}`,replace:d.KJ})};return t.displayName=`RequiresAuth(${(0,l.M)(e)})`,t}var g=a(41734)},41734:(e,t,a)=>{"use strict";a.d(t,{a:()=>u});var r=a(32353),n=a(14041),o=a(18690),l=a(18767),i=a(57691),s=a(18735),c=a(88638);function u(e,t){let a=a=>{let{state:c,effects:u}=(0,s.U8)(),d=c.workspaces.currentWorkspace;if(!d)return n.createElement(o.Navigate,{to:"/welcome",replace:!0});let m=c.metadata.dataBootstrapComplete,p=c.workspaces.myWorkspace;return!t||m&&p?!t||c.auth.currentUser&&c.workspaces.canI(t)?n.createElement(e,{...a,workspace:d,myWorkspace:p}):(i.KJ&&u.notifications.warning({message:"You do not have sufficient permission to view this page"}),n.createElement(o.Navigate,{to:"/",replace:!0})):n.createElement(l.P,null,n.createElement(r.Box,{p:20,color:"muted"},"Loading..."))};return a.displayName=`RequiresWorkspace(${(0,c.M)(e)})`,a}},88638:(e,t,a)=>{"use strict";function r(e){return e.displayName||e.name||"Component"}a.d(t,{M:()=>r})},24769:(e,t,a)=>{"use strict";a.d(t,{tL:()=>s,Ui:()=>c,wQ:()=>u.w,Ij:()=>m,uI:()=>p.u,N$:()=>g,It:()=>h}),a(70343);var r=a(61164),n=a(14041),o=a(88179),l=a(18735),i=a(19175);let s=e=>{let t=(0,i.hD)(),{reporter:a}=(0,l.U8)().actions,{danger:s,success:c}=(0,i.AO)(),{mutateAsync:u}=(0,r.useCreateProjectServiceAccount)(t.jwt),d=(0,r.useGetProjectServiceAccounts)({jwtToken:t.jwt,project_id:e,options:{refetchInterval:5e3}});return n.useCallback(async(e,t,r,n,l)=>{let i=d.data?.items||[];if(i&&i.length){let e="Project service account already exists";return s({message:e}),a.error({error:new o.Le(e)}),null}return u({projectId:e,kind:t,credentials:{type:"personal_access_token",username:r,token:n},name:l}).then(e=>(c({message:"Project service account created"}),e)).catch(e=>{let t=`Error creating project service account: ${e.message}`;return s({message:t}),a.error({error:new o.Le(t)}),null})},[s,c,u,d.data?.items,a])};a(67114);let c=()=>{let{state:e}=(0,l.U8)(),{reporter:t}=(0,l.U8)().actions,{danger:a,success:s}=(0,i.AO)(),{mutateAsync:c}=(0,r.useDeleteProjectServiceAccount)(e.auth.jwt);return n.useCallback(async(e,r)=>c({project_id:e,project_service_account_id:r}).then(()=>{s({message:"Project service account deleted"})}).catch(e=>{let r=`Error deleting project service account: ${e.message}`;a({message:r}),t.error({error:new o.Le(r)})}),[a,c,s,t])};var u=a(23741),d=a(799);let m=()=>{let{actions:e,effects:t}=(0,l.U8)(),[,a]=(0,d.PQr)();return n.useCallback(async(r,n)=>{let{error:o}=await a({userId:n,projectId:r});if(o){t.notifications.danger({message:`error leaving from project: ${o.message}`});return}t.notifications.success({message:"You are no longer a member of the project"}),t.reporter.log({event:"leave_project",payload:{project_id:r}}),e.projects.touchQueries()},[e.projects,t.reporter,t.notifications,a])};a(9018);var p=a(15758);a(77240),a(65311);let g=()=>{let{reporter:e}=(0,l.U8)().actions,{danger:t,success:a}=(0,i.AO)(),s=(0,i.hD)(),{mutateAsync:c}=(0,r.useTestProjectServiceAccount)(s.jwt);return n.useCallback(async(r,n,l,i)=>c({project_service_account_id:r,project_id:n,credentials:i}).then(e=>{e.success?a({message:`Service account credentials for ${l} are valid!`}):t({message:`Service account credentials test for ${l} failed: Invalid username or password`})}).catch(a=>{let r=`Unexpected error encountered when testing the service account: ${a.message}`;t({message:r,timeout:1e4}),e.error({error:new o.Le(r)})}),[t,c,a,e])},h=()=>{let{state:e}=(0,l.U8)(),{reporter:t}=(0,l.U8)().actions,{danger:a,success:s}=(0,i.AO)(),{mutateAsync:c}=(0,r.useUpdateProjectServiceAccount)(e.auth.jwt);return n.useCallback((e,r,n,l,i)=>{let u={type:"personal_access_token"};return l&&(u.token=l),n&&(u.username=n),c({serviceAccountId:e,projectId:r,credentials:u,name:i}).then(()=>{s({message:"Project service account updated"})}).catch(e=>{let r=`Error updating project service account: ${e.message}`;a({message:r}),t.error({error:new o.Le(r)})})},[a,c,s,t])}},70343:(e,t,a)=>{"use strict";a.d(t,{K:()=>o,b:()=>l});var r=a(799),n=a(65311);class o extends Error{constructor(e){super(`Unable to create a ${e} project`)}}function l(){let[,e]=(0,r.pgu)(),[,t]=(0,r.IhF)(),{isAllowedToSet:a}=(0,n.X)();return{createProject:async function(t){return t.visibility&&!a(t.visibility)?{error:new o(t.visibility)}:await e({projects:[t]})},createWebProject:async function(e,r){return e.visibility&&!a(e.visibility)?{error:new o(e.visibility)}:await t({project:e,slug:r})}}}},67114:(e,t,a)=>{"use strict";a.d(t,{e:()=>c});var r=a(15990),n=a(61164),o=a(14041),l=a(19175),i=a(79984),s=a(91087);let c=()=>{let e=(0,l.hD)(),t=(0,l.C$)(),a=(0,n.useDeleteProject)(e.jwt),c=(0,s.O)(),u=(0,n.useDeleteAllImages)(e.jwt),{refresh:d}=(0,n.useRefreshWorkspaceState)(t.currentWorkspaceId),m=(0,n.useOptimisticallyUpdateProjectsList)();return o.useCallback(async e=>{let t=(0,r.safelyDecodeID)(e);try{await u.mutateAsync({projectId:t})}catch(e){return{success:!1,message:e?.response?.data?.message||e.message}}try{await a.mutateAsync({projectId:t}),(0,i.eh)(t)}catch(e){return{success:!1,message:e.message||e.toString()}}let{refetch:n}=await m();n(),d();try{c&&await c.deleteProject(String(e))}catch{}return{success:!0}},[m,d,u,a,c])}},23741:(e,t,a)=>{"use strict";a.d(t,{w:()=>c});var r=a(3411),n=a(99472),o=a.n(n),l=a(57691),i=a(799),s=a(18735);let c=({workspaceId:e,projectSlug:t,pollInterval:a})=>{let{state:n}=(0,s.U8)(),c=l.KJ&&!n.metadata.dataBootstrapComplete,[{data:u,fetching:d,error:m},p]=(n.auth.isLoggedIn?i.rBE:function(...e){let[{data:t,...a},r]=(0,i.HAK)(...e);for(let e of t?.projects??[])e.externalId=e.remoteUrlHttp=e.remoteUrlSsh=e.externalOrgSlug=e.externalSlug="";return[{data:t,...a},r]})({pause:!t||c,pollInterval:a,variables:{workspaceId:e,slug:t,IS_BROWSER:l.KJ}});if(u?.projects[0]){let e=l.xF[u?.projects[0].resolvedWorkspaceIntegration?.kind||""];u.projects[0].remoteUrlHttp=function(e,t){if(t&&e&&e===r.v6.AzureDevOpsServices){let e=new(o())(t);return`${e.protocol()}://${e.hostname()}${e.path()}`}return t}(e,u.projects[0].remoteUrlHttp)}return[{data:u?.projects[0],fetching:d,error:m},p]}},9018:(e,t,a)=>{"use strict";a.d(t,{u:()=>c});var r=a(14041),n=a(799),o=a(18735),l=a(45250),i=a(97249);let s=e=>{let t=r.useRef();return r.useEffect(()=>{t.current=e}),t.current},c=({workspaceId:e,nameSearch:t,limit:a=1e3,workspaceIntegrationId:c,groupId:u})=>{let{state:d}=(0,o.U8)(),[{data:m,fetching:p,error:g},h,f,b,y]=function({query:e,variables:t,getResults:a,limit:n=15,initialOffset:o=0,...c}){let[u,d]=r.useState(o),[m,p]=r.useState(0),[g,h]=r.useState(!1),[f,b]=(0,i.useQuery)({query:e,variables:{...t,limit:n*(u+1),offset:0},...c}),{data:y}=f,w=a(y),E=w?.length,v=s(t),k=!(0,l.isEqual)(t,v);r.useEffect(()=>{p(E||o)},[o,E]),r.useEffect(()=>{g||f.fetching||h(!0)},[f.fetching,g]),r.useEffect(()=>{d(o)},[o,k]);let _=r.useCallback(()=>{d(m)},[m]),x=r.useCallback(()=>{d(o),b()},[b,o]),I=!!(f.fetching&&(E||u===E)||E&&u<E&&E%n==0&&(E===m||k));return[f,_,I,x,g]}({query:n.wOt,getResults:e=>e?.projects,limit:a,variables:{workspaceId:e,workspaceIntegrationId:c,nameSearch:t?`%${t}%`:void 0,...u?{groupId:u}:{}}});return r.useEffect(b,[d.projects.touchQueriesCounter]),[{data:m,fetching:p,error:g,hasFetched:y},h,f,b]}},15758:(e,t,a)=>{"use strict";a.d(t,{u:()=>i});var r=a(15990),n=a(61164),o=a(14041),l=a(18735);let i=()=>{let{effects:e,state:t}=(0,l.U8)(),{mutateAsync:a}=(0,n.usePinUnpinProject)(t.auth.jwt);return o.useCallback(async(t,n)=>a({projectId:(0,r.safelyDecodeID)(t),pinned:n}).then(()=>{e.notifications.success({message:`Project ${n?"pinned to ":"unpinned from "} your sidebar`})}).catch(t=>{e.notifications.danger({message:`error during setting project pin: ${t.message}`})}),[e.notifications,a])}},77240:(e,t,a)=>{"use strict";a.d(t,{H:()=>o});var r=a(61164),n=a(19175);function o(e){let{jwt:t}=(0,n.hD)(),{data:a,error:o}=(0,r.useGetProject)(t,{projectId:e},{enabled:!!e});if(o)throw o;return a?.type}},65311:(e,t,a)=>{"use strict";a.d(t,{X:()=>l});var r=a(14041),n=a(799),o=a(19175);function l(){let{hasFeature:e}=(0,o._m)(),t=e(n.BAf.PrivateProjects);return{isAllowedToSet:(0,r.useCallback)(e=>"private"!==e||t,[t])}}},41591:(e,t,a)=>{"use strict";a.d(t,{f:()=>l});var r=a(45250),n=a(14041);let o=["error","warn","info","hint","off"],l=({rules:e,inheritedRules:t,inheritedOverrides:a})=>{let[o,l]=n.useState([]),s=n.useCallback(()=>e&&!r.isEmpty(e)||t&&!r.isEmpty(t)||a&&!r.isEmpty(a),[a,t,e]);return n.useEffect(()=>{let n=[];s()&&(t&&!r.isEmpty(t)&&(n=t.map(e=>{let t=a&&a[e.name];return t&&(e.severity=t.severity),e})),l([...e&&!r.isEmpty(e)?Object.values(e):[],...n].sort(i)))},[a,t,e,s]),o};function i(e,t){let a=o.indexOf(e.severity||"off"),r=o.indexOf(t.severity||"off"),n=e.name?.toLowerCase()||"",l=t.name?.toLowerCase()||"";return a===r?n>l?1:-1:a-r}},28218:(e,t,a)=>{"use strict";a.d(t,{M:()=>o});var r=a(83676),n=a(14041);function o(e,t){let a=(0,n.useCallback)(()=>{let a=window.localStorage.getItem(e);return a?(0,r.safeParse)(a):t},[e,t]),[o,l]=(0,n.useState)(a),i=(0,n.useCallback)(t=>{try{let a=JSON.stringify(t),r=window.localStorage.getItem(e);if(a===r)return;l(t),window.localStorage.setItem(e,a),window.dispatchEvent(new Event(e))}catch(e){console.log(e)}},[e]);return(0,n.useEffect)(()=>{let t=t=>{t?.key&&t.key!==e||l(a())};return window.addEventListener(e,t),window.addEventListener("storage",t),()=>{window.removeEventListener(e,t),window.removeEventListener("storage",t)}},[e,a]),[o,i]}},41806:(e,t,a)=>{"use strict";a.d(t,{c:()=>o});var r=a(14041),n=a(18735);let o=(e,t)=>{let[a,o]=(0,r.useState)(!1),{state:l,effects:i}=(0,n.U8)();(0,r.useEffect)(()=>{a||(o(!0),l.router.searchParams.get("utm_source")===t&&i.reporter.log(e))},[i.reporter,e,a,l.router.searchParams,t])}},64652:(e,t,a)=>{"use strict";a.d(t,{e:()=>o});var r=a(14041),n=a(18735);let o=e=>{let{effects:t,state:a}=(0,n.U8)(),o=a.workspaces.currentWorkspace?.slug;r.useEffect(()=>{t.reporter.log({event:"page_visited",payload:{page_name:e,workspace_slug:o}})},[t.reporter,e,o])}},13750:(e,t,a)=>{"use strict";a.d(t,{s:()=>l,t:()=>r});var r,n=a(14041);let o={docs:700};!function(e){e[e.Phone=415]="Phone",e[e.Tablet=750]="Tablet",e[e.Resized_Browser=980]="Resized_Browser",e[e.Normal_Browser=1e6]="Normal_Browser"}(r||(r={}));let l=()=>{let[e,t]=n.useState(),a=()=>window.innerWidth<=415?415:window.innerWidth<=750?750:window.innerWidth<=980?980:1e6;return n.useEffect(()=>{function e(){t(a())}return window.addEventListener("resize",e),e(),()=>window.removeEventListener("resize",e)},[]),{isResponsiveLayoutEnabled:1e6!==e,screenType:e,getElementsBreakpoint:e=>o[e]}}},91087:(e,t,a)=>{"use strict";a.d(t,{O:()=>l,r:()=>o});var r=a(56840),n=a(14041);let o=(0,r.A)(async()=>{let{getProjectRegistry:e}=await a.e(9109).then(a.bind(a,29109));return e()}),l=(e=!1)=>{let[t,a]=n.useState(null);return n.useEffect(()=>{if(e)return;let r=!1;return t||o().then(e=>{r||a(e)}),()=>{r=!0}},[t,a,e]),t}},90407:(e,t,a)=>{"use strict";a.d(t,{Ln:()=>i,cD:()=>c,q7:()=>s});var r=a(15990);let n=a(82658),o={article:"doc",http_operation:"op",http_service:"api",model:"sch",table_of_contents:"toc"},l=(e,t)=>(0,r.encodeID)(o[e],t),i=({type:e,nodeId:t,stableId:a,name:r,slug:o})=>o||`${a||l(e,t)}-${n(r)}`,s=e=>!e.includes("."),c=e=>(0,r.safelyDecodeID)(e.split("-")[0])},46653:(e,t,a)=>{"use strict";a.d(t,{A8:()=>l,wA:()=>n,xz:()=>o});var r=a(799);let n="https://meta.stoplight.io/docs/platform",o={[r.BAf.CustomDomain]:`${n}/ZG9jOjIyMDczNzA-custom-domains`,[r.BAf.GoogleTagManager]:`${n}/ZG9jOjU0OTg0NDE-analytics`,[r.BAf.Localizejs]:`${n}/ZG9jOjE2OTE5OTUw-localize`,[r.BAf.Redirects]:`${n}/ZG9jOjE2OTE5OTUx-redirects`,[r.BAf.Favicon]:`${n}/ZG9jOjI4NzkwNjQ1-change-the-look-and-feel#add-a-favicon`,[r.BAf.CustomTheme]:`${n}/ZG9jOjI4NzkwNjQ1#set-the-sidebar-theme`,[r.BAf.WhitelistedDomains]:`${n}/490aa6725bcc4-manage-workspace-members#allow-access-by-email-domain`,[r.BAf.Members]:`${n}/ZG9jOjE4ODEyNQ-manage-workspace-members`,[r.BAf.CustomGitIntegration]:`${n}/ZG9jOjQ0MzM2OA-overview`,[r.BAf.SamlLdapIntegration]:`${n}/ZG9jOjQ1NTQxMg-single-sign-on`,[r.BAf.MultiBranch]:`${n}/f75659a7c7cdc-branch-management`,workspace_invite:`${n}/ZG9jOjE4ODEyNQ-manage-workspace-members#invite-members-to-your-workspace`,workspace_logo:`${n}/ZG9jOjI4NzkwNjQ1-change-the-look-and-feel#add-a-company-logo`,workspace_landing:`${n}/ZG9jOjI4NzkwNjQ1-change-the-look-and-feel#customize-your-landing-page`,stoplight_markdown:`${n}/ZG9jOjM3MTUxNjgw-stoplight-flavored-markdown`,cli:`${n}/ZG9jOjQ1NTQxMw-stoplight-cli`,add_images:`${n}/ZG9jOjc3MTg0NjE-add-images`,styleguides:`${n}/ZG9jOjMwMDI3MjA2-overview`,design:`${n}/ZG9jOjM2OTM3Mjg5-overview`,documentation:`${n}/ZG9jOjU4NzU5Mg-types-of-documentation`,classic_migration:`${n}/ZG9jOjE5MzIyNg-migrating-from-stoplight-classic`,next_migration:`${n}/ZG9jOjE5MzIyNw-migrating-from-stoplight-next`,manage_project_access:`${n}/ZG9jOjg1NjcyNzE`,project_service_accounts:`${n}/10d5c35b280a9-service-accounts`,workspace_roles:`${n}/679cc135e7f9a-workspace-roles`,use_legacy_exporter:`${n}/252039ebe8fb2-project-settings#legacy-export`,workspace_locking_overusage:`${n}/490aa6725bcc4-manage-workspace-members#unable-to-access-workspace-free-plan`,workspace_locking_failed_payment:`${n}/99abd4b3841fb-billing#failed-payments`,bitbucket_data_center_docs:`${n}/592ca38f987e3?utm_source=stoplight_platform`},l={stoplight_api:"https://meta.stoplight.io/docs/stoplight-api-docs/f6hiiufckkwgf-stoplight-catalog-api"}},88179:(e,t,a)=>{"use strict";a.d(t,{Kv:()=>o,Le:()=>l,Q8:()=>r});let r=e=>e?e.match("violates check constraint")||e.match("violates unique constraint")?o[n(e)]||o.generic:e:o.generic,n=e=>{let t=e.split("violates check constraint")[1]||e.split("violates unique constraint")[1];return t?t.replace(/"/g,"").trim():"generic"},o={check_workspaces_home_content_length:"Home content length cannot be more than 30,000 characters.",email_check:"Invalid email, please make sure that it is formatted correctly.",emails_email_key:"This email has already been associated with an account. If you believe this is an error, please contact support.",workspaces_slug_is_valid:"This workspace name is reserved, or not allowed. Please choose a different one.",check_workspaces_slug:"Workspace slugs can only include numbers, letters, and dashes, and must be less that 28 characters long.",projects_workspace_id_slug_idx:"A project with this slug already exists in this workspace. Please choose a different value.",generic:"Something went wrong, try again. If this persists, please contact Stoplight support."};class l extends Error{constructor(e){super(e),this.name="PSAError"}}},77898:(e,t,a)=>{"use strict";a.d(t,{SR:()=>c,aW:()=>s,bS:()=>y,cF:()=>d,m0:()=>u,oV:()=>l,os:()=>f,ud:()=>m,wL:()=>b,wN:()=>i,wZ:()=>p});var r=a(45250),n=a(75499),o=a(799);let l="cabinet-filing",i=({iconName:e})=>e||l,s="#7F8197",c=({iconColor:e})=>e||s,u=()=>(0,r.sample)(g),d=()=>(0,r.sample)(h),m=({currentProduct:e})=>e?.id===n.$X?o.Tgv.Public:o.Tgv.Internal,p=e=>{let t=o.l2p.Maker;switch(e){case o.M2u.Guest:t=o.l2p.Guest;break;case o.M2u.Viewer:t=o.l2p.Viewer}return t},g=["#43aaec","#f5533f","#c9135f","#6672e6","#2bc137","#bc48cb","#2ea44e","#7d5fff","#17c0eb","#3ae374","#F97F51","#58B19F","#6D214F","#FC427B","#EAB543","#2C3A47","#B33771","#3742fa"],h=["unicorn","university","book","book-alt","book-open","server","magic","pencil-ruler","paint-brush","graduation-cap","lightbulb-on","book-reader","chess-rook","satellite-dish","code","clipboard-list-check","robot","user-graduate","globe-americas","alicorn","exchange","right-left"],f={[o.Tgv.Public]:"globe-americas",[o.Tgv.Internal]:"unlock",[o.Tgv.Private]:"user-lock"},b={article:"#1AABFF",model:"#05B870",api:"#F57A3D",endpoint:"#9061F9"},y={article:"book-open",model:"cube",api:"cloud",endpoint:"bullseye"}},41406:(e,t,a)=>{"use strict";a.d(t,{$4:()=>l,Yr:()=>o,np:()=>i,rG:()=>n});var r=a(45250);let n=(e,t)=>"project"===t.type,o=e=>(0,r.isObject)(e)&&Object.hasOwnProperty.call(e,"nodeSlug")&&"string"==typeof e.nodeSlug,l=e=>(0,r.isObject)(e)&&Object.hasOwnProperty.call(e,"method")&&"string"==typeof e.method,i=e=>(0,r.isObject)(e)&&!Array.isArray(e)&&void 0!==e.id&&void 0!==e.branch_node_id},11017:(e,t,a)=>{"use strict";a.d(t,{s:()=>n});var r=a(18735);function n(){return{...(0,r.A1)().billing}}},19175:(e,t,a)=>{"use strict";a.d(t,{pr:()=>o,n5:()=>n,BG:()=>i,hD:()=>l,OP:()=>s,_m:()=>c,aS:()=>u,in:()=>d.i,sn:()=>d.s,y1:()=>m,AO:()=>p,lN:()=>g,Lf:()=>h,lw:()=>b,hd:()=>f,u6:()=>y.u,pw:()=>y.p,gx:()=>w.gx,bZ:()=>w.bZ,ks:()=>w.ks,L3:()=>v,tz:()=>E,iS:()=>_,nc:()=>x.n,v7:()=>x.v,C$:()=>k});var r=a(18735);function n(){return{...(0,r.A1)().api}}function o(){return{...(0,r.w0)().api}}function l(){return{...(0,r.A1)().auth}}function i(){return{...(0,r.w0)().auth}}function s(){return{...(0,r.A1)().externalDrilldown}}function c(){return{...(0,r.A1)().features}}function u(){return(0,r.A1)().flags}var d=a(68317);function m(){return{...(0,r.A1)().metadata}}function p(){return{...(0,r.px)().notifications}}function g(){return{...(0,r.w0)().projectMembers}}function h(){return{...(0,r.A1)().projectMembers}}function f(){return{...(0,r.A1)().projects}}function b(){return{...(0,r.w0)().projects}}var y=a(87773),w=a(1465);function E(){return{...(0,r.A1)().ui}}function v(){return{...(0,r.w0)().ui}}function k(){return{...(0,r.A1)().workspaces}}function _(){return{...(0,r.w0)().workspaces}}var x=a(15936)},68317:(e,t,a)=>{"use strict";a.d(t,{i:()=>o,s:()=>n});var r=a(18735);function n(){return{...(0,r.A1)().members}}function o(){return{...(0,r.w0)().members}}},87773:(e,t,a)=>{"use strict";a.d(t,{p:()=>o,u:()=>n});var r=a(18735);function n(){return{...(0,r.w0)().reporter}}function o(){return{...(0,r.px)().reporter}}},1465:(e,t,a)=>{"use strict";a.d(t,{bZ:()=>l,gx:()=>o,ks:()=>n});var r=a(18735);function n(){return{...(0,r.A1)().router}}function o(){return{...(0,r.w0)().router}}function l(){return{...(0,r.px)().router}}},15936:(e,t,a)=>{"use strict";a.d(t,{n:()=>n,v:()=>o});var r=a(18735);function n(){return{...(0,r.w0)().workspaceItemDetails}}function o(){return{...(0,r.A1)().workspaceItemDetails}}},18735:(e,t,a)=>{"use strict";let r,n,o,l;a.d(t,{$W:()=>rI,w0:()=>rC,px:()=>rP,A1:()=>rj,U8:()=>rS});var i={};a.r(i),a.d(i,{getNonStaleJWT:()=>ed,initializeApiClient:()=>eg,refreshToken:()=>em,setSocketState:()=>ep});var s={};a.r(s),a.d(s,{clear:()=>eT,danger:()=>eD,info:()=>eA,success:()=>eP,warning:()=>eB});var c={};a.r(c),a.d(c,{actions:()=>i,effects:()=>eO,onInitialize:()=>ez,state:()=>eV});var u={};a.r(u),a.d(u,{authenticateWithShareToken:()=>e1,connectIntegration:()=>e4,getOAuth2Token:()=>eZ,identifyUser:()=>e7,loginWithOauth:()=>eX,logout:()=>e3,populateCurrentUser:()=>e8,refreshCurrentUser:()=>e5,rejectAuthenticated:()=>e2,resolveAuthenticated:()=>e0,setClientIat:()=>eY,setCurrentUser:()=>e6,setJwtToken:()=>eJ});var d={};a.r(d),a.d(d,{getOAuth2Token:()=>te});var m={};a.r(m),a.d(m,{actions:()=>u,effects:()=>d,onInitialize:()=>tt,state:()=>ta});var p={};a.r(p),a.d(p,{state:()=>tr});var g={};a.r(g),a.d(g,{sleep:()=>tn});var h={};a.r(h),a.d(h,{search:()=>tP,setIsLoading:()=>tC,toggleNodeStarredFilter:()=>tS,toggleNodeTypeFilter:()=>tI,touchQueries:()=>tj,updateTreeNodes:()=>tx});var f={};a.r(f),a.d(f,{actions:()=>h,onInitialize:()=>tB,state:()=>tD});var b={};a.r(b),a.d(b,{addProjects:()=>tz,clearProjects:()=>tO,selectProject:()=>tL,setDefaultProjectType:()=>tq,setGitSelected:()=>tN,setIntegrationId:()=>t$,setLocalProject:()=>tU,setOwner:()=>tM,setProjectFlavor:()=>tR,toggleInstallWebhooks:()=>tG,toggleProject:()=>tW});var y={};a.r(y),a.d(y,{actions:()=>b,state:()=>tV});var w={};a.r(w),a.d(w,{state:()=>tH});var E={};a.r(E),a.d(E,{calculateAndUpdateEnabledFlags:()=>tX,updateEnabledFlags:()=>tY});var v={};a.r(v),a.d(v,{actions:()=>E,onInitialize:()=>tZ,state:()=>t0});var k={};a.r(k),a.d(k,{touchMembersQueries:()=>t2,touchQueries:()=>t1});var _={};a.r(_),a.d(_,{actions:()=>k,state:()=>t4});var x={};a.r(x),a.d(x,{fetchMembersAggregateData:()=>t5,search:()=>t3,touchQueries:()=>t8});var I={};a.r(I),a.d(I,{actions:()=>x,state:()=>t6});var S={};a.r(S),a.d(S,{dataBootstrapCompleted:()=>t7,subscribeAppVersion:()=>t9});var j={};a.r(j),a.d(j,{actions:()=>S,onInitialize:()=>ae,state:()=>at});var C={};a.r(C),a.d(C,{setBanner:()=>aa,setResponsiveBannerDismissed:()=>ar});var P={};a.r(P),a.d(P,{actions:()=>C,effects:()=>s,state:()=>an});var A={};a.r(A),a.d(A,{clearSearch:()=>al,search:()=>ao,touchQueries:()=>ai});var B={};a.r(B),a.d(B,{actions:()=>A,state:()=>as});var D={};a.r(D),a.d(D,{clearInitialFileUpload:()=>ag,refreshSidebarAndProjectsList:()=>am,search:()=>au,setInitialFileUpload:()=>ap,touchQueries:()=>ad});var T={};a.r(T),a.d(T,{actions:()=>D,state:()=>ah});var F={};a.r(F),a.d(F,{error:()=>aE,forwardUserPropertiesToThirdPartyTools:()=>aw,setUserProperties:()=>av});var $={};a.r($),a.d($,{error:()=>aS,initializeReporter:()=>ax,log:()=>aI,setActiveWorkspace:()=>aA,setUser:()=>aC,setUserProperties:()=>aj,setUserWorkspaces:()=>aB,setWorkspaceProperties:()=>aP});var N={};a.r(N),a.d(N,{actions:()=>F,effects:()=>$,onInitialize:()=>aT});var U={};a.r(U),a.d(U,{updateLocation:()=>aF});var M={};a.r(M),a.d(M,{forceStatusCode:()=>a$,internal:()=>U});var R={};a.r(R),a.d(R,{initHistory:()=>aU,navigate:()=>aM,redirectTo:()=>aR});var W={};a.r(W),a.d(W,{actions:()=>M,effects:()=>R,onInitialize:()=>aW,state:()=>aL});var L={};a.r(L),a.d(L,{onInitialize:()=>aG,state:()=>aO});var G={};a.r(G),a.d(G,{clearFilters:()=>aQ,clearScrollTo:()=>aX,clearSort:()=>aJ,setAllFilters:()=>aH,setFilter:()=>aV,setScrollTo:()=>aY,setSort:()=>aK,setTableInstance:()=>aZ});var O={};a.r(O),a.d(O,{actions:()=>G,state:()=>az.wk});var z={};a.r(z),a.d(z,{setIsOpen:()=>a0,setTeam:()=>a1});var q={};a.r(q),a.d(q,{actions:()=>z,state:()=>a2});var V={};a.r(V),a.d(V,{reset:()=>a8,setThemeProperty:()=>a4,turnPreviewOff:()=>a5,turnPreviewOn:()=>a3});var H={};a.r(H),a.d(H,{actions:()=>V,state:()=>a6.wk});var Q={};a.r(Q),a.d(Q,{setFeatureDialogOpen:()=>a9,setInfoDialogDetails:()=>rt,setInfoDialogOpen:()=>re,setInviteMembersDialogOpen:()=>ri,setResponsiveSidebarOpen:()=>rl,setSelectedFeature:()=>ra,setSelectedProduct:()=>rr,setSidebarFocused:()=>a7,setUserIdleState:()=>ro,showFeatureDialog:()=>rn});var K={};a.r(K),a.d(K,{actions:()=>Q,state:()=>rs});var J={};a.r(J),a.d(J,{updateEmail:()=>rc});var Y={};a.r(Y),a.d(Y,{actions:()=>J});var X={};a.r(X),a.d(X,{resolveVerifyCode:()=>ru});var Z={};a.r(Z),a.d(Z,{actions:()=>X});var ee={};a.r(ee),a.d(ee,{setIsOpen:()=>rd,setWorkspaceItem:()=>rm});var et={};a.r(et),a.d(et,{actions:()=>ee,state:()=>rp});var ea={};a.r(ea),a.d(ea,{populateCurrentWorkspaceFromWorkspace:()=>rg,refreshCurrentWorkspace:()=>rw,setCurrentWorkspace:()=>rf,setCurrentWorkspaceId:()=>rh,setMyWorkspace:()=>rb,setSubscribedToMyWorkspace:()=>ry});var er={};a.r(er),a.d(er,{actions:()=>ea,onInitialize:()=>rk,state:()=>rx});var en=a(4492),eo=a(14191),el=a(45250),ei=a(57691),es=a(86956),ec=a.n(es);let eu=(e,t,a=0)=>{let r=15+a,n=Date.now()/1e3,o=ec()(e);return t?o.exp-o.iat<=n-t+r:o.exp<=n+r},ed=async({state:e,actions:t})=>((!e.auth.jwt||eu(e.auth.jwt,e.auth.jwtClientIat))&&await t.api.refreshToken({workspaceId:e.workspaces.currentWorkspaceId||void 0}),e.auth.jwt),em=async({actions:e,effects:t,state:a},{workspaceId:r})=>{r||t.reporter.log({event:"missing_workspace_id_on_token_refresh",payload:{page_url:window.location.href}});let n=null;try{let o=await t.api.getNewAccessToken(r,a.router.isCustomDomain,a.workspaces.currentWorkspace?.domain);n=o?.token||null,e.auth.setJwtToken(n),n&&console.info("refreshJWT.success")}catch(a){if((0,el.isError)(a)&&a.cause&&403===a.cause.code&&"WORKSPACE_IS_LOCKED"===a.cause.type)return await e.auth.logout(!1),null;if((0,el.isError)(a)&&"Refresh token not provided"===a.message&&a.cause&&400===a.cause.code&&"VALIDATION_ERROR"===a.cause.type)return null;t.reporter.error(a)}return n},ep=({state:e},t)=>{e.api.socketState=t},eg=({state:e,actions:t,effects:a})=>{let r=e.api.httpHost+ei.aC,n=e.api.httpHost,o=!!a.api.getClient();a.api.initialize({clientOptions:{appHttpUrl:n,gqlHttpUrl:r,getJWT:()=>e.auth.jwt,getJWTClientIat:()=>e.auth.jwtClientIat,refreshJWT:t.api.refreshToken,getCurrentWorkspaceId:()=>e.workspaces.currentWorkspaceId||void 0,onSocketStateChange:e=>{t.api.setSocketState(e)}}}),o&&e.api.urqlClientId++};a(90482);var eh=a(15990),ef=a(2188),eb=a(83676),ey=a(99472),ew=a.n(ey),eE=a(799),ev=a(92612),ek=a(63034),e_=a(32073),ex=a(36713),eI=a(50577),eS=a(74093),ej=a(88179),eC=a(39904);let eP=(e,t)=>eF({...e,intent:"success"},t),eA=(e,t)=>eF({...e,intent:"primary"},t),eB=(e,t)=>eF({...e,intent:"warning"},t),eD=(e,t)=>eF({...e,intent:"danger"},t),eT=()=>{r&&r.clear()};ei.KJ&&(r=eC.Toaster.create({position:eC.Position.BOTTOM,maxToasts:2}));let eF=(e,t)=>{if(!r)return"noop";let a=e.message;return"string"==typeof a&&/GraphQL error: /.test(a)&&(a=a.replace("GraphQL error: ","")),r.show({...e,message:a},t)},e$=ev.release,eN=({appHttpUrl:e,gqlHttpUrl:t,getJWT:a,getJWTClientIat:r,getCurrentWorkspaceId:n,refreshJWT:o,urql:l})=>{let i,s;s=(0,eI.OP)({isClient:ei.KJ});let c=ei.KJ&&window.URQL_DATA;return c&&s.restoreData(c),i=(0,ex.WG)({keys:{sl_workspace_user_permissions:e=>String(e.workspace_member_id)+e.permission,sl_role_priority:()=>null,sl_role_permissions:()=>null,sl_role_name:()=>null,sl_permission_name:()=>null,sl_node_snapshot_type:()=>null,sl_system_status:()=>null,sl_project_private:()=>null,sl_stars_aggregate:()=>null,sl_stars_aggregate_fields:()=>null,sl_workspace_invitations_aggregate:()=>null,sl_workspace_invitations_aggregate_fields:()=>null,sl_type_node_edge_results_aggregate:()=>null,sl_type_node_edge_results_aggregate_fields:()=>null,sl_project_user_permissions:()=>null,sl_group_user_permissions:e=>String(e.group_member_id)+e.permission,BranchNodeAuthResponse:()=>null,ShareSessionAuthResponse:()=>null,ExternalOrg:e=>e.id+String(e.isPersonal),sl_type_task_log_status:()=>null},updates:{Mutation:{createStars:(e,t,a,r)=>{a.updateQuery({query:eE.suM,variables:r.variables},t=>(t&&t.stars.push(...e.createStars?.returning||[]),t))},deleteStars:(e,t,a)=>{for(let t of e.deleteStars?.returning||[])a.invalidate({__typename:"sl_stars",id:t.id})}}}}),{appHttpUrl:e,urqlClient:new eI.Kj({url:t,...l,suspense:!ei.KJ,requestPolicy:ei.KJ?"cache-and-network":"cache-first",exchanges:[null,eI.yp,eL(),i,s,eU(a,r),(0,e_.K)({addAuthToOperation:({operation:e})=>{let t=a();if(!t||eu(t,r()))return e;let n="function"==typeof e.context.fetchOptions?e.context.fetchOptions():e.context.fetchOptions||{};return(0,eI.Qp)(e.kind,e,{...e.context,fetchOptions:{...n,headers:{...n.headers,authorization:`Bearer ${t}`}}})},willAuthError:({operation:e})=>{if("GetAccessToken"===(0,el.get)(e,["query","definitions",0,"name","value"]))return!1;let t=a();return!!(!t||eu(t,r()))},didAuthError:({error:e})=>e.graphQLErrors.some(e=>e.extensions?.code==="invalid-jwt"),getAuth:async({mutate:e})=>{let t=a();if(o&&t&&eu(t,r())){console.info("getAuth.refresh");try{t=await o({workspaceId:n(),mutate:e}),console.info("getAuth.refresh.success")}catch(e){return console.error("getAuth.refresh.error",e),null}}return t?{token:t}:null}}),eI.cI].filter(Boolean),fetchOptions:()=>{let e={"SL-Consumer":`stoplight/frontend ${e$}`};ei.KJ||(e["user-agent"]=`stoplight-frontend/${ei.xv}`);let t=a();return t&&!eu(t,r())&&(e.authorization=`Bearer ${t}`),{headers:e,mode:"cors",credentials:"include",referrerPolicy:"no-referrer-when-downgrade"}}}),ssrCache:s,clientCache:i}},eU=(e,t)=>({forward:a})=>r=>(0,eS.Fs)(a(r),(0,eS.Mi)(({error:a,operation:r})=>{if(!a)return;let{graphQLErrors:n,networkError:o}=a;a.message=(0,ej.Q8)(a.message.replace("[GraphQL]","").trim()),n&&n.map(a=>{let{message:n,extensions:o}=a||{};switch(o?.code){case"invalid-jwt":try{let a=e?e():null,l=a?ec()(a):null,i=t();ek.getReporter()?.error(`[invalid jwt](${o?.code}): ${n}`,{operationName:r.kind,name:el.get(r,"query.definitions[0].name.value"),isTokenExpired:a?eu(a,i):0,jwtExp:l?l.exp:0,jwtIat:l?l.iat:0,jwtClientIat:i,clientTimeSinceIssue:i?Date.now()/1e3-i:null})}catch{ek.getReporter()?.error("[invalid jwt] error sending report")}console.error(`[invalid jwt](${o?.code}): ${n}`);break;case"UNAUTHENTICATED":console.info("Authenticated: false");break;default:console.warn(`[graphql error](${o?.code}): ${n} - ${o?.path}`)}}),a.message.match("non-prod")&&eB({icon:"warning-sign",message:"Note: non prod behavior triggered"}),o&&console.warn(`[network error]: ${o.message}`)})),eM=new Map,eR=new Map,eW=e=>{eM.forEach(t=>{e.reexecuteOperation(e.createRequestOperation("query",t,{requestPolicy:"cache-and-network"}))})},eL=()=>{let e=Date.now();return({client:t,forward:a})=>r=>"undefined"==typeof window?a(r):(window.addEventListener("visibilitychange",()=>{Date.now()-e<3e5||"object"==typeof document&&"visible"!==document.visibilityState||(e=Date.now(),eW(t))}),a((0,eS.Fs)(r,(0,eS.Mi)(e=>{"query"!==e.kind||eR.has(e.key)||(eR.set(e.key,1),eM.set(e.key,e)),"teardown"===e.kind&&eR.has(e.key)&&(eR.delete(e.key),eM.delete(e.key))}))))},eG=a(86956),eO=(()=>{let e;return{initialize({clientOptions:t}){e=eN(t)},getClient:()=>e,reexecuteActiveOperations(){e&&eW(e.urqlClient)},executeMutation:(t,a,r)=>e.urqlClient.mutation(t,a,r).toPromise(),executeQuery:(t,a,r)=>e.urqlClient.query(t,a,r).toPromise(),connectIntegration(e){return this.executeMutation(eE.o$U,e)},login:(e,t)=>(0,ef.login)(null,e,{baseUrl:t?.baseUrl}),logout:e=>(0,ef.logout)(null,void 0,{baseUrl:e?.baseUrl}),async getNewAccessToken(e,t,a){let r=a?ew().build({protocol:"https",hostname:a}):"",n=await fetch(`${t&&r?`${r}`:this.getClient().appHttpUrl}/api/v1/auth/access-token${e?`/${(0,eh.encodeID)("wk",e)}`:""}`,{method:"POST",credentials:"include",mode:"cors"}),o=await n.json();if(n.ok)return o;throw Error(o.message,{cause:o})},getWorkspaceMembers(e){return this.executeQuery(eE.gNr,{workspaceId:e,limit:500,offset:0},{requestPolicy:"network-only"})},getWorkspaceInvitations(e){return this.executeQuery(eE.vml,{workspaceId:e,limit:500,offset:0},{requestPolicy:"network-only"})},getWorkspaceJoinRequests(e){return this.executeQuery(eE.H96,{workspaceId:e,limit:500,offset:0},{requestPolicy:"network-only"})},createProjects(e){return this.executeMutation(eE.oOq,{projects:e})},addUserToExternalProjects(e,t,a){let r=(0,eh.encodeID)("usr",t),n=(0,eh.encodeID)("wk",a);try{return(0,ef.addUserToExternalProjects)(null,{slugs:e,user_id:r,workspace_id:n})}catch(e){if((0,el.isError)(e))throw e;if((0,eb.isPlainObject)(e)&&"string"==typeof e.message)throw Error(e.message);throw Error("Something went wrong, please try again.")}},queueAnalyzeProject(e,t){return this.executeMutation(eE.Oqk,{event:eE.iBT.Manual,projectId:e,branch:t})},queueNextMigration(e,t){return this.executeMutation(eE.w0M,{apiKey:e,projectIds:t})},createExternalWebhook(e){return this.executeMutation(eE.sWH,{...e})},async checkEmailHasWorkspace(e){try{return await (0,ef.emailHasWorkspace)(null,{email:e})}catch(e){if((0,el.isError)(e))throw e;if((0,eb.isPlainObject)(e)&&"string"==typeof e.message){if(422===e.code)throw Error("Please enter a valid email address.");throw Error(e.message)}throw Error("Something went wrong, please try again.")}},getAuthenticationUrl(e,t="read",a){return this.executeQuery(eE.L7X,{workspaceIntegrationId:e,scope:t,state:a},{requestPolicy:"network-only"})},getCurrentUser(e,t){let a=eG(e),r=(0,el.get)(a,["https://stoplight.io/jwt/claims","x-hasura-user-id"]);if(!r)return null;let n=Number(r);return this.executeQuery(eE.AkU,{id:n},{requestPolicy:t?"network-only":void 0})},getWorkspaceBySlug(e,t){return this.executeQuery(eE.D1J,{slug:e},{requestPolicy:t?"network-only":void 0})},getWorkspaceSlugBySlug(e,t){return this.executeQuery(eE.alb,{slug:e},{requestPolicy:t?"network-only":void 0})},getWorkspaceDetailsById(e,t){return this.executeQuery(eE.V8R,{id:e},{requestPolicy:t?"network-only":void 0})},projectsByExternalIds(e,t){return this.executeQuery(eE.PLc,{workspaceIntegrationId:e,externalIds:t},{requestPolicy:"network-only"})},projectsByOwner(e){return this.executeQuery(eE.AFr,{userId:e},{requestPolicy:"network-only"})},updateUserTimezone(e,t){return this.executeMutation(eE.oA6,{userId:e,input:{timezone:t}})},getExternalProject(e,t,a){return this.executeQuery(eE.QG7,{workspaceIntegrationId:e,repoUrl:t},{requestPolicy:a?"network-only":void 0})}}})(),ez=({actions:e,state:t})=>{e.api.initializeApiClient(),setInterval(async()=>{let a=t.auth.jwt,r=t.auth.jwtClientIat,n=t.workspaces.currentWorkspaceId;n&&a&&eu(a,r,60)&&(console.log("[api] token expired... refreshing"),await e.api.refreshToken({workspaceId:n})?console.log("[api] token successfully refreshed"):console.log("[api] token NOT successfully refreshed"))},2e4)};var eq=a(53960);let eV={urqlClientId:0,socketState:"disconnected",stableHttpHost:(0,eq.un)((e,t)=>t.router.appUrl),httpHost:(0,eq.un)((e,t)=>t.router.isCustomDomain||!ei.KJ?t.router.appUrl:window.location.origin)};var eH=a(60606),eQ=a(10328),eK=a(55428);let eJ=async({state:e,actions:t},a)=>{e.auth.jwt=a,t.auth.setClientIat()},eY=({state:e})=>{ei.KJ&&(e.auth.jwtClientIat=Date.now()/1e3)},eX=async({state:e,actions:t,effects:a},{popup:r,integration:n})=>{if(e.auth.isConnectingIntegration)return;let o=n.id,l=null;e.auth.connectingIntegrationId=o;try{if((0,eH.Yr)(ei.xF[n.kind],n.config)&&(l=await t.auth.getOAuth2Token({integration:n,popup:r})),!l){a.reporter.log({event:"workspace_integration_connection_cancelled",payload:{kind:n.kind}});return}a.reporter.log({event:"workspace_integration_connected",payload:{kind:n.kind}});let i=await a.api.login({workspaceIntegrationId:o,code:l},{baseUrl:e.router.isCustomDomain?`https://${e.workspaces.currentWorkspace?.domain}/api`:void 0}),s=(0,eK.T)(i.joinRequestStatus);s&&a.notifications[s.intent]({message:s.text}),i.token&&await t.auth.resolveAuthenticated({token:i.token,integrationKind:n.kind}),i.confirmationRequired?(e.auth.workspaceMemberEmailConfirmationRequired=!0,a.notifications.success({message:"Workspace email confirmation required"})):e.auth.workspaceMemberEmailConfirmationRequired=!1}catch(r){let e=String((0,eb.isPlainObject)(r)&&"message"in r?r.message:r);if(-1!==e.indexOf("workspace permission denied")&&(e=`Permission denied. You need to connect with a ${n.kind} account that has an email associated with it that has either been invited to this workspace, or matches one of the allowed email domains on this workspace.`),(0,eb.isPlainObject)(r)&&"WORKSPACE_IS_LOCKED"===r.type){let e=r?.data?.ownerEmail,a=r?.data?.lockReason;t.ui.setInfoDialogOpen(!0),e&&t.ui.setInfoDialogDetails({email:e}),a&&t.ui.setInfoDialogDetails({lockReason:a})}a.notifications.danger({message:e}),t.auth.rejectAuthenticated({integrationKind:n.kind}),t.reporter.error({event:"workspace_integration_connected",error:Error(e)})}finally{e.auth.connectingIntegrationId=null}},eZ=async({state:e,effects:t},{integration:a,popup:r})=>{let n=null;try{let o=eQ.po(64).toString("hex"),{data:l,error:i}=await t.api.getAuthenticationUrl(a.id,"write",o);if(i||!l?.getAuthenticationUrl)throw Error(i?.message||"Unknown authentication url");let s=e.router.appUrl;if(e.metadata.isMultiTenant&&a.kind===eE.KXp.Saml){let t=new(ew())(e.router.appUrl),a=t.subdomain().valueOf();s=t.subdomain([e.router.workspaceSlug,a].join(".")).valueOf()}n=await t.auth.getOAuth2Token(r,a.kind,l.getAuthenticationUrl,s)}catch(e){t.notifications.danger({message:e.message})}return n},e0=async({actions:e,effects:t},{token:a,integrationKind:r})=>{await e.auth.setJwtToken(a),await e.auth.refreshCurrentUser(),t.reporter.log({event:"workspace_logged_in",payload:{successful:!0,integration_kind:r}})},e1=async({actions:e},{token:t})=>{e.auth.setJwtToken(t),await e.auth.identifyUser(null)},e2=({effects:e},{integrationKind:t})=>{e.reporter.log({event:"workspace_logged_in",payload:{successful:!1,integration_kind:t}})},e4=async({state:e,actions:t,effects:a},{popup:r,integration:n,usernameOrEmail:o,password:l,code:i})=>{if(e.auth.isConnectingIntegration)return;let s=n.id,c=ei.xF[n.kind];e.auth.connectingIntegrationId=s;let u=!1;try{if((0,eH.Yr)(c,n.config)&&!i&&r&&!(i=await t.auth.getOAuth2Token({integration:n,popup:r})||void 0)){a.reporter.log({event:"workspace_integration_connection_cancelled",payload:{kind:n.kind}});return}let{data:e,error:d}=await a.api.connectIntegration({workspaceIntegrationId:s,code:i,usernameOrEmail:o,password:l});if(d||!e?.connectExternalAccount)throw Error(d?.message||"Unknown error while connecting integration");await t.auth.refreshCurrentUser(),u=!0,a.reporter.log({event:"workspace_integration_connected",payload:{kind:n.kind}}),a.notifications.success({message:"Your account was connected."})}catch(e){a.notifications.danger({message:e.message}),a.reporter.log({event:"workspace_integration_connection_cancelled",payload:{kind:n.kind}})}finally{e.auth.connectingIntegrationId=null}return u},e3=async({actions:e,state:t,effects:a},r)=>{t.auth.jwt&&(r||await a.api.logout({baseUrl:t.router.isCustomDomain?`https://${t.workspaces.currentWorkspace?.domain}/api`:void 0}),e.auth.setJwtToken(null),e.auth.setCurrentUser(null),r||window.localStorage.setItem("logout",t.metadata.sessionId)),void 0!==window.Appcues&&window.Appcues.reset(),a.reporter.log({event:"workspace_logged_out"}),a.reporter.setUser(null),window.location.href="/auth"},e5=async({state:e,actions:t,effects:a})=>{if(!e.auth.jwt)return null;let r=await a.api.getCurrentUser(e.auth.jwt,!0),n=r?.data?.user||null;return t.auth.setCurrentUser(n),n},e8=async({state:e,actions:t})=>{let a=await t.api.refreshToken({workspaceId:e.workspaces.currentWorkspaceId||void 0});a&&(await t.auth.setJwtToken(a),await t.auth.refreshCurrentUser())},e6=({state:e,actions:t,effects:a},r)=>{e.auth.currentUser=r,t.auth.identifyUser(r),a.reporter.setUser(r)},e7=async({effects:e,state:t,actions:a},r)=>{if(ei.KJ){if(null!==r&&void 0!==window.makeStatuspageEmbedVisible?window.makeStatuspageEmbedVisible():null===r&&void 0!==window.makeStatuspageEmbedHidden&&window.makeStatuspageEmbedHidden(),r){let a;let n=Intl.DateTimeFormat().resolvedOptions().timeZone;r.timezone!==n&&e.api.updateUserTimezone(r.id,n);try{a=await navigator?.storage?.estimate?.()}catch(t){e.reporter.error(t)}e.reporter.setUser({id:`${r.id}`,email:r.emails[0]?.email,firstName:r.firstName||void 0,lastName:r.lastName||void 0,username:r.username,avatar:r.avatarUrl,created_at:r.createdAt,storage:{quota:a?.quota,usage:a?.usage},is_github_connected:t.auth.getIsIntegrationConnected(eE.KXp.Github),is_gitlab_connected:t.auth.getIsIntegrationConnected(eE.KXp.Gitlab),is_bitbucket_cloud_connected:t.auth.getIsIntegrationConnected(eE.KXp.BitbucketCloud),is_bitbucket_data_center_connected:t.auth.getIsIntegrationConnected(eE.KXp.BitbucketDataCenter),is_azure_server_connected:t.auth.getIsIntegrationConnected(eE.KXp.AzureDevopsServer),is_azure_services_connected:t.auth.getIsIntegrationConnected(eE.KXp.AzureDevopsServices),is_saml_connected:t.auth.getIsIntegrationConnected(eE.KXp.Saml),is_ldap_connected:t.auth.getIsIntegrationConnected(eE.KXp.Ldap),survey_persona:r.surveyPersona,survey_num_apis:r.surveyNumApis,survey_openapi_usage:r.surveyOpenapiUsage,survey_uc_external_docs:r.surveyExternalDocs,survey_uc_internal_docs:r.surveyInternalDocs,survey_uc_design:r.surveyDesign,survey_uc_mocking:r.surveyMocking,survey_uc_governance:r.surveyGovernance,survey_uc_collaboration:r.surveyCollaboration,survey_uc:r.surveyUC,survey_company_name:r.surveyCompanyName,beta_web_projects:r.betaWebProjects})}else e.reporter.setUser(null);a.flags.calculateAndUpdateEnabledFlags({})}};var e9=a(346);let te=(e,t,a,r)=>new Promise((n,o)=>{var l,i;let s=null,c=null,u=null;e.location.href=a;let d=function(e,t,a,r,n){let o=(0,e9.uz)(new URL(a),t);if(!o)throw Error("Missing SSO callback state");let l={type:"oauth2.state",state:o,integrationKind:t,originalDomain:window.location.origin};return setInterval(()=>{e.postMessage(l,r)},500)}(e,t,a,r,0),m=()=>{clearInterval(d),window.removeEventListener("message",p),function(e){e&&cancelAnimationFrame(e)}(c),function(e){e.closed||e.close()}(e),s?n(s):o(u||"Oauth popup closed before code could be obtained.")};e.onclose=m;let p=(l=e=>s=e,i=e=>u=e,e=>{"oauth2.callback"===e.data.type&&(e.data.code?l(e.data.code):e.data.error&&i(Error(e.data.error)),m())});window.addEventListener("message",p);let g=()=>{e.closed?setTimeout(()=>{s||(u=Error("Auth popup window closed early by user.")),m()},2500):requestAnimationFrame(g)};c=requestAnimationFrame(g)}),tt=async({actions:e,effects:t,state:a})=>{a.auth.jwt&&(e.auth.setClientIat(),await t.api.getCurrentUser(a.auth.jwt)),window.addEventListener("storage",t=>{"logout"===t.key&&t.newValue!==a.metadata.sessionId&&(console.info("logged out in another tab",e.auth),e.auth.logout(!0))}),a.auth.currentUser&&e.auth.identifyUser(a.auth.currentUser)},ta={jwt:null,jwtClientIat:null,currentUser:null,isConnectingIntegration:(0,eq.un)(e=>null!==e.connectingIntegrationId),connectingIntegrationId:null,workspaceMemberEmailConfirmationRequired:!1,get isLoggedIn(){return!!(this.jwt&&this.currentUser)},get isAccountInfoCollected(){return!!(this.currentUser?.firstName&&this.currentUser?.lastName&&this.currentUser?.hasPassword)},getIsIntegrationConnected:(0,eq.un)((e,t)=>a=>!!e.currentUser?.externalUsers.some(e=>e.workspaceIntegrationId===t.workspaces.getIntegration(a)?.id))},tr={products:(0,eq.un)((e,t)=>(0,el.sortBy)(t.metadata.billingProducts,"priority")),status:(0,eq.un)(e=>e.currentBillingAccount?.status||null),currentBillingAccount:(0,eq.un)((e,t)=>t.workspaces.myWorkspace?.billing_account||null),currentProduct:(0,eq.un)((e,t)=>t.workspaces.myWorkspace?.billing_product||null),getProduct:(0,eq.un)(e=>t=>e.products.find(e=>e.name===t||e.id===t)||null),getProductsByFeature:(0,eq.un)(e=>t=>{let a=e.products.filter(e=>e.features.some(e=>e.feature.name===t));return a.sort((e,t)=>e.priority-t.priority),a}),getLowestPaidProductForFeature:(0,eq.un)((e,t)=>(a,r)=>{let n=e.getProductsByFeature(a).filter(e=>e.name!==eE.mmV.Free);if(!n.length)return null;let o=n[0];if((e.currentProduct?.priority||0)>=(o?.priority||0)){let l=o.features.find(e=>e.feature.name===a);if(l?.feature.type===eE.mat.Limit&&t.features.featureRequiresUpgrade(a,r)){let t=e.currentProduct&&e.getProduct(e.currentProduct.id),r=t?.features.find(e=>e.feature.name===a),o=r?.maxQuantity||0,l=n.find(e=>(e.features.find(e=>e.feature.name===a)?.maxQuantity||0)>o),i=n.findIndex(t=>t.id==e.currentProduct?.id);return l||n[Math.min(n.length-1,i+1)]}}return o}),estimatedMonthlySpend:(0,eq.un)((e,t)=>{let a=e.currentBillingAccount,r=e.currentProduct;if(!a||!r)return 0;let n={[eE.mmV.Free]:{flat:0,memberFee:0,includedMembers:0},[eE.mmV.Basic]:{flat:49,memberFee:12,includedMembers:3},[eE.mmV.Startup]:{flat:129,memberFee:12,includedMembers:8},[eE.mmV.ProTeam]:{flat:399,memberFee:24,includedMembers:20},[eE.mmV.Enterprise]:{flat:950,memberFee:40,includedMembers:25}},o=t.features.getFeatureUsage(eE.BAf.Members)||0,l=a.included_member_count||n[r.name].includedMembers;return n[r.name].flat+Math.max(0,o-l)*n[r.name].memberFee})},tn=(e=1e3)=>new Promise(t=>setTimeout(t,e));var to=a(94169),tl=a(44718),ti=a(90407),ts=a(41406);let tc={get:1,post:2,put:3,patch:4,delete:5,head:6,options:7,trace:8},tu=(e,t)=>{let a=e.metadata?.path,r=t.metadata?.path;return a!==r?a||r?a?r&&a<r?-1:1:-1:0:e.metadata?.method&&t.metadata?.method&&tc[e.metadata?.method]<tc[t.metadata?.method]?-1:1},td=(e,t)=>e.name!==t.name?e.name.toLowerCase().localeCompare(t.name.toLowerCase()):0,tm=(e,t)=>e.type!==t.type?"dir"!==e.type?-1:1:td(e,t);class tp extends tl.Tree{showEmpty=!0;counter=new WeakMap;invalidate(){this.counter=new WeakMap,super.invalidate()}getCountDeep(e){let t=0,a=this.counter.get(e);if(void 0!==a)return a;for(let a of this.getAllChildren(e))(0,tl.isParentNode)(a)?t+=this.getCountDeep(a):a&&t++;return this.counter.set(e,t),t}getAllChildren(e){if(0===e.children.length)return[];let t=this.iterationOptions?.filter,a=this.filtered.get(e);return void 0!==a?a:t?e.children.filter(t):e.children}getFilteredChildren(e){if(!this.unwrapped.has(e))return[];let t=this.filtered.get(e);if(void 0!==t)return t;let a=this.showEmpty?this.getAllChildren(e):this.getAllChildren(e).filter(e=>!(0,tl.isParentNode)(e)||this.getCountDeep(e)>0);return this.filtered.set(e,a),a}_findInWholeTree(e,t){for(let a of e.children){if(t(a))return a;if((0,tl.isParentNode)(a)){let e=this._findInWholeTree(a,t);if(void 0!==e)return e}}}findInWholeTree(e){return this._findInWholeTree(this.root,e)}}let tg=e=>{let t={};for(let a of e){let e=a.project_id,r=t[e];r||(r=t[e]={id:e,name:a.project_name,slug:a.project_slug,description:a.project_description,iconName:a.project_icon_name,nodes:{}});let n=a.snapshot_type,o=a.node_uri,l=a.branch_node_is_file;if(n===eE.$2t.Article)(0,el.set)(r.nodes,[eE.$2t.Article,...o.split("/").slice(1)],a);else if(n===eE.$2t.Model&&l)(0,el.set)(r.nodes,[eE.$2t.Model,...o.split("/").slice(1)],a);else if(n===eE.$2t.HttpService)(0,el.set)(r.nodes,[eE.$2t.HttpService,o,"node"],a);else if(n===eE.$2t.HttpOperation){let{fileUri:e,symbolUri:t}=tf(o);if(!e||!t)continue;let n=t.split("/"),l=(0,eb.decodePointer)(n[2]),i=n[3];(0,el.set)(r.nodes,[eE.$2t.HttpService,e,"operations",l,i],a)}else if(n===eE.$2t.Model){let{fileUri:e,symbolUri:t}=tf(o);if(!e||!t)continue;let n=t.split("/"),l=n[n.length-1];(0,el.set)(r.nodes,[eE.$2t.HttpService,e,"models",l],a)}}let a=tl.Tree.createArtificialRoot();for(let e of Object.values(t).sort(td)){let t={id:e.id,type:"project",name:e.name,parent:a,metadata:{id:e.id,uri:e.uri,projectSlug:e.slug,iconName:e.iconName,description:e.description},children:[]};if(a.children.push(t),e.nodes[eE.$2t.Article]){let a=tl.Tree.createArtificialRoot();tb(e.id,e.slug,e.nodes[eE.$2t.Article],a,[]),t.children.push(...th(a,t))}if(e.nodes[eE.$2t.HttpService]&&ty(e.id,e.nodes[eE.$2t.HttpService],t),e.nodes[eE.$2t.Model]){let a=tl.Tree.createArtificialRoot();tb(e.id,e.slug,e.nodes[eE.$2t.Model],a,[]),t.children.push(...th(a,t))}}return a};function th(e,t){let a;for(let r of a=1===e.children.length&&(0,tl.isParentNode)(e.children[0])?e.children[0].children:e.children)r.parent=t;return a.sort(tm)}let tf=e=>{let t=e.split(/(\.(?:ya?ml|json|md|markdown))/);return{fileUri:!(t.length<=2)&&t[1]&&t[2]?`${t[0]}${t[1]}`:void 0,symbolUri:t.length>0?t[2]:void 0}},tb=(e,t,a,r,n)=>{let o=Object.keys(a);if(0===o.length)return;let l=a[o[0]];if(1===o.length&&!(0,ts.np)(l)){r.name+=` / ${o[0]}`;let a=n.push(o[0]);r.metadata={uri:`/${n.join("/")}`,projectSlug:t},tb(e,t,l,r,n),n.length=a-1;return}for(let l of o){let o=a[l];if((0,ts.np)(o))r.children.push(tk(o,r));else{let a=n.push(l),i={id:`${e}-${n.join("-")}`,type:"dir",name:l,parent:r,children:[],metadata:{uri:`/${n.join("/")}`,projectSlug:"shouldnt-matter"}};r.children.push(i),tb(e,t,o,i,n),n.length=a-1}}},ty=(e,t,a)=>{for(let r of Object.keys(t)){let{node:n}=t[r],o=n?{...tk(n,a),children:[]}:{...tp.createArtificialRoot(),parent:a,type:to.Z6.HttpService,name:r};a.children.push(o);let l=t[r].operations;if((0,el.size)(l)>0){let t={id:`${e}-${o.id}-operations`,type:"dir",name:`${ei.Cp.http_operation}s`,parent:o,children:[]};o.children.push(t),tw(l,t)}let i=t[r].models;if((0,el.size)(i)>0){let t={id:`${e}-${o.id}-models`,type:"dir",name:`${ei.Cp.model}s`,children:[],parent:o};o.children.push(t),tE(i,t)}}},tw=(e,t)=>{for(let a of Object.keys(e)){let r={id:`${t.id}-${a}`,type:"dir",name:a,children:[],parent:t};for(let n of(t.children.push(r),Object.keys(e[a]))){let t=tv(e[a][n],r,a,n);t.type=to.Z6.HttpOperation,r.children.push(t)}}},tE=(e,t)=>{for(let a of Object.keys(e))t.children.push(tk(e[a],t))},tv=(e,t,a,r)=>{let n=tk(e,t),o=n.metadata;return{...n,metadata:{...o,path:a,method:r}}},tk=(e,t)=>{let a={id:e.branch_node_id,uri:e.node_uri,projectSlug:e.project_slug,nodeType:e.snapshot_type,nodeSlug:(0,ti.Ln)({type:e.snapshot_type,name:e.branch_node_name,nodeId:e.node_id,stableId:e.branch_node_stable_id,slug:e.branch_node_slug})},r=e.highlighted_summary||e.snapshot_summary;return r&&(a.summary=r),{id:`${t.id}-${e.branch_node_id}`,name:e.highlighted_name||e.branch_node_name,type:e.snapshot_type,metadata:a,parent:t}},t_=(e,t)=>new tp({expanded:a=>tl.TreeStore.isNodeExpanded(a,t.expanded,e.treeStore.defaultExpandedDepth),filter:t=>!e.nodeTypeFilter||!!(0,tl.isParentNode)(t)||"project"===t.type||(e.nodeTypeFilter===to.Z6.HttpService?t.type===to.Z6.HttpOperation||t.type===to.Z6.Model&&t.parent?.parent?.type===to.Z6.HttpService:t.type===e.nodeTypeFilter),order(e,t){let{parent:a}=e;return null===a?0:a.type===to.Z6.HttpOperation?tu(e,t):"dir"===a.type?tm(e,t):e.type===t.type?td(e,t):0}}),tx=({state:e},{data:t=[]})=>{let{treeStore:a,search:r,nodeStarredFilter:n,nodeTypeFilter:o}=e.explorer;a.tree.showEmpty=null===o||e.explorer.nodeTypeFilter===to.Z6.HttpService,a.tree.setRoot(tg(t)),(r.value.length>0||n||o)&&a.toggleExpandFragment(a.tree.root,!0)},tI=({state:e},t)=>{e.explorer.nodeTypeFilter=e.explorer.nodeTypeFilter===t?null:t;let a=e.explorer.treeStore.tree;a.showEmpty=null===e.explorer.nodeTypeFilter||e.explorer.nodeTypeFilter===to.Z6.HttpService,a.invalidate()},tS=({state:e})=>{e.explorer.nodeStarredFilter=!e.explorer.nodeStarredFilter,e.explorer.treeStore.tree.invalidate()},tj=({state:e})=>{e.explorer.touchQueriesCounter++},tC=({state:e},t)=>{e.explorer.isLoading=t},tP=(0,eq.Fs)((0,eq.Tk)(({state:e},t)=>{e.explorer.search.value=t}),(0,eq.pb)(({state:e})=>e.explorer.search.value.length>2||e.explorer.search.value.length<e.explorer.search.query.length),(0,eq.sg)(250),(0,eq.Tk)(({state:e})=>{e.explorer.search.query=e.explorer.search.value}));class tA extends tl.TreeStore{uiState={scrollOffset:0};dispose(){super.dispose(),this.uiState.scrollOffset=0}isFragmentCollapsed(e){for(let t of this.tree.getIteratorForNode(e))if(null!==t.parent&&(0,tl.isParentNode)(t)&&this.isNodeExpanded(t))return!1;return!0}toggleExpandFragment(e,t){for(let a of this.tree.getIteratorForNode(e))(0,tl.isParentNode)(a)&&super.toggleExpand(a,t)}}let tB=({state:e})=>{let t=new tl.TreeState,a=new tA(t_(e.explorer,t),t,{defaultExpandedDepth:0});e.explorer.treeStore=Object.preventExtensions(a),e.explorer.treeStore.events.on(tl.TreeListEvents.NodeClick,(t,a)=>{(0,tl.isParentNode)(a)&&tl.Tree.getLevel(a)>0&&e.explorer.treeStore.toggleExpand(a)})},tD={treeStore:{},nodeTypeFilter:null,nodeStarredFilter:!1,isLoading:!1,search:{value:"",query:""},touchQueriesCounter:0};var tT=a(77898),tF=a(97357);let t$=({state:e,actions:t},a)=>{e.externalDrilldown.localProject=null,e.externalDrilldown.integrationId!==a&&(e.externalDrilldown.integrationId=a,t.externalDrilldown.setOwner({owner:null}))},tN=({state:e},t)=>{e.externalDrilldown.gitSelected=t},tU=({state:e,actions:t},a)=>{e.externalDrilldown.integrationId=null,e.externalDrilldown.localProject=a,t.externalDrilldown.setGitSelected(!1)},tM=({state:e},{owner:t})=>{e.externalDrilldown.owner=t,e.externalDrilldown.selectedProjects=[]},tR=({state:e,effects:t},a)=>{e.externalDrilldown.flavor!==a&&(e.externalDrilldown.flavor=a,t.reporter.log({event:"workspace_project_create_tab_selected",payload:{flavor:e.externalDrilldown.flavor}}))},tW=({state:e},t)=>{let a=e.externalDrilldown.selectedProjects.findIndex(e=>e.project.id===t.project.id&&e.owner===t.owner);-1===a?e.externalDrilldown.selectedProjects.push(t):e.externalDrilldown.selectedProjects.splice(a,1)},tL=({state:e},t)=>{e.externalDrilldown.selectedProjects=[t]},tG=({state:e})=>{e.externalDrilldown.installWebhooks=!e.externalDrilldown.installWebhooks},tO=({state:e})=>{e.externalDrilldown.selectedProjects=[]},tz=async({state:e,effects:t,actions:a},{workspaceIntegrationId:r,projects:n,repoUrls:o,installWebhooks:l,autoInviteCommitters:i,destination:s="docs",queryClient:c,groupId:u,visibility:d,skipRefresh:m=!1,flavor:p,navigate:g})=>{let h=!1;if(e.externalDrilldown.isAddingProjects=!0,o?.length)for(let a of(await Promise.all(o.map(e=>t.api.getExternalProject(r,e))))){if(a.error){t.notifications.danger({message:`Failed to add project by repository URL: ${a.error?.message}`}),e.externalDrilldown.isAddingProjects=!1;return}a.data&&(h=!0,n.push({owner:a.data.getExternalRepo.orgSlug,project:a.data.getExternalRepo}))}try{let o=n.map(e=>(function(e,t,a,r,n,o){let{project:l,owner:i}=e;return{externalId:String(l.id),name:l.name,description:l.description,slug:l.slug,visibility:n||eE.Tgv.Internal,iconColor:(0,tT.m0)(),iconName:(0,tT.cF)(),workspaceIntegrationId:t,remoteUrlHttp:l.remoteUrlHttp,remoteUrlSsh:l.remoteUrlSsh,externalSlug:l.slug,externalOrgSlug:i,externalStarCount:l.starCount,type:eE.HWy.Vcs,groupId:r,flavor:a,autoInviteCommitters:o}})(e,r,p,u,d,i)),f=n.map(e=>e.project.slug),{data:b}=await t.api.createProjects(o);b?.createProjects?.returning.length===f.length&&await t.api.addUserToExternalProjects(f,e.auth.currentUser?.id,e.workspaces.currentWorkspaceId);let{data:y}=await t.api.projectsByExternalIds(r,(0,el.compact)(n.map(e=>String(e.project.id)))),w=y?.projects||[],E=[];for(let e of w){let r=e.branches.find(e=>e.isDefault)?.slug,o=n.find(t=>t.project.id===e.externalId)?.project.defaultBranch,i=r||o;if(i){let a=`refs/heads/${i}`;await t.api.queueAnalyzeProject(e.id,a)}if(l)try{let a=await t.api.createExternalWebhook({projectId:e.id}),r=a.data?.createExternalWebhook;r&&E.push(r)}catch(e){a.reporter.error({error:e,payload:{cause:"Install webhooks."}})}}if(m||a.projects.refreshSidebarAndProjectsList({queryClient:c}),a.projects.touchQueries(),1===w.length)switch(s){case"docs":t.notifications.success({message:`Project successfully added  Taking you to the documentation.`}),t.router.navigate(g,`/docs/${w[0].slug}`);break;case"studio":t.notifications.success({message:`${(0,tF.v)(p)}`}),t.router.navigate(g,`/studio/${w[0].slug}`)}else t.router.navigate(g,"/admin/automation"),t.notifications.success({message:`${w.length} projects successfully added  Find the new projects in the sidebar.`});t.reporter.log({event:"workspace_project_added",payload:{project_type:eE.HWy.Vcs,location:"workspace_add_projects",project_count:w.length,install_webhooks:l,integration_kind:e.workspaces.integrations?.find(e=>e.id===r).kind,destination:s,groupId:u,visibility:d,added_project_by_repo_url:h,flavor:p}})}catch(e){t.notifications.danger({message:e?.message}),a.reporter.error({error:e,event:"workspace_project_added"})}finally{e.externalDrilldown.isAddingProjects=!1,e.externalDrilldown.selectedProjects=[]}},tq=({state:e,actions:t})=>{let a=e.workspaces.enabledIntegrations?.filter(({kind:e})=>eH.hJ(ei.xF[e]))||[];a.length>0&&t.externalDrilldown.setIntegrationId(a.find(t=>e.auth.currentUser?.externalUsers.some(e=>e.workspaceIntegrationId===t.id)||"GitHub"===t.name)?.id||a[0].id),e.workspaces?.currentWorkspace?.allowWebProjects?t.externalDrilldown.setLocalProject("blank"):t.externalDrilldown.setLocalProject("blank-git")},tV={integrationId:null,localProject:null,owner:null,selectedProjects:[],isAddingProjects:!1,installWebhooks:!0,gitSelected:!1,flavor:eE.$GR.Design},tH={features:(0,eq.un)((e,t)=>t.workspaces.currentWorkspace?.features||[]),usage:(0,eq.un)((e,t)=>t.workspaces.myWorkspace?.billing_account?{projectCount:t.workspaces.myWorkspace?.project_count,memberCount:t.workspaces.myWorkspace?.member_count,guestCount:t.workspaces.myWorkspace?.all_guest_count,teamCount:t.workspaces.myWorkspace?.team_count,editorCount:t.workspaces.myWorkspace?.all_owner_count+t.workspaces.myWorkspace?.all_admin_count+t.workspaces.myWorkspace?.all_billing_admin_count+t.workspaces.myWorkspace?.all_maker_count,viewerCount:t.workspaces.myWorkspace?.all_viewer_count}:null),featureRequiresUpgrade:(0,eq.un)((e,t)=>(a,r)=>{let n=e.getFeature(a);switch(n?.type){case eE.mat.Toggle:return!1;case eE.mat.Limit:let o=e.getFeatureUsage(n.name);return!tQ(n,o,r);default:return t.metadata.isMultiTenant}}),hasFeature:(0,eq.un)(e=>t=>{let a=e.features.find(e=>e.feature.name===t);return!!a?.feature}),getFeature:(0,eq.un)(e=>t=>{let a=e.features.find(e=>e.feature.name===t),r=a?.feature;return r?{...r,maxQuantity:0===a.maxQuantity?0:a.maxQuantity||1/0}:null}),getFeatureUsage:(0,eq.un)(e=>t=>{let a={[eE.BAf.Projects]:"projectCount",[eE.BAf.Teams]:"teamCount",[eE.BAf.Members]:"memberCount",[eE.BAf.Guests]:"guestCount",[eE.BAf.Editors]:"editorCount",[eE.BAf.Viewers]:"viewerCount"};return e.usage?.[a[t]]||null}),getFeatureMaxUsage:(0,eq.un)(e=>t=>{let a=e.getFeature(t);return a?0===a.maxQuantity?0:a.maxQuantity||1/0:0}),getProductFeature:(0,eq.un)(e=>(t,a)=>e.getProductFeatures(t).find(e=>e.name===a)||null),getProductFeatures:(0,eq.un)((e,t)=>e=>{let a=t.billing.getProduct(e);return(a?.features||[]).map(e=>({...e.feature,maxQuantity:e?.maxQuantity||1/0}))})},tQ=(e,t,a)=>(e.maxQuantity||1/0)>(t||0)+(a?a-1:0);var tK=a(62492),tJ=a(83284);let tY=({state:e},{flags:t})=>{let a=t.reduce((e,t)=>(e[t]=!0,e),{});return e.flags.enabledFlags=a,a},tX=({state:e,actions:t},{anonId:a})=>{let r=l;if(!r)return{};let n={},o=a||function(){let e="undefined"!=typeof document&&tJ.q(document.cookie)._optimizely_user;return e&&""!==e?e:"anon"}();if(e.auth.currentUser){o=String(e.auth.currentUser.id);let t=e.auth.currentUser.emails.find(e=>e.primary);Object.assign(n,{email:t?.email,username:e.auth.currentUser.username,createdAt:e.auth.currentUser.createdAt})}if(e.workspaces.currentWorkspace){let t=new Date(e.workspaces.currentWorkspace.createdAt).getTime()/1e3;Object.assign(n,{currentWorkspaceSlug:e.workspaces.currentWorkspace.slug,currentWorkspaceId:e.workspaces.currentWorkspace.id,currentWorkspaceCreatedAt:t})}let i=r.getEnabledFeatures(o,n);return t.flags.updateEnabledFlags({flags:i||[]})},tZ=({actions:e})=>{let t=window.__OPTIMIZELY_DATAFILE__;if(t){let a=l=tK.Q_({datafile:t,datafileOptions:{autoUpdate:!1},logLevel:tK.vP.LOG_LEVEL.ERROR});a?.onReady().then(()=>{e.flags.calculateAndUpdateEnabledFlags({})})}},t0={enabledFlags:{},isFlagEnabled:(0,eq.un)(e=>t=>e.enabledFlags&&!!e.enabledFlags[t])},t1=({state:e})=>{e.groups.touchQueriesCounter++},t2=({state:e})=>{e.groups.touchMembersQueriesCounter++},t4={touchQueriesCounter:0,touchMembersQueriesCounter:0},t3=(0,eq.Fs)((0,eq.Tk)(({state:e},t)=>{e.members.search.value=t}),(0,eq.pb)(({state:e})=>e.members.search.value.length>2||e.members.search.value.length<e.members.search.query.length),(0,eq.sg)(250),(0,eq.Tk)(({state:e})=>{e.members.search.query=e.members.search.value})),t5=async({effects:e},{workspaceId:t})=>{let a=e.api.getWorkspaceMembers(t),r=e.api.getWorkspaceInvitations(t),n=e.api.getWorkspaceJoinRequests(t);return await Promise.all([a,r,n]).then(e=>e.reduce((e,t)=>{if(t.error)return e;let a=Object.keys(t.data)[0];return{...e,[a]:t.data[a]}},{}))},t8=({state:e})=>{e.members.touchQueriesCounter++},t6={search:{value:"",query:""},touchQueriesCounter:0},t7=({state:e})=>{e.metadata.dataBootstrapComplete=!0},t9=({state:e})=>{let t=setInterval(a,6e5);async function a(){let a=await fetch(`${e.router.appUrl}/health`);if(a.ok)try{let{version:r}=await a.json();if("string"!=typeof r||e.metadata.release===r)return;e.metadata.latestAvailableRelease=r,clearInterval(t)}catch(e){console.error(e)}}},ae=async({actions:e})=>{ei.KJ&&e.metadata.subscribeAppVersion()},at={dataBootstrapComplete:!1,sessionId:(0,a(590).A)(),isMultiTenant:!1,designLibraries:!1,release:"x.x.x-beta.xxxx",latestAvailableRelease:"x.x.x-beta.xxxx",amplitudeApiKey:null,optimizelyDatafile:void 0,supportPortalUserProvisioningEndpoint:"",hubSpotHubID:"",googleAnalyticUAAppID:"",stoplightUserIDAndGAUserIDCaptureEndpoint:"",googleAnalyticGA4EventEndpoint:"",roles:[],permissions:[],nodeTypes:[],billingProducts:[],isSaaS:(0,eq.un)((e,t)=>t.router.appUrl.startsWith("https://stoplight.io")||/^https?:\/\/stoplight-(local|dev)\.com/.test(t.router.appUrl)),otelSampleRate:1,otelResourceAttrs:""},aa=({state:e},t)=>{e.notifications.banner=t},ar=({state:e},t)=>{e.notifications.responsiveBannerDismissed=t},an={banner:void 0,responsiveBannerDismissed:!1},ao=(0,eq.Fs)((0,eq.Tk)(({state:e},t)=>{e.projectMembers.search.value=t}),(0,eq.pb)(({state:e})=>e.projectMembers.search.value.length>2||e.projectMembers.search.value.length<e.projectMembers.search.query.length),(0,eq.sg)(250),(0,eq.Tk)(({state:e})=>{e.projectMembers.search.query=e.projectMembers.search.value})),al=({actions:e})=>{e.projectMembers.search("")},ai=({state:e})=>{e.projectMembers.touchQueriesCounter++},as={search:{value:"",query:""},touchQueriesCounter:0};var ac=a(61164);let au=(0,eq.Fs)((0,eq.Tk)(({state:e},t)=>{e.projects.search.value=t}),(0,eq.pb)(({state:e})=>e.projects.search.value.length>2||e.projects.search.value.length<e.projects.search.query.length),(0,eq.sg)(250),(0,eq.Tk)(({state:e})=>{e.projects.search.query=e.projects.search.value})),ad=({state:e})=>{e.projects.touchQueriesCounter++},am=(e,{queryClient:t})=>{t.invalidateQueries(ac.projectsKeys.lists()),t.invalidateQueries(ac.workspaceKeys.items()),t.invalidateQueries(ac.projectsKeys.listsWithFilters({pinned:!0}))},ap=({state:e},{initialFileUpload:t})=>{e.projects.initialFileUpload=t},ag=({state:e})=>{e.projects.initialFileUpload=void 0},ah={search:{value:"",query:""},touchQueriesCounter:0};var af=a(21756);let ab=`
<hr class="footer-border" />
<span class="appcues-footer">
  <a class="first" href="https://docs.stoplight.io/docs/whats-new/" target="_blank">
    <span>Release Notes</span>
  </a>
  <a href="https://meta.stoplight.io/docs/platform?utm_source=stoplight&utm_medium=workspace&utm_campaign=appcues_launchpad" target="_blank"
  >
    <span>Product Documentation</span>
  </a>
  <a href="https://roadmap.stoplight.io" target="_blank">
    <span>Stoplight Roadmap</span>
  </a>
</span>`,ay=`
<div class="appcues-menu-header">
  <div class="appcues-menu-header-text">
    <span class="appcues-menu-header-text">Guided Tours</span>
  </div>
</div>`,aw=e=>{let{state:t,effects:a}=e;if(function({state:e}){let t=e.auth?.currentUser;if(t&&void 0!==window.Appcues){let a=t?.emails[0]?.email,r=e.workspaces.myRoles.length>0?e.workspaces.myRoles[0]:void 0,n=new Date(t.createdAt);window.Appcues.identify(t.id,{email:a,survey_persona:t.surveyPersona,num_company_apis:t.surveyNumApis,prior_openapi_usage:t.surveyOpenapiUsage,external_docs_use_case:t.surveyExternalDocs,internal_docs_use_case:t.surveyInternalDocs,design_use_case:t.surveyDesign,mocking_use_case:t.surveyMocking,collaboration_use_case:t.surveyCollaboration,governance_use_case:t.surveyGovernance,survey_company_name:t.surveyCompanyName,survey_uc:t.surveyUC,role:r,createDate:n}),e.flags.isFlagEnabled("appcues_launchpad")&&window.Appcues.loadLaunchpad("#appcues-launchpad",{position:"bottom-left",header:ay,footer:ab,icon:"/static/images/question-mark.svg"});let o=e.workspaces?.myWorkspace,l=e.workspaces?.currentWorkspace;l&&window.Appcues.group(l.id,{workspace_id:l.slug,workspace_member_count:o?.member_count||0,workspace_guest_count:o?.all_guest_count||0,workspace_project_count:o?.project_count||0,plan:o?.billing_product?.name,hide_powered_by:l?.hidePoweredBy,hide_sign_in:l?.hideSignIn,has_google_tag_manager:!!l?.googleTagManager,has_custom_logo:!!l?.logoUrl,has_custom_theme:!!l?.theme,has_custom_home_content:!!l?.homeContent,has_custom_domain:!!l?.domain})}}(e),t.flags.isFlagEnabled("profitwell_cancellation_flow")&&function({state:e}){let t=e.auth.currentUser,a=e.billing.currentBillingAccount;t&&void 0!==window.profitwell&&a?.stripe_customer_id&&window.profitwell("start",{user_id:a.stripe_customer_id})}(e),t.auth.currentUser){!function({userID:e,captureEndpoint:t}){if(""===t)return;let a=tJ.q(document.cookie)._ga;a&&(4==a.split(".").length?(0,af.A)({url:t,method:"post",data:{stoplight_user_id:e,ga:a}}).catch(e=>{console.error(e)}):console.error("invalid gaid format"))}({captureEndpoint:t.metadata.stoplightUserIDAndGAUserIDCaptureEndpoint,userID:String(t.auth.currentUser.id)});let e=new Date(t.auth.currentUser.createdAt),r=Math.ceil(Math.abs(Date.now()-e.getTime())/864e5),n=t.workspaces.myRoles.length>0?t.workspaces.myRoles[0]:void 0;a.reporter.setUserProperties({user_created_at:e.toISOString().slice(0,10),user_created_at_year_month:e.toISOString().slice(0,7),days_from_user_created_at:r,user_roles:t.workspaces.myRoles,months_from_user_created_at:Number((r/30).toFixed(0)),logged_in:!0,role:n});let o=t.auth.currentUser.workspaceMemberships.map(e=>e.workspace.slug);if(a.reporter.setUserWorkspaces(o),t.workspaces.currentWorkspace){let e=new Date(t.workspaces.currentWorkspace.createdAt),r=Math.ceil(Math.abs(Date.now()-e.getTime())/864e5);a.reporter.setUserProperties({workspace_created_at:e.toISOString().slice(0,10),workspace_created_at_year_month:e.toISOString().slice(0,7),days_from_workspace_created_at:r,months_from_workspace_created_at:Number((r/30).toFixed(0)),workspace_slug:t.workspaces.currentWorkspace.slug,workspace_plan:t.billing?.currentProduct?.description||void 0}),a.reporter.setActiveWorkspace(t.workspaces.currentWorkspace.slug||null)}}else a.reporter.setUserProperties({logged_in:!1})},aE=({effects:e},{error:t,event:a,payload:r})=>{e.reporter.error(t,{...r,event:a})},av=({effects:e},t)=>{e.reporter.setUserProperties(t)};({BrowserReporter:n}=a(27636));let ak=class extends n{user=null;constructor(e){super(e),super.setOnLog((t,a)=>{(function(e,t,a,r){let n=["user_clicked_create_another_workspace","workspace_slug_submitted","email_verification_code_submitted","persona_survey_submitted","use_case_submitted","workspace_created","workspace_project_added","workspace_invite_sent","upsell_modal_opened","downgrade_request_submitted"];if(n.includes(t)&&r?.googleAnalyticGA4EventEndpoint&&function(e,t,a){let r=tJ.q(document.cookie)._ga;if(!a||!r)return;let n={};Object.keys(t).forEach(e=>{n[e]=`${t[e]}`});let o=r.split(".");if(4==o.length){let r=o[2]+"."+o[3];(0,af.A)({url:a,method:"post",data:{client_id:r,events:[{name:e,params:t}]}}).catch(e=>{console.error(e)})}}(t,a||{},r.googleAnalyticGA4EventEndpoint),e&&n.includes(t)){let r,n="stoplight_platform",o=t;"workspace_slug_submitted"===t?(n="Workspace",o="Setup",r="Name Workspace"):"email_verification_code_submitted"===t&&a?(n="Workspace",o="Setup",r="Confirmation Code"):"persona_survey_submitted"===t&&a?(aD(e,"Workspace","Setup","Registration"),n="Workspace",o="Topic",r=a.role):a&&"use_case_submitted"===t?(n="Workspace",o="Topic",r=a.survey_uc):"user_clicked_create_another_workspace"===t?(n="Workspace",o="Login",r="Create Another Workspace"):"upsell_modal_opened"===t&&a?(n="Upgrade Trigger Feature",o="Starter"===a.plan?"starter required":"Professional"===a.plan?"pro required":"Enterprise"===a.plan?"enterprise required":"Unknown Plan",r=a.feature):a&&"downgrade_request_submitted"===t?(n="Downgrade Trigger",o="Click",r="Downgrade"):a&&"workspace_project_added"===t&&(o=a.project_type+"_project_added"),aD(e,n,o,r)}})(e.googleAnalyticUAAppID||"",t,a,{googleAnalyticGA4EventEndpoint:e.googleAnalyticGA4EventEndpoint}),void 0!==window.Appcues&&window.Appcues.track(t,a),this.user?.email&&e.hubSpotHubID&&function(e,t,a,r){let n=a=>{if(""!==a&&""!==e&&""!==t)try{(0,af.A)({url:"https://us-central1-stoplight-dojo-production.cloudfunctions.net/forwardHubSpotEvent",method:"get",params:{_a:e,_n:a,email:t}})}catch(e){console.error(e)}};"use_case_submitted"===a&&r?n("apiProgram"===r.survey_uc?"000013544800":"apiDesign"===r.survey_uc?"000013544205":"apiDocumentation"===r.survey_uc?"000013544801":""):"persona_survey_submitted"===a&&r&&n("not_using"===r.prior_oas_usage?"000013550459":"without_git"===r.prior_oas_usage?"000013550377":"with_git"===r.prior_oas_usage?"000013550460":"")}(e.hubSpotHubID,this.user.email,t,a)})}setUser(e){this.user=e,(0,el.isObject)(e)?super.setUser({id:String(e.id),username:e.username,storage:e.storage,is_github_connected:e.is_github_connected,is_gitlab_connected:e.is_gitlab_connected,is_bitbucket_cloud_connected:e.is_bitbucket_cloud_connected,is_bitbucket_data_center_connected:e.is_bitbucket_data_center_connected,is_azure_server_connected:e.is_azure_server_connected,is_azure_services_connected:e.is_azure_services_connected,is_saml_connected:e.is_saml_connected,is_ldap_connected:e.is_ldap_connected,survey_persona:e.survey_persona,num_company_apis:e.survey_num_apis,prior_openapi_usage:e.survey_openapi_usage,external_docs_use_case:e.survey_uc_external_docs,internal_docs_use_case:e.survey_uc_internal_docs,design_use_case:e.survey_uc_design,mocking_use_case:e.survey_uc_mocking,collaboration_use_case:e.survey_uc_collaboration,governance_use_case:e.survey_uc_governance,survey_company_name:e.survey_company_name,survey_speak_to_product_expert:e.survey_speak_to_product_expert,survey_uc:e.survey_uc,beta_web_projects:e.beta_web_projects}):super.setUser(null)}log(e,t){super.log(e,t)}error(e,t){if(t instanceof Error&&Array.isArray(t.errors)){let e=t;Object.assign(t={},e)}super.error(e,t)}setUserProperties(e){super.setUserProperties(e)}},a_=new ak({}),ax=e=>(a_=new ak(e),(0,ek.setReporter)(a_),a_),aI=e=>{a_.log(e.event,"payload"in e?e.payload:void 0)},aS=(e,t)=>{a_.error(e,t)},aj=e=>{a_.setUserProperties(e)},aC=async e=>{a_.setUser(e)},aP=(e,t)=>{a_.amplitudeClient&&a_.amplitudeClient.setGroupProperties("workspace",e,t)},aA=e=>{a_.setActiveWorkspace(e)},aB=e=>{a_.setUserWorkspaces(e)};function aD(e,t,a,r){let n=tJ.q(document.cookie)._ga;if(n&&""!==n){let o=n.split(".");if(4==o.length){let n=o[2]+"."+o[3];(0,af.A)({baseURL:"https://www.google-analytics.com",url:"/collect",method:"post",params:{v:"1",tid:e,cid:n,t:"event",ec:t,ea:a,el:r}}).catch(e=>{console.error(e)})}}}let aT=({state:e})=>{let t=e.metadata.amplitudeApiKey,a=e.metadata.release;if(e.router.isCustomDomain&&e.workspaces.currentWorkspace?.disableCookieTracking)return;let r={version:a};t&&(r.amplitudeOptions={apiKey:t,config:{apiEndpoint:"js.stoplight.io/events",batchEvents:!1,saveEvents:!0,includeUtm:!0,includeReferrer:!0},onClientInitialized:e=>{ei.KJ&&(window.amplitude=e)}}),r.hubSpotHubID=e.metadata.hubSpotHubID,r.googleAnalyticUAAppID=e.metadata.googleAnalyticUAAppID,r.googleAnalyticGA4EventEndpoint=e.metadata.googleAnalyticGA4EventEndpoint;let n=ax(r),o=e.router.appUrl+e.router.pathname;n.setUserInitialPageViewed(o)},aF=({state:e},{action:t,...a})=>{(0,el.merge)(e.router,a)},a$=({state:e},t)=>{e.router.forcedStatusCode=t};var aN=a(83018);let aU=()=>(o||(o=(0,aN.zR)()),o),aM=(e,t,a)=>{e(t,a?.replace?{replace:!0,state:a.state}:{state:a?.state})},aR=(e,t)=>{/^http(s?):\/\//.test(t)&&ei.KJ?window.location.href=t:aM(e,t,{replace:!0})},aW=({actions:e,effects:t})=>{ei.KJ&&t.router.initHistory().listen(t=>{let{action:a,location:r}=t;e.router.internal.updateLocation({action:a,pathname:r.pathname,search:r.search,hash:r.hash})})},aL={appUrl:"",serverHost:"",assetHost:"",hostname:"",pathname:"",search:"",hash:"",workspaceSlug:"",isCustomDomain:!1,isWorkspaceDomain:!1,get searchParams(){return new URLSearchParams(this.search)}},aG=async({state:e,effects:t})=>{e.ssr.error&&(t.notifications.danger({message:e.ssr.error}),t.reporter.error(e.ssr.error))},aO={error:null};var az=a(89987);let aq=e=>{let t=az.sJ[e];if(!t)throw`Table name '${e}'' not defined`;return t},aV=({state:e},{name:t,filter:a})=>{let r=aq(t),n=e.table.getFilters(r)||[],o=n?.findIndex(e=>e.id===a.id);-1!==o?(n[o]=a,e.table.tableInstances[r].filters=[...n]):e.table.tableInstances[r].filters=[...n,a]},aH=({state:e},{name:t,filters:a})=>{let r=aq(t);e.table.tableInstances[r].filters=[...a]},aQ=({state:e},{name:t})=>{let a=aq(t);e.table.tableInstances[a].filters=[]},aK=({state:e},{name:t,sortBy:a})=>{let r=aq(t);e.table.tableInstances[r].sortBy=a},aJ=({state:e},{name:t})=>{let a=aq(t);e.table.tableInstances[a].sortBy=[]},aY=({state:e},{name:t,rowId:a})=>{let r=aq(t);e.table.tableInstances[r].scrollToRowId=a},aX=({state:e},{name:t})=>{let a=aq(t);e.table.tableInstances[a].scrollToRowId=null},aZ=({state:e},{name:t,instance:a})=>{let r=aq(t);e.table.tableInstances[r].instance=a},a0=({state:e},t)=>{t||(e.teamDetails.id=void 0),e.teamDetails.isOpen=t},a1=({state:e},t)=>{t.id&&(e.teamDetails.id=t.id)},a2={isOpen:!1},a4=({state:e},t)=>{e.themeEditor.properties[t.key]=t.value},a3=({state:e})=>{e.themeEditor.showPreview=!0},a5=({state:e})=>{e.themeEditor.showPreview=!1},a8=({state:e},t)=>{e.themeEditor.properties={...t}};var a6=a(49342);let a7=({state:e},t)=>{e.ui.sidebarFocused=t},a9=({state:e},t)=>{e.ui.featureDialogOpen=t},re=({state:e},t)=>{e.ui.infoDialogOpen=t},rt=({state:e},t)=>{e.ui.infoDialogDetails=t},ra=({state:e,effects:t},a)=>{e.ui.selectedFeature=a,t.reporter.log({event:"button_clicked",payload:{name:`feature_${a}`,location:e.ui.featureDialogOpen?"billing_dialog":"billing_embed"}})},rr=({state:e},t)=>{e.ui.selectedProduct=t},rn=({state:e,actions:t,effects:a},r)=>{!1===e.ui.featureDialogOpen&&a.reporter.log({event:"upsell_modal_opened",payload:{feature:r,plan:e.billing.getLowestPaidProductForFeature(r)?.description||e.billing.currentProduct?.name||""}}),e.ui.selectedFeature=r,t.ui.setFeatureDialogOpen(!0)},ro=({state:e,effects:t},{userIdleState:a,isLeader:r})=>{e.ui.userIdleState!==a&&(t.reporter.log({event:"user_idle_state_changed",payload:{is_leader:r,state:a}}),e.ui.userIdleState=a)},rl=({state:e},t)=>{e.ui.responsiveSidebarOpen=t},ri=({state:e},t)=>{e.ui.inviteMembersDialogOpen=t},rs={sidebarFocused:!1,featureDialogOpen:!1,infoDialogOpen:!1,infoDialogDetails:void 0,selectedFeature:eE.BAf.CustomDomain,selectedProduct:void 0,userIdleState:"disabled",nonResponsivePaths:["/explore","/proposals","/add/projects","/settings","/account","/admin","/roadmap"],isNonResponsivePath:(0,eq.un)(e=>t=>!!e.nonResponsivePaths.find(e=>t.startsWith(e))),responsiveSidebarOpen:!1,inviteMembersDialogOpen:!1},rc=async()=>{throw Error("updateEmail not implemented")},ru=async({actions:e},{token:t})=>{e.auth.setJwtToken(t),setTimeout(()=>{window.location.reload()},100)},rd=({state:e},t)=>{t||(e.workspaceItemDetails.itemType=void 0,e.workspaceItemDetails.id=void 0),e.workspaceItemDetails.isOpen=t},rm=({state:e},t)=>{t&&(e.workspaceItemDetails.itemType=t.itemType,e.workspaceItemDetails.id=t.id)},rp={isOpen:!1},rg=({actions:e},t)=>{e.workspaces.setCurrentWorkspaceId(t?.id||null),e.workspaces.setCurrentWorkspace(t||null)},rh=({state:e},t)=>{e.workspaces.currentWorkspaceId=t||null},rf=({state:e,effects:t},a)=>{e.workspaces.currentWorkspace=a||null,a&&(t.reporter.setActiveWorkspace(a.slug),t.reporter.setWorkspaceProperties(a.slug,{hide_powered_by:a.hidePoweredBy,hide_sign_in:a.hideSignIn,has_google_tag_manager:!!a?.googleTagManager,has_custom_logo:!!a.logoUrl,has_custom_theme:!!a.theme,has_custom_home_content:!!a.homeContent,has_custom_domain:!!a.domain}))},rb=({state:e,effects:t},a)=>{e.workspaces.myWorkspace=a||null;let r=a?.member_count||0,n=a?.all_guest_count||0;a&&t.reporter.setWorkspaceProperties(a.slug,{project_count:a.project_count,guest_count:n,member_count:a.member_count,user_count:r+n,team_count:a.team_count,plan:a.billing_product?.name})},ry=({state:e},t)=>{e.workspaces.subscribedToMyWorkspace=t},rw=async({effects:e,state:t,actions:a},r)=>{let{data:n}=await e.api.executeQuery(eE.V8R,{id:r},{requestPolicy:"network-only"}),o=n?.workspace,l=t.workspaces.currentWorkspace;o&&!(0,el.isEqual)(o,l)&&a.workspaces.setCurrentWorkspace(o)},rE=!1,rv=[],rk=async({state:e,actions:t},a)=>{a.reaction(e=>e.workspaces.myPermissions,a=>{rE&&!(0,el.isEqual)(rv,a)?(console.info("Permissions changed.. refreshing user token"),t.api.refreshToken({workspaceId:e.workspaces.currentWorkspaceId||void 0})):rE=!!(a.length&&e.workspaces.currentWorkspaceId),rv=a},{nested:!1})},r_=e=>"member"===e.type,rx={currentWorkspaceId:null,currentWorkspace:null,myWorkspace:null,subscribedToMyWorkspace:!1,integrations:(0,eq.un)(e=>e.currentWorkspace?(0,el.compact)((0,el.uniq)(e.currentWorkspace.integrations.map(e=>({id:e.id,name:e.name||e.integration.name,shortcode:e.integration.shortcode,kind:e.integration.kind,enabled:e.enabled,allowUserLogin:e.allowUserLogin,allowUserRegister:e.allowUserRegister,config:Object.keys(e.config).length?e.config:e.integration.config,globalId:e.integration.id})))):null),enabledIntegrations:(0,eq.un)(e=>e.integrations?e.integrations.filter(e=>e.enabled):null),myRoles:(0,eq.un)(e=>(0,el.compact)((0,el.uniq)(e.myWorkspace?.my_permissions.map(e=>e.role)))),myHighestRole:(0,eq.un)((e,t)=>t.metadata.roles.find(t=>t.priority===e.myPriority)?.name),iHaveRole:(0,eq.un)(e=>t=>e.myRoles.includes(t)),myProjectRole:(0,eq.un)(e=>(t,a)=>{let r=t.filter(r_).find(e=>(0,eh.safelyDecodeID)(e.data?.user_id||"")===a?.id);return(e.canI(eE.E4M.WorkspaceGlobalAdmin)?eE.M2u.WorkspaceGlobalAdmin:void 0)??r?.data?.role??null}),myPriority:(0,eq.un)((e,t)=>Math.max(...(0,el.compact)(e.myRoles.map(e=>t.metadata.roles.find(t=>t.name===e)?.priority)))),myPermissions:(0,eq.un)(e=>(0,el.compact)((0,el.uniq)(e.myWorkspace?.my_permissions.map(e=>e.permission)))),iAmMember:(0,eq.un)((e,t)=>!!(t.auth.isLoggedIn&&e.myRoles.length&&!e.iHaveRole(eE.l2p.Guest))),iAmProjectMember:(0,eq.un)(()=>({projectMembers:e},t)=>!!e.find(e=>e.userId===t?.id)),canI:(0,eq.un)(e=>t=>e.myPermissions.includes(t)),canIOnProject:(0,eq.un)(()=>(e,t)=>Array.isArray(e)?e.includes(t):e.userPermissions.some(e=>e.permission&&t===e.permission)),canIOnGroup:(0,eq.un)(()=>({userPermissions:e,my_permissions:t},a)=>e?-1!==e.findIndex(e=>e.permission&&a===e.permission):!!t&&t?.includes(a)),canIOnTeam:(0,eq.un)(()=>(e,t)=>!!e?.my_permissions&&e.my_permissions.includes(t)),resolvedTheme:(0,eq.un)((e,t)=>{let a=e.currentWorkspace?.theme||{};return(0,el.pick)((0,el.assignWith)({},a6.zQ,t.themeEditor.showPreview?t.themeEditor.properties:a,(e,t)=>(0,a6.xx)(t)?t:e),Object.keys(a6.zQ))}),getIntegration:(0,eq.un)(e=>t=>e.integrations?.find(e=>e.kind===t)||null)},rI=(0,en.h1)({state:{},effects:g,onInitialize:({state:e})=>{let t=window.__OVERMIND_MUTATIONS;t&&t.length&&(0,eq.pz)(e,t)}},(0,en.yQ)({api:c,auth:m,billing:p,workspaceItemDetails:et,explorer:f,externalDrilldown:y,flags:v,features:w,groups:_,members:I,projectMembers:B,metadata:j,notifications:P,projects:T,reporter:N,router:W,ssr:L,themeEditor:H,ui:K,users:Y,welcome:Z,workspaces:er,table:O,teamDetails:q})),rS=(0,eo.ab)(),rj=(0,eo.FI)(),rC=(0,eo.PS)(),rP=(0,eo.uR)();(0,eo.JM)()},89987:(e,t,a)=>{"use strict";a.d(t,{sJ:()=>r,wk:()=>l});var r,n=a(53960);!function(e){e.projectsTable="projectsTable",e.groupMembersTable="groupMembersTable",e.membersTable="membersTable",e.nextProjectsTable="nextProjectsTable",e.groupsTable="groupsTable",e.activityTable="activityTable",e.teamsTable="teamsTable",e.committersTable="committersTable",e.styleGuidesTable="styleGuidesTable"}(r||(r={}));let o={filters:[],sortBy:[],scrollToRowId:void 0},l={tableInstances:Object.values(r).reduce((e,t)=>Object.assign(e,{[t]:o}),{}),getTableState:(0,n.un)(e=>t=>e.tableInstances[t]||o),getFilterValue:(0,n.un)(e=>({name:t,id:a})=>{let r=e.getTableState(t)?.filters.find(e=>e.id===a);return r?.value}),getFilters:(0,n.un)(e=>t=>e.getTableState(t)?.filters),getSortBy:(0,n.un)(e=>t=>e.getTableState(t)?.sortBy),getScrollToRowId:(0,n.un)(e=>t=>e.getTableState(t)?.scrollToRowId)}},49342:(e,t,a)=>{"use strict";a.d(t,{AO:()=>s,wk:()=>n,xx:()=>i,zQ:()=>r});let r={"color-sidebar-bg":"#ffffff","color-on-sidebar":"#182026","color-sidebar-border":"#ced9e0","color-primary":"#0b6fcc","color-on-primary":"#ffffff","color-accent":"#805ad5","color-on-accent":"#ffffff","color-danger":"#f05151","color-on-danger":"#ffffff","color-editor-bg":"#ebf1f5","color-editor-fg":"#182026","color-editor-border":"#ced9e0"},n={properties:{},showPreview:!1},o=/#(?:[0-9a-fA-F]{2}){2,4}/,l=/#[0-9a-fA-F]{3}/,i=e=>o.test(e)||l.test(e),s=[{name:"dark",theme:{"color-sidebar-bg":"#060606","color-on-sidebar":"#edf7ff","color-sidebar-border":"#060606","color-primary":"#0aa8ff"}},{name:"deep",theme:{"color-sidebar-bg":"#232639","color-on-sidebar":"#f0f5f9","color-sidebar-border":"#232639","color-primary":"#50abff"}},{name:"swiss",theme:{"color-sidebar-bg":"#fafaf9","color-on-sidebar":"#3c2c29","color-sidebar-border":"#d6d6cb","color-primary":"#e53a19"}},{name:"rolex",theme:{"color-sidebar-bg":"#1a1d21","color-on-sidebar":"#c9c49c","color-sidebar-border":"#1a1d21","color-primary":"#948f68"}},{name:"polaris",theme:{"color-sidebar-bg":"#ffffff","color-on-sidebar":"#454f5b","color-sidebar-border":"#e6e6e6","color-primary":"#5c6bc4","color-accent":"#f49342"}},{name:"sky",theme:{"color-sidebar-bg":"#6473d6","color-on-sidebar":"#ffffff","color-sidebar-border":"#6473d6","color-primary":"#4fc4f1","color-accent":"#4fc4f1"}}]},37401:(e,t,a)=>{"use strict";a.d(t,{P:()=>s});var r=a(87204),n=a(11491),o=a(32353),l=a(14041),i=a(73657);let s=({isFetching:e,search:t,setSearch:a,data:s,toc:c,nodeSlug:u,projectSlug:d,branchSlug:m,isSearchShowing:p,onClose:g,onClick:h})=>{let f=`/docs/${encodeURIComponent(d)}`+(m?`/branches/${encodeURIComponent(m)}`:"");return l.createElement(o.Modal,{isOpen:p,onClose:g,zIndex:20},l.createElement(o.Box,{className:"sl-overlay",bg:"canvas",overflowY:"scroll","data-test":"search-overlay"},l.createElement(o.Flex,{alignItems:"center",h:"3xl",px:7,bg:"canvas",borderB:!0,pos:"sticky"},l.createElement(o.Flex,{w:"full"},l.createElement(o.Box,{pt:1,pr:2},l.createElement(o.Button,{appearance:"minimal",onClick:()=>{g()},"data-test":"search-overlay-back-button"},l.createElement(o.Icon,{icon:["fas","arrow-left"],color:"gray",size:"lg"}))),l.createElement(o.Input,{border:!0,"data-test":"docs-search-input",display:"inline-block",appearance:"minimal",icon:l.createElement(o.Box,{as:o.Icon,ml:1,icon:e?r.z1G:r.MjD,spin:e}),autoFocus:!0,placeholder:d?"Search within the project":"Search...",value:t,onChange:e=>{a(e.currentTarget.value)},type:"search",w:"full",size:"lg"}))),l.createElement(o.Box,{px:5,py:c&&!t?0:5,"data-test":"responsive-project-toc"},c&&!t&&d&&l.createElement(n.MB,{isInResponsiveMode:!0,tableOfContents:{...c,hide_powered_by:!0},activeId:u||"",onLinkClick:()=>h(),Link:({to:e,...t})=>l.createElement(i.Link,{to:`${f}/${e}`,...t})}),t&&l.createElement(n.LT,{searchResults:s,onClick:e=>h(e),isEmbedded:!0,showDivider:!1}))))}},79984:(e,t,a)=>{"use strict";a.d(t,{Kh:()=>s,eh:()=>u,pO:()=>l});var r=a(14041),n=a(1724),o=a(18735);let l=e=>{let{state:t}=(0,o.U8)(),[,a]=(0,n.A)(["recent_projects"]);r.useEffect(()=>{async function r(){let r,n;let o=t.router.workspaceSlug,l=new URL(t.router.serverHost).hostname.replace(o+".","").replace(/^https?:\/\//,"").replace(/:\d+$/,""),i=await s();i?(r=[...i]).unshift(e.id):r=[e.id];let u=[...new Set(r)];a("recent_projects",n=r.length>5?u.slice(0,u.length-1):u,{path:"/",domain:"."+l,maxAge:2147483647}),await c(n)}e?.id&&r()},[e,a,t.router.serverHost,t.router.workspaceSlug])},i="recent_projects",s=async()=>{let e=localStorage.getItem(i);return e?JSON.parse(e):[]},c=async e=>{localStorage.setItem(i,JSON.stringify(e))},u=async e=>{let t=await s();if(t){let a=[...t].filter(t=>t!==e);await c(a)}}},55428:(e,t,a)=>{"use strict";a.d(t,{T:()=>r});let r=e=>{switch(e){case"created":return{intent:"success",text:"The workspace administrators have received a notification of your request to join the workspace. You will receive an email once your request has been approved."};case"denied":return{intent:"danger",text:"Your request to join this workspace has been denied by the workspace administrators."};case"disabled":return{intent:"danger",text:"This workspace does not allow join requests. Contact a workspace member for an invitation."};default:return}}},97357:(e,t,a)=>{"use strict";a.d(t,{v:()=>o});var r=a(799);let n=e=>{switch(e){case r.$GR.StyleGuide:return"Style Guide";case r.$GR.DesignLibrary:return"Component Library";default:return"API"}},o=e=>`${n(e)} Project successfully created `},21634:()=>{},8379:()=>{},93553:()=>{},14432:()=>{},47331:()=>{},86973:()=>{},63011:()=>{},43951:()=>{},92612:e=>{"use strict";e.exports=JSON.parse('{"release":"2023.08.0-stable.11450.git-54d3105","pkg":{"name":"root","version":"2023.08.0","majorMinor":"2023.08"},"git":{"msg":"fix: change repository visibility when creating a new git project (#20639)\\n\\nCo-authored-by: Neelam <neelam.chavan@smartbear.com>","sha":"54d3105","fullSha":"54d3105b88fcb0e5d37e73198bf0109b253e70c1","totalCommits":11450,"tag":"production-v2","commitsSince":1},"build":{"time":1768398408499}}')}},e=>{var t=t=>e(e.s=t);e.O(0,[2748,5292,958,7836,1491,2353,7916,9280,9682,1637,6042,8105,4029,4141,919,430,7986,7204,7710,4838,1656,9590,7985,6398,5250,7821,9670,9048,2269,8321,4513,5750,3935,3181,6430,6456,370,9762,6359,5071,5831,3711,6730,7245,5830,3355,2334,876,3350,7356,840,5351,2045,438],()=>t(15384)),e.O()}]);